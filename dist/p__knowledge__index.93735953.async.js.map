{"version":3,"file":"p__knowledge__index.93735953.async.js","mappings":"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","sources":["webpack:///./src/components/operate-dropdown/index.less?c9d7","webpack:///./src/components/operate-dropdown/index.tsx","webpack:///./src/pages/knowledge/knowledge-card/index.less?a030","webpack:///./src/pages/knowledge/knowledge-card/index.tsx","webpack:///./src/pages/knowledge/knowledge-creating-modal/index.tsx","webpack:///./src/pages/knowledge/index.less?3ce9","webpack:///./src/pages/knowledge/index.tsx","webpack:///./src/pages/knowledge/hooks.ts","webpack:///./src/utils/date.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"delete\":\"delete___BGyWn\"};","import { useShowDeleteConfirm } from '@/hooks/common-hooks';\nimport { DeleteOutlined, MoreOutlined } from '@ant-design/icons';\nimport { Dropdown, MenuProps, Space } from 'antd';\nimport { useTranslation } from 'react-i18next';\n\nimport React, { useMemo } from 'react';\nimport styles from './index.less';\n\ninterface IProps {\n  deleteItem: () => Promise<any> | void;\n  iconFontSize?: number;\n  iconFontColor?: string;\n  items?: MenuProps['items'];\n  height?: number;\n  needsDeletionValidation?: boolean;\n}\n\nconst OperateDropdown = ({\n  deleteItem,\n  children,\n  iconFontSize = 30,\n  iconFontColor = 'gray',\n  items: otherItems = [],\n  height = 24,\n  needsDeletionValidation = true,\n}: React.PropsWithChildren<IProps>) => {\n  const { t } = useTranslation();\n  const showDeleteConfirm = useShowDeleteConfirm();\n\n  const handleDelete = () => {\n    if (needsDeletionValidation) {\n      showDeleteConfirm({ onOk: deleteItem });\n    } else {\n      deleteItem();\n    }\n  };\n\n  const handleDropdownMenuClick: MenuProps['onClick'] = ({ domEvent, key }) => {\n    domEvent.preventDefault();\n    domEvent.stopPropagation();\n    if (key === '1') {\n      handleDelete();\n    }\n  };\n\n  const items: MenuProps['items'] = useMemo(() => {\n    return [\n      {\n        key: '1',\n        label: (\n          <Space>\n            {t('common.delete')}\n            <DeleteOutlined />\n          </Space>\n        ),\n      },\n      ...otherItems,\n    ];\n  }, [t, otherItems]);\n\n  return (\n    <Dropdown\n      menu={{\n        items,\n        onClick: handleDropdownMenuClick,\n      }}\n    >\n      {children || (\n        <span className={styles.delete}>\n          <MoreOutlined\n            rotate={90}\n            style={{\n              fontSize: iconFontSize,\n              color: iconFontColor,\n              cursor: 'pointer',\n              height,\n            }}\n          />\n        </span>\n      )}\n    </Dropdown>\n  );\n};\n\nexport default OperateDropdown;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"container___eQyW8\",\"delete\":\"delete___IVvZv\",\"content\":\"content___BVb9e\",\"context\":\"context___rx_ll\",\"footerTop\":\"footerTop___zv8Sq\",\"titleWrapper\":\"titleWrapper___f7thW\",\"title\":\"title___rMM_S\",\"description\":\"description___G_6nv\",\"titledark\":\"titledark___JUbvS\",\"descriptiondark\":\"descriptiondark___AWThG\",\"card\":\"card___m1xzY\",\"bottom\":\"bottom___oTHOs\",\"bottomLeft\":\"bottomLeft___d92Vz\",\"leftIcon\":\"leftIcon___nOsbs\",\"rightText\":\"rightText___N4_qm\",\"hideRibbon\":\"hideRibbon___cUMiA\",\"ribbon\":\"ribbon___c4quV\"};","import { KnowledgeRouteKey } from '@/constants/knowledge';\nimport { IKnowledge } from '@/interfaces/database/knowledge';\nimport { formatDate } from '@/utils/date';\nimport {\n  CalendarOutlined,\n  FileTextOutlined,\n  UserOutlined,\n} from '@ant-design/icons';\nimport { Avatar, Badge, Card, Space } from 'antd';\nimport classNames from 'classnames';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigate } from 'umi';\n\nimport OperateDropdown from '@/components/operate-dropdown';\nimport { useTheme } from '@/components/theme-provider';\nimport { useDeleteKnowledge } from '@/hooks/knowledge-hooks';\nimport { useFetchUserInfo } from '@/hooks/user-setting-hooks';\nimport styles from './index.less';\n\ninterface IProps {\n  item: IKnowledge;\n}\n\nconst KnowledgeCard = ({ item }: IProps) => {\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n  const { data: userInfo } = useFetchUserInfo();\n  const { theme } = useTheme();\n  const { deleteKnowledge } = useDeleteKnowledge();\n\n  const removeKnowledge = async () => {\n    return deleteKnowledge(item.id);\n  };\n\n  const handleCardClick = () => {\n    navigate(`/knowledge/${KnowledgeRouteKey.Dataset}?id=${item.id}`, {\n      state: { from: 'list' },\n    });\n  };\n {/*<Badge.Ribbon\n      text={item?.nickname}\n      color={userInfo?.nickname === item?.nickname ? '#1677ff' : 'pink'}\n      className={classNames(styles.ribbon, {\n        [styles.hideRibbon]: item.permission !== 'team',\n      })}\n    ><Avatar size={34} icon={<UserOutlined />} src={item.avatar} /></Badge.Ribbon>*/}\n  return (\n   \n      <Card className={styles.card} onClick={handleCardClick}>\n        <div className={styles.container}>\n          <div className={styles.content}>\n          <div  />\n            <OperateDropdown deleteItem={removeKnowledge}></OperateDropdown>\n          </div>\n          <div className={styles.titleWrapper}>\n            <span\n              className={theme === 'dark' ? styles.titledark : styles.title}\n            >\n              {item.name}\n            </span>\n            {/*<p\n              className={\n                theme === 'dark' ? styles.descriptiondark : styles.description\n              }\n            >\n              {item.description}\n            </p>*/}\n          </div>\n          <div className={styles.footer}>\n            <div className={styles.footerTop}>\n              <div className={styles.bottomLeft}>\n                <FileTextOutlined className={styles.leftIcon} />\n                <span className={styles.rightText}>\n                  <Space>\n                    {item.doc_num}\n                    {t('knowledgeList.doc')}\n                  </Space>\n                </span>\n              </div>\n            </div>\n            <div className={styles.bottom}>\n              <div className={styles.bottomLeft}>\n                <CalendarOutlined className={styles.leftIcon} />\n                <span className={styles.rightText}>\n                  {formatDate(item.update_time)}\n                </span>\n              </div>\n              {/* <Avatar.Group size={25}>\n                <Avatar src=\"https://api.dicebear.com/7.x/miniavs/svg?seed=1\" />\n                <a href=\"https://ant.design\">\n                  <Avatar style={{ backgroundColor: '#f56a00' }}>K</Avatar>\n                </a>\n                <Tooltip title=\"Ant User\" placement=\"top\">\n                  <Avatar\n                    style={{ backgroundColor: '#87d068' }}\n                    icon={<UserOutlined />}\n                  />\n                </Tooltip>\n                <Avatar\n                  style={{ backgroundColor: '#1677ff' }}\n                  icon={<AntDesignOutlined />}\n                />\n              </Avatar.Group> */}\n            </div>\n          </div>\n        </div>\n      </Card>\n   \n  );\n};\n\nexport default KnowledgeCard;\n","import { IModalManagerChildrenProps } from '@/components/modal-manager';\nimport { Form, Input, Modal } from 'antd';\nimport { useTranslation } from 'react-i18next';\n\ntype FieldType = {\n  name?: string;\n};\n\ninterface IProps extends Omit<IModalManagerChildrenProps, 'showModal'> {\n  loading: boolean;\n  onOk: (name: string) => void;\n}\n\nconst KnowledgeCreatingModal = ({\n  visible,\n  hideModal,\n  loading,\n  onOk,\n}: IProps) => {\n  const [form] = Form.useForm();\n\n  const { t } = useTranslation('translation', { keyPrefix: 'knowledgeList' });\n\n  const handleOk = async () => {\n    const ret = await form.validateFields();\n\n    onOk(ret.name);\n  };\n\n  return (\n    <Modal\n      title={t('createKnowledgeBase')}\n      open={visible}\n      onOk={handleOk}\n      onCancel={hideModal}\n      okButtonProps={{ loading }}\n    >\n      <Form\n        name=\"Create\"\n        labelCol={{ span: 4 }}\n        wrapperCol={{ span: 20 }}\n        style={{ maxWidth: 600 }}\n        autoComplete=\"off\"\n        form={form}\n      >\n        <Form.Item<FieldType>\n          label={t('name')}\n          name=\"name\"\n          rules={[{ required: true, message: t('namePlaceholder') }]}\n        >\n          <Input placeholder={t('namePlaceholder')} />\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n};\n\nexport default KnowledgeCreatingModal;\n","// extracted by mini-css-extract-plugin\nexport default {\"knowledge\":\"knowledge___CaWP3\",\"topWrapper\":\"topWrapper___wSBFd\",\"title\":\"title___K81Cs\",\"description\":\"description___r7Ii4\",\"topButton\":\"topButton___AGnXw\",\"filterButton\":\"filterButton___asdet\",\"knowledgeCardContainer\":\"knowledgeCardContainer___ouwmb\",\"knowledgeEmpty\":\"knowledgeEmpty___YQOlB\"};","import { useInfiniteFetchKnowledgeList } from '@/hooks/knowledge-hooks';\nimport { useFetchUserInfo } from '@/hooks/user-setting-hooks';\nimport { PlusOutlined, SearchOutlined } from '@ant-design/icons';\nimport {\n  Button,\n  Divider,\n  Empty,\n  Flex,\n  Input,\n  Skeleton,\n  Space,\n  Spin,\n} from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { useSaveKnowledge } from './hooks';\nimport KnowledgeCard from './knowledge-card';\nimport KnowledgeCreatingModal from './knowledge-creating-modal';\n\nimport { useMemo } from 'react';\nimport styles from './index.less';\n\nconst KnowledgeList = () => {\n  const { data: userInfo } = useFetchUserInfo();\n  const { t } = useTranslation('translation', { keyPrefix: 'knowledgeList' });\n  const {\n    visible,\n    hideModal,\n    showModal,\n    onCreateOk,\n    loading: creatingLoading,\n  } = useSaveKnowledge();\n  const {\n    fetchNextPage,\n    data,\n    hasNextPage,\n    searchString,\n    handleInputChange,\n    loading,\n  } = useInfiniteFetchKnowledgeList();\n  const nextList = data?.pages?.flatMap((x) => x.kbs) ?? [];\n\n  const total = useMemo(() => {\n    return data?.pages.at(-1).total ?? 0;\n  }, [data?.pages]);\n\n  return (\n    <Flex className={styles.knowledge} vertical flex={1} id=\"scrollableDiv\">\n      <div className={styles.topWrapper}>\n      <div>\n          <span className={styles.title}>\n          </span>\n          <p className={styles.description}></p>\n        </div>\n\n       {/* <div>\n          <span className={styles.title}>\n            {t('welcome')}, {userInfo.nickname}\n          </span>\n          <p className={styles.description}>{t('description')}</p>\n        </div>*/}\n        <Space size={'large'}>\n          <Input\n            placeholder={t('searchKnowledgePlaceholder')}\n            value={searchString}\n            style={{ width: 220 }}\n            allowClear\n            onChange={handleInputChange}\n            prefix={<SearchOutlined />}\n          />\n\n          <Button\n            type=\"primary\"\n            icon={<PlusOutlined />}\n            onClick={showModal}\n            className={styles.topButton}\n          >\n            {t('createKnowledgeBase')}\n          </Button>\n        </Space>\n      </div>\n      <Spin spinning={loading}>\n        <InfiniteScroll\n          dataLength={nextList?.length ?? 0}\n          next={fetchNextPage}\n          hasMore={hasNextPage}\n          loader={<Skeleton avatar paragraph={{ rows: 1 }} active />}\n          endMessage={!!total && <Divider plain>{t('noMoreData')} </Divider>}\n          scrollableTarget=\"scrollableDiv\"\n        >\n          <Flex\n            gap={'large'}\n            wrap=\"wrap\"\n            className={styles.knowledgeCardContainer}\n          >\n            {nextList?.length > 0 ? (\n              nextList.map((item: any, index: number) => {\n                return (\n                  <KnowledgeCard\n                    item={item}\n                    key={`${item?.name}-${index}`}\n                  ></KnowledgeCard>\n                );\n              })\n            ) : (\n              <Empty className={styles.knowledgeEmpty}></Empty>\n            )}\n          </Flex>\n        </InfiniteScroll>\n      </Spin>\n      <KnowledgeCreatingModal\n        loading={creatingLoading}\n        visible={visible}\n        hideModal={hideModal}\n        onOk={onCreateOk}\n      ></KnowledgeCreatingModal>\n    </Flex>\n  );\n};\n\nexport default KnowledgeList;\n","import { KnowledgeRouteKey } from '@/constants/knowledge';\nimport { useSetModalState } from '@/hooks/common-hooks';\nimport { useCreateKnowledge } from '@/hooks/knowledge-hooks';\nimport { useCallback, useState } from 'react';\nimport { useNavigate } from 'umi';\n\nexport const useSearchKnowledge = () => {\n  const [searchString, setSearchString] = useState<string>('');\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setSearchString(e.target.value);\n  };\n  return {\n    searchString,\n    handleInputChange,\n  };\n};\n\nexport const useSaveKnowledge = () => {\n  const { visible: visible, hideModal, showModal } = useSetModalState();\n  const { loading, createKnowledge } = useCreateKnowledge();\n  const navigate = useNavigate();\n\n  const onCreateOk = useCallback(\n    async (name: string) => {\n      const ret = await createKnowledge({\n        name,\n      });\n\n      if (ret?.code === 0) {\n        hideModal();\n        navigate(\n          `/knowledge/${KnowledgeRouteKey.Configuration}?id=${ret.data.kb_id}`,\n        );\n      }\n    },\n    [createKnowledge, hideModal, navigate],\n  );\n\n  return {\n    loading,\n    onCreateOk,\n    visible,\n    hideModal,\n    showModal,\n  };\n};\n","import dayjs from 'dayjs';\n\nexport function formatDate(date: any) {\n  if (!date) {\n    return '';\n  }\n  return dayjs(date).format('DD/MM/YYYY HH:mm:ss');\n}\n\nexport function formatTime(date: any) {\n  if (!date) {\n    return '';\n  }\n  return dayjs(date).format('HH:mm:ss');\n}\n\nexport function today() {\n  return formatDate(dayjs());\n}\n\nexport function lastDay() {\n  return formatDate(dayjs().subtract(1, 'days'));\n}\n\nexport function lastWeek() {\n  return formatDate(dayjs().subtract(1, 'weeks'));\n}\n"],"names":["_ref","deleteItem","children","_ref$iconFontSize","iconFontSize","_ref$iconFontColor","iconFontColor","_ref$items","items","otherItems","_ref$height","height","_ref$needsDeletionVal","needsDeletionValidation","t","useTranslation","showDeleteConfirm","useShowDeleteConfirm","useMemo","key","label","_jsxs","Space","_jsx","DeleteOutlined","concat","_toConsumableArray","Dropdown","menu","onClick","_ref2","domEvent","preventDefault","stopPropagation","onOk","className","styles","MoreOutlined","rotate","style","fontSize","color","cursor","item","navigate","useNavigate","theme","useFetchUserInfo","data","useTheme","deleteKnowledge","useDeleteKnowledge","removeKnowledge","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","abrupt","id","stop","apply","arguments","Card","card","KnowledgeRouteKey","Dataset","state","from","container","content","OperateDropdown","titleWrapper","titledark","title","name","footer","footerTop","bottomLeft","FileTextOutlined","leftIcon","rightText","doc_num","bottom","CalendarOutlined","formatDate","update_time","visible","hideModal","loading","_Form$useForm","Form","useForm","form","_slicedToArray","keyPrefix","handleOk","ret","validateFields","sent","Modal","open","onCancel","okButtonProps","labelCol","span","wrapperCol","maxWidth","autoComplete","Item","rules","required","message","Input","placeholder","_data$pages$flatMap","_data$pages","_nextList$length","_useSaveKnowledge","_useSetModalState","useSetModalState","showModal","_useCreateKnowledge","useCreateKnowledge","createKnowledge","onCreateOk","useCallback","code","Configuration","kb_id","_x","useSaveKnowledge","creatingLoading","_useInfiniteFetchKnow","useInfiniteFetchKnowledgeList","fetchNextPage","hasNextPage","searchString","handleInputChange","nextList","pages","flatMap","x","kbs","total","_data$pages$at$total","at","Flex","vertical","flex","size","value","width","allowClear","onChange","prefix","SearchOutlined","Button","type","icon","PlusOutlined","Spin","spinning","InfiniteScroll","dataLength","length","hasMore","loader","Skeleton","avatar","paragraph","rows","active","endMessage","Divider","plain","scrollableTarget","gap","map","index","KnowledgeCard","Empty","KnowledgeCreatingModal","date","dayjs","format","formatTime"],"sourceRoot":""}