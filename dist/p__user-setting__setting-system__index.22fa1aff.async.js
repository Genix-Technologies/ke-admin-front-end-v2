"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4144],{52610:function(e,a,s){s.r(a),s.d(a,{default:function(){return ae}});var t=s(9783),n=s.n(t),r=s(46693),i=s(39259),l=s(22850),c=s(75081),o=s(86250),d=s(4393),u=s(40411),f=s(93967),x=s.n(f),m=s(45021),g=s.n(m),j=s(11700),p=s.n(j),h=s(62435),_=s(31098),b=s(96486),v="systemInfo___ufsjg",k="title___g9daS",w="text___dsVaC",y="badge___lUCbZ",N="error___DIP2V",Z="taskBar___cTWDX",D="taskBarTitle___iiila",S=s(97857),O=s.n(S),H=s(5574),B=s.n(H),C=s(13769),E=s.n(C),K=s(96074),T=s(29009),Y=s(61837),I=s(3023),M=s(14195),P=s(26050),A=s(33558),F=s(18242),V=s(13481),$=s(28382),q=s(27484),z=s.n(q),J=s(79123),L=(s(20034),s(86074)),R=["active","payload"],U=function(e){var a=e.active,s=e.payload,t=E()(e,R);if(a&&s&&s.length){var n=(0,b.get)(s,"0.payload",{});return(0,L.jsx)("div",{className:"custom-tooltip",children:(0,L.jsxs)("div",{className:"bg-slate-50 p-2 rounded-md border border-indigo-100",children:[(0,L.jsx)("div",{className:"font-semibold text-lg",children:(0,$.p6)(t.label)}),(0,L.jsx)(J.ZP,{src:n,displaySize:30,className:"w-full max-h-[300px] break-words overflow-auto"})]})})}return null},W=function(e){var a=e.data;return Object.entries(a).map((function(e){var a=B()(e,2),s=a[0],t=a[1].map((function(e){return O()(O()({},e),{},{now:z()(e.now).valueOf()})})),n=t[0],r=t[t.length-1],i=[null==n?void 0:n.now,null==r?void 0:r.now];return(0,L.jsxs)(o.Z,{className:Z,vertical:!0,children:[(0,L.jsxs)("div",{className:"flex gap-8",children:[(0,L.jsxs)("b",{className:D,children:["ID: ",s]}),(0,L.jsxs)("b",{className:D,children:["Lag: ",null==r?void 0:r.lag]}),(0,L.jsxs)("b",{className:D,children:["Pending: ",null==r?void 0:r.pending]})]}),(0,L.jsx)(T.h,{children:(0,L.jsxs)(Y.v,{data:t,children:[(0,L.jsx)(I.K,{dataKey:"now",type:"number",scale:"time",domain:i,tickFormatter:function(e){return(0,$.mr)(e)},allowDataOverflow:!0,angle:60,padding:{left:20,right:20},tickMargin:20}),(0,L.jsx)(M.q,{strokeDasharray:"3 3"}),(0,L.jsx)(P.u,{wrapperStyle:{pointerEvents:"auto"},content:(0,L.jsx)(U,{}),trigger:"click"}),(0,L.jsx)(A.D,{wrapperStyle:{bottom:-22}}),(0,L.jsx)(F.$,{dataKey:"done",fill:"#2fe235",activeBar:(0,L.jsx)(V.A,{fill:"pink",stroke:"blue"})}),(0,L.jsx)(F.$,{dataKey:"failed",fill:"#ef3b74",activeBar:(0,L.jsx)(V.A,{fill:"gold",stroke:"purple"})})]})}),(0,L.jsx)(K.Z,{})]},s)}))},X=l.Z.Text,G=function(e){return e.green="success",e.red="error",e.yellow="warning",e}(G||{}),Q={doc_engine:"Doc Engine",storage:"Object Storage",redis:"Redis",database:"Database",task_executor_heartbeats:"Task Executor"},ee={es:"es",doc_engine:"storage",redis:"redis",storage:"minio",database:"database"},ae=function(){var e=(0,i.Jf)(),a=e.systemStatus,s=e.fetchSystemStatus,t=e.loading;return(0,h.useEffect)((function(){s()}),[s]),(0,L.jsx)("section",{className:v,children:(0,L.jsx)(c.Z,{spinning:t,children:(0,L.jsx)(o.Z,{gap:16,vertical:!0,children:Object.keys(a).map((function(e){var s=a[e];return(0,L.jsx)(d.Z,{type:"inner",title:(0,L.jsxs)(o.Z,{align:"center",gap:10,children:["task_executor_heartbeats"===e?(0,L.jsx)("img",{src:"/ke_logo_new.png",alt:"",width:26}):(0,L.jsx)(r.Z,{name:ee[e],width:26}),(0,L.jsx)("span",{className:k,children:Q[e]}),(0,L.jsx)(u.Z,{className:y,status:G[s.status]})]}),children:"task_executor_heartbeats"===e?(0,b.isObject)(s)?(0,L.jsx)(W,{data:s}):(0,L.jsx)(X,{className:N,children:"string"==typeof s.error?s.error:""}):Object.keys(s).filter((function(e){return"status"!==e})).map((function(e){return(0,L.jsxs)(o.Z,{align:"center",gap:16,className:w,children:[(0,L.jsxs)("b",{children:[p()(g()(e)),":"]}),(0,L.jsxs)(X,{className:x()(n()({},N,"error"===e)),children:[(0,_.FH)(s[e]),"elapsed"===e&&" ms"]})]},e)}))},e)}))})})})}},28382:function(e,a,s){s.d(a,{mr:function(){return i},p6:function(){return r}});var t=s(27484),n=s.n(t);function r(e){return e?n()(e).format("DD/MM/YYYY HH:mm:ss"):""}function i(e){return e?n()(e).format("HH:mm:ss"):""}}}]);
//# sourceMappingURL=p__user-setting__setting-system__index.22fa1aff.async.js.map