(self.webpackChunk=self.webpackChunk||[]).push([[1505,8530],{44326:function(e,n,t){"use strict";t.d(n,{G:function(){return m},z:function(){return f}});var r=t(19632),a=t.n(r),o=t(5574),i=t.n(o),s=t(2938),c=t(39259),u=t(62435),l=new Map([[["pdf"],["naive","resume","manual","paper","book","laws","presentation","one","qa","knowledge_graph"]],[["doc","docx"],["naive","resume","book","laws","one","qa","manual","knowledge_graph"]],[["xlsx","xls"],["naive","qa","table","one","knowledge_graph"]],[["ppt","pptx"],["presentation"]],[["jpg","jpeg","png","gif","bmp","tif","tiff","webp","svg","ico"],["picture"]],[["txt"],["naive","resume","book","laws","one","qa","table","knowledge_graph"]],[["csv"],["naive","resume","book","laws","one","qa","table","knowledge_graph"]],[["md"],["naive","qa","knowledge_graph"]],[["json"],["naive","knowledge_graph"]],[["eml"],["email"]]]),d=function(e,n){return n.filter((function(n){return null==e?void 0:e.some((function(e){return e===n.value}))}))},m=function(e,n,t,r){var o=(0,u.useState)(""),m=i()(o,2),p=m[0],f=m[1],g=(0,c.XH)(),h=(0,s.sO)(r),v=(0,u.useMemo)((function(){var e=a()(l.keys()).find((function(e){return e.some((function(e){return e===t}))}));if(e){var n=l.get(e);return d(null!=n?n:[],g)}return d(["naive","resume","book","laws","one","qa","table"],g)}),[g,t]);(0,u.useEffect)((function(){f(n)}),[n,e]);return{parserList:v,handleChange:function(e){h(e),f(e)},selectedTag:p}},p=["qa","table","resume","knowledge_graph","tag"],f=function(){return(0,u.useCallback)((function(e){return p.every((function(n){return e!==n}))}),[])}},26572:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var r=t(19632),a=t.n(r),o=t(5574),i=t.n(o),s=t(24969),c=t(9361),u=t(66309),l=t(79531),d=t(52376),m=t(62435),p="tweenGroup___HgfIF",f="tag___EPGvm",g=t(86074),h=function(e){var n=e.value,t=void 0===n?[]:n,r=e.onChange,o=c.Z.useToken().token,h=(0,m.useState)(!1),v=i()(h,2),x=v[0],k=v[1],y=(0,m.useState)(""),_=i()(y,2),b=_[0],w=_[1],Z=(0,m.useRef)(null);(0,m.useEffect)((function(){var e;x&&(null===(e=Z.current)||void 0===e||e.focus())}),[x]);var j=function(){if(b&&t){var e=b.split(";").map((function(e){return e.trim()})).filter((function(e){return e&&!t.includes(e)}));null==r||r([].concat(a()(t),a()(e)))}k(!1),w("")},C=null==t?void 0:t.map((function(e){return(0,g.jsx)(u.Z,{className:f,closable:!0,onClose:function(n){var a,o;n.preventDefault(),a=e,o=null==t?void 0:t.filter((function(e){return e!==a})),null==r||r(null!=o?o:[])},children:e},e)})),T={background:o.colorBgContainer,borderStyle:"dashed"};return(0,g.jsxs)("div",{children:[Array.isArray(C)&&C.length>0&&(0,g.jsx)(d.Z,{className:p,enter:{scale:.8,opacity:0,type:"from",duration:100},onEnd:function(e){"appear"!==e.type&&"enter"!==e.type||(e.target.style="display: inline-block")},leave:{opacity:0,width:0,scale:0,duration:200},appear:!1,children:C}),x?(0,g.jsx)(l.Z,{ref:Z,type:"text",size:"small",value:b,onChange:function(e){w(e.target.value)},onBlur:j,onPressEnter:j}):(0,g.jsx)(u.Z,{onClick:function(){k(!0)},style:T,children:(0,g.jsx)(s.Z,{})})]})}},11218:function(e,n,t){"use strict";t.d(n,{Z:function(){return Z}});var r=t(15009),a=t.n(r),o=t(99289),i=t.n(o),s=t(5574),c=t.n(s),u=t(97857),l=t.n(u),d=t(19632),m=t.n(d),p=t(86968),f=t(64082),g=t(31365),h=t(85576),v=t(86250),x=t(92398),k=t(62435),y="uploader___ezBcw",_=t(86074),b=g.Z.Dragger,w=function(e){var n=e.directory,t=e.fileList,r=e.setFileList,a=(0,p.qM)("fileManager").t,o={multiple:!0,onRemove:function(e){var n=t.indexOf(e),a=t.slice();a.splice(n,1),r(a)},beforeUpload:function(e){return r((function(n){return[].concat(m()(n),[e])})),!1},directory:n,fileList:t};return(0,_.jsxs)(b,l()(l()({},o),{},{className:y,children:[(0,_.jsx)("p",{className:"ant-upload-drag-icon",children:(0,_.jsx)(f.Z,{})}),(0,_.jsx)("p",{className:"ant-upload-text",children:a("uploadTitle")}),(0,_.jsx)("p",{className:"ant-upload-hint",children:a("uploadDescription")}),!1]}))},Z=function(e){var n=e.visible,t=e.hideModal,r=e.loading,o=e.onOk,s=(0,p.qM)("fileManager").t,u=(0,k.useState)("local"),l=c()(u,2),d=l[0],f=(l[1],(0,k.useState)([])),g=c()(f,2),y=g[0],b=g[1],Z=(0,k.useState)([]),j=c()(Z,2),C=j[0],T=j[1],M=function(){var e=i()(a()().mark((function e(){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==o?void 0:o([].concat(m()(y),m()(C)));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=[{key:"1",label:s("file"),children:(0,_.jsx)(w,{directory:!1,fileList:y,setFileList:b})}];return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(h.Z,{title:s("uploadFile"),open:n,onOk:M,onCancel:t,confirmLoading:r,afterClose:function(){b([]),T([])},children:(0,_.jsx)(v.Z,{gap:"large",vertical:!0,children:"local"===d?(0,_.jsx)(x.Z,{defaultActiveKey:"1",items:P}):s("comingSoon",{keyPrefix:"common"})})})})}},1079:function(e,n,t){"use strict";t.d(n,{Cs:function(){return r},Pc:function(){return s},oQ:function(){return i},qH:function(){return o},vv:function(){return a}});var r=function(e){return e.Assistant="assistant",e.User="user",e}({}),a={temperatureEnabled:"temperature",topPEnabled:"top_p",presencePenaltyEnabled:"presence_penalty",frequencyPenaltyEnabled:"frequency_penalty",maxTokensEnabled:"max_tokens"},o=function(e){return e.Agent="agent",e.Chat="chat",e}({}),i=function(e){return e.DialogId="dialogId",e.ConversationId="conversationId",e.isNew="isNew",e}({}),s="empty"},40169:function(e,n,t){"use strict";t.d(n,{Kj:function(){return c},Wy:function(){return s},eV:function(){return o},nK:function(){return u},qg:function(){return i},qp:function(){return l},rU:function(){return d},ru:function(){return p}});var r=t(19632),a=t.n(r),o={aep:"aep.svg",ai:"ai.svg",avi:"avi.svg",css:"css.svg",csv:"csv.svg",dmg:"dmg.svg",doc:"doc.svg",docx:"docx.svg",eps:"eps.svg",exe:"exe.svg",fig:"fig.svg",gif:"gif.svg",html:"html.svg",indd:"indd.svg",java:"java.svg",jpeg:"jpeg.svg",jpg:"jpg.svg",js:"js.svg",json:"json.svg",mkv:"mkv.svg",mp3:"mp3.svg",mp4:"mp4.svg",mpeg:"mpeg.svg",pdf:"pdf.svg",png:"png.svg",ppt:"ppt.svg",pptx:"pptx.svg",psd:"psd.svg",rss:"rss.svg",sql:"sql.svg",svg:"svg.svg",tiff:"tiff.svg",txt:"txt.svg",wav:"wav.svg",webp:"webp.svg",xls:"xls.svg",xlsx:"xlsx.svg",xml:"xml.svg"},i=["English","Other_language"],s={English:"English",Other_language:"Lang 2"},c={English:"en",Chinese:"zh","Traditional Chinese":"zh-TRADITIONAL",Indonesia:"id",Spanish:"es",Vietnamese:"vi",Japanese:"ja","Portuguese BR":"pt-br"},u=function(e){return e.Bmp="image/bmp",e.Csv="text/csv",e.Odt="application/vnd.oasis.opendocument.text",e.Doc="application/msword",e.Docx="application/vnd.openxmlformats-officedocument.wordprocessingml.document",e.Gif="image/gif",e.Htm="text/htm",e.Html="text/html",e.Jpg="image/jpg",e.Jpeg="image/jpeg",e.Pdf="application/pdf",e.Png="image/png",e.Ppt="application/vnd.ms-powerpoint",e.Pptx="application/vnd.openxmlformats-officedocument.presentationml.presentation",e.Tiff="image/tiff",e.Txt="text/plain",e.Xls="application/vnd.ms-excel",e.Xlsx="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",e.Mp4="video/mp4",e.Json="application/json",e}({}),l="demo.ragflow.io",d=["jpg","jpeg","png","gif","bmp","tif","tiff","webp","ico"],m=["xlsx","xls","pdf","docx"].concat(d),p=a()(m)},96330:function(e,n,t){"use strict";t.d(n,{Rx:function(){return o},S8:function(){return c},Vr:function(){return u},cG:function(){return i},ld:function(){return l},n_:function(){return d},oQ:function(){return s}});var r=t(9783),a=t.n(r),o=function(e){return e.Dataset="dataset",e.Testing="testing",e.Configuration="configuration",e.KnowledgeGraph="knowledgeGraph",e}({}),i=function(e){return e.UNSTART="0",e.RUNNING="1",e.CANCEL="2",e.DONE="3",e.FAIL="4",e}({}),s=function(e){return e.Improvise="Improvise",e.Precise="Precise",e.Balance="Balance",e}({}),c=a()(a()(a()({},s.Improvise,{temperature:.9,top_p:.9,frequency_penalty:.2,presence_penalty:.4,max_tokens:512}),s.Precise,{temperature:.1,top_p:.3,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),s.Balance,{temperature:.5,top_p:.5,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),u=function(e){return e.Embedding="embedding",e.Chat="chat",e.Image2text="image2text",e.Speech2text="speech2text",e.Rerank="rerank",e.TTS="tts",e}({}),l=function(e){return e.DocumentId="doc_id",e.KnowledgeId="id",e}({}),d=function(e){return e.Virtual="virtual",e.Visual="visual",e}({})},86968:function(e,n,t){"use strict";t.d(n,{I3:function(){return g},pG:function(){return f},qM:function(){return h}});var r=t(15009),a=t.n(r),o=t(99289),i=t.n(o),s=t(5574),c=t.n(s),u=t(21640),l=t(3321),d=(t(18446),t(62435)),m=t(67421),p=t(86074),f=function(){var e=(0,d.useState)(!1),n=c()(e,2),t=n[0],r=n[1],a=(0,d.useCallback)((function(){r(!0)}),[]),o=(0,d.useCallback)((function(){r(!1)}),[]),i=(0,d.useCallback)((function(){r(!t)}),[t]);return{visible:t,showModal:a,hideModal:o,switchVisible:i}};var g=function(){var e=l.Z.useApp().modal,n=(0,m.$G)().t;return(0,d.useCallback)((function(t){var r=t.title,o=t.content,s=t.onOk,c=t.onCancel;return new Promise((function(t,l){e.confirm({title:null!=r?r:n("common.deleteModalTitle"),icon:(0,p.jsx)(u.Z,{}),content:o,okText:n("common.ok"),okType:"danger",cancelText:n("common.cancel"),onOk:function(){return i()(a()().mark((function e(){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==s?void 0:s();case 3:n=e.sent,t(n),console.info(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},onCancel:function(){null==c||c()}})}))}),[n,e])},h=function(e){return(0,m.$G)("translation",{keyPrefix:e})}},38392:function(e,n,t){"use strict";t.d(n,{DC:function(){return I},Ju:function(){return D},OR:function(){return F},T:function(){return P},X7:function(){return O},hl:function(){return M},uZ:function(){return L},ux:function(){return S}});var r=t(97857),a=t.n(r),o=t(19632),i=t.n(o),s=t(9783),c=t.n(s),u=t(5574),l=t.n(u),d=t(15009),m=t.n(d),p=t(99289),f=t.n(p),g=t(46693),h=t(96330),v=t(72668),x=t(31098),k=t(78551),y=t(30202),_=t(4527),b=t(86250),w=t(45360),Z=t(62435),j=t(67421),C=t(86074),T=function(e){var n,t=(0,k.a)({queryKey:["llmList"],initialData:{},queryFn:(n=f()(m()().mark((function n(){var t,r,a;return m()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.ZP.llm_list({model_type:e});case 2:return r=n.sent,a=r.data,n.abrupt("return",null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{});case 5:case"end":return n.stop()}}),n)}))),function(){return n.apply(this,arguments)})});return t.data},M=function(){var e=T(),n=function(n){return Object.entries(e).filter((function(e){var t=l()(e,2)[1];return!n||t.some((function(e){return e.model_type.includes(n)}))})).map((function(e){var t=l()(e,2);return{label:t[0],options:t[1].filter((function(e){return(!n||e.model_type.includes(n))&&e.available})).map((function(e){return{label:(0,C.jsxs)(b.Z,{align:"center",gap:6,children:[(0,C.jsx)(g.$,{name:(n=e.fid,t=e.llm_name,"FastEmbed"===n?null!==(r=t.split("/").at(0))&&void 0!==r?r:"":n),width:26,height:26,size:"small"}),(0,C.jsx)("span",{children:e.llm_name})]}),value:"".concat(e.llm_name,"@").concat(e.fid),disabled:!e.available};var n,t,r}))}})).filter((function(e){return e.options.length>0}))};return c()(c()(c()(c()(c()(c()({},h.Vr.Chat,n(h.Vr.Chat)),h.Vr.Embedding,n(h.Vr.Embedding)),h.Vr.Image2text,n(h.Vr.Image2text)),h.Vr.Speech2text,n(h.Vr.Speech2text)),h.Vr.Rerank,n(h.Vr.Rerank)),h.Vr.TTS,n(h.Vr.TTS))},P=function(e){var n=M();return e.reduce((function(e,t){return n[t].forEach((function(n){var t,r=e.find((function(e){return e.label===n.label}));r?(t=r.options).push.apply(t,i()(n.options)):e.push(n)})),e}),[])},I=function(){var e,n,t,r,o=(n=(0,k.a)({queryKey:["myLlmList"],initialData:{},gcTime:0,queryFn:(e=f()(m()().mark((function e(){var n,t,r;return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.ZP.my_llm();case 2:return t=e.sent,r=t.data,e.abrupt("return",null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{});case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}),{data:n.data,loading:n.isFetching}),i=o.data,s=o.loading,c=(r=(0,k.a)({queryKey:["factoryList"],initialData:[],gcTime:0,queryFn:(t=f()(m()().mark((function e(){var n,t,r;return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.ZP.factories_list();case 2:return t=e.sent,r=t.data,e.abrupt("return",null!==(n=null==r?void 0:r.data)&&void 0!==n?n:[]);case 5:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}),{data:r.data,loading:r.isFetching}),u=c.data,d=c.loading;return{myLlmList:(0,Z.useMemo)((function(){return Object.entries(i).map((function(e){var n,t,r=l()(e,2),o=r[0],i=r[1];return a()({name:o,logo:null!==(n=null===(t=u.find((function(e){return e.name===o})))||void 0===t?void 0:t.logo)&&void 0!==n?n:""},i)}))}),[i,u]),factoryList:(0,Z.useMemo)((function(){var e=u.filter((function(e){return Object.keys(i).every((function(n){return n!==e.name}))}));return(0,x.tJ)(e)}),[u,i]),loading:s||d}},S=function(){var e,n=(0,y.NL)(),t=(0,j.$G)().t,r=(0,_.D)({mutationKey:["saveApiKey"],mutationFn:(e=f()(m()().mark((function e(r){var a,o;return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.ZP.set_api_key(r);case 2:return a=e.sent,0===(o=a.data).code&&(w.ZP.success(t("message.modified")),n.invalidateQueries({queryKey:["myLlmList"]}),n.invalidateQueries({queryKey:["factoryList"]})),e.abrupt("return",o.code);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:r.data,loading:r.isPending,saveApiKey:r.mutateAsync}},F=function(){var e,n=(0,j.$G)().t,t=(0,_.D)({mutationKey:["saveTenantInfo"],mutationFn:(e=f()(m()().mark((function e(t){var r,a;return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.ZP.set_tenant_info(t);case 2:return r=e.sent,0===(a=r.data).code&&w.ZP.success(n("message.modified")),e.abrupt("return",a.code);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:t.data,loading:t.isPending,saveTenantInfo:t.mutateAsync}},L=function(){var e,n=(0,y.NL)(),t=(0,j.$G)().t,r=(0,_.D)({mutationKey:["addLlm"],mutationFn:(e=f()(m()().mark((function e(r){var a,o;return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.ZP.add_llm(r);case 2:return a=e.sent,0===(o=a.data).code&&(n.invalidateQueries({queryKey:["myLlmList"]}),n.invalidateQueries({queryKey:["factoryList"]}),w.ZP.success(t("message.modified"))),e.abrupt("return",o.code);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:r.data,loading:r.isPending,addLlm:r.mutateAsync}},D=function(){var e,n=(0,y.NL)(),t=(0,j.$G)().t,r=(0,_.D)({mutationKey:["deleteLlm"],mutationFn:(e=f()(m()().mark((function e(r){var a,o;return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.ZP.delete_llm(r);case 2:return a=e.sent,0===(o=a.data).code&&(n.invalidateQueries({queryKey:["myLlmList"]}),n.invalidateQueries({queryKey:["factoryList"]}),w.ZP.success(t("message.deleted"))),e.abrupt("return",o.code);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:r.data,loading:r.isPending,deleteLlm:r.mutateAsync}},O=function(){var e,n=(0,y.NL)(),t=(0,j.$G)().t,r=(0,_.D)({mutationKey:["deleteFactory"],mutationFn:(e=f()(m()().mark((function e(r){var a,o;return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.ZP.deleteFactory(r);case 2:return a=e.sent,0===(o=a.data).code&&(n.invalidateQueries({queryKey:["myLlmList"]}),n.invalidateQueries({queryKey:["factoryList"]}),w.ZP.success(t("message.deleted"))),e.abrupt("return",o.code);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:r.data,loading:r.isPending,deleteFactory:r.mutateAsync}}},2938:function(e,n,t){"use strict";t.d(n,{H0:function(){return q},IV:function(){return O},NT:function(){return N},Qe:function(){return F},UL:function(){return L},Y2:function(){return z},c5:function(){return E},cE:function(){return S},ox:function(){return K},sO:function(){return G},vv:function(){return R},vy:function(){return V},y7:function(){return A},ye:function(){return D}});var r=t(19632),a=t.n(r),o=t(97857),i=t.n(o),s=t(9783),c=t.n(s),u=t(15009),l=t.n(u),d=t(99289),m=t.n(d),p=t(5574),f=t.n(p),g=t(39918),h=t(1079),v=t(40169),x=t(60806),k=t(61921),y=t(71250),_=t(45360),b=t(87066),w=t(24809),Z=t(96486),j=t(62435),C=t(67421),T=t(57632),M=t(86968),P=t(96100),I=t(39259),S=function(){var e=(0,j.useState)({}),n=f()(e,2),t=n[0],r=n[1];return{currentRecord:t,setRecord:function(e){r(e)}}},F=function(){var e=(0,j.useState)(""),n=f()(e,2),t=n[0],r=n[1];return{handleInputChange:(0,j.useCallback)((function(e){var n=e.target.value;r(n)}),[]),searchString:t}},L=function(){var e=(0,C.$G)().i18n,n=(0,I.WH)().saveSetting;return function(t){e.changeLanguage(v.Kj[t]),n({language:t})}},D=function(){var e=(0,M.qM)("common").t,n=(0,P.fz)(),t=n.setPaginationParams,r=n.page,a=n.size,o=(0,j.useCallback)((function(e,n){t(e,n)}),[t]),i=(0,j.useCallback)((function(e){t(e.page,e.pageSize)}),[t]);return{pagination:(0,j.useMemo)((function(){return{showQuickJumper:!0,total:0,showSizeChanger:!0,current:r,pageSize:a,pageSizeOptions:[1,2,10,20,50,100],onChange:o,showTotal:function(n){return"".concat(e("total")," ").concat(n)}}}),[e,o,r,a]),setPagination:i}},O=function(){var e=(0,j.useState)({}),n=f()(e,2),t=n[0],r=n[1],a=(0,j.useCallback)(m()(l()().mark((function e(){var n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.Z.get("/conf.json");case 2:n=e.sent,r(n.data);case 4:case"end":return e.stop()}}),e)}))),[]);return(0,j.useEffect)((function(){a()}),[a]),t},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.Z.completeConversation,n=(0,j.useState)({}),t=f()(n,2),r=t[0],a=t[1],o=(0,j.useState)(!0),s=f()(o,2),u=s[0],d=s[1],p=(0,j.useRef)(),h=(0,j.useCallback)((function(){p.current&&clearTimeout(p.current),p.current=setTimeout((function(){a({}),clearTimeout(p.current)}),1e3)}),[]),v=(0,j.useCallback)(function(){var n=m()(l()().mark((function n(t,r){var o,s,u,m,p,f,v,x,y;return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,d(!1),n.next=4,fetch(e,{method:"POST",headers:c()(c()({},g._n,(0,k.c)()),"Content-Type","application/json"),body:JSON.stringify(t),signal:null==r?void 0:r.signal});case 4:s=n.sent,u=s.clone().json(),m=null==s||null===(o=s.body)||void 0===o?void 0:o.pipeThrough(new TextDecoderStream).pipeThrough(new w.m).getReader();case 7:return n.next=10,null==m?void 0:m.read();case 10:if(!(p=n.sent)){n.next=18;break}if(f=p.done,v=p.value,!f){n.next=17;break}return console.info("done"),h(),n.abrupt("break",20);case 17:try{x=JSON.parse((null==v?void 0:v.data)||""),"boolean"!=typeof(y=null==x?void 0:x.data)&&(console.info("data:",y),a(i()(i()({},y),{},{conversationId:null==t?void 0:t.conversation_id})))}catch(e){console.warn(e)}case 18:n.next=7;break;case 20:return console.info("done?"),d(!0),h(),n.next=25,u;case 25:return n.t0=n.sent,n.t1=s,n.abrupt("return",{data:n.t0,response:n.t1});case 30:n.prev=30,n.t2=n.catch(0),d(!0),h(),console.warn(n.t2);case 35:case"end":return n.stop()}}),n,null,[[0,30]])})));return function(e,t){return n.apply(this,arguments)}}(),[e,h]);return{send:v,answer:r,done:u,setDone:d,resetAnswer:h}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.Z.tts,n=(0,j.useCallback)(function(){var n=m()(l()().mark((function n(t){var r,a;return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e,{method:"POST",headers:c()(c()({},g._n,(0,k.c)()),"Content-Type","application/json"),body:JSON.stringify(t)});case 2:return r=n.sent,n.prev=3,n.next=6,r.clone().json();case 6:0!==(null==(a=n.sent)?void 0:a.code)&&_.ZP.error(null==a?void 0:a.message),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),console.warn("🚀 ~ error:",n.t0);case 13:return n.abrupt("return",r);case 14:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(e){return n.apply(this,arguments)}}(),[e]);return{read:n}},N=function(){var e=(0,j.useState)(""),n=f()(e,2),t=n[0],r=n[1];return{handleInputChange:function(e){var n=e.target.value.replaceAll("\\n","\n").replaceAll("\\t","\t");r(n)},value:t,setValue:r}},A=function(){var e=(0,j.useState)([]),n=f()(e,2),t=n[0],r=n[1],o=function(e){var n=(0,j.useRef)(null),t=(0,j.useCallback)((function(){var t;e&&(null===(t=n.current)||void 0===t||t.scrollIntoView({behavior:"instant"}))}),[e]);return(0,j.useEffect)((function(){t()}),[t]),n}(t),s=(0,j.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r((function(t){return[].concat(a()(t),[i()(i()({},e),{},{id:(0,y.Kj)(e)}),{role:h.Cs.Assistant,content:n,id:(0,y.Kj)(i()(i()({},e),{},{role:h.Cs.Assistant}))}])}))}),[]),c=(0,j.useCallback)((function(e){r((function(n){var t;return[].concat(a()(null!==(t=null==n?void 0:n.slice(0,-1))&&void 0!==t?t:[]),[i()({role:h.Cs.Assistant,content:e.answer,reference:e.reference,id:(0,y.Kj)({id:e.id,role:h.Cs.Assistant}),prompt:e.prompt,audio_binary:e.audio_binary},(0,Z.omit)(e,"reference"))])}))}),[]),u=(0,j.useCallback)((function(){r((function(e){var n;return null!==(n=null==e?void 0:e.slice(0,-2))&&void 0!==n?n:[]}))}),[]),l=(0,j.useCallback)((function(e){r((function(n){var t;return null!==(t=null==n?void 0:n.filter((function(n){return n.id!==e})))&&void 0!==t?t:[]}))}),[r]),d=(0,j.useCallback)((function(e){r((function(n){var t=n.findIndex((function(n){return n.id===e}));if(-1!==t){var r,o=null!==(r=n.slice(0,t+2))&&void 0!==r?r:[],s=o.at(-1);return o=s?[].concat(a()(o.slice(0,-1)),[i()(i()({},s),{},{content:"",reference:void 0,prompt:void 0})]):o}return n}))}),[r]);return{ref:o,derivedMessages:t,setDerivedMessages:r,addNewestQuestion:s,addNewestAnswer:c,removeLatestMessage:u,removeMessageById:l,removeMessagesAfterCurrentMessage:d}},R=function(e){var n=e.removeMessagesAfterCurrentMessage,t=e.sendMessage,r=e.messages,a=(0,j.useCallback)(function(){var e=m()(l()().mark((function e(a){var o,s;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.id&&(n(a.id),-1!==(o=r.findIndex((function(e){return e.id===a.id})))&&(s=r.slice(0,o)),t({message:i()(i()({},a),{},{id:(0,T.Z)()}),messages:s}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,t,r]);return{regenerateMessage:a}},V=function(e){var n=(0,j.useState)(""),t=f()(n,2),r=t[0],a=t[1],o=(0,j.useCallback)((function(e){return function(){a(e)}}),[]);return(0,j.useEffect)((function(){e&&a(e)}),[e]),{selectedId:r,handleItemClick:o}},K=function(){var e,n=(0,I.fS)(!0).data;return null!==(e=null==n?void 0:n.llm_id)&&void 0!==e?e:""},U={naive:128,knowledge_graph:8192},G=function(e){return(0,j.useCallback)((function(n){n in U&&e.setFieldValue(["parser_config","chunk_token_num"],U[n])}),[e])},z=function(e){var n=e.form,t=e.visible,r=(0,j.useRef)();(0,j.useEffect)((function(){r.current=t}),[t]);var a=r.current;(0,j.useEffect)((function(){!t&&a&&n.resetFields()}),[n,a,t])}},96100:function(e,n,t){"use strict";t.d(n,{HK:function(){return d},Uu:function(){return l},fz:function(){return g},nT:function(){return f},pE:function(){return m},wy:function(){return p}});var r=t(5574),a=t.n(r),o=t(96330),i=t(62435),s=t(24701),c=function(e){return e.Second="2",e.Third="3",e}({}),u=function(e){return(0,s.TH)().pathname.split("/")[e]||""},l=function(){return u(c.Second)},d=function(){return u(c.Third)},m=function(){var e=(0,s.lr)(),n=a()(e,1)[0];return{documentId:n.get(o.ld.DocumentId)||"",knowledgeId:n.get(o.ld.KnowledgeId)||""}},p=function(){var e=(0,s.s0)();return(0,i.useCallback)((function(n){e(n,{state:{from:n}})}),[e])},f=function(){var e=(0,s.s0)(),n=m().knowledgeId;return(0,i.useCallback)((function(){e("/knowledge/".concat(o.Rx.Dataset,"?id=").concat(n))}),[n,e])},g=function(){var e=(0,s.lr)(),n=a()(e,2),t=n[0],r=n[1],o=(0,i.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;t.set("page",e.toString()),n&&t.set("size",n.toString()),r(t)}),[r,t]);return{setPaginationParams:o,page:Number(t.get("page"))||1,size:Number(t.get("size"))||10}}},39259:function(e,n,t){"use strict";t.d(n,{CV:function(){return I},F1:function(){return j},Jf:function(){return w},PI:function(){return T},WH:function(){return _},XH:function(){return y},d1:function(){return S},ef:function(){return C},fS:function(){return k},hZ:function(){return M},jd:function(){return x},m_:function(){return P},nv:function(){return b},oH:function(){return F},v:function(){return Z}});var r=t(5574),a=t.n(r),o=t(15009),i=t.n(o),s=t(99289),c=t.n(s),u=t(40169),l=t(72668),d=t(78551),m=t(30202),p=t(4527),f=t(45360),g=t(96486),h=t(62435),v=t(67421),x=function(){var e,n=(0,v.$G)().i18n,t=(0,d.a)({queryKey:["userInfo"],initialData:{},gcTime:0,queryFn:(e=c()(i()().mark((function e(){var t,r,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.user_info();case 2:return r=e.sent,0===(a=r.data).code&&n.changeLanguage(u.Kj[a.data.language]),e.abrupt("return",null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{});case 6:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:t.data,loading:t.isFetching}},k=function(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,v.$G)(),r=(t.t,(0,d.a)({queryKey:["tenantInfo"],initialData:{},gcTime:0,queryFn:(e=c()(i()().mark((function e(){var t,r,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.get_tenant_info();case 2:if(t=e.sent,0!==(r=t.data).code){e.next=10;break}return a=r.data,n&&((0,g.isEmpty)(a.embd_id)||(0,g.isEmpty)(a.llm_id)),a.chat_id=a.llm_id,a.speech2text_id=a.asr_id,e.abrupt("return",a);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})),a=r.data,o=r.isFetching;return{data:a,loading:o}},y=function(){var e=k(!0).data;return(0,h.useMemo)((function(){var n,t;return(null!==(n=null==e||null===(t=e.parser_ids)||void 0===t?void 0:t.split(","))&&void 0!==n?n:[]).map((function(e){var n=e.split(":");return{value:n[0],label:n[1]}}))}),[e])},_=function(){var e,n=(0,m.NL)(),t=(0,v.$G)().t,r=(0,p.D)({mutationKey:["saveSetting"],mutationFn:(e=c()(i()().mark((function e(r){var a,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.setting(r);case 2:return a=e.sent,0===(o=a.data).code&&(f.ZP.success(t("message.modified")),n.invalidateQueries({queryKey:["userInfo"]})),e.abrupt("return",null==o?void 0:o.code);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:r.data,loading:r.isPending,saveSetting:r.mutateAsync}},b=function(){var e=(0,h.useState)(""),n=a()(e,2),t=n[0],r=n[1],o=(0,h.useState)(!1),s=a()(o,2),u=s[0],d=s[1];return{fetchSystemVersion:(0,h.useCallback)(c()(i()().mark((function e(){var n,t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,l.ZP.getSystemVersion();case 4:n=e.sent,0===(t=n.data).code&&(r(t.data),d(!1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),d(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[]),version:t,loading:u}},w=function(){var e=(0,h.useState)({}),n=a()(e,2),t=n[0],r=n[1],o=(0,h.useState)(!1),s=a()(o,2),u=s[0],d=s[1];return{systemStatus:t,fetchSystemStatus:(0,h.useCallback)(c()(i()().mark((function e(){var n,t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,l.ZP.getSystemStatus();case 3:n=e.sent,0===(t=n.data).code&&(r(t.data),d(!1));case 6:case"end":return e.stop()}}),e)}))),[]),loading:u}},Z=function(){var e,n=(0,p.D)({mutationKey:["fetchManualSystemTokenList"],mutationFn:(e=c()(i()().mark((function e(){var n,t,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.listToken();case 2:return t=e.sent,r=t.data,e.abrupt("return",null!==(n=null==r?void 0:r.data)&&void 0!==n?n:[]);case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:n.data,loading:n.isPending,fetchSystemTokenList:n.mutateAsync}},j=function(){var e,n=(0,d.a)({queryKey:["fetchSystemTokenList"],initialData:[],gcTime:0,queryFn:(e=c()(i()().mark((function e(){var n,t,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.listToken();case 2:return t=e.sent,r=t.data,e.abrupt("return",null!==(n=null==r?void 0:r.data)&&void 0!==n?n:[]);case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:n.data,loading:n.isFetching,refetch:n.refetch}},C=function(){var e,n=(0,m.NL)(),t=(0,v.$G)().t,r=(0,p.D)({mutationKey:["removeSystemToken"],mutationFn:(e=c()(i()().mark((function e(r){var a,o,s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.removeToken({},r);case 2:return o=e.sent,0===(s=o.data).code&&(f.ZP.success(t("message.deleted")),n.invalidateQueries({queryKey:["fetchSystemTokenList"]})),e.abrupt("return",null!==(a=null==s?void 0:s.data)&&void 0!==a?a:[]);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:r.data,loading:r.isPending,removeToken:r.mutateAsync}},T=function(){var e,n=(0,m.NL)(),t=(0,p.D)({mutationKey:["createSystemToken"],mutationFn:(e=c()(i()().mark((function e(t){var r,a,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.createToken(t);case 2:return a=e.sent,0===(o=a.data).code&&n.invalidateQueries({queryKey:["fetchSystemTokenList"]}),e.abrupt("return",null!==(r=null==o?void 0:o.data)&&void 0!==r?r:[]);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:t.data,loading:t.isPending,createToken:t.mutateAsync}},M=function(){var e,n=k().data.tenant_id,t=(0,d.a)({queryKey:["listTenantUser",n],initialData:[],gcTime:0,enabled:!!n,queryFn:(e=c()(i()().mark((function e(){var t,r,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.WX)(n);case 2:return r=e.sent,a=r.data,e.abrupt("return",null!==(t=null==a?void 0:a.data)&&void 0!==t?t:[]);case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:t.data,loading:t.isFetching,refetch:t.refetch}},P=function(){var e,n=k().data,t=(0,m.NL)(),r=(0,p.D)({mutationKey:["addTenantUser"],mutationFn:(e=c()(i()().mark((function e(r){var a,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.AH)(n.tenant_id,r);case 2:return a=e.sent,0===(o=a.data).code&&t.invalidateQueries({queryKey:["listTenantUser"]}),e.abrupt("return",null==o?void 0:o.code);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:r.data,loading:r.isPending,addTenantUser:r.mutateAsync}},I=function(){var e,n=k().data,t=(0,m.NL)(),r=(0,v.$G)().t,a=(0,p.D)({mutationKey:["deleteTenantUser"],mutationFn:(e=c()(i()().mark((function e(a){var o,s,c,u,d;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.userId,c=a.tenantId,e.next=3,(0,l.EE)({tenantId:null!=c?c:n.tenant_id,userId:s});case 3:return u=e.sent,0===(d=u.data).code&&(f.ZP.success(r("message.deleted")),t.invalidateQueries({queryKey:["listTenantUser"]}),t.invalidateQueries({queryKey:["listTenant"]})),e.abrupt("return",null!==(o=null==d?void 0:d.data)&&void 0!==o?o:[]);case 7:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:a.data,loading:a.isPending,deleteTenantUser:a.mutateAsync}},S=function(){var e,n=k().data.tenant_id,t=(0,d.a)({queryKey:["listTenant",n],initialData:[],gcTime:0,enabled:!!n,queryFn:(e=c()(i()().mark((function e(){var n,t,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.vh)();case 2:return t=e.sent,r=t.data,e.abrupt("return",null!==(n=null==r?void 0:r.data)&&void 0!==n?n:[]);case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:t.data,loading:t.isFetching,refetch:t.refetch}},F=function(){var e,n=(0,m.NL)(),t=(0,v.$G)().t,r=(0,p.D)({mutationKey:["agreeTenant"],mutationFn:(e=c()(i()().mark((function e(r){var a,o,s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.FG)(r);case 2:return o=e.sent,0===(s=o.data).code&&(f.ZP.success(t("message.operated")),n.invalidateQueries({queryKey:["listTenant"]})),e.abrupt("return",null!==(a=null==s?void 0:s.data)&&void 0!==a?a:[]);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:r.data,loading:r.isPending,agreeTenant:r.mutateAsync}}},40157:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Yn}});var r=t(97857),a=t.n(r),o=t(13769),i=t.n(o),s=t(15009),c=t.n(s),u=t(99289),l=t.n(u),d=t(5574),m=t.n(d),p=t(86968),f=t(99859),g=t(86250),h=t(71338),v=t(48928),x=t(86074),k=function(e){var n=e.initialValue,t=void 0===n?128:n,r=e.max,a=void 0===r?2048:r,o=(0,p.qM)("knowledgeConfiguration").t;return(0,x.jsx)(f.Z.Item,{label:o("chunkTokenNumber"),tooltip:o("chunkTokenNumberTip"),children:(0,x.jsxs)(g.Z,{gap:20,align:"center",children:[(0,x.jsx)(g.Z,{flex:1,children:(0,x.jsx)(f.Z.Item,{name:["parser_config","chunk_token_num"],noStyle:!0,initialValue:t,rules:[{required:!0,message:o("chunkTokenNumberMessage")}],children:(0,x.jsx)(h.Z,{max:a,style:{width:"100%"}})})}),(0,x.jsx)(f.Z.Item,{name:["parser_config","chunk_token_num"],noStyle:!0,rules:[{required:!0,message:o("chunkTokenNumberMessage")}],children:(0,x.jsx)(v.Z,{max:a,min:0})})]})})},y=t(25035),_=t(3089),b=t(24969),w=t(85576),Z=t(42075),j=t(34041),C=t(96074),T=t(83062),M=t(15867),P=t(57557),I=t.n(P),S=t(62435),F=t(44326),L=function(){var e=(0,p.qM)("knowledgeDetails").t;return(0,x.jsx)(f.Z.Item,{label:e("autoKeywords"),tooltip:e("autoKeywordsTip"),children:(0,x.jsxs)(g.Z,{gap:20,align:"center",children:[(0,x.jsx)(g.Z,{flex:1,children:(0,x.jsx)(f.Z.Item,{name:["parser_config","auto_keywords"],noStyle:!0,initialValue:0,children:(0,x.jsx)(h.Z,{max:30,style:{width:"100%"}})})}),(0,x.jsx)(f.Z.Item,{name:["parser_config","auto_keywords"],noStyle:!0,children:(0,x.jsx)(v.Z,{max:30,min:0})})]})})},D=function(){var e=(0,p.qM)("knowledgeDetails").t;return(0,x.jsx)(f.Z.Item,{label:e("autoQuestions"),tooltip:e("autoQuestionsTip"),children:(0,x.jsxs)(g.Z,{gap:20,align:"center",children:[(0,x.jsx)(g.Z,{flex:1,children:(0,x.jsx)(f.Z.Item,{name:["parser_config","auto_questions"],noStyle:!0,initialValue:0,children:(0,x.jsx)(h.Z,{max:10,style:{width:"100%"}})})}),(0,x.jsx)(f.Z.Item,{name:["parser_config","auto_questions"],noStyle:!0,children:(0,x.jsx)(v.Z,{max:10,min:0})})]})})},O=t(79531),q=t(67421),E=function(e){var n=e.value,t=e.onChange,r=e.maxLength,a=null==n?void 0:n.replaceAll("\n","\\n");return(0,x.jsx)(O.Z,{value:a,onChange:function(e){var n=e.target.value.replaceAll("\\n","\n");null==t||t(n)},maxLength:r})},N=function(){var e=(0,q.$G)().t;return(0,x.jsx)(f.Z.Item,{name:["parser_config","delimiter"],label:e("knowledgeDetails.delimiter"),initialValue:"\\n!?;。；！？",rules:[{required:!0}],tooltip:e("knowledgeDetails.delimiterTip"),children:(0,x.jsx)(E,{})})},A=t(26572),R=["organization","person","geo","event","category"],V=function(e){var n=e.field,t=void 0===n?["parser_config","entity_types"]:n,r=(0,p.qM)("knowledgeConfiguration").t;return(0,x.jsx)(f.Z.Item,{name:t,label:r("entityTypes"),rules:[{required:!0}],initialValue:R,children:(0,x.jsx)(A.Z,{})})},K=t(72269),U=function(){var e=(0,p.qM)("knowledgeDetails").t;return(0,x.jsx)(f.Z.Item,{name:["parser_config","html4excel"],label:e("html4excel"),initialValue:!1,valuePropName:"checked",tooltip:e("html4excelTip"),children:(0,x.jsx)(K.Z,{})})},G=t(19632),z=t.n(G),B=t(96330),H=t(38392),Q=function(){var e=(0,p.qM)("knowledgeDetails").t,n=(0,H.hl)(),t=(0,S.useMemo)((function(){var e=["DeepDOC","Plain Text"].map((function(e){return{label:e,value:e}}));return[].concat(z()(e),z()(n[B.Vr.Image2text]))}),[n]);return(0,x.jsx)(f.Z.Item,{name:["parser_config","layout_recognize"],label:e("layoutRecognize"),initialValue:"DeepDOC",tooltip:e("layoutRecognizeTip"),children:(0,x.jsx)(j.Z,{options:t})})},$=t(83608),W=t.n($),J=["table","resume","one","picture","knowledge_graph","qa","tag"],X=function(e){return!J.includes(e)},Y=function(){var e=f.Z.useFormInstance(),n=(0,p.qM)("knowledgeConfiguration").t,t=function(){e.setFieldValue(["parser_config","raptor","random_seed"],W()(1e4))};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(C.Z,{}),(0,x.jsx)(f.Z.Item,{name:["parser_config","raptor","use_raptor"],label:n("useRaptor"),initialValue:!1,valuePropName:"checked",tooltip:n("useRaptorTip"),children:(0,x.jsx)(K.Z,{})}),(0,x.jsx)(f.Z.Item,{shouldUpdate:function(e,n){return e.parser_config.raptor.use_raptor!==n.parser_config.raptor.use_raptor},children:function(e){return(0,e.getFieldValue)(["parser_config","raptor","use_raptor"])&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(f.Z.Item,{name:["parser_config","raptor","prompt"],label:n("prompt"),initialValue:n("promptText"),tooltip:n("promptTip"),rules:[{required:!0,message:n("promptMessage")}],children:(0,x.jsx)(O.Z.TextArea,{rows:8})}),(0,x.jsx)(f.Z.Item,{label:n("maxToken"),tooltip:n("maxTokenTip"),children:(0,x.jsxs)(g.Z,{gap:20,align:"center",children:[(0,x.jsx)(g.Z,{flex:1,children:(0,x.jsx)(f.Z.Item,{name:["parser_config","raptor","max_token"],noStyle:!0,initialValue:256,rules:[{required:!0,message:n("maxTokenMessage")}],children:(0,x.jsx)(h.Z,{max:2048,style:{width:"100%"}})})}),(0,x.jsx)(f.Z.Item,{name:["parser_config","raptor","max_token"],noStyle:!0,rules:[{required:!0,message:n("maxTokenMessage")}],children:(0,x.jsx)(v.Z,{max:2048,min:0})})]})}),(0,x.jsx)(f.Z.Item,{label:n("threshold"),tooltip:n("thresholdTip"),children:(0,x.jsxs)(g.Z,{gap:20,align:"center",children:[(0,x.jsx)(g.Z,{flex:1,children:(0,x.jsx)(f.Z.Item,{name:["parser_config","raptor","threshold"],noStyle:!0,initialValue:.1,rules:[{required:!0,message:n("thresholdMessage")}],children:(0,x.jsx)(h.Z,{min:0,max:1,style:{width:"100%"},step:.01})})}),(0,x.jsx)(f.Z.Item,{name:["parser_config","raptor","threshold"],noStyle:!0,rules:[{required:!0,message:n("thresholdMessage")}],children:(0,x.jsx)(v.Z,{max:1,min:0,step:.01})})]})}),(0,x.jsx)(f.Z.Item,{label:n("maxCluster"),tooltip:n("maxClusterTip"),children:(0,x.jsxs)(g.Z,{gap:20,align:"center",children:[(0,x.jsx)(g.Z,{flex:1,children:(0,x.jsx)(f.Z.Item,{name:["parser_config","raptor","max_cluster"],noStyle:!0,initialValue:64,rules:[{required:!0,message:n("maxClusterMessage")}],children:(0,x.jsx)(h.Z,{min:1,max:1024,style:{width:"100%"}})})}),(0,x.jsx)(f.Z.Item,{name:["parser_config","raptor","max_cluster"],noStyle:!0,rules:[{required:!0,message:n("maxClusterMessage")}],children:(0,x.jsx)(v.Z,{max:1024,min:1})})]})}),(0,x.jsx)(f.Z.Item,{label:n("randomSeed"),children:(0,x.jsxs)(g.Z,{gap:20,align:"center",children:[(0,x.jsx)(g.Z,{flex:1,children:(0,x.jsx)(f.Z.Item,{name:["parser_config","raptor","random_seed"],noStyle:!0,initialValue:0,rules:[{required:!0,message:n("randomSeedMessage")}],children:(0,x.jsx)(v.Z,{style:{width:"100%"}})})}),(0,x.jsx)(f.Z.Item,{noStyle:!0,children:(0,x.jsx)(M.ZP,{type:"primary",onClick:t,children:(0,x.jsx)(b.Z,{})})})]})})]})}})]})},ee=t(96486),ne=["table","resume","picture","knowledge_graph","qa","tag"],te=function(e){return!ne.includes(e)},re=function(){var e=(0,p.qM)("knowledgeConfiguration").t,n=(0,S.useMemo)((function(){return["light","general"].map((function(e){return{value:e,label:(0,ee.upperFirst)(e)}}))}),[]),t=(0,S.useCallback)((function(n){return{title:"string"==typeof n?e(n):n,overlayInnerStyle:{width:"50vw"}}}),[e]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(C.Z,{}),(0,x.jsx)(f.Z.Item,{name:["parser_config","graphrag","use_graphrag"],label:e("useGraphRag"),initialValue:!1,valuePropName:"checked",tooltip:t("useGraphRagTip"),children:(0,x.jsx)(K.Z,{})}),(0,x.jsx)(f.Z.Item,{shouldUpdate:function(e,n){return e.parser_config.graphrag.use_graphrag!==n.parser_config.graphrag.use_graphrag},children:function(r){return(0,r.getFieldValue)(["parser_config","graphrag","use_graphrag"])&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(V,{field:["parser_config","graphrag","entity_types"]}),(0,x.jsx)(f.Z.Item,{name:["parser_config","graphrag","method"],label:e("graphRagMethod"),tooltip:t((0,x.jsx)("div",{dangerouslySetInnerHTML:{__html:e("graphRagMethodTip")}})),initialValue:"light",children:(0,x.jsx)(j.Z,{options:n})}),(0,x.jsx)(f.Z.Item,{name:["parser_config","graphrag","resolution"],label:e("resolution"),tooltip:t("resolutionTip"),children:(0,x.jsx)(K.Z,{})}),(0,x.jsx)(f.Z.Item,{name:["parser_config","graphrag","community"],label:e("community"),tooltip:t("communityTip"),children:(0,x.jsx)(K.Z,{})})]})}})]})},ae="pageInputNumber___qm78X",oe="questionIcon___d34w8",ie="chunkMethod___tcugG",se=["key","name"],ce=["qa","table","picture","resume","one","knowledge_graph"],ue=function(e){var n=e.documentId,t=e.parserId,r=e.onOk,o=e.hideModal,s=e.visible,u=e.documentExtension,d=e.parserConfig,g=e.loading,h=f.Z.useForm(),P=m()(h,1)[0],O=(0,F.G)(n,t,u,P),q=O.parserList,E=O.handleChange,A=O.selectedTag,R=(0,p.qM)("knowledgeDetails").t,K=function(){var e=l()(c()().mark((function e(){var n,t,o,i;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.validateFields();case 2:o=e.sent,i=a()(a()({},o.parser_config),{},{pages:null!==(n=null===(t=o.pages)||void 0===t?void 0:t.map((function(e){return[e.from,e.to]})))&&void 0!==n?n:[]}),r(A,i);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G="pdf"===u,z=(0,S.useMemo)((function(){return G&&ce.every((function(e){return e!==A}))}),[A,G]),B=(0,S.useMemo)((function(){return G&&ce.filter((function(e){return"one"!==e})).every((function(e){return e!==A}))}),[A,G]),H="naive"===A||"knowledge_graph"===A,$=[z,B,H].every((function(e){return!1===e})),W="knowledge_graph"===A,J="naive"===A&&"xlsx"===u,ee=(0,F.z)();return(0,S.useEffect)((function(){if(s){var e,n,t=null!==(e=null==d||null===(n=d.pages)||void 0===n?void 0:n.map((function(e){return{from:e[0],to:e[1]}})))&&void 0!==e?e:[];P.setFieldsValue({pages:t.length>0?t:[{from:1,to:1024}],parser_config:I()(d,"pages")})}}),[P,d,s]),(0,x.jsxs)(w.Z,{title:R("chunkMethod"),open:s,onOk:K,onCancel:o,afterClose:function(){P.resetFields()},confirmLoading:g,width:700,children:[(0,x.jsx)(Z.Z,{size:[0,8],wrap:!0,children:(0,x.jsx)(f.Z.Item,{label:R("chunkMethod"),className:ie,children:(0,x.jsx)(j.Z,{style:{width:160},onChange:E,value:A,options:q})})}),$||(0,x.jsx)(C.Z,{}),(0,x.jsxs)(f.Z,{name:"dynamic_form_nest_item",autoComplete:"off",form:P,children:[z&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(Z.Z,{children:[(0,x.jsxs)("p",{children:[R("pageRanges"),":"]}),(0,x.jsx)(T.Z,{title:R("pageRangesTip"),children:(0,x.jsx)(y.Z,{className:oe})})]}),(0,x.jsx)(f.Z.List,{name:"pages",children:function(e,n){var t=n.add,r=n.remove;return(0,x.jsxs)(x.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name,o=i()(e,se);return(0,x.jsxs)(Z.Z,{style:{display:"flex"},align:"baseline",children:[(0,x.jsx)(f.Z.Item,a()(a()({},o),{},{name:[t,"from"],dependencies:t>0?[t-1,"to"]:[],rules:[{required:!0,message:R("fromMessage")},function(e){var n=e.getFieldValue;return{validator:function(e,r){return 0===t||!r||n(["pages",t-1,"to"])<r?Promise.resolve():Promise.reject(new Error(R("greaterThanPrevious")))}}}],children:(0,x.jsx)(v.Z,{placeholder:R("fromPlaceholder"),min:0,precision:0,className:ae})})),(0,x.jsx)(f.Z.Item,a()(a()({},o),{},{name:[t,"to"],dependencies:[t,"from"],rules:[{required:!0,message:R("toMessage")},function(e){var n=e.getFieldValue;return{validator:function(e,r){return!r||n(["pages",t,"from"])<r?Promise.resolve():Promise.reject(new Error(R("greaterThan")))}}}],children:(0,x.jsx)(v.Z,{placeholder:R("toPlaceholder"),min:0,precision:0,className:ae})})),t>0&&(0,x.jsx)(_.Z,{onClick:function(){return r(t)}})]},n)})),(0,x.jsx)(f.Z.Item,{children:(0,x.jsx)(M.ZP,{type:"dashed",onClick:function(){return t()},block:!0,icon:(0,x.jsx)(b.Z,{}),children:R("addPage")})})]})}})]}),B&&(0,x.jsx)(Q,{}),z&&(0,x.jsx)(f.Z.Item,{noStyle:!0,dependencies:[["parser_config","layout_recognize"]],children:function(e){return(0,e.getFieldValue)(["parser_config","layout_recognize"])&&(0,x.jsx)(f.Z.Item,{name:["parser_config","task_page_size"],label:R("taskPageSize"),tooltip:R("taskPageSizeTip"),initialValue:12,rules:[{required:!0,message:R("taskPageSizeMessage")}],children:(0,x.jsx)(v.Z,{min:1,max:128})})}}),H&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(k,{max:"knowledge_graph"===A?16384:2048}),(0,x.jsx)(N,{})]}),ee(A)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(L,{}),(0,x.jsx)(D,{})]}),J&&(0,x.jsx)(U,{}),X(A)&&(0,x.jsx)(Y,{}),te(A)&&(0,x.jsx)(re,{}),W&&(0,x.jsx)(V,{})]})]})},le=t(46693),de=t(93352),me=t(2938),pe=t(39259),fe=t(5089),ge=t(22850),he=t(43106),ve=function(e){var n=e.visible,t=e.hideModal,r=e.onOk,a=f.Z.useForm(),o=m()(a,1)[0],i=function(){var e=l()(c()().mark((function e(){var n;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validateFields();case 2:n=e.sent,r(n.name);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.jsx)(w.Z,{title:"File Name",open:n,onOk:i,onCancel:t,children:(0,x.jsx)(f.Z,{form:o,name:"validateOnly",labelCol:{span:4},wrapperCol:{span:20},style:{maxWidth:600},autoComplete:"off",children:(0,x.jsx)(f.Z.Item,{label:"File Name",name:"name",rules:[{required:!0,message:"Please input name!"}],children:(0,x.jsx)(O.Z,{})})})})},xe=Object.defineProperty,ke=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable,be=(e,n,t)=>n in e?xe(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const we=e=>S.createElement("svg",((e,n)=>{for(var t in n||(n={}))ye.call(n,t)&&be(e,t,n[t]);if(ke)for(var t of ke(n))_e.call(n,t)&&be(e,t,n[t]);return e})({width:22,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),S.createElement("path",{d:"M.5 11C.5 5.201 5.201.5 11 .5S21.5 5.201 21.5 11 16.799 21.5 11 21.5.5 16.799.5 11Z",fill:"#FEF3F2"}),S.createElement("path",{d:"M.5 11C.5 5.201 5.201.5 11 .5S21.5 5.201 21.5 11 16.799 21.5 11 21.5.5 16.799.5 11Z",stroke:"#FECDCA"}),S.createElement("path",{d:"m14 8-6 6m0-6 6 6",stroke:"#F04438",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}));var Ze=Object.defineProperty,je=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,Me=(e,n,t)=>n in e?Ze(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const Pe=e=>S.createElement("svg",((e,n)=>{for(var t in n||(n={}))Ce.call(n,t)&&Me(e,t,n[t]);if(je)for(var t of je(n))Te.call(n,t)&&Me(e,t,n[t]);return e})({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),S.createElement("path",{d:"M13.333 5v-.667c0-.933 0-1.4-.181-1.756a1.667 1.667 0 0 0-.729-.729c-.356-.181-.823-.181-1.756-.181H9.333c-.933 0-1.4 0-1.756.181-.314.16-.569.415-.729.729-.181.356-.181.823-.181 1.756V5m1.666 4.583v4.167m3.334-4.167v4.167M2.5 5h15m-1.667 0v9.333c0 1.4 0 2.1-.272 2.635a2.5 2.5 0 0 1-1.093 1.093c-.534.272-1.235.272-2.635.272H8.167c-1.4 0-2.1 0-2.635-.272a2.5 2.5 0 0 1-1.093-1.093c-.272-.534-.272-1.235-.272-2.635V5",stroke:"#667085",strokeWidth:1.667,strokeLinecap:"round",strokeLinejoin:"round"}));var Ie=Object.defineProperty,Se=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,De=(e,n,t)=>n in e?Ie(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const Oe=e=>S.createElement("svg",((e,n)=>{for(var t in n||(n={}))Fe.call(n,t)&&De(e,t,n[t]);if(Se)for(var t of Se(n))Le.call(n,t)&&De(e,t,n[t]);return e})({className:"disable_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:22,height:22},e),S.createElement("path",{d:"M222.635 272.299A382.4 382.4 0 0 0 138.667 512c0 212.117 171.904 384 384 384 90.666 0 174.016-31.424 239.701-83.968L222.635 272.299zm60.33-60.331L822.7 751.701A382.4 382.4 0 0 0 906.667 512c0-212.117-171.904-384-384-384-90.667 0-174.016 31.424-239.702 83.968zM53.333 512c0-259.221 210.091-469.333 469.334-469.333C781.888 42.667 992 252.757 992 512c0 259.221-210.09 469.333-469.333 469.333-259.222 0-469.334-210.09-469.334-469.333z",fill:"#F04438"}));var qe=Object.defineProperty,Ee=Object.getOwnPropertySymbols,Ne=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,Re=(e,n,t)=>n in e?qe(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const Ve=e=>S.createElement("svg",((e,n)=>{for(var t in n||(n={}))Ne.call(n,t)&&Re(e,t,n[t]);if(Ee)for(var t of Ee(n))Ae.call(n,t)&&Re(e,t,n[t]);return e})({className:"enable_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:22,height:22},e),S.createElement("path",{d:"M512 0a512 512 0 1 0 0 1024A512 512 0 0 0 512 0zm0 990.2a438.2 438.2 0 1 1 0-956.4 438.2 438.2 0 0 1 0 956.4z",fill:"#abefc6"}),S.createElement("path",{d:"M448.1 584.3 322.4 458.6l-78.9 78.9L449.1 743h.1l.5.5 325.9-325.9-80.4-80.4z",fill:"#17b26a"}));var Ke=Object.defineProperty,Ue=Object.getOwnPropertySymbols,Ge=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,Be=(e,n,t)=>n in e?Ke(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const He=e=>S.createElement("svg",((e,n)=>{for(var t in n||(n={}))Ge.call(n,t)&&Be(e,t,n[t]);if(Ue)for(var t of Ue(n))ze.call(n,t)&&Be(e,t,n[t]);return e})({width:22,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),S.createElement("path",{d:"M11 21.5C5.201 21.5.5 16.799.5 11S5.201.5 11 .5 21.5 5.201 21.5 11 16.799 21.5 11 21.5Z",fill:"#ECFDF3"}),S.createElement("path",{d:"M11 21.5C5.201 21.5.5 16.799.5 11S5.201.5 11 .5 21.5 5.201 21.5 11 16.799 21.5 11 21.5Z",stroke:"#ABEFC6"}),S.createElement("path",{d:"M7.5 7.495c0-.486 0-.729.101-.862a.5.5 0 0 1 .37-.198c.167-.01.369.125.773.394l5.258 3.505c.333.223.5.334.558.475a.5.5 0 0 1 0 .383c-.058.14-.225.251-.559.474L8.745 15.17c-.404.27-.606.404-.774.394a.5.5 0 0 1-.369-.198c-.101-.133-.101-.376-.101-.862v-7.01Z",stroke:"#17B26A",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}));var Qe=t(15360),$e=t(26911),We=t(80882),Je=t(68795),Xe=t(85418),Ye="datasetWrapper___q27L3",en="filter___ETTRo",nn="deleteIconWrapper___DKg5C",tn="img___JlbZB",rn="column___fvjI4",an="toChunks___LX_Ow",on="nameText___Fvf8C",sn=function(e){var n=e.searchString,t=e.selectedRowKeys,r=e.showCreateModal,a=e.showDocumentUploadModal,o=e.handleInputChange,i=(0,p.qM)("knowledgeDetails").t,s=(0,de.an)().removeDocument,c=(0,p.I3)(),u=(0,de.QG)().runDocumentByIds,l=(0,de.jz)().setDocumentStatus,d=(0,S.useMemo)((function(){return[{key:"1",onClick:a,label:(0,x.jsx)("div",{children:(0,x.jsx)(M.ZP,{type:"link",children:(0,x.jsxs)(Z.Z,{children:[(0,x.jsx)(Qe.Z,{}),i("localFiles")]})})})},{type:"divider"},{key:"3",onClick:r,label:(0,x.jsx)("div",{children:(0,x.jsxs)(M.ZP,{type:"link",children:[(0,x.jsx)($e.Z,{}),i("emptyFiles")]})})}]}),[a,r,i]),m=(0,S.useCallback)((function(){c({onOk:function(){s(t)}})}),[s,c,t]),f=(0,S.useCallback)((function(e){u({documentIds:t,run:e})}),[u,t]),h=(0,S.useCallback)((function(){f(1)}),[f]),v=(0,S.useCallback)((function(){f(2)}),[f]),k=(0,S.useCallback)((function(e){t.forEach((function(n){l({status:e,documentId:n})}))}),[t,l]),y=(0,S.useCallback)((function(){k(!0)}),[k]),_=(0,S.useCallback)((function(){k(!1)}),[k]),w=0===t.length,j=(0,S.useMemo)((function(){return[{key:"0",onClick:y,label:(0,x.jsxs)(g.Z,{gap:10,children:[(0,x.jsx)(Ve,{}),(0,x.jsx)("b",{children:i("enabled")})]})},{key:"1",onClick:_,label:(0,x.jsxs)(g.Z,{gap:10,children:[(0,x.jsx)(Oe,{}),(0,x.jsx)("b",{children:i("disabled")})]})},{type:"divider"},{key:"2",onClick:h,label:(0,x.jsxs)(g.Z,{gap:10,children:[(0,x.jsx)(He,{}),(0,x.jsx)("b",{children:i("run")})]})},{key:"3",onClick:v,label:(0,x.jsxs)(g.Z,{gap:10,children:[(0,x.jsx)(we,{}),(0,x.jsx)("b",{children:i("cancel")})]})},{type:"divider"},{key:"4",onClick:m,label:(0,x.jsxs)(g.Z,{gap:10,children:[(0,x.jsx)("span",{className:nn,children:(0,x.jsx)(Pe,{width:18})}),(0,x.jsx)("b",{children:i("delete",{keyPrefix:"common"})})]})}]}),[m,h,v,i,_,y]);return(0,x.jsxs)("div",{className:en,children:[(0,x.jsx)(Xe.Z,{menu:{items:j},placement:"bottom",arrow:!1,disabled:w,children:(0,x.jsx)(M.ZP,{children:(0,x.jsxs)(Z.Z,{children:[(0,x.jsxs)("b",{children:[" ",i("bulk")]}),(0,x.jsx)(We.Z,{})]})})}),(0,x.jsxs)(Z.Z,{children:[(0,x.jsx)(O.Z,{placeholder:i("searchFiles"),value:n,style:{width:220},allowClear:!0,onChange:o,prefix:(0,x.jsx)(Je.Z,{})}),(0,x.jsx)(Xe.Z,{menu:{items:d},trigger:["click"],children:(0,x.jsx)(M.ZP,{type:"primary",icon:(0,x.jsx)(b.Z,{}),children:i("addFile")})})]})]})},cn=t(96100),un=t(24701),ln=t(9783),dn=t.n(ln),mn=dn()(dn()(dn()(dn()(dn()({},B.cG.UNSTART,{label:"UNSTART",color:"cyan"}),B.cG.RUNNING,{label:"Parsing",color:"blue"}),B.cG.CANCEL,{label:"CANCEL",color:"orange"}),B.cG.DONE,{label:"SUCCESS",color:"geekblue"}),B.cG.FAIL,{label:"FAIL",color:"red"}),pn=t(51331),fn=t(2830),gn=t(86548),hn=t(48689),vn=t(23430),xn=function(e){return e===B.cG.RUNNING},kn="iconButton___btHnB",yn=function(e){var n=e.record,t=e.setCurrentRecord,r=e.showRenameModal,a=e.showChangeParserModal,o=e.showSetMetaModal,i=n.id,s=xn(n.run),c=(0,p.qM)("knowledgeDetails").t,u=(0,de.an)().removeDocument,l=(0,p.I3)(),d=n.type===B.n_.Virtual,m=(0,S.useCallback)((function(){t(n)}),[n,t]),f=(0,S.useCallback)((function(){m(),o()}),[m,o]),g=[{key:"1",label:(0,x.jsx)("div",{className:"flex flex-col",children:(0,x.jsx)(M.ZP,{type:"link",onClick:function(){m(),a()},children:c("chunkMethod")})})},{type:"divider"},{key:"2",label:(0,x.jsx)("div",{className:"flex flex-col",children:(0,x.jsx)(M.ZP,{type:"link",onClick:f,children:c("setMetaData")})})}];return(0,x.jsxs)(Z.Z,{size:0,children:[d||(0,x.jsx)(Xe.Z,{menu:{items:g},trigger:["click"],disabled:s||"tag"===n.parser_id,children:(0,x.jsx)(M.ZP,{type:"text",className:kn,children:(0,x.jsx)(fn.Z,{size:20})})}),(0,x.jsx)(T.Z,{title:c("rename",{keyPrefix:"common"}),children:(0,x.jsx)(M.ZP,{type:"text",disabled:s,onClick:function(){m(),r()},className:kn,children:(0,x.jsx)(gn.Z,{size:20})})}),(0,x.jsx)(T.Z,{title:c("delete",{keyPrefix:"common"}),children:(0,x.jsx)(M.ZP,{type:"text",disabled:s,onClick:function(){var e;s||l({onOk:function(){return u([i])},content:null!=n&&null!==(e=n.parser_config)&&void 0!==e&&null!==(e=e.graphrag)&&void 0!==e&&e.use_graphrag?c("deleteDocumentConfirmContent"):""})},className:kn,children:(0,x.jsx)(hn.Z,{size:20})})}),d||(0,x.jsx)(T.Z,{title:c("download",{keyPrefix:"common"}),children:(0,x.jsx)(M.ZP,{type:"text",disabled:s,onClick:function(){(0,pn.AG)({id:i,filename:n.name})},className:kn,children:(0,x.jsx)(vn.Z,{size:20})})})]})},_n=Object.defineProperty,bn=Object.getOwnPropertySymbols,wn=Object.prototype.hasOwnProperty,Zn=Object.prototype.propertyIsEnumerable,jn=(e,n,t)=>n in e?_n(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;const Cn=e=>S.createElement("svg",((e,n)=>{for(var t in n||(n={}))wn.call(n,t)&&jn(e,t,n[t]);if(bn)for(var t of bn(n))Zn.call(n,t)&&jn(e,t,n[t]);return e})({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),S.createElement("path",{d:"M14.167 4.271A7.083 7.083 0 0 1 10 17.083h-.417m-3.75-1.354A7.083 7.083 0 0 1 10 2.917h.417m.416 15.75L9.167 17l1.666-1.667M9.167 4.667 10.833 3 9.167 1.333",stroke:"#17B26A",strokeWidth:1.667,strokeLinecap:"round",strokeLinejoin:"round"}));var Tn=t(55241),Mn=t(66309),Pn=t(40411),In=t(86738),Sn=t(93967),Fn=t.n(Sn),Ln=t(59632),Dn=t.n(Ln),On="popoverContent___Y8ZAO",qn="popoverContentItem___Q3slq",En="popoverContentText___nUr7b",Nn="popoverContentErrorLabel___vthqR",An="operationIcon___PnxaJ",Rn="operationIconSpin___Pf25W",Vn=dn()(dn()(dn()(dn()(dn()({},B.cG.UNSTART,He),B.cG.RUNNING,we),B.cG.CANCEL,Cn),B.cG.DONE,Cn),B.cG.FAIL,Cn),Kn=function(e){var n,t,r=e.record,a=(0,p.qM)("knowledgeDetails").t,o=[{key:"process_begin_at",label:a("processBeginAt"),children:r.process_begin_at},{key:"process_duation",label:a("processDuration"),children:"".concat(r.process_duation.toFixed(2)," s")},{key:"progress_msg",label:a("progressMsg"),children:(n=r.progress_msg.trim(),t=n.replace(/(\n)\1+/g,"$1"),Dn()(t,/(\[ERROR\].+\s)/g,(function(e,n){return(0,x.jsx)("span",{className:Nn,children:e},n)})))}];return(0,x.jsx)(g.Z,{vertical:!0,className:On,children:o.map((function(e,n){return(0,x.jsxs)("div",{className:n<2?qn:"",children:[(0,x.jsxs)("b",{children:[e.label,":"]}),(0,x.jsx)("div",{className:En,children:e.children})]},e.key)}))})},Un=function(e){var n=e.record,t=n.run,r=mn[t],a=(0,q.$G)().t,o=function(e){var n=(0,de.QG)(),t=n.runDocumentByIds,r=n.loading,a=(0,S.useState)(""),o=m()(a,2),i=o[0],s=o[1],u=r&&""!==i&&i===e,d=function(){var e=l()(c()().mark((function e(n,r){var a,o=arguments;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.length>2&&void 0!==o[2]&&o[2],!u){e.next=3;break}return e.abrupt("return");case 3:return s(n),e.prev=4,e.next=7,t({documentIds:[n],run:r?2:1,shouldDelete:a});case 7:s(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),s("");case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(n,t){return e.apply(this,arguments)}}();return{handleRunDocumentByIds:d,loading:u}}(n.id),i=o.handleRunDocumentByIds,s=o.loading,u=xn(t),d=Vn[t],p=a("knowledgeDetails.runningStatus".concat(t)),f=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(){i(n.id,u,e)}};return n.type===B.n_.Virtual?null:(0,x.jsxs)(g.Z,{justify:"space-between",align:"center",children:[(0,x.jsx)(Tn.Z,{content:(0,x.jsx)(Kn,{record:n}),children:(0,x.jsx)(Mn.Z,{color:r.color,children:u?(0,x.jsxs)(Z.Z,{children:[(0,x.jsx)(Pn.Z,{color:r.color}),p,(0,x.jsxs)("span",{children:[(100*n.progress).toFixed(2),"%"]})]}):p})}),(0,x.jsx)(In.Z,{title:a("knowledgeDetails.redo",{chunkNum:n.chunk_num}),onConfirm:f(!0),onCancel:f(!1),disabled:0===n.chunk_num,okText:a("common.ok"),cancelText:a("common.cancel"),children:(0,x.jsx)("div",{className:Fn()(An,dn()({},Rn,s)),onClick:0===n.chunk_num?f(!1):function(){},children:(0,x.jsx)(d,{})})})]})},Gn=function(e){var n=e.visible,t=e.onOk,r=e.loading,a=e.initialName,o=e.hideModal,i=f.Z.useForm(),s=m()(i,1)[0],u=(0,p.qM)("common").t,d=function(){var e=l()(c()().mark((function e(){var n;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.validateFields();case 2:n=e.sent,t(n.name);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,S.useEffect)((function(){n&&s.setFieldValue("name",a)}),[a,s,n]),(0,x.jsx)(w.Z,{title:u("rename"),open:n,onOk:d,onCancel:o,okButtonProps:{loading:r},children:(0,x.jsx)(f.Z,{name:"basic",labelCol:{span:4},wrapperCol:{span:20},style:{maxWidth:600},onFinish:function(e){console.log("Success:",e)},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",form:s,children:(0,x.jsx)(f.Z.Item,{label:u("name"),name:"name",rules:[{required:!0,message:u("namePlaceholder")}],children:(0,x.jsx)(O.Z,{})})})})},zn=function(e){var n=e.visible,t=e.hideModal,r=e.onOk,a=f.Z.useForm(),o=m()(a,1)[0],i=(0,p.qM)("knowledgeDetails").t,s=function(){var e=l()(c()().mark((function e(){var n;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validateFields();case 2:n=e.sent,r(n.name,n.url);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.jsx)(w.Z,{title:i("webCrawl"),open:n,onOk:s,onCancel:t,children:(0,x.jsxs)(f.Z,{form:o,name:"validateOnly",labelCol:{span:4},wrapperCol:{span:20},style:{maxWidth:600},autoComplete:"off",children:[(0,x.jsx)(f.Z.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input name!"},{max:10,message:"The maximum length of name is 128 characters"}],children:(0,x.jsx)(O.Z,{placeholder:"Document name"})}),(0,x.jsx)(f.Z.Item,{label:"URL",name:"url",rules:[{required:!0,message:"Please input url!"},{pattern:new RegExp("(https?|ftp|file)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]"),message:"Please enter a valid URL!"}],children:(0,x.jsx)(O.Z,{placeholder:"https://www.baidu.com"})})]})})},Bn=t(11218),Hn=t(28382),Qn=t(63764),$n=t(27856),Wn=t.n($n);function Jn(e){var n=e.visible,t=e.hideModal,r=e.onOk,a=e.initialMetaData,o=(0,q.$G)().t,i=f.Z.useForm(),s=m()(i,1)[0],u=(0,S.useCallback)(l()(c()().mark((function e(){var n;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.validateFields();case 2:n=e.sent,null==r||r(n.meta);case 4:case"end":return e.stop()}}),e)}))),[s,r]);return(0,S.useEffect)((function(){s.setFieldValue("meta",JSON.stringify(a,null,4))}),[s,a]),(0,x.jsx)(w.Z,{title:o("knowledgeDetails.setMetaData"),open:n,onOk:u,onCancel:t,children:(0,x.jsx)(f.Z,{name:"basic",initialValues:{remember:!0},autoComplete:"off",layout:"vertical",form:s,children:(0,x.jsx)(f.Z.Item,{label:o("knowledgeDetails.metaData"),name:"meta",rules:[{required:!0,validator:function(e,n){try{return JSON.parse(n),Promise.resolve()}catch(e){return Promise.reject(new Error(o("knowledgeDetails.pleaseInputJson")))}}}],tooltip:(0,x.jsx)("div",{dangerouslySetInnerHTML:{__html:Wn().sanitize(o("knowledgeDetails.documentMetaTips"))}}),children:(0,x.jsx)(Qn.ZP,{height:200,defaultLanguage:"json",theme:"vs-dark"})})})})}Qn._m.config({paths:{vs:"/vs"}});var Xn=ge.Z.Text,Yn=function(){var e,n,t,r,o,i,s=(0,de.v3)(),u=s.searchString,d=s.documents,f=s.pagination,h=s.handleInputChange,v=(0,pe.XH)(),k=(0,de.jz)().setDocumentStatus,y=(e=(0,un.s0)(),n=(0,cn.pE)().knowledgeId,{linkToUploadPage:(0,S.useCallback)((function(){e("/knowledge/dataset/upload?id=".concat(n))}),[e,n]),toChunk:(0,S.useCallback)((function(t){e("/knowledge/".concat(B.Rx.Dataset,"/chunk?id=").concat(n,"&doc_id=").concat(t))}),[e,n])}).toChunk,_=(0,me.cE)(),b=_.currentRecord,w=_.setRecord,Z=function(e){var n=(0,de.A3)(),t=n.saveName,r=n.loading,a=(0,p.pG)(),o=a.visible,i=a.hideModal,s=a.showModal,u=(0,S.useCallback)(function(){var n=l()(c()().mark((function n(r){return c()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t({documentId:e,name:r});case 2:0===n.sent&&i();case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[i,t,e]);return{renameLoading:r,onRenameOk:u,renameVisible:o,hideRenameModal:i,showRenameModal:s}}(b.id),j=Z.renameLoading,C=Z.onRenameOk,T=Z.renameVisible,M=Z.hideRenameModal,P=Z.showRenameModal,I=function(){var e=(0,de.GH)(),n=e.createDocument,t=e.loading,r=(0,p.pG)(),a=r.visible,o=r.hideModal,i=r.showModal,s=(0,S.useCallback)(function(){var e=l()(c()().mark((function e(t){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:0===e.sent&&o();case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[o,n]);return{createLoading:t,onCreateOk:s,createVisible:a,hideCreateModal:o,showCreateModal:i}}(),F=I.createLoading,L=I.onCreateOk,D=I.createVisible,O=I.hideCreateModal,E=I.showCreateModal,N=function(e){var n=(0,de.wk)(),t=n.setDocumentParser,r=n.loading,a=(0,p.pG)(),o=a.visible,i=a.hideModal,s=a.showModal,u=(0,S.useCallback)(function(){var n=l()(c()().mark((function n(r,a){return c()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t({parserId:r,documentId:e,parserConfig:a});case 2:0===n.sent&&i();case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[i,t,e]);return{changeParserLoading:r,onChangeParserOk:u,changeParserVisible:o,hideChangeParserModal:i,showChangeParserModal:s}}(b.id),A=N.changeParserLoading,R=N.onChangeParserOk,V=N.changeParserVisible,U=N.hideChangeParserModal,G=N.showChangeParserModal,z=function(){var e=(0,p.pG)(),n=e.visible,t=e.hideModal,r=e.showModal,a=(0,de.ui)(),o=a.uploadDocument,i=a.loading,s=(0,S.useCallback)(function(){var e=l()(c()().mark((function e(n){var r,a,i;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>0)){e.next=10;break}return e.next=3,o(n);case 3:if("string"==typeof(null==(r=e.sent)?void 0:r.message)){e.next=6;break}return e.abrupt("return");case 6:return a=(0,fe.YC)(null==r?void 0:r.message),i=null==r?void 0:r.code,(0===(null==r?void 0:r.code)||500===(null==r?void 0:r.code)&&a!==n.length)&&(i=0,t()),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[o,t]);return{documentUploadLoading:i,onDocumentUploadOk:s,documentUploadVisible:n,hideDocumentUploadModal:t,showDocumentUploadModal:r}}(),H=z.documentUploadVisible,Q=z.hideDocumentUploadModal,$=z.showDocumentUploadModal,W=z.onDocumentUploadOk,J=z.documentUploadLoading,X=function(){var e=(0,p.pG)(),n=e.visible,t=e.hideModal,r=e.showModal,a=(0,de.Yb)(),o=a.webCrawl,i=a.loading,s=(0,S.useCallback)(function(){var e=l()(c()().mark((function e(n,r){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({name:n,url:r});case 2:if(0!==e.sent){e.next=6;break}return t(),e.abrupt("return",0);case 6:return e.abrupt("return",-1);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[o,t]);return{webCrawlUploadLoading:i,onWebCrawlUploadOk:s,webCrawlUploadVisible:n,hideWebCrawlUploadModal:t,showWebCrawlUploadModal:r}}(),Y=X.webCrawlUploadVisible,ee=X.hideWebCrawlUploadModal,ne=X.showWebCrawlUploadModal,te=X.onWebCrawlUploadOk,re=X.webCrawlUploadLoading,ae=(0,q.$G)("translation",{keyPrefix:"knowledgeDetails"}).t,oe=function(e){var n=(0,de.Hy)(),t=n.setDocumentMeta,r=n.loading,a=(0,p.pG)(),o=a.visible,i=a.hideModal,s=a.showModal,u=(0,S.useCallback)(function(){var n=l()(c()().mark((function n(r){return c()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t({documentId:e,meta:r});case 2:0===n.sent&&i();case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,e,i]);return{setMetaLoading:r,onSetMetaModalOk:u,setMetaVisible:o,hideSetMetaModal:i,showSetMetaModal:s}}(b.id),ie=oe.showSetMetaModal,se=oe.hideSetMetaModal,ce=oe.setMetaVisible,ge=oe.setMetaLoading,xe=oe.onSetMetaModalOk,ke=(t=(0,S.useState)([]),r=m()(t,2),o=r[0],i=r[1],{selectedRowKeys:o,onChange:function(e){i(e)}}),ye=[{title:ae("name"),dataIndex:"name",key:"name",fixed:"left",render:function(e,n){var t=n.id,r=n.thumbnail,a=n.name;return(0,x.jsx)("div",{className:an,onClick:function(){return y(t)},children:(0,x.jsxs)(g.Z,{gap:10,align:"center",children:[r?(0,x.jsx)("img",{className:tn,src:r,alt:""}):(0,x.jsx)(le.Z,{name:"file-icon/".concat((0,fe.RT)(a)),width:24}),(0,x.jsx)(Xn,{ellipsis:{tooltip:e},className:on,children:e})]})})}},{title:ae("chunkNumber"),dataIndex:"chunk_num",key:"chunk_num"},{title:ae("uploadDate"),dataIndex:"create_time",key:"create_time",render:function(e){return(0,Hn.p6)(e)}},{title:ae("chunkMethod"),dataIndex:"parser_id",key:"parser_id",render:function(e){var n;return null===(n=v.find((function(n){return n.value===e})))||void 0===n?void 0:n.label}},{title:ae("enabled"),key:"status",dataIndex:"status",render:function(e,n){var t=n.status,r=n.id;return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(K.Z,{checked:"1"===t,onChange:function(e){k({status:e,documentId:r})}})})}},{title:ae("parsingStatus"),dataIndex:"run",key:"run",render:function(e,n){return(0,x.jsx)(Un,{record:n})}},{title:ae("action"),key:"action",render:function(e,n){return(0,x.jsx)(yn,{setCurrentRecord:w,showRenameModal:P,showChangeParserModal:G,showSetMetaModal:ie,record:n})}}].map((function(e){return a()(a()({},e),{},{className:"".concat(rn)})}));return(0,x.jsxs)("div",{className:Ye,children:[(0,x.jsx)(sn,{selectedRowKeys:ke.selectedRowKeys,showCreateModal:E,showWebCrawlModal:ne,showDocumentUploadModal:$,searchString:u,handleInputChange:h}),(0,x.jsx)(he.Z,{rowKey:"id",columns:ye,dataSource:d,pagination:f,rowSelection:ke,scroll:{scrollToFirstRowOnChange:!0,x:1300}}),(0,x.jsx)(ve,{visible:D,hideModal:O,loading:F,onOk:L}),(0,x.jsx)(ue,{documentId:b.id,parserId:b.parser_id,parserConfig:b.parser_config,documentExtension:(0,fe.RT)(b.name),onOk:R,visible:V,hideModal:U,loading:A}),(0,x.jsx)(Gn,{visible:T,onOk:C,loading:j,hideModal:M,initialName:b.name}),(0,x.jsx)(Bn.Z,{visible:H,hideModal:Q,loading:J,onOk:W}),(0,x.jsx)(zn,{visible:Y,hideModal:ee,loading:re,onOk:te}),ce&&(0,x.jsx)(Jn,{visible:ce,hideModal:se,onOk:xe,loading:ge,initialMetaData:b.meta_fields})]})}},62386:function(e,n,t){"use strict";var r=t(60806),a=t(66582),o=t(78158),i=r.Z.listFile,s=r.Z.removeFile,c=r.Z.uploadFile,u=r.Z.renameFile,l=r.Z.getAllParentFolder,d=r.Z.createFolder,m=r.Z.connectFileToKnowledge,p=r.Z.get_document_file,f=r.Z.getFile,g=r.Z.moveFile,h={listFile:{url:i,method:"get"},removeFile:{url:s,method:"post"},uploadFile:{url:c,method:"post"},renameFile:{url:u,method:"post"},getAllParentFolder:{url:l,method:"get"},createFolder:{url:d,method:"post"},connectFileToKnowledge:{url:m,method:"post"},getFile:{url:f,method:"get",responseType:"blob"},getDocumentFile:{url:p,method:"get",responseType:"blob"},moveFile:{url:g,method:"post"}},v=(0,a.Z)(h,o.ZP);n.Z=v},73955:function(e,n,t){"use strict";t.d(n,{$V:function(){return N},QL:function(){return O},Re:function(){return E},tc:function(){return q}});var r=t(60806),a=t(66582),o=t(78158),i=r.Z.create_kb,s=r.Z.update_kb,c=r.Z.rm_kb,u=r.Z.get_kb_detail,l=r.Z.kb_list,d=r.Z.get_document_list,m=r.Z.document_change_status,p=r.Z.document_rm,f=r.Z.document_delete,g=r.Z.document_create,h=r.Z.document_change_parser,v=r.Z.document_thumbnails,x=r.Z.chunk_list,k=r.Z.create_chunk,y=r.Z.set_chunk,_=r.Z.get_chunk,b=r.Z.switch_chunk,w=r.Z.rm_chunk,Z=r.Z.retrieval_test,j=r.Z.document_rename,C=r.Z.document_run,T=r.Z.document_upload,M=r.Z.web_crawl,P=r.Z.knowledge_graph,I=r.Z.document_infos,S=r.Z.upload_and_parse,F=r.Z.listTagByKnowledgeIds,L={createKb:{url:i,method:"post"},updateKb:{url:s,method:"post"},rmKb:{url:c,method:"post"},get_kb_detail:{url:u,method:"get"},getList:{url:l,method:"get"},get_document_list:{url:d,method:"get"},document_change_status:{url:m,method:"post"},document_rm:{url:p,method:"post"},document_rename:{url:j,method:"post"},document_create:{url:g,method:"post"},document_run:{url:C,method:"post"},document_change_parser:{url:h,method:"post"},document_thumbnails:{url:v,method:"get"},document_upload:{url:T,method:"post"},web_crawl:{url:M,method:"post"},document_infos:{url:I,method:"post"},setMeta:{url:r.Z.setMeta,method:"post"},chunk_list:{url:x,method:"post"},create_chunk:{url:k,method:"post"},set_chunk:{url:y,method:"post"},get_chunk:{url:_,method:"get"},switch_chunk:{url:b,method:"post"},rm_chunk:{url:w,method:"post"},retrieval_test:{url:Z,method:"post"},knowledge_graph:{url:P,method:"get"},document_delete:{url:f,method:"delete"},upload_and_parse:{url:S,method:"post"},listTagByKnowledgeIds:{url:F,method:"get"}},D=(0,a.Z)(L,o.ZP),O=function(e){return o.ZP.get(r.Z.listTag(e))},q=function(e,n){return(0,o.v_)(r.Z.removeTag(e),{tags:n})},E=function(e,n){var t=n.fromTag,a=n.toTag;return(0,o.v_)(r.Z.renameTag(e),{fromTag:t,toTag:a})};function N(e){return o.ZP.get(r.Z.getKnowledgeGraph(e))}n.ZP=D},72668:function(e,n,t){"use strict";t.d(n,{AH:function(){return T},EE:function(){return M},FG:function(){return I},WX:function(){return C},vh:function(){return P}});var r=t(60806),a=t(66582),o=t(78158),i=r.Z.login,s=r.Z.logout,c=r.Z.register,u=r.Z.setting,l=r.Z.user_info,d=r.Z.tenant_info,m=r.Z.factories_list,p=r.Z.llm_list,f=r.Z.my_llm,g=r.Z.set_api_key,h=r.Z.set_tenant_info,v=r.Z.add_llm,x=r.Z.delete_llm,k=r.Z.deleteFactory,y=r.Z.getSystemStatus,_=r.Z.getSystemVersion,b=r.Z.getSystemTokenList,w=r.Z.removeSystemToken,Z={login:{url:i,method:"post"},logout:{url:s,method:"get"},register:{url:c,method:"post"},setting:{url:u,method:"post"},user_info:{url:l,method:"get"},get_tenant_info:{url:d,method:"get"},set_tenant_info:{url:h,method:"post"},factories_list:{url:m,method:"get"},llm_list:{url:p,method:"get"},my_llm:{url:f,method:"get"},set_api_key:{url:g,method:"post"},add_llm:{url:v,method:"post"},delete_llm:{url:x,method:"post"},getSystemStatus:{url:y,method:"get"},getSystemVersion:{url:_,method:"get"},deleteFactory:{url:k,method:"post"},listToken:{url:b,method:"get"},createToken:{url:r.Z.createSystemToken,method:"post"},removeToken:{url:w,method:"delete"}},j=(0,a.Z)(Z,o.ZP),C=function(e){return o.ZP.get(r.Z.listTenantUser(e))},T=function(e,n){return(0,o.v_)(r.Z.addTenantUser(e),{email:n})},M=function(e){var n=e.tenantId,t=e.userId;return o.ZP.delete(r.Z.deleteTenantUser(n,t))},P=function(){return o.ZP.get(r.Z.listTenant)},I=function(e){return o.ZP.put(r.Z.agreeTenant(e))};n.ZP=j},60806:function(e,n,t){"use strict";t.d(n,{N:function(){return r}});var r="/v1";n.Z={login:"".concat(r,"/user/login"),logout:"".concat(r,"/user/logout"),register:"".concat(r,"/user/register"),setting:"".concat(r,"/user/setting"),user_info:"".concat(r,"/user/info"),tenant_info:"".concat(r,"/user/tenant_info"),set_tenant_info:"".concat(r,"/user/set_tenant_info"),addTenantUser:function(e){return"".concat(r,"/tenant/").concat(e,"/user")},listTenantUser:function(e){return"".concat(r,"/tenant/").concat(e,"/user/list")},deleteTenantUser:function(e,n){return"".concat(r,"/tenant/").concat(e,"/user/").concat(n)},listTenant:"".concat(r,"/tenant/list"),agreeTenant:function(e){return"".concat(r,"/tenant/agree/").concat(e)},factories_list:"".concat(r,"/llm/factories"),llm_list:"".concat(r,"/llm/list"),my_llm:"".concat(r,"/llm/my_llms"),set_api_key:"".concat(r,"/llm/set_api_key"),add_llm:"".concat(r,"/llm/add_llm"),delete_llm:"".concat(r,"/llm/delete_llm"),deleteFactory:"".concat(r,"/llm/delete_factory"),kb_list:"".concat(r,"/kb/list"),create_kb:"".concat(r,"/kb/create"),update_kb:"".concat(r,"/kb/update"),rm_kb:"".concat(r,"/kb/rm"),get_kb_detail:"".concat(r,"/kb/detail"),getKnowledgeGraph:function(e){return"".concat(r,"/kb/").concat(e,"/knowledge_graph")},listTag:function(e){return"".concat(r,"/kb/").concat(e,"/tags")},listTagByKnowledgeIds:"".concat(r,"/kb/tags"),removeTag:function(e){return"".concat(r,"/kb/").concat(e,"/rm_tags")},renameTag:function(e){return"".concat(r,"/kb/").concat(e,"/rename_tag")},chunk_list:"".concat(r,"/chunk/list"),create_chunk:"".concat(r,"/chunk/create"),set_chunk:"".concat(r,"/chunk/set"),get_chunk:"".concat(r,"/chunk/get"),switch_chunk:"".concat(r,"/chunk/switch"),rm_chunk:"".concat(r,"/chunk/rm"),retrieval_test:"".concat(r,"/chunk/retrieval_test"),knowledge_graph:"".concat(r,"/chunk/knowledge_graph"),get_document_list:"".concat(r,"/document/list"),document_change_status:"".concat(r,"/document/change_status"),document_rm:"".concat(r,"/document/rm"),document_delete:"".concat(r,"/api/document"),document_rename:"".concat(r,"/document/rename"),document_create:"".concat(r,"/document/create"),document_run:"".concat(r,"/document/run"),document_change_parser:"".concat(r,"/document/change_parser"),document_thumbnails:"".concat(r,"/document/thumbnails"),get_document_file:"".concat(r,"/document/get"),document_upload:"".concat(r,"/document/upload"),web_crawl:"".concat(r,"/document/web_crawl"),document_infos:"".concat(r,"/document/infos"),upload_and_parse:"".concat(r,"/document/upload_and_parse"),parse:"".concat(r,"/document/parse"),setMeta:"".concat(r,"/document/set_meta"),setDialog:"".concat(r,"/dialog/set"),getDialog:"".concat(r,"/dialog/get"),removeDialog:"".concat(r,"/dialog/rm"),listDialog:"".concat(r,"/dialog/list"),setConversation:"".concat(r,"/conversation/set"),getConversation:"".concat(r,"/conversation/get"),getConversationSSE:"".concat(r,"/conversation/getsse"),listConversation:"".concat(r,"/conversation/list"),removeConversation:"".concat(r,"/conversation/rm"),completeConversation:"".concat(r,"/conversation/completion"),deleteMessage:"".concat(r,"/conversation/delete_msg"),thumbup:"".concat(r,"/conversation/thumbup"),tts:"".concat(r,"/conversation/tts"),ask:"".concat(r,"/conversation/ask"),mindmap:"".concat(r,"/conversation/mindmap"),getRelatedQuestions:"".concat(r,"/conversation/related_questions"),createToken:"".concat(r,"/api/new_token"),listToken:"".concat(r,"/api/token_list"),removeToken:"".concat(r,"/api/rm"),getStats:"".concat(r,"/api/stats"),createExternalConversation:"".concat(r,"/api/new_conversation"),getExternalConversation:"".concat(r,"/api/conversation"),completeExternalConversation:"".concat(r,"/api/completion"),uploadAndParseExternal:"".concat(r,"/api/document/upload_and_parse"),listFile:"".concat(r,"/file/listall"),uploadFile:"".concat(r,"/file/upload"),removeFile:"".concat(r,"/file/rm"),renameFile:"".concat(r,"/file/rename"),getAllParentFolder:"".concat(r,"/file/all_parent_folder"),createFolder:"".concat(r,"/file/create"),connectFileToKnowledge:"".concat(r,"/file2document/convert"),getFile:"".concat(r,"/file/get"),moveFile:"".concat(r,"/file/mv"),getSystemVersion:"".concat(r,"/system/version"),getSystemStatus:"".concat(r,"/system/status"),getSystemTokenList:"".concat(r,"/system/token_list"),createSystemToken:"".concat(r,"/system/new_token"),listSystemToken:"".concat(r,"/system/token_list"),removeSystemToken:"".concat(r,"/system/token"),listTemplates:"".concat(r,"/canvas/templates"),listCanvas:"".concat(r,"/canvas/list"),getCanvas:"".concat(r,"/canvas/get"),getCanvasSSE:"".concat(r,"/canvas/getsse"),removeCanvas:"".concat(r,"/canvas/rm"),setCanvas:"".concat(r,"/canvas/set"),resetCanvas:"".concat(r,"/canvas/reset"),runCanvas:"".concat(r,"/canvas/completion"),testDbConnect:"".concat(r,"/canvas/test_db_connect"),getInputElements:"".concat(r,"/canvas/input_elements"),debug:"".concat(r,"/canvas/debug")}},71250:function(e,n,t){"use strict";t.d(n,{Bl:function(){return l},CE:function(){return p},IC:function(){return c},Kj:function(){return u},mN:function(){return m},o_:function(){return d}});var r=t(97857),a=t.n(r),o=t(1079),i=t(96486),s=t(57632),c=function(e){return e!==o.Pc&&""!==e},u=function(e){return"id"in e&&e.id?e.id:(0,s.Z)()},l=function(e){var n;return null!==(n=null==e?void 0:e.map((function(e){return a()(a()({},(0,i.omit)(e,"reference")),{},{id:u(e)})})))&&void 0!==n?n:[]},d=function(){return(0,s.Z)().replace(/-/g,"")},m=function(e){return"".concat(e.role,"_").concat(e.id)},p=function(e){return e.replace(/\\\[([\s\S]*?)\\\]/g,(function(e,n){return"$$".concat(n,"$$")})).replace(/\\\(([\s\S]*?)\\\)/g,(function(e,n){return"$".concat(n,"$")}))}},28382:function(e,n,t){"use strict";t.d(n,{mr:function(){return i},p6:function(){return o}});var r=t(27484),a=t.n(r);function o(e){return e?a()(e).format("DD/MM/YYYY HH:mm:ss"):""}function i(e){return e?a()(e).format("HH:mm:ss"):""}},51331:function(e,n,t){"use strict";t.d(n,{AG:function(){return f},De:function(){return v},P2:function(){return d},Ph:function(){return l},td:function(){return h},uA:function(){return p},vn:function(){return m}});var r=t(15009),a=t.n(r),o=t(99289),i=t.n(o),s=t(40169),c=t(62386),u=function(e){return new Promise((function(n,t){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){var e=new Image;e.src=r.result,e.onload=function(){var t=document.createElement("canvas"),r=t.getContext("2d"),a=e.width,o=e.height,i=100;a>o&&a>i?(o=o*i/a,a=i):o>i&&(a=a*i/o,o=i),t.width=a,t.height=o,null==r||r.drawImage(e,0,0,a,o);var s=t.toDataURL("image/png");n(s)},e.onerror=t},r.onerror=t}))},l=function(e){return Array.isArray(e)?e:null==e?void 0:e.fileList},d=function(e){var n=[];return e&&(n=[{uid:"1",name:"file",thumbUrl:e,status:"done"}]),n},m=function(){var e=i()(a()().mark((function e(n){var t,r,o;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Array.isArray(n)&&n.length>0)){e.next=11;break}if(t=n[0],!(r=t.originFileObj)){e.next=10;break}return e.next=6,u(r);case 6:return o=e.sent,e.abrupt("return",o);case 10:return e.abrupt("return",t.thumbUrl);case 11:return e.abrupt("return","");case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),p=function(e,n){var t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,n&&(r.download=n),r.click(),window.URL.revokeObjectURL(t)},f=function(){var e=i()(a()().mark((function e(n){var t,r,o,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.id,r=n.filename,e.next=3,c.Z.getDocumentFile({},t);case 3:o=e.sent,i=new Blob([o.data],{type:o.data.type}),p(i,r);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],h=function(e){for(var n=0,t=("string"==typeof e?parseInt(e,10):e)||0;t>=1024&&++n;)t/=1024;return t.toFixed(t<10&&n>0?1:0)+" "+g[n]},v=function(){var e=i()(a()().mark((function e(n,t){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Blob([JSON.stringify(n)],{type:s.nK.Json}),p(r,t);case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},66582:function(e,n,t){"use strict";var r=t(97857),a=t.n(r),o=t(57557),i=t.n(o),s=["post","delete","put"];n.Z=function(e,n){var t={},r=function(r){t[r]=function(t,o){var c=e[r].url,u=e[r];return o&&(c=c+"/"+o),s.some((function(n){return n===e[r].method.toLowerCase()}))?n(c,{method:e[r].method,data:t}):"get"===e[r].method||"GET"===e[r].method?n.get(c,a()(a()({},i()(u,["method","url"])),{},{params:t})):void 0}};for(var o in e)r(o);return t}},78158:function(e,n,t){"use strict";t.d(n,{v_:function(){return _}});var r=t(15009),a=t.n(r),o=t(99289),i=t.n(o),s=t(9783),c=t.n(s),u=t(97857),l=t.n(u),d=t(39918),m=t(40063),p=t(61921),f=t(26855),g=t(45360),h=t(24701),v=t(11238),x=t(31098),k={200:m.Z.t("message.200"),201:m.Z.t("message.201"),202:m.Z.t("message.202"),204:m.Z.t("message.204"),400:m.Z.t("message.400"),401:m.Z.t("message.401"),403:m.Z.t("message.403"),404:m.Z.t("message.404"),406:m.Z.t("message.406"),410:m.Z.t("message.410"),413:m.Z.t("message.413"),422:m.Z.t("message.422"),500:m.Z.t("message.500"),502:m.Z.t("message.502"),503:m.Z.t("message.503"),504:m.Z.t("message.504")},y=(0,v.l7)({errorHandler:function(e){var n=e.response;if("Failed to fetch"===e.message)f.Z.error({description:m.Z.t("message.networkAnomalyDescription"),message:m.Z.t("message.networkAnomaly")});else if(n&&n.status){var t=k[n.status]||n.statusText,r=n.status,a=n.url;f.Z.error({message:"".concat(m.Z.t("message.requestError")," ").concat(r,": ").concat(a),description:t})}return n},timeout:3e5,getResponse:!0});y.interceptors.request.use((function(e,n){var t=(0,x._y)(n.data),r=(0,x._y)(n.params);return{url:e,options:l()(l()({},n),{},{data:t,params:r,headers:l()(l()({},n.skipToken?void 0:c()({},d._n,(0,p.c)())),n.headers),interceptors:!0})}})),y.interceptors.response.use(function(){var e=i()(a()().mark((function e(n,t){var r,o;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(413!==(null==n?void 0:n.status)&&504!==(null==n?void 0:n.status)||g.ZP.error(k[null==n?void 0:n.status]),"blob"!==t.responseType){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,null==n||null===(r=n.clone())||void 0===r?void 0:r.json();case 5:return 100===(null==(o=e.sent)?void 0:o.code)?g.ZP.error(null==o?void 0:o.message):401===(null==o?void 0:o.code)?(f.Z.error({message:null==o?void 0:o.message,description:null==o?void 0:o.message,duration:3}),p.Z.removeAll(),h.m8.push("/login")):0!==(null==o?void 0:o.code)&&f.Z.error({message:"".concat(m.Z.t("message.hint")," : ").concat(null==o?void 0:o.code),description:null==o?void 0:o.message,duration:3}),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),n.ZP=y;var _=function(e,n){return y.post(e,{data:n})}},86635:function(e){function n(e){return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}))}n.keys=function(){return[]},n.resolve=n,n.id=86635,e.exports=n},24654:function(){}}]);
//# sourceMappingURL=p__add-knowledge__components__knowledge-file__index.9bc9a544.async.js.map