{"version":3,"file":"p__chat__share__index.e92171c0.async.js","mappings":"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","sources":["webpack:///./node_modules/@ant-design/icons-svg/es/asn/CloseCircleOutlined.js","webpack:///./node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/DislikeOutlined.js","webpack:///./node_modules/@ant-design/icons/es/icons/DislikeOutlined.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/LeftOutlined.js","webpack:///./node_modules/@ant-design/icons/es/icons/LeftOutlined.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/LikeOutlined.js","webpack:///./node_modules/@ant-design/icons/es/icons/LikeOutlined.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/PauseCircleOutlined.js","webpack:///./node_modules/@ant-design/icons/es/icons/PauseCircleOutlined.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/RightOutlined.js","webpack:///./node_modules/@ant-design/icons/es/icons/RightOutlined.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/SoundOutlined.js","webpack:///./node_modules/@ant-design/icons/es/icons/SoundOutlined.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/SyncOutlined.js","webpack:///./node_modules/@ant-design/icons/es/icons/SyncOutlined.js","webpack:///./src/components/message-input/index.less?677d","webpack:///./src/components/message-input/index.tsx","webpack:///./src/services/flow-service.ts","webpack:///./src/hooks/flow-hooks.ts","webpack:///./src/pages/chat/share/index.less?4388","webpack:///./src/pages/chat/share/large.tsx","webpack:///./src/pages/chat/share/index.tsx","webpack:///./node_modules/antd/es/_util/extendsObject.js","webpack:///./node_modules/antd/es/modal/PurePanel.js","webpack:///./node_modules/antd/es/modal/index.js","webpack:///./node_modules/lucide-react/dist/esm/shared/src/utils.js","webpack:///./node_modules/lucide-react/dist/esm/defaultAttributes.js","webpack:///./node_modules/lucide-react/dist/esm/Icon.js","webpack:///./node_modules/lucide-react/dist/esm/createLucideIcon.js","webpack:///./node_modules/lucide-react/dist/esm/icons/paperclip.js","webpack:///./node_modules/openai-speech-stream-player/lib/Player.js","webpack:///./node_modules/openai-speech-stream-player/lib/index.js","webpack:///./node_modules/react-copy-to-clipboard/lib/Component.js","webpack:///./node_modules/react-copy-to-clipboard/lib/index.js"],"sourcesContent":["// This icon file is generated automatically.\nvar CloseCircleOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"fill-rule\": \"evenodd\", \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z\" } }] }, \"name\": \"close-circle\", \"theme\": \"outlined\" };\nexport default CloseCircleOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport CloseCircleOutlinedSvg from \"@ant-design/icons-svg/es/asn/CloseCircleOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar CloseCircleOutlined = function CloseCircleOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: CloseCircleOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  CloseCircleOutlined.displayName = 'CloseCircleOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(CloseCircleOutlined);","// This icon file is generated automatically.\nvar DislikeOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M885.9 490.3c3.6-12 5.4-24.4 5.4-37 0-28.3-9.3-55.5-26.1-77.7 3.6-12 5.4-24.4 5.4-37 0-28.3-9.3-55.5-26.1-77.7 3.6-12 5.4-24.4 5.4-37 0-51.6-30.7-98.1-78.3-118.4a66.1 66.1 0 00-26.5-5.4H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h129.3l85.8 310.8C372.9 889 418.9 924 470.9 924c29.7 0 57.4-11.8 77.9-33.4 20.5-21.5 31-49.7 29.5-79.4l-6-122.9h239.9c12.1 0 23.9-3.2 34.3-9.3 40.4-23.5 65.5-66.1 65.5-111 0-28.3-9.3-55.5-26.1-77.7zM184 456V172h81v284h-81zm627.2 160.4H496.8l9.6 198.4c.6 11.9-4.7 23.1-14.6 30.5-6.1 4.5-13.6 6.8-21.1 6.7a44.28 44.28 0 01-42.2-32.3L329 459.2V172h415.4a56.85 56.85 0 0133.6 51.8c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4 21.9 19a56.76 56.76 0 0119.6 43c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4 21.9 19a56.76 56.76 0 0119.6 43c0 9.7-2.3 18.9-6.9 27.3l-14 25.5 21.9 19a56.76 56.76 0 0119.6 43c0 19.1-11 37.5-28.8 48.4z\" } }] }, \"name\": \"dislike\", \"theme\": \"outlined\" };\nexport default DislikeOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport DislikeOutlinedSvg from \"@ant-design/icons-svg/es/asn/DislikeOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar DislikeOutlined = function DislikeOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: DislikeOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  DislikeOutlined.displayName = 'DislikeOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(DislikeOutlined);","// This icon file is generated automatically.\nvar LeftOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z\" } }] }, \"name\": \"left\", \"theme\": \"outlined\" };\nexport default LeftOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport LeftOutlinedSvg from \"@ant-design/icons-svg/es/asn/LeftOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar LeftOutlined = function LeftOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: LeftOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  LeftOutlined.displayName = 'LeftOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(LeftOutlined);","// This icon file is generated automatically.\nvar LikeOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 00-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 00471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0142.2-32.3c7.6 0 15.1 2.2 21.1 6.7 9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z\" } }] }, \"name\": \"like\", \"theme\": \"outlined\" };\nexport default LikeOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport LikeOutlinedSvg from \"@ant-design/icons-svg/es/asn/LikeOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar LikeOutlined = function LikeOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: LikeOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  LikeOutlined.displayName = 'LikeOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(LikeOutlined);","// This icon file is generated automatically.\nvar PauseCircleOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"pause-circle\", \"theme\": \"outlined\" };\nexport default PauseCircleOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport PauseCircleOutlinedSvg from \"@ant-design/icons-svg/es/asn/PauseCircleOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar PauseCircleOutlined = function PauseCircleOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: PauseCircleOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  PauseCircleOutlined.displayName = 'PauseCircleOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(PauseCircleOutlined);","// This icon file is generated automatically.\nvar RightOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z\" } }] }, \"name\": \"right\", \"theme\": \"outlined\" };\nexport default RightOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport RightOutlinedSvg from \"@ant-design/icons-svg/es/asn/RightOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar RightOutlined = function RightOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: RightOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  RightOutlined.displayName = 'RightOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(RightOutlined);","// This icon file is generated automatically.\nvar SoundOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M625.9 115c-5.9 0-11.9 1.6-17.4 5.3L254 352H90c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h164l354.5 231.7c5.5 3.6 11.6 5.3 17.4 5.3 16.7 0 32.1-13.3 32.1-32.1V147.1c0-18.8-15.4-32.1-32.1-32.1zM586 803L293.4 611.7l-18-11.7H146V424h129.4l17.9-11.7L586 221v582zm348-327H806c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16h128c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16zm-41.9 261.8l-110.3-63.7a15.9 15.9 0 00-21.7 5.9l-19.9 34.5c-4.4 7.6-1.8 17.4 5.8 21.8L856.3 800a15.9 15.9 0 0021.7-5.9l19.9-34.5c4.4-7.6 1.7-17.4-5.8-21.8zM760 344a15.9 15.9 0 0021.7 5.9L892 286.2c7.6-4.4 10.2-14.2 5.8-21.8L878 230a15.9 15.9 0 00-21.7-5.9L746 287.8a15.99 15.99 0 00-5.8 21.8L760 344z\" } }] }, \"name\": \"sound\", \"theme\": \"outlined\" };\nexport default SoundOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport SoundOutlinedSvg from \"@ant-design/icons-svg/es/asn/SoundOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar SoundOutlined = function SoundOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: SoundOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  SoundOutlined.displayName = 'SoundOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(SoundOutlined);","// This icon file is generated automatically.\nvar SyncOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z\" } }] }, \"name\": \"sync\", \"theme\": \"outlined\" };\nexport default SyncOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport SyncOutlinedSvg from \"@ant-design/icons-svg/es/asn/SyncOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar SyncOutlined = function SyncOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: SyncOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  SyncOutlined.displayName = 'SyncOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(SyncOutlined);","// extracted by mini-css-extract-plugin\nexport default {\"messageInputWrapper\":\"messageInputWrapper___nie1o\",\"documentCard\":\"documentCard___JpeyA\",\"listWrapper\":\"listWrapper___CSYW_\",\"inputWrapper\":\"inputWrapper___xWIXi\",\"deleteIcon\":\"deleteIcon___ilZaY\"};","import { useTranslate } from '@/hooks/common-hooks';\nimport {\n  useDeleteDocument,\n  useFetchDocumentInfosByIds,\n  useRemoveNextDocument,\n  useUploadAndParseDocument,\n} from '@/hooks/document-hooks';\nimport { getExtension } from '@/utils/document-util';\nimport { formatBytes } from '@/utils/file-util';\nimport {\n  CloseCircleOutlined,\n  InfoCircleOutlined,\n  LoadingOutlined,\n} from '@ant-design/icons';\nimport type { GetProp, UploadFile } from 'antd';\nimport {\n  Button,\n  Card,\n  Flex,\n  Input,\n  List,\n  Space,\n  Spin,\n  Typography,\n  Upload,\n  UploadProps,\n} from 'antd';\nimport classNames from 'classnames';\nimport get from 'lodash/get';\nimport { Paperclip } from 'lucide-react';\nimport {\n  ChangeEventHandler,\n  memo,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport FileIcon from '../file-icon';\nimport styles from './index.less';\n\ntype FileType = Parameters<GetProp<UploadProps, 'beforeUpload'>>[0];\nconst { Text } = Typography;\n\nconst getFileId = (file: UploadFile) => get(file, 'response.data.0');\n\nconst getFileIds = (fileList: UploadFile[]) => {\n  const ids = fileList.reduce((pre, cur) => {\n    return pre.concat(get(cur, 'response.data', []));\n  }, []);\n\n  return ids;\n};\n\nconst isUploadSuccess = (file: UploadFile) => {\n  const code = get(file, 'response.code');\n  return typeof code === 'number' && code === 0;\n};\n\ninterface IProps {\n  disabled: boolean;\n  value: string;\n  sendDisabled: boolean;\n  sendLoading: boolean;\n  onPressEnter(documentIds: string[]): void;\n  onInputChange: ChangeEventHandler<HTMLInputElement>;\n  conversationId: string;\n  uploadMethod?: string;\n  isShared?: boolean;\n  showUploadIcon?: boolean;\n  createConversationBeforeUploadDocument?(message: string): Promise<any>;\n}\n\nconst getBase64 = (file: FileType): Promise<string> =>\n  new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file as any);\n    reader.onload = () => resolve(reader.result as string);\n    reader.onerror = (error) => reject(error);\n  });\n\nconst MessageInput = ({\n  isShared = false,\n  disabled,\n  value,\n  onPressEnter,\n  sendDisabled,\n  sendLoading,\n  onInputChange,\n  conversationId,\n  showUploadIcon = true,\n  createConversationBeforeUploadDocument,\n  uploadMethod = 'upload_and_parse',\n}: IProps) => {\n  const { t } = useTranslate('chat');\n  const { removeDocument } = useRemoveNextDocument();\n  const { deleteDocument } = useDeleteDocument();\n  const { data: documentInfos, setDocumentIds } = useFetchDocumentInfosByIds();\n  const { uploadAndParseDocument } = useUploadAndParseDocument(uploadMethod);\n  const conversationIdRef = useRef(conversationId);\n  const [fileList, setFileList] = useState<UploadFile[]>([]);\n\n  const handlePreview = async (file: UploadFile) => {\n    if (!file.url && !file.preview) {\n      file.preview = await getBase64(file.originFileObj as FileType);\n    }\n  };\n\n  const handleChange: UploadProps['onChange'] = async ({\n    // fileList: newFileList,\n    file,\n  }) => {\n    let nextConversationId: string = conversationId;\n    if (createConversationBeforeUploadDocument) {\n      const creatingRet = await createConversationBeforeUploadDocument(\n        file.name,\n      );\n      if (creatingRet?.code === 0) {\n        nextConversationId = creatingRet.data.id;\n      }\n    }\n    setFileList((list) => {\n      list.push({\n        ...file,\n        status: 'uploading',\n        originFileObj: file as any,\n      });\n      return [...list];\n    });\n\n    const ret = await uploadAndParseDocument({\n      conversationId: nextConversationId,\n      fileList: [file],\n    });\n    setFileList((list) => {\n      const nextList = list.filter((x) => x.uid !== file.uid);\n      nextList.push({\n        ...file,\n        originFileObj: file as any,\n        response: ret,\n        percent: 100,\n        status: ret?.code === 0 ? 'done' : 'error',\n      });\n      return nextList;\n    });\n  };\n\n  const isUploadingFile = fileList.some((x) => x.status === 'uploading');\n\n  const handlePressEnter = useCallback(async () => {\n    if (isUploadingFile) return;\n    const ids = getFileIds(fileList.filter((x) => isUploadSuccess(x)));\n\n    onPressEnter(ids);\n    setFileList([]);\n  }, [fileList, onPressEnter, isUploadingFile]);\n\n  const handleRemove = useCallback(\n    async (file: UploadFile) => {\n      const ids = get(file, 'response.data', []);\n      // Upload Successfully\n      if (Array.isArray(ids) && ids.length) {\n        if (isShared) {\n          await deleteDocument(ids);\n        } else {\n          await removeDocument(ids[0]);\n        }\n        setFileList((preList) => {\n          return preList.filter((x) => getFileId(x) !== ids[0]);\n        });\n      } else {\n        // Upload failed\n        setFileList((preList) => {\n          return preList.filter((x) => x.uid !== file.uid);\n        });\n      }\n    },\n    [removeDocument, deleteDocument, isShared],\n  );\n\n  const getDocumentInfoById = useCallback(\n    (id: string) => {\n      return documentInfos.find((x) => x.id === id);\n    },\n    [documentInfos],\n  );\n\n  useEffect(() => {\n    const ids = getFileIds(fileList);\n    setDocumentIds(ids);\n  }, [fileList, setDocumentIds]);\n\n  useEffect(() => {\n    if (\n      conversationIdRef.current &&\n      conversationId !== conversationIdRef.current\n    ) {\n      setFileList([]);\n    }\n    conversationIdRef.current = conversationId;\n  }, [conversationId, setFileList]);\n\n  return (\n    <Flex gap={20} vertical className={styles.messageInputWrapper}>\n      <Input\n        size=\"large\"\n        placeholder={t('sendPlaceholder')}\n        value={value}\n        disabled={disabled}\n        className={classNames({ [styles.inputWrapper]: fileList.length === 0 })}\n        suffix={\n          <Space>\n            {showUploadIcon && (\n              <Upload\n                onPreview={handlePreview}\n                onChange={handleChange}\n                multiple={false}\n                onRemove={handleRemove}\n                showUploadList={false}\n                beforeUpload={() => {\n                  return false;\n                }}\n              >\n                <Button\n                  type={'text'}\n                  disabled={disabled}\n                  icon={<Paperclip></Paperclip>}\n                ></Button>\n              </Upload>\n            )}\n            <Button\n              type=\"primary\"\n              onClick={handlePressEnter}\n              loading={sendLoading}\n              disabled={sendDisabled || isUploadingFile}\n            >\n              {t('send')}\n            </Button>\n          </Space>\n        }\n        onPressEnter={handlePressEnter}\n        onChange={onInputChange}\n      />\n\n      {fileList.length > 0 && (\n        <List\n          grid={{\n            gutter: 16,\n            xs: 1,\n            sm: 1,\n            md: 1,\n            lg: 1,\n            xl: 2,\n            xxl: 4,\n          }}\n          dataSource={fileList}\n          className={styles.listWrapper}\n          renderItem={(item) => {\n            const id = getFileId(item);\n            const documentInfo = getDocumentInfoById(id);\n            const fileExtension = getExtension(documentInfo?.name ?? '');\n            const fileName = item.originFileObj?.name ?? '';\n\n            return (\n              <List.Item>\n                <Card className={styles.documentCard}>\n                  <Flex gap={10} align=\"center\">\n                    {item.status === 'uploading' ? (\n                      <Spin\n                        indicator={\n                          <LoadingOutlined style={{ fontSize: 24 }} spin />\n                        }\n                      />\n                    ) : item.status === 'error' ? (\n                      <InfoCircleOutlined size={30}></InfoCircleOutlined>\n                    ) : (\n                      <FileIcon id={id} name={fileName}></FileIcon>\n                    )}\n                    <Flex vertical style={{ width: '90%' }}>\n                      <Text\n                        ellipsis={{ tooltip: fileName }}\n                        className={styles.nameText}\n                      >\n                        <b> {fileName}</b>\n                      </Text>\n                      {item.status === 'error' ? (\n                        t('uploadFailed')\n                      ) : (\n                        <>\n                          {item.percent !== 100 ? (\n                            t('uploading')\n                          ) : !item.response ? (\n                            t('parsing')\n                          ) : (\n                            <Space>\n                              <span>{fileExtension?.toUpperCase()},</span>\n                              <span>\n                                {formatBytes(\n                                  getDocumentInfoById(id)?.size ?? 0,\n                                )}\n                              </span>\n                            </Space>\n                          )}\n                        </>\n                      )}\n                    </Flex>\n                  </Flex>\n\n                  {item.status !== 'uploading' && (\n                    <span className={styles.deleteIcon}>\n                      <CloseCircleOutlined onClick={() => handleRemove(item)} />\n                    </span>\n                  )}\n                </Card>\n              </List.Item>\n            );\n          }}\n        />\n      )}\n    </Flex>\n  );\n};\n\nexport default memo(MessageInput);\n","import api from '@/utils/api';\nimport registerServer from '@/utils/register-server';\nimport request from '@/utils/request';\n\nconst {\n  getCanvas,\n  getCanvasSSE,\n  setCanvas,\n  listCanvas,\n  resetCanvas,\n  removeCanvas,\n  runCanvas,\n  listTemplates,\n  testDbConnect,\n  getInputElements,\n  debug,\n} = api;\n\nconst methods = {\n  getCanvas: {\n    url: getCanvas,\n    method: 'get',\n  },\n  getCanvasSSE: {\n    url: getCanvasSSE,\n    method: 'get',\n  },\n  setCanvas: {\n    url: setCanvas,\n    method: 'post',\n  },\n  listCanvas: {\n    url: listCanvas,\n    method: 'get',\n  },\n  resetCanvas: {\n    url: resetCanvas,\n    method: 'post',\n  },\n  removeCanvas: {\n    url: removeCanvas,\n    method: 'post',\n  },\n  runCanvas: {\n    url: runCanvas,\n    method: 'post',\n  },\n  listTemplates: {\n    url: listTemplates,\n    method: 'get',\n  },\n  testDbConnect: {\n    url: testDbConnect,\n    method: 'post',\n  },\n  getInputElements: {\n    url: getInputElements,\n    method: 'get',\n  },\n  debugSingle: {\n    url: debug,\n    method: 'post',\n  },\n} as const;\n\nconst chatService = registerServer<keyof typeof methods>(methods, request);\n\nexport default chatService;\n","import { ResponseType } from '@/interfaces/database/base';\nimport { DSL, IFlow, IFlowTemplate } from '@/interfaces/database/flow';\nimport { IDebugSingleRequestBody } from '@/interfaces/request/flow';\nimport i18n from '@/locales/config';\nimport { useGetSharedChatSearchParams } from '@/pages/chat/shared-hooks';\nimport flowService from '@/services/flow-service';\nimport { buildMessageListWithUuid } from '@/utils/chat';\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { message } from 'antd';\nimport { set } from 'lodash';\nimport get from 'lodash/get';\nimport { useParams } from 'umi';\nimport { v4 as uuid } from 'uuid';\n\nexport const EmptyDsl = {\n  graph: {\n    nodes: [\n      {\n        id: 'begin',\n        type: 'beginNode',\n        position: {\n          x: 50,\n          y: 200,\n        },\n        data: {\n          label: 'Begin',\n          name: 'begin',\n        },\n        sourcePosition: 'left',\n        targetPosition: 'right',\n      },\n    ],\n    edges: [],\n  },\n  components: {\n    begin: {\n      obj: {\n        component_name: 'Begin',\n        params: {},\n      },\n      downstream: ['Answer:China'], // other edge target is downstream, edge source is current node id\n      upstream: [], // edge source is upstream, edge target is current node id\n    },\n  },\n  messages: [],\n  reference: [],\n  history: [],\n  path: [],\n  answer: [],\n};\n\nexport const useFetchFlowTemplates = (): ResponseType<IFlowTemplate[]> => {\n  const { data } = useQuery({\n    queryKey: ['fetchFlowTemplates'],\n    initialData: [],\n    queryFn: async () => {\n      const { data } = await flowService.listTemplates();\n      if (Array.isArray(data?.data)) {\n        data.data.unshift({\n          id: uuid(),\n          title: 'Blank',\n          description: 'Create your agent from scratch',\n          dsl: EmptyDsl,\n        });\n      }\n\n      return data;\n    },\n  });\n\n  return data;\n};\n\nexport const useFetchFlowList = (): { data: IFlow[]; loading: boolean } => {\n  const { data, isFetching: loading } = useQuery({\n    queryKey: ['fetchFlowList'],\n    initialData: [],\n    gcTime: 0,\n    queryFn: async () => {\n      const { data } = await flowService.listCanvas();\n\n      return data?.data ?? [];\n    },\n  });\n\n  return { data, loading };\n};\n\nexport const useFetchFlow = (): {\n  data: IFlow;\n  loading: boolean;\n  refetch: () => void;\n} => {\n  const { id } = useParams();\n  const { sharedId } = useGetSharedChatSearchParams();\n\n  const {\n    data,\n    isFetching: loading,\n    refetch,\n  } = useQuery({\n    queryKey: ['flowDetail'],\n    initialData: {} as IFlow,\n    refetchOnReconnect: false,\n    refetchOnMount: false,\n    refetchOnWindowFocus: false,\n    gcTime: 0,\n    queryFn: async () => {\n      const { data } = await flowService.getCanvas({}, sharedId || id);\n\n      const messageList = buildMessageListWithUuid(\n        get(data, 'data.dsl.messages', []),\n      );\n      set(data, 'data.dsl.messages', messageList);\n\n      return data?.data ?? {};\n    },\n  });\n\n  return { data, loading, refetch };\n};\n\nexport const useFetchFlowSSE = (): {\n  data: IFlow;\n  loading: boolean;\n  refetch: () => void;\n} => {\n  const { sharedId } = useGetSharedChatSearchParams();\n\n  const {\n    data,\n    isFetching: loading,\n    refetch,\n  } = useQuery({\n    queryKey: ['flowDetailSSE'],\n    initialData: {} as IFlow,\n    refetchOnReconnect: false,\n    refetchOnMount: false,\n    refetchOnWindowFocus: false,\n    gcTime: 0,\n    queryFn: async () => {\n      if (!sharedId) return {};\n      const { data } = await flowService.getCanvasSSE({}, sharedId);\n\n      const messageList = buildMessageListWithUuid(\n        get(data, 'data.dsl.messages', []),\n      );\n      set(data, 'data.dsl.messages', messageList);\n\n      return data?.data ?? {};\n    },\n  });\n\n  return { data, loading, refetch };\n};\n\nexport const useSetFlow = () => {\n  const queryClient = useQueryClient();\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['setFlow'],\n    mutationFn: async (params: {\n      id?: string;\n      title?: string;\n      dsl?: DSL;\n      avatar?: string;\n    }) => {\n      const { data = {} } = await flowService.setCanvas(params);\n      if (data.code === 0) {\n        message.success(\n          i18n.t(`message.${params?.id ? 'modified' : 'created'}`),\n        );\n        queryClient.invalidateQueries({ queryKey: ['fetchFlowList'] });\n      }\n      return data;\n    },\n  });\n\n  return { data, loading, setFlow: mutateAsync };\n};\n\nexport const useDeleteFlow = () => {\n  const queryClient = useQueryClient();\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['deleteFlow'],\n    mutationFn: async (canvasIds: string[]) => {\n      const { data } = await flowService.removeCanvas({ canvasIds });\n      if (data.code === 0) {\n        queryClient.invalidateQueries({ queryKey: ['fetchFlowList'] });\n      }\n      return data?.data ?? [];\n    },\n  });\n\n  return { data, loading, deleteFlow: mutateAsync };\n};\n\nexport const useRunFlow = () => {\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['runFlow'],\n    mutationFn: async (params: { id: string; dsl: DSL }) => {\n      const { data } = await flowService.runCanvas(params);\n      if (data.code === 0) {\n        message.success(i18n.t(`message.modified`));\n      }\n      return data?.data ?? {};\n    },\n  });\n\n  return { data, loading, runFlow: mutateAsync };\n};\n\nexport const useResetFlow = () => {\n  const { id } = useParams();\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['resetFlow'],\n    mutationFn: async () => {\n      const { data } = await flowService.resetCanvas({ id });\n      return data;\n    },\n  });\n\n  return { data, loading, resetFlow: mutateAsync };\n};\n\nexport const useTestDbConnect = () => {\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['testDbConnect'],\n    mutationFn: async (params: any) => {\n      const ret = await flowService.testDbConnect(params);\n      if (ret?.data?.code === 0) {\n        message.success(ret?.data?.data);\n      } else {\n        message.error(ret?.data?.data);\n      }\n      return ret;\n    },\n  });\n\n  return { data, loading, testDbConnect: mutateAsync };\n};\n\nexport const useFetchInputElements = (componentId?: string) => {\n  const { id } = useParams();\n\n  const { data, isPending: loading } = useQuery({\n    queryKey: ['fetchInputElements', id, componentId],\n    initialData: [],\n    enabled: !!id && !!componentId,\n    retryOnMount: false,\n    refetchOnWindowFocus: false,\n    refetchOnReconnect: false,\n    gcTime: 0,\n    queryFn: async () => {\n      try {\n        const { data } = await flowService.getInputElements({\n          id,\n          component_id: componentId,\n        });\n        return data?.data ?? [];\n      } catch (error) {\n        console.log('🚀 ~ queryFn: ~ error:', error);\n      }\n    },\n  });\n\n  return { data, loading };\n};\n\nexport const useDebugSingle = () => {\n  const { id } = useParams();\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['debugSingle'],\n    mutationFn: async (params: IDebugSingleRequestBody) => {\n      const ret = await flowService.debugSingle({ id, ...params });\n      if (ret?.data?.code !== 0) {\n        message.error(ret?.data?.message);\n      }\n      return ret?.data?.data;\n    },\n  });\n\n  return { data, loading, debugSingle: mutateAsync };\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"chatWrapper\":\"chatWrapper___V2STu\",\"chatContainer\":\"chatContainer___JkSeI\",\"messageContainer\":\"messageContainer___v6SB0\"};","import MessageInput from '@/components/message-input';\nimport MessageItem from '@/components/message-item';\nimport { useClickDrawer } from '@/components/pdf-drawer/hooks';\nimport { MessageType, SharedFrom } from '@/constants/chat';\nimport { useSendButtonDisabled } from '@/pages/chat/hooks';\nimport { Flex, Spin } from 'antd';\nimport { forwardRef, useMemo } from 'react';\nimport {\n  useGetSharedChatSearchParams,\n  useSendSharedMessage,\n} from '../shared-hooks';\nimport { buildMessageItemReference } from '../utils';\n\nimport PdfDrawer from '@/components/pdf-drawer';\nimport { useFetchNextConversationSSE } from '@/hooks/chat-hooks';\nimport { useFetchFlowSSE } from '@/hooks/flow-hooks';\nimport { buildMessageUuidWithRole } from '@/utils/chat';\nimport styles from './index.less';\n\nconst ChatContainer = () => {\n  const { sharedId: conversationId, from } = useGetSharedChatSearchParams();\n  const { visible, hideModal, documentId, selectedChunk, clickDocumentButton } =\n    useClickDrawer();\n\n  const {\n    handlePressEnter,\n    handleInputChange,\n    value,\n    sendLoading,\n    loading,\n    ref,\n    derivedMessages,\n    hasError,\n  } = useSendSharedMessage();\n  const sendDisabled = useSendButtonDisabled(value);\n\n  const useFetchAvatar = useMemo(() => {\n    return from === SharedFrom.Agent\n      ? useFetchFlowSSE\n      : useFetchNextConversationSSE;\n  }, [from]);\n\n  const { data: avatarData } = useFetchAvatar();\n\n  if (!conversationId) {\n    return <div>empty</div>;\n  }\n\n  return (\n    <>\n      <Flex flex={1} className={styles.chatContainer} vertical>\n        <Flex flex={1} vertical className={styles.messageContainer}>\n          <div>\n            <Spin spinning={loading}>\n              {derivedMessages?.map((message, i) => {\n                return (\n                  <MessageItem\n                    key={buildMessageUuidWithRole(message)}\n                    avatardialog={avatarData?.avatar}\n                    item={message}\n                    nickname=\"You\"\n                    reference={buildMessageItemReference(\n                      {\n                        message: derivedMessages,\n                        reference: [],\n                      },\n                      message,\n                    )}\n                    loading={\n                      message.role === MessageType.Assistant &&\n                      sendLoading &&\n                      derivedMessages?.length - 1 === i\n                    }\n                    index={i}\n                    clickDocumentButton={clickDocumentButton}\n                    showLikeButton={false}\n                    showLoudspeaker={false}\n                  ></MessageItem>\n                );\n              })}\n            </Spin>\n          </div>\n          <div ref={ref} />\n        </Flex>\n\n        <MessageInput\n          isShared\n          value={value}\n          disabled={hasError}\n          sendDisabled={sendDisabled}\n          conversationId={conversationId}\n          onInputChange={handleInputChange}\n          onPressEnter={handlePressEnter}\n          sendLoading={sendLoading}\n          uploadMethod=\"external_upload_and_parse\"\n          showUploadIcon={false}\n        ></MessageInput>\n      </Flex>\n      {visible && (\n        <PdfDrawer\n          visible={visible}\n          hideModal={hideModal}\n          documentId={documentId}\n          chunk={selectedChunk}\n        ></PdfDrawer>\n      )}\n    </>\n  );\n};\n\nexport default forwardRef(ChatContainer);\n","import ChatContainer from './large';\n\nimport styles from './index.less';\n\nconst SharedChat = () => {\n  return (\n    <div className={styles.chatWrapper}>\n      <ChatContainer></ChatContainer>\n    </div>\n  );\n};\n\nexport default SharedChat;\n","const extendsObject = function () {\n  const result = Object.assign({}, arguments.length <= 0 ? undefined : arguments[0]);\n  for (let i = 1; i < arguments.length; i++) {\n    const obj = i < 0 || arguments.length <= i ? undefined : arguments[i];\n    if (obj) {\n      Object.keys(obj).forEach(key => {\n        const val = obj[key];\n        if (val !== undefined) {\n          result[key] = val;\n        }\n      });\n    }\n  }\n  return result;\n};\nexport default extendsObject;","\"use client\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n/* eslint-disable react/jsx-no-useless-fragment */\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { Panel } from 'rc-dialog';\nimport { withPureRenderTheme } from '../_util/PurePanel';\nimport { ConfigContext } from '../config-provider';\nimport { ConfirmContent } from './ConfirmDialog';\nimport { Footer, renderCloseIcon } from './shared';\nimport useStyle from './style';\nimport useCSSVarCls from '../config-provider/hooks/useCSSVarCls';\nconst PurePanel = props => {\n  const {\n      prefixCls: customizePrefixCls,\n      className,\n      closeIcon,\n      closable,\n      type,\n      title,\n      children,\n      footer\n    } = props,\n    restProps = __rest(props, [\"prefixCls\", \"className\", \"closeIcon\", \"closable\", \"type\", \"title\", \"children\", \"footer\"]);\n  const {\n    getPrefixCls\n  } = React.useContext(ConfigContext);\n  const rootPrefixCls = getPrefixCls();\n  const prefixCls = customizePrefixCls || getPrefixCls('modal');\n  const rootCls = useCSSVarCls(rootPrefixCls);\n  const [wrapCSSVar, hashId, cssVarCls] = useStyle(prefixCls, rootCls);\n  const confirmPrefixCls = `${prefixCls}-confirm`;\n  // Choose target props by confirm mark\n  let additionalProps = {};\n  if (type) {\n    additionalProps = {\n      closable: closable !== null && closable !== void 0 ? closable : false,\n      title: '',\n      footer: '',\n      children: ( /*#__PURE__*/React.createElement(ConfirmContent, Object.assign({}, props, {\n        prefixCls: prefixCls,\n        confirmPrefixCls: confirmPrefixCls,\n        rootPrefixCls: rootPrefixCls,\n        content: children\n      })))\n    };\n  } else {\n    additionalProps = {\n      closable: closable !== null && closable !== void 0 ? closable : true,\n      title,\n      footer: footer !== null && /*#__PURE__*/React.createElement(Footer, Object.assign({}, props)),\n      children\n    };\n  }\n  return wrapCSSVar( /*#__PURE__*/React.createElement(Panel, Object.assign({\n    prefixCls: prefixCls,\n    className: classNames(hashId, `${prefixCls}-pure-panel`, type && confirmPrefixCls, type && `${confirmPrefixCls}-${type}`, className, cssVarCls, rootCls)\n  }, restProps, {\n    closeIcon: renderCloseIcon(prefixCls, closeIcon),\n    closable: closable\n  }, additionalProps)));\n};\nexport default withPureRenderTheme(PurePanel);","\"use client\";\n\nimport confirm, { modalGlobalConfig, withConfirm, withError, withInfo, withSuccess, withWarn } from './confirm';\nimport destroyFns from './destroyFns';\nimport OriginModal from './Modal';\nimport PurePanel from './PurePanel';\nimport useModal from './useModal';\nfunction modalWarn(props) {\n  return confirm(withWarn(props));\n}\nconst Modal = OriginModal;\nModal.useModal = useModal;\nModal.info = function infoFn(props) {\n  return confirm(withInfo(props));\n};\nModal.success = function successFn(props) {\n  return confirm(withSuccess(props));\n};\nModal.error = function errorFn(props) {\n  return confirm(withError(props));\n};\nModal.warning = modalWarn;\nModal.warn = modalWarn;\nModal.confirm = function confirmFn(props) {\n  return confirm(withConfirm(props));\n};\nModal.destroyAll = function destroyAllFn() {\n  while (destroyFns.length) {\n    const close = destroyFns.pop();\n    if (close) {\n      close();\n    }\n  }\n};\nModal.config = modalGlobalConfig;\nModal._InternalPanelDoNotUseOrYouWillBeFired = PurePanel;\nif (process.env.NODE_ENV !== 'production') {\n  Modal.displayName = 'Modal';\n}\nexport default Modal;","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\n\nexport { mergeClasses, toKebabCase };\n//# sourceMappingURL=utils.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\nimport { mergeClasses } from './shared/src/utils.js';\n\nconst Icon = forwardRef(\n  ({\n    color = \"currentColor\",\n    size = 24,\n    strokeWidth = 2,\n    absoluteStrokeWidth,\n    className = \"\",\n    children,\n    iconNode,\n    ...rest\n  }, ref) => {\n    return createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: mergeClasses(\"lucide\", className),\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...Array.isArray(children) ? children : [children]\n      ]\n    );\n  }\n);\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport { mergeClasses, toKebabCase } from './shared/src/utils.js';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ className, ...props }, ref) => createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(`lucide-${toKebabCase(iconName)}`, className),\n      ...props\n    })\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.454.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Paperclip = createLucideIcon(\"Paperclip\", [\n  [\n    \"path\",\n    {\n      d: \"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48\",\n      key: \"1u3ebp\"\n    }\n  ]\n]);\n\nexport { Paperclip as default };\n//# sourceMappingURL=paperclip.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SpeechPlayer = void 0;\n/**\n * @typedef {{\n *  onPlaying?: () => void;\n *  onPause?: () => void;\n *  onChunkEnd?: () => void;\n *  mimeType?: string;\n *  audio?: HTMLAudioElement\n * }} Options\n */\nclass SpeechPlayer {\n    get audio() {\n        return this._audio;\n    }\n    set audio(audio) {\n        this._audio = audio;\n    }\n    /**\n     * @param { Options } options\n     */\n    constructor(options) {\n        /** @type {ArrayBuffer[]} */\n        this.sourceBufferCache = [];\n        /** @type {boolean} */\n        this.destroyed = false;\n        /** @type {boolean} */\n        this.mediaSourceOpened = false;\n        /** @type {Options} */\n        this.options = {};\n        if (options) {\n            this.audio = options.audio || new Audio();\n        }\n        this.options = options || {};\n    }\n    static async *streamAsyncIterable(stream) {\n        const reader = stream.getReader();\n        try {\n            while (true) {\n                const { done, value } = await reader.read();\n                if (done) {\n                    return;\n                }\n                yield value;\n            }\n        }\n        finally {\n            reader.releaseLock();\n        }\n    }\n    async init() {\n        return new Promise((resolve, reject) => {\n            this.destroyed = false;\n            this.mediaSource = new MediaSource();\n            this.audio.src = URL.createObjectURL(this.mediaSource);\n            this.initResolve = resolve;\n            this.mediaSource.addEventListener('sourceopen', this.sourceOpenHandle.bind(this));\n        });\n    }\n    sourceOpenHandle() {\n        var _a, _b;\n        if (this.initResolve) {\n            this.initResolve('');\n            this.initResolve = null;\n            URL.revokeObjectURL(this.audio.src);\n            this.sourceBuffer = this.mediaSource.addSourceBuffer((_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.mimeType) !== null && _b !== void 0 ? _b : 'audio/mpeg');\n            let timer = 0;\n            this.audio.addEventListener('playing', () => {\n                this.options.onPlaying && this.options.onPlaying();\n            });\n            this.audio.addEventListener('pause', () => {\n                this.options.onPause && this.options.onPause();\n            });\n            this.sourceBuffer.addEventListener('updateend', () => {\n                timer && clearTimeout(timer);\n                this.audio.paused && this.audio.play();\n                (!this.sourceBuffer.updating\n                    && this.sourceBufferCache.length)\n                    && this.sourceBuffer.appendBuffer(this.sourceBufferCache.shift());\n            });\n            this.audio.addEventListener('waiting', () => {\n                timer = setTimeout(() => {\n                    if (!this.sourceBuffer.updating\n                        && this.mediaSource.readyState === 'open'\n                        && this.sourceBufferCache.length === 0) {\n                        this.mediaSource.endOfStream();\n                        this.options.onChunkEnd && this.options.onChunkEnd();\n                    }\n                }, 500);\n            });\n            this.mediaSourceOpened = true;\n        }\n    }\n    /**\n     * Feed audio chunk data into player with SourceBuffer created from MediaSource\n     * @param {Uint8Array} chunk\n     */\n    feed(chunk) {\n        if (this.destroyed)\n            throw new ReferenceError('SpeechPlayer has been destroyed.');\n        if (!this.mediaSourceOpened)\n            throw new Error('MediaSource not opened, please do this update init resolved.');\n        this.sourceBufferCache.push(chunk);\n        !this.sourceBuffer.updating && this.sourceBuffer.appendBuffer(this.sourceBufferCache.shift());\n    }\n    /**\n     * Feed audio chunk just with Fetch response and deal automaticlly.\n     * @param {Response} response\n     */\n    async feedWithResponse(response) {\n        for await (const chunk of SpeechPlayer.streamAsyncIterable(response.body)) {\n            this.feed(chunk);\n        }\n    }\n    play() {\n        return new Promise((resolve, reject) => {\n            try {\n                if (this.paused) {\n                    this.audio.play();\n                    const playHandle = () => {\n                        resolve(true);\n                        this.audio.removeEventListener('playing', playHandle);\n                    };\n                    this.audio.addEventListener('playing', playHandle);\n                }\n                else {\n                    // audio not exist or audio status is playing will resolve false result.\n                    resolve(false);\n                }\n            }\n            catch (error) {\n                reject(error);\n            }\n        });\n    }\n    pause() {\n        return new Promise((resolve, reject) => {\n            try {\n                if (this.playing) {\n                    this.audio.pause();\n                    const pauseHandle = () => {\n                        this.audio.removeEventListener('pause', pauseHandle);\n                        resolve(true);\n                    };\n                    this.audio.addEventListener('pause', pauseHandle);\n                    // puase event must be fired before setTimeout.\n                    setTimeout(() => {\n                        resolve(this.paused);\n                    }, 0);\n                }\n                else {\n                    // audio not exist or audio status is paused will resolve false result.\n                    resolve(false);\n                }\n            }\n            catch (error) {\n                reject(error);\n            }\n        });\n    }\n    get paused() {\n        return this.audio && this.audio.paused;\n    }\n    get playing() {\n        return !this.paused;\n    }\n    /**\n     * Destroy speechPlayer instance, if want play again, need do init method again.\n     */\n    destroy() {\n        if (this.audio && this.audio.paused === false)\n            this.audio.pause();\n        this.destroyed = true;\n        this.mediaSourceOpened = false;\n        this.mediaSource && this.mediaSource.removeSourceBuffer(this.sourceBuffer);\n        this.mediaSource && this.mediaSource.endOfStream();\n        this.sourceBuffer.abort();\n        this.sourceBufferCache.splice(0);\n    }\n}\nexports.SpeechPlayer = SpeechPlayer;\n//# sourceMappingURL=Player.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SpeechPlayer = void 0;\nvar Player_1 = require(\"./Player\");\nObject.defineProperty(exports, \"SpeechPlayer\", { enumerable: true, get: function () { return Player_1.SpeechPlayer; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CopyToClipboard = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _copyToClipboard = _interopRequireDefault(require(\"copy-to-clipboard\"));\n\nvar _excluded = [\"text\", \"onCopy\", \"options\", \"children\"];\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar CopyToClipboard = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(CopyToClipboard, _React$PureComponent);\n\n  var _super = _createSuper(CopyToClipboard);\n\n  function CopyToClipboard() {\n    var _this;\n\n    _classCallCheck(this, CopyToClipboard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function (event) {\n      var _this$props = _this.props,\n          text = _this$props.text,\n          onCopy = _this$props.onCopy,\n          children = _this$props.children,\n          options = _this$props.options;\n\n      var elem = _react[\"default\"].Children.only(children);\n\n      var result = (0, _copyToClipboard[\"default\"])(text, options);\n\n      if (onCopy) {\n        onCopy(text, result);\n      } // Bypass onClick if it was present\n\n\n      if (elem && elem.props && typeof elem.props.onClick === 'function') {\n        elem.props.onClick(event);\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(CopyToClipboard, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          _text = _this$props2.text,\n          _onCopy = _this$props2.onCopy,\n          _options = _this$props2.options,\n          children = _this$props2.children,\n          props = _objectWithoutProperties(_this$props2, _excluded);\n\n      var elem = _react[\"default\"].Children.only(children);\n\n      return /*#__PURE__*/_react[\"default\"].cloneElement(elem, _objectSpread(_objectSpread({}, props), {}, {\n        onClick: this.onClick\n      }));\n    }\n  }]);\n\n  return CopyToClipboard;\n}(_react[\"default\"].PureComponent);\n\nexports.CopyToClipboard = CopyToClipboard;\n\n_defineProperty(CopyToClipboard, \"defaultProps\", {\n  onCopy: undefined,\n  options: undefined\n});","\"use strict\";\n\nvar _require = require('./Component'),\n    CopyToClipboard = _require.CopyToClipboard;\n\nCopyToClipboard.CopyToClipboard = CopyToClipboard;\nmodule.exports = CopyToClipboard;"],"names":["props","ref","AntdIcon","icon","Text","Typography","getFileId","file","get","getFileIds","fileList","reduce","pre","cur","concat","getBase64","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","MessageInput","_ref","_ref$isShared","isShared","disabled","value","onPressEnter","sendDisabled","sendLoading","onInputChange","conversationId","_ref$showUploadIcon","showUploadIcon","createConversationBeforeUploadDocument","_ref$uploadMethod","uploadMethod","t","useTranslate","removeDocument","useRemoveNextDocument","deleteDocument","useDeleteDocument","_useFetchDocumentInfo","useFetchDocumentInfosByIds","documentInfos","data","setDocumentIds","uploadAndParseDocument","useUploadAndParseDocument","conversationIdRef","useRef","_useState","useState","_useState2","_slicedToArray","setFileList","handlePreview","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","url","preview","originFileObj","sent","stop","_x","apply","arguments","handleChange","_ref4","_callee2","_ref3","nextConversationId","creatingRet","ret","_context2","name","code","id","list","push","_objectSpread","status","_toConsumableArray","nextList","filter","x","uid","response","percent","_x2","isUploadingFile","some","handlePressEnter","useCallback","_callee3","ids","_context3","abrupt","handleRemove","_ref6","_callee4","_context4","Array","isArray","length","preList","_x3","getDocumentInfoById","find","useEffect","current","_jsxs","Flex","gap","vertical","className","styles","messageInputWrapper","children","_jsx","Input","size","placeholder","classNames","_defineProperty","inputWrapper","suffix","Space","Upload","onPreview","onChange","multiple","onRemove","showUploadList","beforeUpload","Button","type","Paperclip","onClick","loading","List","grid","gutter","xs","sm","md","lg","xl","xxl","dataSource","listWrapper","renderItem","item","_documentInfo$name","_item$originFileObj$n","_item$originFileObj","_getDocumentInfoById$","_getDocumentInfoById","documentInfo","fileExtension","getExtension","fileName","Item","Card","documentCard","align","Spin","indicator","LoadingOutlined","style","fontSize","spin","InfoCircleOutlined","FileIcon","width","ellipsis","tooltip","nameText","_Fragment","toUpperCase","formatBytes","deleteIcon","CloseCircleOutlined","memo","methods","getCanvas","api","method","getCanvasSSE","setCanvas","listCanvas","resetCanvas","removeCanvas","runCanvas","listTemplates","testDbConnect","getInputElements","debugSingle","debug","registerServer","request","EmptyDsl","graph","nodes","position","y","label","sourcePosition","targetPosition","edges","components","begin","obj","component_name","params","downstream","upstream","messages","reference","history","path","answer","useFetchFlowTemplates","_queryFn","_useQuery","useQuery","queryKey","initialData","queryFn","_yield$flowService$li","flowService","unshift","uuid","title","description","dsl","useFetchFlowList","_queryFn2","_useQuery2","gcTime","_data$data","_yield$flowService$li2","isFetching","useFetchFlow","_queryFn3","useParams","sharedId","useGetSharedChatSearchParams","_useQuery3","refetchOnReconnect","refetchOnMount","refetchOnWindowFocus","_data$data2","_yield$flowService$ge","messageList","buildMessageListWithUuid","set","refetch","useFetchFlowSSE","_queryFn4","_useQuery4","_data$data3","_yield$flowService$ge2","useSetFlow","_mutationFn","queryClient","useQueryClient","_useMutation","useMutation","mutationKey","mutationFn","_callee5","_yield$flowService$se","_yield$flowService$se2","_context5","message","success","i18n","invalidateQueries","isPending","setFlow","mutateAsync","useDeleteFlow","_mutationFn2","_useMutation2","_callee6","canvasIds","_data$data4","_yield$flowService$re","_context6","deleteFlow","useResetFlow","_mutationFn4","_useMutation4","_callee8","_yield$flowService$re2","_context8","resetFlow","useTestDbConnect","_mutationFn5","_useMutation5","_callee9","_ret$data","_ret$data2","_ret$data3","_context9","_x4","useFetchInputElements","componentId","_queryFn5","_useQuery5","enabled","retryOnMount","_callee10","_data$data6","_yield$flowService$ge3","_data","_context10","component_id","t0","console","log","useDebugSingle","_mutationFn6","_useMutation6","_callee11","_ret$data4","_ret$data6","_ret$data5","_context11","_x5","ChatContainer","_useGetSharedChatSear","from","_useClickDrawer","useClickDrawer","visible","hideModal","documentId","selectedChunk","clickDocumentButton","_useSendSharedMessage","useSendSharedMessage","handleInputChange","derivedMessages","hasError","useSendButtonDisabled","avatarData","useMemo","SharedFrom","Agent","useFetchNextConversationSSE","useFetchAvatar","flex","spinning","map","i","MessageItem","avatardialog","avatar","nickname","buildMessageItemReference","role","MessageType","Assistant","index","showLikeButton","showLoudspeaker","buildMessageUuidWithRole","PdfDrawer","chunk","forwardRef","Object","assign","undefined","keys","forEach","key","val","__rest","s","e","p","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","propertyIsEnumerable","prefixCls","customizePrefixCls","closeIcon","closable","footer","restProps","getPrefixCls","rootPrefixCls","rootCls","useCSSVarCls","wrapCSSVar","hashId","cssVarCls","confirmPrefixCls","additionalProps","content","modalWarn","useModal","info","warning","warn","confirm","destroyAll","destroyFns","close","pop","config","_InternalPanelDoNotUseOrYouWillBeFired","mergeClasses","classes","array","Boolean","trim","join","defaultAttributes","xmlns","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","Icon","color","absoluteStrokeWidth","iconNode","rest","createElement","Number","tag","attrs","createLucideIcon","iconName","Component","string","replace","toLowerCase","displayName","d","defineProperty","exports","SpeechPlayer","audio","this","_audio","constructor","options","sourceBufferCache","destroyed","mediaSourceOpened","Audio","static","stream","getReader","done","read","releaseLock","async","mediaSource","MediaSource","src","URL","createObjectURL","initResolve","addEventListener","sourceOpenHandle","bind","_a","_b","revokeObjectURL","sourceBuffer","addSourceBuffer","mimeType","timer","onPlaying","onPause","clearTimeout","paused","play","updating","appendBuffer","shift","setTimeout","readyState","endOfStream","onChunkEnd","feed","ReferenceError","Error","streamAsyncIterable","body","playHandle","removeEventListener","pause","playing","pauseHandle","destroy","removeSourceBuffer","abort","splice","Player_1","enumerable","_typeof","Symbol","iterator","CopyToClipboard","_react","_interopRequireDefault","_copyToClipboard","_excluded","__esModule","ownKeys","object","enumerableOnly","symbols","sym","getOwnPropertyDescriptor","target","source","getOwnPropertyDescriptors","defineProperties","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","_classCallCheck","instance","Constructor","TypeError","_defineProperties","descriptor","configurable","writable","_setPrototypeOf","o","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","valueOf","_isNativeReflectConstruct","Super","_getPrototypeOf","NewTarget","_possibleConstructorReturn","self","_assertThisInitialized","getPrototypeOf","_React$PureComponent","subClass","superClass","create","_inherits","protoProps","staticProps","_super","_this","_len","args","_key","event","_this$props","text","onCopy","elem","Children","only","_this$props2","cloneElement","PureComponent","module"],"sourceRoot":""}