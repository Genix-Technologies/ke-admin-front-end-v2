(self.webpackChunk=self.webpackChunk||[]).push([[4677,8530],{3234:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a=n(5089),r=n(46693),i=n(93352),o=n(62435),c="thumbnailImg___cbGoI",s=n(86074),u=function(e){var t=e.name,n=e.id,u=(0,a.RT)(t),l=(0,i.x2)(),d=l.data,f=l.setDocumentIds,m=d[n];return(0,o.useEffect)((function(){n&&f([n])}),[n,f]),m?(0,s.jsx)("img",{src:m,className:c}):(0,s.jsx)(r.Z,{name:"file-icon/".concat(u),width:24})}},7306:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var a=n(97857),r=n.n(a),i=n(13769),o=n.n(i),c=n(93967),s=n.n(c),u=n(72287),l=n(21373),d=n(77234),f=n(47298),m=n(78600),p=n(77437),g=(n(81897),n(71250)),h="text___QzeTq",v="code___dMLXp",_=n(86074),x=["children","className","node"],k=function(e){var t=e.children;return(0,_.jsx)(u.U,{remarkPlugins:[m.Z,p.Z],rehypePlugins:[f.Z,d.Z],className:s()(h),components:{code:function(e){var t=e.children,n=e.className,a=(e.node,o()(e,x)),i=/language-(\w+)/.exec(n||"");return i?(0,_.jsx)(l.Z,r()(r()({},a),{},{PreTag:"div",language:i[1],children:String(t).replace(/\n$/,"")})):(0,_.jsx)("code",r()(r()({},a),{},{className:"".concat(n," ").concat(v),children:t}))}},children:t?(0,g.CE)(t):t})}},43714:function(e,t,n){"use strict";n.d(t,{s:function(){return _},Z:function(){return v}});var a=n(97857),r=n.n(a),i=n(13769),o=n.n(i),c=n(60806),s=n(55241),u=n(93967),l=n.n(u),d="primitiveImg___VkCiH",f="image___BCkCB",m="imagePreview___qFyP3",p=n(86074),g=["id","className"],h=function(e){var t=e.id,n=e.className,a=o()(e,g);return(0,p.jsx)("img",r()(r()({},a),{},{src:"".concat(c.N,"/document/image/").concat(t),alt:"",className:l()(d,n)}))},v=h,_=function(e){var t=e.id;return(0,p.jsx)(s.Z,{placement:"left",content:(0,p.jsx)(h,{id:t,className:m}),children:(0,p.jsx)(h,{id:t,className:f})})}},373:function(e,t,n){"use strict";var a=n(15009),r=n.n(a),i=n(99289),o=n.n(i),c=n(25098),s=n.n(c),u=n(97857),l=n.n(u),d=n(5574),f=n.n(d),m=n(12444),p=n.n(m),g=n(72004),h=n.n(g),v=n(28785),_=n.n(v),x=n(48374),k=n.n(x),y=n(31996),b=n.n(y),Z=n(26037),w=n.n(Z),j=n(9783),S=n.n(j),C=n(1242),T=n(38622),I=n(41609),E=n.n(I),N=n(62435),P=n(4511),F=n(86074),D="root",M=["#5B8FF9","#F6BD16","#5AD8A6","#945FB9","#E86452","#6DC8EC","#FF99C3","#1E9493","#FF9845","#5D7092"],L="collapse-expand",R=function(e){b()(n,e);var t=w()(n);function n(e){return p()(this,n),Object.assign(e.style,n.defaultStyleProps),t.call(this,e)}return h()(n,[{key:"childrenData",get:function(){var e;return null===(e=this.attributes.context)||void 0===e?void 0:e.model.getChildrenData(this.id)}},{key:"getKeyStyle",value:function(e){var t=this.getSize(e),a=f()(t,2),r=a[0],i=a[1],o=_()(k()(n.prototype),"getKeyStyle",this).call(this,e);return l()(l()({width:r,height:i},o),{},{fill:"transparent"})}},{key:"drawKeyShape",value:function(e,t){var n=this.getKeyStyle(e);return this.upsert("key",C.UL,n,t)}},{key:"getLabelStyle",value:function(e){return!(!1===e.label||!e.labelText)&&(0,T.zs)(this.getGraphicStyle(e),"label")}},{key:"drawIconArea",value:function(e,t){var n=this.getSize(e),a={fill:"transparent",height:30,width:12,x:-6,y:f()(n,2)[1],zIndex:-1};this.upsert("icon-area",C.UL,a,t)}},{key:"forwardEvent",value:function(e,t,n){e&&!Reflect.has(e,"__bind__")&&(Reflect.set(e,"__bind__",!0),e.addEventListener(t,n))}},{key:"getCountStyle",value:function(e){var t=e.collapsed,n=e.color;if(t){var a,r=this.getSize(e),i=f()(r,2)[1];return{backgroundFill:n,cursor:"pointer",fill:"#fff",fontSize:8,padding:[0,10],text:"".concat(null===(a=this.childrenData)||void 0===a?void 0:a.length),textAlign:"center",y:i+8}}return!1}},{key:"drawCountShape",value:function(e,t){var n=this,a=this.getCountStyle(e),r=this.upsert("count",T.Ct,a,t);this.forwardEvent(r,T.C9.CLICK,(function(t){t.stopPropagation(),e.context.graph.emit(L,{id:n.id,collapsed:!1})}))}},{key:"isShowCollapse",value:function(e){var t;return!e.collapsed&&Array.isArray(this.childrenData)&&(null===(t=this.childrenData)||void 0===t?void 0:t.length)>0}},{key:"getCollapseStyle",value:function(e){var t=e.showIcon,n=e.color;if(!this.isShowCollapse(e))return!1;var a=this.getSize(e);return{visibility:t?"visible":"hidden",backgroundFill:n,backgroundHeight:12,backgroundWidth:12,cursor:"pointer",fill:"#fff",fontFamily:"iconfont",fontSize:8,text:"",textAlign:"center",x:-1,y:f()(a,2)[1]+8}}},{key:"drawCollapseShape",value:function(e,t){var n=this,a=this.getCollapseStyle(e),r=this.upsert("collapse-expand",T.Ct,a,t);this.forwardEvent(r,T.C9.CLICK,(function(t){t.stopPropagation(),e.context.graph.emit(L,{id:n.id,collapsed:!e.collapsed})}))}},{key:"getAddStyle",value:function(e){var t=e.collapsed,n=e.showIcon;if(t)return!1;var a=this.getSize(e),r="#ddd";return{visibility:n?"visible":"hidden",backgroundFill:"#fff",backgroundHeight:12,backgroundLineWidth:1,backgroundStroke:r,backgroundWidth:12,cursor:"pointer",fill:r,fontFamily:"iconfont",text:"",textAlign:"center",x:-1,y:f()(a,2)[1]+(this.isShowCollapse(e)?22:8)}}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parsedAttributes,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;_()(k()(n.prototype),"render",this).call(this,e,t),this.drawCountShape(e,t),this.drawIconArea(e,t),this.drawCollapseShape(e,t)}}]),n}(T.Hd);S()(R,"defaultStyleProps",{ports:[{key:"in",placement:"right-bottom"},{key:"out",placement:"left-bottom"}]});var A=function(e){b()(n,e);var t=w()(n);function n(){return p()(this,n),t.apply(this,arguments)}return h()(n,[{key:"getControlPoints",value:function(e,t,n){return[[f()(t,1)[0],f()(n,2)[1]]]}}]),n}(T.aH),K=function(e){b()(n,e);var t=w()(n);function n(e,a){var i;return p()(this,n),i=t.call(this,e,a),S()(s()(i),"status","idle"),S()(s()(i),"showIcon",(function(e){i.setIcon(e,!0)})),S()(s()(i),"hideIcon",(function(e){i.setIcon(e,!1)})),S()(s()(i),"setIcon",(function(e,t){if("idle"===i.status){var n=e.target.id,a=i.context,r=a.graph,o=a.element;r.updateNodeData([{id:n,style:{showIcon:t}}]),null==o||o.draw({animation:!1,silence:!0})}})),S()(s()(i),"onCollapseExpand",function(){var e=o()(r()().mark((function e(t){var n,a,o;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.status="busy",n=t.id,a=t.collapsed,o=i.context.graph,!a){e.next=8;break}return e.next=6,o.collapseElement(n);case 6:e.next=10;break;case 8:return e.next=10,o.expandElement(n);case 10:i.status="idle";case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.bindEvents(),i}return h()(n,[{key:"update",value:function(e){this.unbindEvents(),_()(k()(n.prototype),"update",this).call(this,e),this.bindEvents()}},{key:"bindEvents",value:function(){var e=this.context.graph;e.on(T.bG.POINTER_ENTER,this.showIcon),e.on(T.bG.POINTER_LEAVE,this.hideIcon),e.on(L,this.onCollapseExpand)}},{key:"unbindEvents",value:function(){var e=this.context.graph;e.off(T.bG.POINTER_ENTER,this.showIcon),e.off(T.bG.POINTER_LEAVE,this.hideIcon),e.off(L,this.onCollapseExpand)}}]),n}(T.Zt);function G(e){var t=e.error;return(0,F.jsxs)("div",{role:"alert",children:[(0,F.jsx)("p",{children:"Something went wrong:"}),(0,F.jsx)("pre",{style:{color:"red"},children:t.message})]})}(0,T.z2)(T.MD.NODE,"indented",R),(0,T.z2)(T.MD.EDGE,"indented",A),(0,T.z2)(T.MD.BEHAVIOR,"collapse-expand-tree",K);t.Z=function(e){var t=e.data,n=e.show,a=e.style,i=void 0===a?{}:a,c=(0,N.useRef)(null),s=(0,N.useRef)(null),u=N.useCallback((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t.id||(t.id=n?"".concat(n,"-").concat(a):"root"),t.children&&t.children.forEach((function(n,a){return e(n,t.id,a)}))}),[]),d=(0,N.useCallback)(function(){var e=o()(r()().mark((function e(t){var n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new T.kJ({container:c.current,x:60,node:{type:"indented",style:{size:function(e){return[6*e.id.length+10,20]},labelBackground:function(e){return e.id===D},labelBackgroundRadius:0,labelBackgroundFill:"#576286",labelFill:function(e){return e.id===D?"#fff":"#666"},labelText:function(e){var t;return(null===(t=e.style)||void 0===t?void 0:t.labelText)||e.id},labelTextAlign:function(e){return e.id===D?"center":"left"},labelTextBaseline:"top",color:function(e){var t=n.getAncestorsData(e.id,"tree").length-1;return M[t%M.length]||"#576286"}},state:{selected:{lineWidth:0,labelFill:"#40A8FF",labelBackground:!0,labelFontWeight:"normal",labelBackgroundFill:"#e8f7ff",labelBackgroundRadius:10}}},edge:{type:"indented",style:{radius:16,lineWidth:2,sourcePort:"out",targetPort:"in",stroke:function(e){var t=n.getAncestorsData(e.source,"tree").length;return M[t%M.length]||"black"}}},layout:{type:"indented",direction:"LR",isHorizontal:!0,indent:40,getHeight:function(){return 20},getVGap:function(){return 10}},behaviors:["scroll-canvas","collapse-expand-tree",{type:"click-select",enable:function(e){return"node"===e.targetType&&e.target.id!==D}}]}),s.current&&s.current.destroy(),s.current=n,u(t),null==n||n.setData((0,T.RN)(t)),null==n||n.render();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u]);return(0,N.useEffect)((function(){E()(t)||d(t)}),[d,t]),(0,F.jsx)(P.SV,{fallbackRender:G,children:(0,F.jsx)("div",{id:"tree",ref:c,style:l()({width:"90vw",height:"80vh",display:n?"block":"none"},i)})})}},18334:function(e,t,n){"use strict";var a=n(5089),r=(n(62435),n(86074));t.Z=function(e){var t=e.children,n=e.link,i=e.preventDefault,o=void 0!==i&&i,c=e.color,s=void 0===c?"rgb(15, 79, 170)":c,u=e.documentId,l=e.documentName,d=e.prefix,f=void 0===d?"file":d,m=n,p=(0,a.RT)(l);return n||(m="/document/".concat(u,"?ext=").concat(p,"&prefix=").concat(f)),(0,r.jsx)("a",{target:"_blank",onClick:!o||(0,a.Ep)(p)?void 0:function(e){return e.preventDefault()},href:m,rel:"noreferrer",style:{color:s,wordBreak:"break-all"},children:t})}},71580:function(e,t,n){"use strict";n.d(t,{B:function(){return c}});var a=n(5574),r=n.n(a),i=n(86968),o=n(62435),c=function(){var e=(0,i.pG)(),t=e.visible,n=e.showModal,a=e.hideModal,c=(0,o.useState)({}),s=r()(c,2),u=s[0],l=s[1],d=(0,o.useState)(""),f=r()(d,2),m=f[0],p=f[1],g=(0,o.useCallback)((function(e,t){n(),l(t),p(e)}),[n]);return{clickDocumentButton:g,visible:t,showModal:n,hideModal:a,selectedChunk:u,documentId:m}}},61110:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var a=n(85265),r=n(97857),i=n.n(r),o=n(5574),c=n.n(o),s=n(93352),u=n(4772),l=n(21687),d=n(62435),f=n(49723),m=n(96449),p="documentContainer___kWzt7",g=n(86074),h=function(e){var t=e.comment;return t.text?(0,g.jsxs)("div",{className:"Highlight__popup",children:[t.emoji," ",t.text]}):null},v=function(e){var t=e.chunk,n=e.documentId,a=e.visible,r=(0,s.pC)(n),o=(0,s.tl)(t),v=o.highlights,_=o.setWidthAndHeight,x=(0,d.useRef)((function(){})),k=(0,d.useState)(!1),y=c()(k,2),b=y[0],Z=y[1],w=r(),j=(0,m.s)(w),S=function(){};return(0,d.useEffect)((function(){Z(a)}),[a]),(0,d.useEffect)((function(){v.length>0&&b&&(Z(!1),x.current(v[0]))}),[v,b]),(0,g.jsx)("div",{className:p,children:(0,g.jsx)(f.Hz,{url:w,beforeLoad:(0,g.jsx)(l.Z,{active:!0}),workerSrc:"/pdfjs-dist/pdf.worker.min.js",errorMessage:(0,g.jsx)(u.Z,{children:j}),children:function(e){return e.getPage(1).then((function(e){var t=e.getViewport({scale:1}),n=t.width,a=t.height;_(n,a)})),(0,g.jsx)(f.Nb,{pdfDocument:e,enableAreaSelection:function(e){return e.altKey},onScrollChange:S,scrollRef:function(e){x.current=e,Z(!0)},onSelectionFinished:function(){return null},highlightTransform:function(e,t,n,a,r,o,c){var s=!Boolean(e.content&&e.content.image)?(0,g.jsx)(f.y$,{isScrolledTo:c,position:e.position,comment:e.comment}):(0,g.jsx)(f.PD,{isScrolledTo:c,highlight:e,onChange:function(){}});return(0,g.jsx)(f.GI,{popupContent:(0,g.jsx)(h,i()({},e)),onMouseOver:function(t){return n(e,(function(){return t}))},onMouseOut:a,children:s},t)},highlights:v})}})})},_=function(e){var t=e.visible,n=void 0!==t&&t,r=e.hideModal,i=e.documentId,o=e.chunk;return(0,g.jsx)(a.Z,{title:"Document Previewer",onClose:r,open:n,width:"50vw",children:(0,g.jsx)(v,{documentId:i,chunk:o,visible:n})})}},96449:function(e,t,n){"use strict";n.d(t,{s:function(){return d}});var a=n(15009),r=n.n(a),i=n(99289),o=n.n(i),c=n(5574),s=n.n(c),u=n(87066),l=n(62435),d=function(e){var t=(0,l.useState)(""),n=s()(t,2),a=n[0],i=n[1],c=(0,l.useCallback)(o()(r()().mark((function t(){var n,a;return r()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.Z.get(e);case 2:n=t.sent,0!==(a=n.data).code&&i(null==a?void 0:a.message);case 5:case"end":return t.stop()}}),t)}))),[e]);return(0,l.useEffect)((function(){c()}),[c]),a}},40169:function(e,t,n){"use strict";n.d(t,{Kj:function(){return s},Wy:function(){return c},eV:function(){return i},nK:function(){return u},qg:function(){return o},qp:function(){return l},rU:function(){return d},ru:function(){return m}});var a=n(19632),r=n.n(a),i={aep:"aep.svg",ai:"ai.svg",avi:"avi.svg",css:"css.svg",csv:"csv.svg",dmg:"dmg.svg",doc:"doc.svg",docx:"docx.svg",eps:"eps.svg",exe:"exe.svg",fig:"fig.svg",gif:"gif.svg",html:"html.svg",indd:"indd.svg",java:"java.svg",jpeg:"jpeg.svg",jpg:"jpg.svg",js:"js.svg",json:"json.svg",mkv:"mkv.svg",mp3:"mp3.svg",mp4:"mp4.svg",mpeg:"mpeg.svg",pdf:"pdf.svg",png:"png.svg",ppt:"ppt.svg",pptx:"pptx.svg",psd:"psd.svg",rss:"rss.svg",sql:"sql.svg",svg:"svg.svg",tiff:"tiff.svg",txt:"txt.svg",wav:"wav.svg",webp:"webp.svg",xls:"xls.svg",xlsx:"xlsx.svg",xml:"xml.svg"},o=["English","Other_language"],c={English:"English",Other_language:"Lang 2"},s={English:"en",Chinese:"zh","Traditional Chinese":"zh-TRADITIONAL",Indonesia:"id",Spanish:"es",Vietnamese:"vi",Japanese:"ja","Portuguese BR":"pt-br"},u=function(e){return e.Bmp="image/bmp",e.Csv="text/csv",e.Odt="application/vnd.oasis.opendocument.text",e.Doc="application/msword",e.Docx="application/vnd.openxmlformats-officedocument.wordprocessingml.document",e.Gif="image/gif",e.Htm="text/htm",e.Html="text/html",e.Jpg="image/jpg",e.Jpeg="image/jpeg",e.Pdf="application/pdf",e.Png="image/png",e.Ppt="application/vnd.ms-powerpoint",e.Pptx="application/vnd.openxmlformats-officedocument.presentationml.presentation",e.Tiff="image/tiff",e.Txt="text/plain",e.Xls="application/vnd.ms-excel",e.Xlsx="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",e.Mp4="video/mp4",e.Json="application/json",e}({}),l="demo.ragflow.io",d=["jpg","jpeg","png","gif","bmp","tif","tiff","webp","ico"],f=["xlsx","xls","pdf","docx"].concat(d),m=r()(f)},39259:function(e,t,n){"use strict";n.d(t,{CV:function(){return E},F1:function(){return j},Jf:function(){return Z},PI:function(){return C},WH:function(){return y},XH:function(){return k},d1:function(){return N},ef:function(){return S},fS:function(){return x},hZ:function(){return T},jd:function(){return _},m_:function(){return I},nv:function(){return b},oH:function(){return P},v:function(){return w}});var a=n(5574),r=n.n(a),i=n(15009),o=n.n(i),c=n(99289),s=n.n(c),u=n(40169),l=n(72668),d=n(78551),f=n(30202),m=n(4527),p=n(45360),g=n(96486),h=n(62435),v=n(67421),_=function(){var e,t=(0,v.$G)().i18n,n=(0,d.a)({queryKey:["userInfo"],initialData:{},gcTime:0,queryFn:(e=s()(o()().mark((function e(){var n,a,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.user_info();case 2:return a=e.sent,0===(r=a.data).code&&t.changeLanguage(u.Kj[r.data.language]),e.abrupt("return",null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{});case 6:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:n.data,loading:n.isFetching}},x=function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,v.$G)(),a=(n.t,(0,d.a)({queryKey:["tenantInfo"],initialData:{},gcTime:0,queryFn:(e=s()(o()().mark((function e(){var n,a,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.get_tenant_info();case 2:if(n=e.sent,0!==(a=n.data).code){e.next=10;break}return r=a.data,t&&((0,g.isEmpty)(r.embd_id)||(0,g.isEmpty)(r.llm_id)),r.chat_id=r.llm_id,r.speech2text_id=r.asr_id,e.abrupt("return",r);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})),r=a.data,i=a.isFetching;return{data:r,loading:i}},k=function(){var e=x(!0).data;return(0,h.useMemo)((function(){var t,n;return(null!==(t=null==e||null===(n=e.parser_ids)||void 0===n?void 0:n.split(","))&&void 0!==t?t:[]).map((function(e){var t=e.split(":");return{value:t[0],label:t[1]}}))}),[e])},y=function(){var e,t=(0,f.NL)(),n=(0,v.$G)().t,a=(0,m.D)({mutationKey:["saveSetting"],mutationFn:(e=s()(o()().mark((function e(a){var r,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.setting(a);case 2:return r=e.sent,0===(i=r.data).code&&(p.ZP.success(n("message.modified")),t.invalidateQueries({queryKey:["userInfo"]})),e.abrupt("return",null==i?void 0:i.code);case 6:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})});return{data:a.data,loading:a.isPending,saveSetting:a.mutateAsync}},b=function(){var e=(0,h.useState)(""),t=r()(e,2),n=t[0],a=t[1],i=(0,h.useState)(!1),c=r()(i,2),u=c[0],d=c[1];return{fetchSystemVersion:(0,h.useCallback)(s()(o()().mark((function e(){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,l.ZP.getSystemVersion();case 4:t=e.sent,0===(n=t.data).code&&(a(n.data),d(!1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),d(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[]),version:n,loading:u}},Z=function(){var e=(0,h.useState)({}),t=r()(e,2),n=t[0],a=t[1],i=(0,h.useState)(!1),c=r()(i,2),u=c[0],d=c[1];return{systemStatus:n,fetchSystemStatus:(0,h.useCallback)(s()(o()().mark((function e(){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,l.ZP.getSystemStatus();case 3:t=e.sent,0===(n=t.data).code&&(a(n.data),d(!1));case 6:case"end":return e.stop()}}),e)}))),[]),loading:u}},w=function(){var e,t=(0,m.D)({mutationKey:["fetchManualSystemTokenList"],mutationFn:(e=s()(o()().mark((function e(){var t,n,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.listToken();case 2:return n=e.sent,a=n.data,e.abrupt("return",null!==(t=null==a?void 0:a.data)&&void 0!==t?t:[]);case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:t.data,loading:t.isPending,fetchSystemTokenList:t.mutateAsync}},j=function(){var e,t=(0,d.a)({queryKey:["fetchSystemTokenList"],initialData:[],gcTime:0,queryFn:(e=s()(o()().mark((function e(){var t,n,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.listToken();case 2:return n=e.sent,a=n.data,e.abrupt("return",null!==(t=null==a?void 0:a.data)&&void 0!==t?t:[]);case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:t.data,loading:t.isFetching,refetch:t.refetch}},S=function(){var e,t=(0,f.NL)(),n=(0,v.$G)().t,a=(0,m.D)({mutationKey:["removeSystemToken"],mutationFn:(e=s()(o()().mark((function e(a){var r,i,c;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.removeToken({},a);case 2:return i=e.sent,0===(c=i.data).code&&(p.ZP.success(n("message.deleted")),t.invalidateQueries({queryKey:["fetchSystemTokenList"]})),e.abrupt("return",null!==(r=null==c?void 0:c.data)&&void 0!==r?r:[]);case 6:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})});return{data:a.data,loading:a.isPending,removeToken:a.mutateAsync}},C=function(){var e,t=(0,f.NL)(),n=(0,m.D)({mutationKey:["createSystemToken"],mutationFn:(e=s()(o()().mark((function e(n){var a,r,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.createToken(n);case 2:return r=e.sent,0===(i=r.data).code&&t.invalidateQueries({queryKey:["fetchSystemTokenList"]}),e.abrupt("return",null!==(a=null==i?void 0:i.data)&&void 0!==a?a:[]);case 6:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})});return{data:n.data,loading:n.isPending,createToken:n.mutateAsync}},T=function(){var e,t=x().data.tenant_id,n=(0,d.a)({queryKey:["listTenantUser",t],initialData:[],gcTime:0,enabled:!!t,queryFn:(e=s()(o()().mark((function e(){var n,a,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.WX)(t);case 2:return a=e.sent,r=a.data,e.abrupt("return",null!==(n=null==r?void 0:r.data)&&void 0!==n?n:[]);case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:n.data,loading:n.isFetching,refetch:n.refetch}},I=function(){var e,t=x().data,n=(0,f.NL)(),a=(0,m.D)({mutationKey:["addTenantUser"],mutationFn:(e=s()(o()().mark((function e(a){var r,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.AH)(t.tenant_id,a);case 2:return r=e.sent,0===(i=r.data).code&&n.invalidateQueries({queryKey:["listTenantUser"]}),e.abrupt("return",null==i?void 0:i.code);case 6:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})});return{data:a.data,loading:a.isPending,addTenantUser:a.mutateAsync}},E=function(){var e,t=x().data,n=(0,f.NL)(),a=(0,v.$G)().t,r=(0,m.D)({mutationKey:["deleteTenantUser"],mutationFn:(e=s()(o()().mark((function e(r){var i,c,s,u,d;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.userId,s=r.tenantId,e.next=3,(0,l.EE)({tenantId:null!=s?s:t.tenant_id,userId:c});case 3:return u=e.sent,0===(d=u.data).code&&(p.ZP.success(a("message.deleted")),n.invalidateQueries({queryKey:["listTenantUser"]}),n.invalidateQueries({queryKey:["listTenant"]})),e.abrupt("return",null!==(i=null==d?void 0:d.data)&&void 0!==i?i:[]);case 7:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})});return{data:r.data,loading:r.isPending,deleteTenantUser:r.mutateAsync}},N=function(){var e,t=x().data.tenant_id,n=(0,d.a)({queryKey:["listTenant",t],initialData:[],gcTime:0,enabled:!!t,queryFn:(e=s()(o()().mark((function e(){var t,n,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.vh)();case 2:return n=e.sent,a=n.data,e.abrupt("return",null!==(t=null==a?void 0:a.data)&&void 0!==t?t:[]);case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:n.data,loading:n.isFetching,refetch:n.refetch}},P=function(){var e,t=(0,f.NL)(),n=(0,v.$G)().t,a=(0,m.D)({mutationKey:["agreeTenant"],mutationFn:(e=s()(o()().mark((function e(a){var r,i,c;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.FG)(a);case 2:return i=e.sent,0===(c=i.data).code&&(p.ZP.success(n("message.operated")),t.invalidateQueries({queryKey:["listTenant"]})),e.abrupt("return",null!==(r=null==c?void 0:c.data)&&void 0!==r?r:[]);case 6:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})});return{data:a.data,loading:a.isPending,agreeTenant:a.mutateAsync}}},46008:function(e,t,n){"use strict";n.d(t,{Z:function(){return z}});var a=n(97857),r=n.n(a),i=n(13769),o=n.n(i),c=n(43714),s=n(46693),u=n(5089),l=n(45605),d=n(86250),f=n(55241),m=n(42075),p=n(15867),g=n(27856),h=n.n(g),v=n(62435),_=n(72287),x=n(59632),k=n.n(x),y=n(86592),b=n(77234),Z=n(47298),w=n(78600),j=n(77437),S=n(88718),C=n(93352),T=n(67421),I=(n(81897),n(71250)),E=n(35293),N="referencePopoverWrapper___rn9A6",P="referenceChunkImage___LoR67",F="referenceImagePreview___kcQgd",D="chunkContentText___vcP0P",M="documentLink___USud0",L="referenceIcon___g5Mgk",R="cursor___rRuWB",A="fileThumbnail___BzBir",K=n(86074),G=["children","className","node"],q=/(~{2}\d+={2})/g,B=/(~{2}\d+\${2})/g,z=function(e){var t=e.reference,n=e.clickDocumentButton,a=e.content,i=e.loading,g=(0,T.$G)().t,x=(0,C.x2)(),z=x.setDocumentIds,H=x.data,V=(0,v.useMemo)((function(){var e=a;""===e&&(e=g("chat.searching"));var t=(0,E.fL)(e);return i?null==t?void 0:t.concat("~~2$$"):(0,I.CE)(t)}),[a,i,g]);(0,v.useEffect)((function(){var e=null==t?void 0:t.doc_aggs;z(Array.isArray(e)?e.map((function(e){return e.doc_id})):[])}),[t,z]);var Q=(0,v.useCallback)((function(e,t,a){return function(){a&&(null==n||n(e,t))}}),[n]),O=(0,v.useCallback)((function(e){var n,a,r,i=(null!==(n=null==t?void 0:t.chunks)&&void 0!==n?n:[])[e],o=null==t||null===(a=t.doc_aggs)||void 0===a?void 0:a.find((function(e){return(null==e?void 0:e.doc_id)===(null==i?void 0:i.document_id)})),l=null==o?void 0:o.doc_id,g=l?H[l]:"",v=l?(0,u.RT)(null==o?void 0:o.doc_name):"",_=null==i?void 0:i.image_id;return(0,K.jsxs)(d.Z,{gap:10,className:N,children:[_&&(0,K.jsx)(f.Z,{placement:"left",content:(0,K.jsx)(c.Z,{id:_,className:F}),children:(0,K.jsx)(c.Z,{id:_,className:P})}),(0,K.jsxs)(m.Z,{direction:"vertical",children:[(0,K.jsx)("div",{dangerouslySetInnerHTML:{__html:h().sanitize(null!==(r=null==i?void 0:i.content)&&void 0!==r?r:"")},className:D}),l&&(0,K.jsxs)(d.Z,{gap:"small",children:[g?(0,K.jsx)("img",{src:g,alt:"",className:A}):(0,K.jsx)(s.Z,{name:"file-icon/".concat(v),width:24}),(0,K.jsx)(p.ZP,{type:"link",className:M,onClick:Q(l,i,"pdf"===v),children:null==o?void 0:o.doc_name})]})]})]},null==i?void 0:i.id)}),[t,H,Q]),U=(0,v.useCallback)((function(e){var t=k()(e,q,(function(e,t){var n=function(e){return Number(e.slice(2,-2))}(e);return(0,K.jsx)(f.Z,{content:O(n),children:(0,K.jsx)(l.Z,{className:L})},t)}));return t=k()(t,B,(function(e,t){return(0,K.jsx)("span",{className:R},t)}))}),[O]);return(0,K.jsx)(_.U,{rehypePlugins:[function(){return function(e){(0,S.S4)(e,"text",(function(e,t){var n=t.at(-1);"custom-typography"!==n.tagName&&"code"!==n.tagName&&(e.type="element",e.tagName="custom-typography",e.properties={},e.children=[{type:"text",value:e.value}])}))}},b.Z,Z.Z],remarkPlugins:[w.Z,j.Z],components:{"custom-typography":function(e){var t=e.children;return U(t)},code:function(e){var t=e.children,n=e.className,a=(e.node,o()(e,G)),i=/language-(\w+)/.exec(n||"");return i?(0,K.jsx)(y.Z,r()(r()({},a),{},{PreTag:"div",language:i[1],children:String(t).replace(/\n$/,"")})):(0,K.jsx)("code",r()(r()({},a),{},{className:n,children:t}))}},children:V})}},35293:function(e,t,n){"use strict";n.d(t,{fL:function(){return c},oI:function(){return i}});var a=n(1079),r=n(96486),i=function(e,t){var n,i,o=(null===(n=e.message)||void 0===n?void 0:n.filter((function(e){return e.role===a.Cs.Assistant})).slice(1)).findIndex((function(e){return e.id===t.id})),c=(0,r.isEmpty)(null==t?void 0:t.reference)?(null!==(i=null==e?void 0:e.reference)&&void 0!==i?i:[])[o]:null==t?void 0:t.reference;return null!=c?c:{doc_aggs:[],chunks:[],total:0}},o=/(#{2}\d+\${2})/g,c=function(e){return e.replace(o,(function(e){return"~~".concat(e.slice(2,-2),"==")}))}},4772:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(86250),r=n(38925),i=n(86968),o=(n(62435),"errorWrapper___QfVXQ"),c=n(86074),s=function(e){var t=e.children,n=(0,i.qM)("fileManager").t;return(0,c.jsx)(a.Z,{align:"center",justify:"center",className:o,children:(0,c.jsx)(r.Z,{type:"error",message:(0,c.jsx)("h2",{children:t||n("fileError")})})})}},85821:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return pe}});var a=n(97857),r=n.n(a),i=n(5574),o=n.n(i),c=n(3234),s=n(7306),u=n(43714),l=n(61110),d=n(71580),f=n(74815),m=n(47221),p=n(86250),g=n(42075),h=n(18334),v=n(86968),_=n(10541),x=n(99611),k=n(83062),y=n(15867),b=n(43106),Z=n(86074),w=function(e){var t=e.setSelectedDocumentIds,n=e.handleTesting,a=(0,_.aD)().documents,r=(0,v.qM)("fileManager").t,i=[{title:"Name",dataIndex:"doc_name",key:"doc_name",render:function(e){return(0,Z.jsx)("p",{children:e})}},{title:"Hits",dataIndex:"count",key:"count",width:80},{title:"View",key:"view",width:50,render:function(e,t){var n=t.doc_id,a=t.doc_name;return(0,Z.jsx)(h.Z,{documentName:a,documentId:n,prefix:"document",children:(0,Z.jsx)(k.Z,{title:r("preview"),children:(0,Z.jsx)(y.ZP,{type:"text",children:(0,Z.jsx)(x.Z,{size:20})})})})}}],o={onChange:function(e){n(e),t(e)},getCheckboxProps:function(e){return{disabled:"Disabled User"===e.doc_name,name:e.doc_name}}};return(0,Z.jsx)(b.Z,{columns:i,dataSource:a,showHeader:!1,rowSelection:o,rowKey:"doc_id"})},j=n(67421),S="selectFilesCollapse___tHbPt",C="selectFilesTitle___OKrhv",T=function(e){var t,n,a=e.onTesting,r=e.selectedDocumentIds,i=e.setSelectedDocumentIds,o=(0,j.$G)().t,c=(0,_.aD)().documents;return(0,Z.jsx)(m.Z,{expandIcon:function(){return(0,Z.jsx)(f.r,{})},className:S,items:[{key:"1",label:(0,Z.jsx)(p.Z,{justify:"space-between",align:"center",className:C,children:(0,Z.jsxs)(g.Z,{children:[(0,Z.jsxs)("span",{children:[null!==(t=null==r?void 0:r.length)&&void 0!==t?t:0,"/",null!==(n=null==c?void 0:c.length)&&void 0!==n?n:0]}),o("knowledgeDetails.filesSelected")]})}),children:(0,Z.jsx)("div",{children:(0,Z.jsx)(w,{setSelectedDocumentIds:i,handleTesting:a})})}]})},I=n(46693),E=n(2938),N=n(21612),P=n(79531),F=n(4393),D=n(21687),M=n(96074),L=n(75081),R=n(2487),A=n(55241),K=n(66309),G=n(11980),q=n(63247),B=n(27856),z=n.n(B),H=n(96486),V=n(62435),Q=n(46008),O=(n(15009),n(99289),n(91028)),U=n(60806),W={searchPage:"searchPage___TO5ok",card:"card___scTJ7",tag:"tag___F3dia",searchSide:"searchSide___Ur4mG",modelForm:"modelForm___v4GJN",checkGroup:"checkGroup___YVVws",list:"list___FBGDW",checkbox:"checkbox___CWAZR",knowledgeName:"knowledgeName___pQK8r",embeddingId:"embeddingId___yxVE4",firstRenderContent:"firstRenderContent___kYeDC",content:"content___FJSce",hide:"hide___d1U6O",main:"main___G4gQT",highlightContent:"highlightContent___GkhyP",documentReference:"documentReference___Bj5k4",pagination:"pagination___EGLXC",answerWrapper:"answerWrapper___EIJcg",globalInput:"globalInput___jG4B8",partialInput:"partialInput___kQwzQ",appIcon:"appIcon____OfF0",appName:"appName___JGWuY",textclip:"textclip___AoVgw",popupMarkdown:"popupMarkdown___Zggfc",mindMapFloatButton:"mindMapFloatButton___GL1ZJ"},$=n(373),J=n(85265),X=n(38703),Y=function(e){var t,n,a,r,i,c,s=e.data,u=e.hideModal,l=e.visible,d=e.loading,f=(0,j.$G)().t,m=(t=(0,V.useState)(0),n=o()(t,2),a=n[0],r=n[1],i=(0,V.useRef)(),c=(0,V.useCallback)((function(){i.current=setInterval((function(){r((function(e){return e>40&&clearInterval(null==i?void 0:i.current),e+1}))}),1e3)}),[]),(0,V.useEffect)((function(){return c(),function(){clearInterval(null==i?void 0:i.current)}}),[c]),Number((a/43*100).toFixed(0)));return(0,Z.jsx)(J.Z,{title:f("chunk.mind"),onClose:u,open:l,width:"40vw",children:d?(0,Z.jsx)(p.Z,{justify:"center",children:(0,Z.jsx)(X.Z,{type:"circle",percent:m,size:200})}):(0,Z.jsx)($.Z,{data:s,show:!0,style:{width:"100%",height:"100%"}})})},ee=n(9783),te=n.n(ee),ne=n(19632),ae=n.n(ne),re=n(87547),ie=n(7134),oe=n(22850),ce=n(31673),se=n(93967),ue=n.n(se),le=N.Z.Sider,de=function(e){var t=e.isFirstRender,n=e.checkedList,a=e.setCheckedList,r=(0,_.VJ)(),i=r.list,c=r.loading,s=(0,V.useMemo)((function(){return i.reduce((function(e,t){var n,a=e.find((function(e){return e.key===t.embd_id})),r={title:t.name,key:t.id,isLeaf:!0};a?null===(n=a.children)||void 0===n||n.push(r):e.push({title:t.embd_id,key:t.embd_id,isLeaf:!1,children:[r]});return e}),[])}),[i]),u=(0,V.useState)([]),l=o()(u,2),d=l[0],f=l[1],m=(0,V.useState)([]),p=o()(m,2),h=p[0],v=p[1],x=(0,V.useState)(!0),k=o()(x,2),y=k[0],b=k[1],w=(0,V.useCallback)((function(e){var t=i.find((function(t){return t.id===e.key}));return(0,Z.jsxs)(g.Z,{children:[e.isLeaf&&(0,Z.jsx)(ie.C,{size:24,icon:(0,Z.jsx)(re.Z,{}),src:null==t?void 0:t.avatar}),(0,Z.jsx)(oe.Z.Text,{ellipsis:{tooltip:e.title},className:e.isLeaf?W.knowledgeName:W.embeddingId,children:e.title})]})}),[i]);return(0,V.useEffect)((function(){var e,t=null===(e=s[0])||void 0===e||null===(e=e.children)||void 0===e?void 0:e.map((function(e){return e.key}));t&&a(t),f(s.map((function(e){return e.key})))}),[s,f,a]),(0,Z.jsx)(le,{className:ue()(W.searchSide,te()({},W.transparentSearchSide,t)),theme:"light",width:"20%",children:(0,Z.jsx)(L.Z,{spinning:c,children:(0,Z.jsx)(ce.Z,{className:W.list,checkable:!0,onExpand:function(e){f(e),b(!1)},expandedKeys:d,autoExpandParent:y,onCheck:function(e,t){console.log("onCheck",e,t);var n=e,r=[],o=t.node,c=o.isLeaf,s=o.checked,u=o.key,l=o.children;if(c){var d=i.find((function(e){return e.id===u}));if(s)r=n;else r=n.filter((function(e){return i.some((function(t){return t.id===e}))})).map((function(e){var t;return null===(t=i.find((function(t){return t.id===e})))||void 0===t?void 0:t.embd_id})).some((function(e){return e!==(null==d?void 0:d.embd_id)}))?[u]:n}else{var f;if(s)r=[];else r=[u].concat(ae()(null!==(f=null==l?void 0:l.map((function(e){return e.key})))&&void 0!==f?f:[]))}a(r)},checkedKeys:n,onSelect:function(e,t){console.log("onSelect",t),v(e)},selectedKeys:h,treeData:s,titleRender:w})})})},fe=N.Z.Content,me=P.Z.Search,pe=function(){var e,t=(0,j.$G)().t,n=(0,V.useState)([]),a=o()(n,2),i=a[0],f=a[1],m=(0,_.aD)(),h=m.chunks,x=m.total,y=(0,_.VJ)().list,b=(0,V.useMemo)((function(){return i.filter((function(e){return y.some((function(t){return t.id===e}))}))}),[i,y]),w=function(e){var t,n=(0,E.H0)(U.Z.ask),a=n.send,r=n.answer,i=n.done,c=(0,_.aX)(),s=c.testChunk,u=c.loading,l=(0,V.useState)(!1),d=o()(l,2),f=d[0],m=d[1],p=(0,V.useState)({}),g=o()(p,2),h=g[0],v=g[1],x=(0,O.bP)(),k=x.fetchRelatedQuestions,y=x.data,b=(0,V.useState)(""),Z=o()(b,2),w=Z[0],j=Z[1],S=(0,V.useState)(!0),C=o()(S,2),T=C[0],I=C[1],N=(0,V.useState)([]),P=o()(N,2),F=P[0],D=P[1],M=(0,E.ye)(),L=M.pagination,R=M.setPagination,A=(0,V.useCallback)((function(t){var n=(0,H.trim)(t);(0,H.isEmpty)(n)||(R({page:1}),I(!1),v({}),m(!0),a({kb_ids:e,question:n}),s({kb_id:e,highlight:!0,question:n,page:1,size:L.pageSize}),k(n))}),[a,s,e,k,R,L.pageSize]),K=(0,V.useCallback)((function(e){j(e.target.value)}),[]),G=(0,V.useCallback)((function(e){return function(){f||(j(e),A(e))}}),[A,f]),q=(0,V.useCallback)((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=(0,H.trim)(w);f||(0,H.isEmpty)(r)||s({kb_id:e,highlight:!0,question:r,doc_ids:null!=t?t:F,page:n,size:a})}),[f,w,e,s,F]);return(0,V.useEffect)((function(){(0,H.isEmpty)(r)||v(r)}),[r]),(0,V.useEffect)((function(){i&&m(!1)}),[i]),{sendQuestion:A,handleSearchStrChange:K,handleClickRelatedQuestion:G,handleTestChunk:q,setSelectedDocumentIds:D,loading:u,sendingLoading:f,answer:h,relatedQuestions:null!==(t=null==y?void 0:y.slice(0,5))&&void 0!==t?t:[],searchStr:w,isFirstRender:T,selectedDocumentIds:F,isSearchStrEmpty:(0,H.isEmpty)((0,H.trim)(w))}}(b),S=w.sendQuestion,C=w.handleClickRelatedQuestion,P=w.handleSearchStrChange,B=w.handleTestChunk,$=w.setSelectedDocumentIds,J=w.answer,X=w.sendingLoading,ee=w.relatedQuestions,te=w.searchStr,ne=w.loading,ae=w.isFirstRender,re=w.selectedDocumentIds,ie=w.isSearchStrEmpty,oe=(0,d.B)(),ce=oe.visible,se=oe.hideModal,ue=oe.documentId,le=oe.selectedChunk,pe=oe.clickDocumentButton,ge=(0,E.ye)().pagination,he=function(e,t){var n=(0,v.pG)(),a=n.visible,r=n.showModal,i=n.hideModal,o=(0,V.useRef)(),c=(0,O.Ys)(),s=c.fetchMindMap;return{mindMap:c.data,mindMapVisible:a,mindMapLoading:c.loading,showMindMapModal:(0,V.useCallback)((function(){var n={question:(0,H.trim)(t),kb_ids:e};(0,H.isEmpty)(n.question)||(0,H.isEqual)(n,o.current)||(o.current=n,s(n)),r()}),[s,r,t,e]),hideMindMapModal:i}}(b,te),ve=he.mindMapVisible,_e=he.hideMindMapModal,xe=he.showMindMapModal,ke=he.mindMapLoading,ye=he.mindMap,be=(0,Z.jsx)(me,{value:te,onChange:P,placeholder:t("header.search"),allowClear:!0,enterButton:!0,onSearch:S,size:"large",loading:X,disabled:0===b.length,className:ae?W.globalInput:W.partialInput});return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(N.Z,{className:W.searchPage,children:[(0,Z.jsx)(de,{isFirstRender:ae,checkedList:b,setCheckedList:f}),(0,Z.jsx)(N.Z,{className:ae?W.mainLayout:"",children:(0,Z.jsx)(fe,{children:ae?(0,Z.jsx)(p.Z,{justify:"center",className:W.firstRenderContent,children:(0,Z.jsx)(p.Z,{vertical:!0,align:"center",gap:"large",children:be})}):(0,Z.jsx)(p.Z,{className:W.content,children:(0,Z.jsxs)("section",{className:W.main,children:[be,(0,Z.jsx)(F.Z,{title:(0,Z.jsxs)(p.Z,{gap:10,children:[(0,Z.jsx)("img",{src:"/ke_logo_new.png",alt:"",width:20}),t("chat.answerTitle")]}),className:W.answerWrapper,children:(0,H.isEmpty)(J)&&X?(0,Z.jsx)(D.Z,{active:!0}):J.answer&&(0,Z.jsx)(Q.Z,{loading:X,content:J.answer,reference:null!==(e=J.reference)&&void 0!==e?e:{},clickDocumentButton:pe})}),(0,Z.jsx)(M.Z,{}),(0,Z.jsx)(T,{selectedDocumentIds:re,setSelectedDocumentIds:$,onTesting:B}),(0,Z.jsx)(M.Z,{}),(0,Z.jsx)(L.Z,{spinning:ne,children:(null==h?void 0:h.length)>0&&(0,Z.jsx)(R.Z,{dataSource:h||[],className:W.chunks,renderItem:function(e){return(0,Z.jsx)(R.Z.Item,{children:(0,Z.jsx)(F.Z,{className:W.card,children:(0,Z.jsxs)(g.Z,{children:[(0,Z.jsx)(u.s,{id:e.img_id}),(0,Z.jsxs)(p.Z,{vertical:!0,gap:10,children:[(0,Z.jsx)(A.Z,{content:(0,Z.jsx)("div",{className:W.popupMarkdown,children:(0,Z.jsx)(s.Z,{children:e.content_with_weight})}),children:(0,Z.jsx)("div",{dangerouslySetInnerHTML:{__html:z().sanitize("".concat(e.highlight,"..."))},className:W.highlightContent})}),(0,Z.jsxs)(g.Z,{className:W.documentReference,onClick:function(){return pe(e.doc_id,e)},children:[(0,Z.jsx)(c.Z,{id:e.image_id,name:e.docnm_kwd}),e.docnm_kwd]})]})]})})})}})}),(null==ee?void 0:ee.length)>0&&(0,Z.jsx)(F.Z,{title:t("chat.relatedQuestion"),children:(0,Z.jsx)(p.Z,{wrap:"wrap",gap:"10px 0",children:null==ee?void 0:ee.map((function(e,t){return(0,Z.jsx)(K.Z,{className:W.tag,onClick:C(e),children:e},t)}))})}),(0,Z.jsx)(M.Z,{}),(0,Z.jsx)(G.Z,r()(r()({},ge),{},{total:x,onChange:function(e,t){var n;null===(n=ge.onChange)||void 0===n||n.call(ge,e,t),B(re,e,t)},className:W.pagination}))]})})})})]}),!ae&&!ie&&!(0,H.isEmpty)(b)&&(0,Z.jsx)(k.Z,{title:t("chunk.mind"),zIndex:1,children:(0,Z.jsx)(q.Z,{className:W.mindMapFloatButton,onClick:xe,icon:(0,Z.jsx)(I.Z,{name:"paper-clip",width:24,height:30})})}),ce&&(0,Z.jsx)(l.Z,{visible:ce,hideModal:se,documentId:ue,chunk:le}),ve&&(0,Z.jsx)(Y,{visible:ve,hideModal:_e,data:ye,loading:ke})]})}},72668:function(e,t,n){"use strict";n.d(t,{AH:function(){return C},EE:function(){return T},FG:function(){return E},WX:function(){return S},vh:function(){return I}});var a=n(60806),r=n(66582),i=n(78158),o=a.Z.login,c=a.Z.logout,s=a.Z.register,u=a.Z.setting,l=a.Z.user_info,d=a.Z.tenant_info,f=a.Z.factories_list,m=a.Z.llm_list,p=a.Z.my_llm,g=a.Z.set_api_key,h=a.Z.set_tenant_info,v=a.Z.add_llm,_=a.Z.delete_llm,x=a.Z.deleteFactory,k=a.Z.getSystemStatus,y=a.Z.getSystemVersion,b=a.Z.getSystemTokenList,Z=a.Z.removeSystemToken,w={login:{url:o,method:"post"},logout:{url:c,method:"get"},register:{url:s,method:"post"},setting:{url:u,method:"post"},user_info:{url:l,method:"get"},get_tenant_info:{url:d,method:"get"},set_tenant_info:{url:h,method:"post"},factories_list:{url:f,method:"get"},llm_list:{url:m,method:"get"},my_llm:{url:p,method:"get"},set_api_key:{url:g,method:"post"},add_llm:{url:v,method:"post"},delete_llm:{url:_,method:"post"},getSystemStatus:{url:k,method:"get"},getSystemVersion:{url:y,method:"get"},deleteFactory:{url:x,method:"post"},listToken:{url:b,method:"get"},createToken:{url:a.Z.createSystemToken,method:"post"},removeToken:{url:Z,method:"delete"}},j=(0,r.Z)(w,i.ZP),S=function(e){return i.ZP.get(a.Z.listTenantUser(e))},C=function(e,t){return(0,i.v_)(a.Z.addTenantUser(e),{email:t})},T=function(e){var t=e.tenantId,n=e.userId;return i.ZP.delete(a.Z.deleteTenantUser(t,n))},I=function(){return i.ZP.get(a.Z.listTenant)},E=function(e){return i.ZP.put(a.Z.agreeTenant(e))};t.ZP=j},60806:function(e,t,n){"use strict";n.d(t,{N:function(){return a}});var a="/v1";t.Z={login:"".concat(a,"/user/login"),logout:"".concat(a,"/user/logout"),register:"".concat(a,"/user/register"),setting:"".concat(a,"/user/setting"),user_info:"".concat(a,"/user/info"),tenant_info:"".concat(a,"/user/tenant_info"),set_tenant_info:"".concat(a,"/user/set_tenant_info"),addTenantUser:function(e){return"".concat(a,"/tenant/").concat(e,"/user")},listTenantUser:function(e){return"".concat(a,"/tenant/").concat(e,"/user/list")},deleteTenantUser:function(e,t){return"".concat(a,"/tenant/").concat(e,"/user/").concat(t)},listTenant:"".concat(a,"/tenant/list"),agreeTenant:function(e){return"".concat(a,"/tenant/agree/").concat(e)},factories_list:"".concat(a,"/llm/factories"),llm_list:"".concat(a,"/llm/list"),my_llm:"".concat(a,"/llm/my_llms"),set_api_key:"".concat(a,"/llm/set_api_key"),add_llm:"".concat(a,"/llm/add_llm"),delete_llm:"".concat(a,"/llm/delete_llm"),deleteFactory:"".concat(a,"/llm/delete_factory"),kb_list:"".concat(a,"/kb/list"),create_kb:"".concat(a,"/kb/create"),update_kb:"".concat(a,"/kb/update"),rm_kb:"".concat(a,"/kb/rm"),get_kb_detail:"".concat(a,"/kb/detail"),getKnowledgeGraph:function(e){return"".concat(a,"/kb/").concat(e,"/knowledge_graph")},listTag:function(e){return"".concat(a,"/kb/").concat(e,"/tags")},listTagByKnowledgeIds:"".concat(a,"/kb/tags"),removeTag:function(e){return"".concat(a,"/kb/").concat(e,"/rm_tags")},renameTag:function(e){return"".concat(a,"/kb/").concat(e,"/rename_tag")},chunk_list:"".concat(a,"/chunk/list"),create_chunk:"".concat(a,"/chunk/create"),set_chunk:"".concat(a,"/chunk/set"),get_chunk:"".concat(a,"/chunk/get"),switch_chunk:"".concat(a,"/chunk/switch"),rm_chunk:"".concat(a,"/chunk/rm"),retrieval_test:"".concat(a,"/chunk/retrieval_test"),knowledge_graph:"".concat(a,"/chunk/knowledge_graph"),get_document_list:"".concat(a,"/document/list"),document_change_status:"".concat(a,"/document/change_status"),document_rm:"".concat(a,"/document/rm"),document_delete:"".concat(a,"/api/document"),document_rename:"".concat(a,"/document/rename"),document_create:"".concat(a,"/document/create"),document_run:"".concat(a,"/document/run"),document_change_parser:"".concat(a,"/document/change_parser"),document_thumbnails:"".concat(a,"/document/thumbnails"),get_document_file:"".concat(a,"/document/get"),document_upload:"".concat(a,"/document/upload"),web_crawl:"".concat(a,"/document/web_crawl"),document_infos:"".concat(a,"/document/infos"),upload_and_parse:"".concat(a,"/document/upload_and_parse"),parse:"".concat(a,"/document/parse"),setMeta:"".concat(a,"/document/set_meta"),setDialog:"".concat(a,"/dialog/set"),getDialog:"".concat(a,"/dialog/get"),removeDialog:"".concat(a,"/dialog/rm"),listDialog:"".concat(a,"/dialog/list"),setConversation:"".concat(a,"/conversation/set"),getConversation:"".concat(a,"/conversation/get"),getConversationSSE:"".concat(a,"/conversation/getsse"),listConversation:"".concat(a,"/conversation/list"),removeConversation:"".concat(a,"/conversation/rm"),completeConversation:"".concat(a,"/conversation/completion"),deleteMessage:"".concat(a,"/conversation/delete_msg"),thumbup:"".concat(a,"/conversation/thumbup"),tts:"".concat(a,"/conversation/tts"),ask:"".concat(a,"/conversation/ask"),mindmap:"".concat(a,"/conversation/mindmap"),getRelatedQuestions:"".concat(a,"/conversation/related_questions"),createToken:"".concat(a,"/api/new_token"),listToken:"".concat(a,"/api/token_list"),removeToken:"".concat(a,"/api/rm"),getStats:"".concat(a,"/api/stats"),createExternalConversation:"".concat(a,"/api/new_conversation"),getExternalConversation:"".concat(a,"/api/conversation"),completeExternalConversation:"".concat(a,"/api/completion"),uploadAndParseExternal:"".concat(a,"/api/document/upload_and_parse"),listFile:"".concat(a,"/file/listall"),uploadFile:"".concat(a,"/file/upload"),removeFile:"".concat(a,"/file/rm"),renameFile:"".concat(a,"/file/rename"),getAllParentFolder:"".concat(a,"/file/all_parent_folder"),createFolder:"".concat(a,"/file/create"),connectFileToKnowledge:"".concat(a,"/file2document/convert"),getFile:"".concat(a,"/file/get"),moveFile:"".concat(a,"/file/mv"),getSystemVersion:"".concat(a,"/system/version"),getSystemStatus:"".concat(a,"/system/status"),getSystemTokenList:"".concat(a,"/system/token_list"),createSystemToken:"".concat(a,"/system/new_token"),listSystemToken:"".concat(a,"/system/token_list"),removeSystemToken:"".concat(a,"/system/token"),listTemplates:"".concat(a,"/canvas/templates"),listCanvas:"".concat(a,"/canvas/list"),getCanvas:"".concat(a,"/canvas/get"),getCanvasSSE:"".concat(a,"/canvas/getsse"),removeCanvas:"".concat(a,"/canvas/rm"),setCanvas:"".concat(a,"/canvas/set"),resetCanvas:"".concat(a,"/canvas/reset"),runCanvas:"".concat(a,"/canvas/completion"),testDbConnect:"".concat(a,"/canvas/test_db_connect"),getInputElements:"".concat(a,"/canvas/input_elements"),debug:"".concat(a,"/canvas/debug")}},66582:function(e,t,n){"use strict";var a=n(97857),r=n.n(a),i=n(57557),o=n.n(i),c=["post","delete","put"];t.Z=function(e,t){var n={},a=function(a){n[a]=function(n,i){var s=e[a].url,u=e[a];return i&&(s=s+"/"+i),c.some((function(t){return t===e[a].method.toLowerCase()}))?t(s,{method:e[a].method,data:n}):"get"===e[a].method||"GET"===e[a].method?t.get(s,r()(r()({},o()(u,["method","url"])),{},{params:n})):void 0}};for(var i in e)a(i);return n}},78158:function(e,t,n){"use strict";n.d(t,{v_:function(){return y}});var a=n(15009),r=n.n(a),i=n(99289),o=n.n(i),c=n(9783),s=n.n(c),u=n(97857),l=n.n(u),d=n(39918),f=n(40063),m=n(61921),p=n(26855),g=n(45360),h=n(24701),v=n(11238),_=n(31098),x={200:f.Z.t("message.200"),201:f.Z.t("message.201"),202:f.Z.t("message.202"),204:f.Z.t("message.204"),400:f.Z.t("message.400"),401:f.Z.t("message.401"),403:f.Z.t("message.403"),404:f.Z.t("message.404"),406:f.Z.t("message.406"),410:f.Z.t("message.410"),413:f.Z.t("message.413"),422:f.Z.t("message.422"),500:f.Z.t("message.500"),502:f.Z.t("message.502"),503:f.Z.t("message.503"),504:f.Z.t("message.504")},k=(0,v.l7)({errorHandler:function(e){var t=e.response;if("Failed to fetch"===e.message)p.Z.error({description:f.Z.t("message.networkAnomalyDescription"),message:f.Z.t("message.networkAnomaly")});else if(t&&t.status){var n=x[t.status]||t.statusText,a=t.status,r=t.url;p.Z.error({message:"".concat(f.Z.t("message.requestError")," ").concat(a,": ").concat(r),description:n})}return t},timeout:3e5,getResponse:!0});k.interceptors.request.use((function(e,t){var n=(0,_._y)(t.data),a=(0,_._y)(t.params);return{url:e,options:l()(l()({},t),{},{data:n,params:a,headers:l()(l()({},t.skipToken?void 0:s()({},d._n,(0,m.c)())),t.headers),interceptors:!0})}})),k.interceptors.response.use(function(){var e=o()(r()().mark((function e(t,n){var a,i;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(413!==(null==t?void 0:t.status)&&504!==(null==t?void 0:t.status)||g.ZP.error(x[null==t?void 0:t.status]),"blob"!==n.responseType){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,null==t||null===(a=t.clone())||void 0===a?void 0:a.json();case 5:return 100===(null==(i=e.sent)?void 0:i.code)?g.ZP.error(null==i?void 0:i.message):401===(null==i?void 0:i.code)?(p.Z.error({message:null==i?void 0:i.message,description:null==i?void 0:i.message,duration:3}),m.Z.removeAll(),h.m8.push("/login")):0!==(null==i?void 0:i.code)&&p.Z.error({message:"".concat(f.Z.t("message.hint")," : ").concat(null==i?void 0:i.code),description:null==i?void 0:i.message,duration:3}),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),t.ZP=k;var y=function(e,t){return k.post(e,{data:t})}},74815:function(e,t,n){"use strict";n.d(t,{r:function(){return u}});var a=n(62435),r=Object.defineProperty,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const u=e=>a.createElement("svg",((e,t)=>{for(var n in t||(t={}))o.call(t,n)&&s(e,n,t[n]);if(i)for(var n of i(t))c.call(t,n)&&s(e,n,t[n]);return e})({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.createElement("path",{d:"M6.667 10h6.666M6.5 17.5h7c1.4 0 2.1 0 2.635-.273a2.5 2.5 0 0 0 1.092-1.092c.273-.535.273-1.235.273-2.635v-7c0-1.4 0-2.1-.273-2.635a2.5 2.5 0 0 0-1.092-1.093C15.6 2.5 14.9 2.5 13.5 2.5h-7c-1.4 0-2.1 0-2.635.272a2.5 2.5 0 0 0-1.093 1.093C2.5 4.4 2.5 5.1 2.5 6.5v7c0 1.4 0 2.1.272 2.635a2.5 2.5 0 0 0 1.093 1.092C4.4 17.5 5.1 17.5 6.5 17.5Z",stroke:"#7F56D9",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))},24654:function(){},64838:function(){},27922:function(){},15212:function(){},85777:function(){},76929:function(){},45036:function(){}}]);
//# sourceMappingURL=p__search__index.24f8df27.async.js.map