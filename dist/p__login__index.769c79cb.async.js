(self.webpackChunk=self.webpackChunk||[]).push([[6939],{86968:function(e,t,n){"use strict";n.d(t,{I3:function(){return p},pG:function(){return f},qM:function(){return v}});var a=n(15009),o=n.n(a),r=n(99289),c=n.n(r),s=n(5574),i=n.n(s),l=n(21640),u=n(3321),d=(n(18446),n(62435)),m=n(67421),g=n(86074),f=function(){var e=(0,d.useState)(!1),t=i()(e,2),n=t[0],a=t[1],o=(0,d.useCallback)((function(){a(!0)}),[]),r=(0,d.useCallback)((function(){a(!1)}),[]),c=(0,d.useCallback)((function(){a(!n)}),[n]);return{visible:n,showModal:o,hideModal:r,switchVisible:c}};var p=function(){var e=u.Z.useApp().modal,t=(0,m.$G)().t;return(0,d.useCallback)((function(n){var a=n.title,r=n.content,s=n.onOk,i=n.onCancel;return new Promise((function(n,u){e.confirm({title:null!=a?a:t("common.deleteModalTitle"),icon:(0,g.jsx)(l.Z,{}),content:r,okText:t("common.ok"),okType:"danger",cancelText:t("common.cancel"),onOk:function(){return c()(o()().mark((function e(){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==s?void 0:s();case 3:t=e.sent,n(t),console.info(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},onCancel:function(){null==i||i()}})}))}),[t,e])},v=function(e){return(0,m.$G)("translation",{keyPrefix:e})}},51509:function(e,t,n){"use strict";n.d(t,{UK:function(){return x},aU:function(){return Z},f0:function(){return h},mr:function(){return k}});var a=n(5574),o=n.n(a),r=n(15009),c=n.n(r),s=n(99289),i=n.n(s),l=n(39918),u=n(72668),d=n(61921),m=n(4527),g=n(45360),f=n(99859),p=n(62435),v=n(67421),_=n(24701),h=function(){var e,t=(0,v.$G)().t,n=(0,m.D)({mutationKey:["login"],mutationFn:(e=i()(c()().mark((function e(n){var a,o,r,s,i,m,f,p;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.ZP.login(n);case 2:return a=e.sent,o=a.data,r=void 0===o?{}:o,s=a.response,0===r.code&&(i=r.data,g.ZP.success(t("message.logged")),m=s.headers.get(l._n),f=i.access_token,p={avatar:i.avatar,name:i.nickname,email:i.email},d.Z.setItems({Authorization:m,userInfo:JSON.stringify(p),Token:f})),e.abrupt("return",r.code);case 8:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})});return{data:n.data,loading:n.isPending,login:n.mutateAsync}},k=function(){var e,t=(0,v.$G)().t,n=(0,m.D)({mutationKey:["register"],mutationFn:(e=i()(c()().mark((function e(n){var a,o,r;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.ZP.register(n);case 2:return a=e.sent,o=a.data,0===(r=void 0===o?{}:o).code&&g.ZP.success(t("message.registered")),e.abrupt("return",r.code);case 7:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})});return{data:n.data,loading:n.isPending,register:n.mutateAsync}},Z=function(){var e,t=(0,v.$G)().t,n=(0,m.D)({mutationKey:["logout"],mutationFn:(e=i()(c()().mark((function e(){var n,a,o;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.ZP.logout();case 2:return n=e.sent,a=n.data,0===(o=void 0===a?{}:a).code&&(g.ZP.success(t("message.logout")),d.Z.removeAll(),_.m8.push("/login")),e.abrupt("return",o.code);case 7:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:n.data,loading:n.isPending,logout:n.mutateAsync}},x=function(e){var t=(0,p.useState)(!1),n=o()(t,2),a=n[0],r=n[1],c=f.Z.useWatch([],e);return(0,p.useEffect)((function(){e.validateFields({validateOnly:!0}).then((function(){return r(!0)})).catch((function(){return r(!1)}))}),[e,c]),{submittable:a}}},84150:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var a=n(97857),o=n.n(a),r=n(15009),c=n.n(r),s=n(99289),i=n.n(s),l=n(5574),u=n.n(l),d=n(51509),m=n(19515),g=n(99859),f=n(79531),p=n(84567),v=n(15867),_=n(62435),h=n(67421),k=n(24701),Z=n(46693),x=n(22850),y=n(86250),b=n(93967),w=n.n(b),T=n(86968),C={loginPage:"loginPage___CqEFK",loginLeft:"loginLeft___w3DTX",leftContainer:"leftContainer___vBiov",loginRight:"loginRight___uC8Tf",pink:"pink___Uurtg",rightPanel:"rightPanel___j3I74",loginTitle:"loginTitle___N1icl",loginDescription:"loginDescription___mEioR",loginRateNumber:"loginRateNumber___uHw70",loginRateReviews:"loginRateReviews___K8DOU",modal:"modal___FKNhF"},P=n(86074),j=x.Z.Title,E=x.Z.Text,A=function(){var e=(0,T.qM)("login").t;return(0,P.jsxs)("section",{className:C.rightPanel,children:[(0,P.jsx)(Z.Z,{name:"login-star",width:80}),(0,P.jsxs)(y.Z,{vertical:!0,gap:40,children:[(0,P.jsx)(j,{level:1,className:w()(C.white,C.loginTitle),children:e("title")}),(0,P.jsx)(E,{className:w()(C.pink,C.loginDescription),children:e("description")})]})]})},S=function(){var e=(0,_.useState)("login"),t=u()(e,2),n=t[0],a=t[1],r=(0,k.s0)(),s=(0,d.f0)(),l=s.login,Z=s.loading,x=(0,d.mr)(),y=x.register,b=x.loading,w=(0,h.$G)("translation",{keyPrefix:"login"}).t,T=Z||b,j=function(){a((function(e){return"login"===e?"register":"login"}))},E=g.Z.useForm(),S=u()(E,1)[0];(0,_.useEffect)((function(){S.validateFields(["nickname"])}),[S]);var D=function(){var e=i()(c()().mark((function e(){var t,o;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.validateFields();case 3:if(t=e.sent,o=(0,m.n$)(t.password),"login"!==n){e.next=12;break}return e.next=8,l({email:"".concat(t.email).trim(),password:o});case 8:0===e.sent&&r("/dashboard"),e.next=16;break;case 12:return e.next=14,y({nickname:t.nickname,email:t.email,password:o});case 14:0===e.sent&&a("login");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log("Failed:",e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),F={labelCol:{span:6}};return(0,P.jsxs)("div",{className:C.loginPage,children:[(0,P.jsx)("div",{className:C.loginLeft,children:(0,P.jsxs)("div",{className:C.leftContainer,children:[(0,P.jsxs)("div",{className:C.loginTitle,children:[(0,P.jsx)("div",{children:w("login"===n?"login":"register")}),(0,P.jsx)("span",{children:w("login"===n?"loginDescription":"registerDescription")})]}),(0,P.jsxs)(g.Z,{form:S,layout:"vertical",name:"dynamic_rule",style:{maxWidth:600},children:[(0,P.jsx)(g.Z.Item,o()(o()({},F),{},{name:"email",label:w("emailLabel"),rules:[{required:!0,message:w("emailPlaceholder")}],children:(0,P.jsx)(f.Z,{size:"large",placeholder:w("emailPlaceholder")})})),"register"===n&&(0,P.jsx)(g.Z.Item,o()(o()({},F),{},{name:"nickname",label:w("nicknameLabel"),rules:[{required:!0,message:w("nicknamePlaceholder")}],children:(0,P.jsx)(f.Z,{size:"large",placeholder:w("nicknamePlaceholder")})})),(0,P.jsx)(g.Z.Item,o()(o()({},F),{},{name:"password",label:w("passwordLabel"),rules:[{required:!0,message:w("passwordPlaceholder")}],children:(0,P.jsx)(f.Z.Password,{size:"large",placeholder:w("passwordPlaceholder"),onPressEnter:D})})),"login"===n&&(0,P.jsx)(g.Z.Item,{name:"remember",valuePropName:"checked",children:(0,P.jsxs)(p.Z,{children:[" ",w("rememberMe")]})}),(0,P.jsxs)("div",{children:["login"===n&&(0,P.jsxs)("div",{children:[w("signInTip"),(0,P.jsx)(v.ZP,{type:"link",onClick:j,children:w("signUp")})]}),"register"===n&&(0,P.jsxs)("div",{children:[w("signUpTip"),(0,P.jsx)(v.ZP,{type:"link",onClick:j,children:w("login")})]})]}),(0,P.jsx)(v.ZP,{type:"primary",block:!0,size:"large",onClick:D,loading:T,children:w("login"===n?"login":"continue")}),"login"===n&&(0,P.jsx)(P.Fragment,{})]})]})}),(0,P.jsx)("div",{className:C.loginRight,children:(0,P.jsx)(A,{})})]})}},72668:function(e,t,n){"use strict";n.d(t,{AH:function(){return P},EE:function(){return j},FG:function(){return A},WX:function(){return C},vh:function(){return E}});var a=n(60806),o=n(66582),r=n(78158),c=a.Z.login,s=a.Z.logout,i=a.Z.register,l=a.Z.setting,u=a.Z.user_info,d=a.Z.tenant_info,m=a.Z.factories_list,g=a.Z.llm_list,f=a.Z.my_llm,p=a.Z.set_api_key,v=a.Z.set_tenant_info,_=a.Z.add_llm,h=a.Z.delete_llm,k=a.Z.deleteFactory,Z=a.Z.getSystemStatus,x=a.Z.getSystemVersion,y=a.Z.getSystemTokenList,b=a.Z.removeSystemToken,w={login:{url:c,method:"post"},logout:{url:s,method:"get"},register:{url:i,method:"post"},setting:{url:l,method:"post"},user_info:{url:u,method:"get"},get_tenant_info:{url:d,method:"get"},set_tenant_info:{url:v,method:"post"},factories_list:{url:m,method:"get"},llm_list:{url:g,method:"get"},my_llm:{url:f,method:"get"},set_api_key:{url:p,method:"post"},add_llm:{url:_,method:"post"},delete_llm:{url:h,method:"post"},getSystemStatus:{url:Z,method:"get"},getSystemVersion:{url:x,method:"get"},deleteFactory:{url:k,method:"post"},listToken:{url:y,method:"get"},createToken:{url:a.Z.createSystemToken,method:"post"},removeToken:{url:b,method:"delete"}},T=(0,o.Z)(w,r.ZP),C=function(e){return r.ZP.get(a.Z.listTenantUser(e))},P=function(e,t){return(0,r.v_)(a.Z.addTenantUser(e),{email:t})},j=function(e){var t=e.tenantId,n=e.userId;return r.ZP.delete(a.Z.deleteTenantUser(t,n))},E=function(){return r.ZP.get(a.Z.listTenant)},A=function(e){return r.ZP.put(a.Z.agreeTenant(e))};t.ZP=T},60806:function(e,t,n){"use strict";n.d(t,{N:function(){return a}});var a="http://ec2-54-174-67-117.compute-1.amazonaws.com/v1";t.Z={login:"".concat(a,"/user/login"),logout:"".concat(a,"/user/logout"),register:"".concat(a,"/user/register"),setting:"".concat(a,"/user/setting"),user_info:"".concat(a,"/user/info"),tenant_info:"".concat(a,"/user/tenant_info"),set_tenant_info:"".concat(a,"/user/set_tenant_info"),addTenantUser:function(e){return"".concat(a,"/tenant/").concat(e,"/user")},listTenantUser:function(e){return"".concat(a,"/tenant/").concat(e,"/user/list")},deleteTenantUser:function(e,t){return"".concat(a,"/tenant/").concat(e,"/user/").concat(t)},listTenant:"".concat(a,"/tenant/list"),agreeTenant:function(e){return"".concat(a,"/tenant/agree/").concat(e)},factories_list:"".concat(a,"/llm/factories"),llm_list:"".concat(a,"/llm/list"),my_llm:"".concat(a,"/llm/my_llms"),set_api_key:"".concat(a,"/llm/set_api_key"),add_llm:"".concat(a,"/llm/add_llm"),delete_llm:"".concat(a,"/llm/delete_llm"),deleteFactory:"".concat(a,"/llm/delete_factory"),kb_list:"".concat(a,"/kb/list"),create_kb:"".concat(a,"/kb/create"),update_kb:"".concat(a,"/kb/update"),rm_kb:"".concat(a,"/kb/rm"),get_kb_detail:"".concat(a,"/kb/detail"),getKnowledgeGraph:function(e){return"".concat(a,"/kb/").concat(e,"/knowledge_graph")},listTag:function(e){return"".concat(a,"/kb/").concat(e,"/tags")},listTagByKnowledgeIds:"".concat(a,"/kb/tags"),removeTag:function(e){return"".concat(a,"/kb/").concat(e,"/rm_tags")},renameTag:function(e){return"".concat(a,"/kb/").concat(e,"/rename_tag")},chunk_list:"".concat(a,"/chunk/list"),create_chunk:"".concat(a,"/chunk/create"),set_chunk:"".concat(a,"/chunk/set"),get_chunk:"".concat(a,"/chunk/get"),switch_chunk:"".concat(a,"/chunk/switch"),rm_chunk:"".concat(a,"/chunk/rm"),retrieval_test:"".concat(a,"/chunk/retrieval_test"),knowledge_graph:"".concat(a,"/chunk/knowledge_graph"),get_document_list:"".concat(a,"/document/list"),document_change_status:"".concat(a,"/document/change_status"),document_rm:"".concat(a,"/document/rm"),document_delete:"".concat(a,"/api/document"),document_rename:"".concat(a,"/document/rename"),document_create:"".concat(a,"/document/create"),document_run:"".concat(a,"/document/run"),document_change_parser:"".concat(a,"/document/change_parser"),document_thumbnails:"".concat(a,"/document/thumbnails"),get_document_file:"".concat(a,"/document/get"),document_upload:"".concat(a,"/document/upload"),web_crawl:"".concat(a,"/document/web_crawl"),document_infos:"".concat(a,"/document/infos"),upload_and_parse:"".concat(a,"/document/upload_and_parse"),parse:"".concat(a,"/document/parse"),setMeta:"".concat(a,"/document/set_meta"),setDialog:"".concat(a,"/dialog/set"),getDialog:"".concat(a,"/dialog/get"),removeDialog:"".concat(a,"/dialog/rm"),listDialog:"".concat(a,"/dialog/list"),setConversation:"".concat(a,"/conversation/set"),getConversation:"".concat(a,"/conversation/get"),getConversationSSE:"".concat(a,"/conversation/getsse"),listConversation:"".concat(a,"/conversation/list"),removeConversation:"".concat(a,"/conversation/rm"),completeConversation:"".concat(a,"/conversation/completion"),deleteMessage:"".concat(a,"/conversation/delete_msg"),thumbup:"".concat(a,"/conversation/thumbup"),tts:"".concat(a,"/conversation/tts"),ask:"".concat(a,"/conversation/ask"),mindmap:"".concat(a,"/conversation/mindmap"),getRelatedQuestions:"".concat(a,"/conversation/related_questions"),createToken:"".concat(a,"/api/new_token"),listToken:"".concat(a,"/api/token_list"),removeToken:"".concat(a,"/api/rm"),getStats:"".concat(a,"/api/stats"),createExternalConversation:"".concat(a,"/api/new_conversation"),getExternalConversation:"".concat(a,"/api/conversation"),completeExternalConversation:"".concat(a,"/api/completion"),uploadAndParseExternal:"".concat(a,"/api/document/upload_and_parse"),listFile:"".concat(a,"/file/listall"),uploadFile:"".concat(a,"/file/upload"),removeFile:"".concat(a,"/file/rm"),renameFile:"".concat(a,"/file/rename"),getAllParentFolder:"".concat(a,"/file/all_parent_folder"),createFolder:"".concat(a,"/file/create"),connectFileToKnowledge:"".concat(a,"/file2document/convert"),getFile:"".concat(a,"/file/get"),moveFile:"".concat(a,"/file/mv"),getSystemVersion:"".concat(a,"/system/version"),getSystemStatus:"".concat(a,"/system/status"),getSystemTokenList:"".concat(a,"/system/token_list"),createSystemToken:"".concat(a,"/system/new_token"),listSystemToken:"".concat(a,"/system/token_list"),removeSystemToken:"".concat(a,"/system/token"),listTemplates:"".concat(a,"/canvas/templates"),listCanvas:"".concat(a,"/canvas/list"),getCanvas:"".concat(a,"/canvas/get"),getCanvasSSE:"".concat(a,"/canvas/getsse"),removeCanvas:"".concat(a,"/canvas/rm"),setCanvas:"".concat(a,"/canvas/set"),resetCanvas:"".concat(a,"/canvas/reset"),runCanvas:"".concat(a,"/canvas/completion"),testDbConnect:"".concat(a,"/canvas/test_db_connect"),getInputElements:"".concat(a,"/canvas/input_elements"),debug:"".concat(a,"/canvas/debug")}},19515:function(e,t,n){"use strict";n.d(t,{dz:function(){return r},mD:function(){return s},n$:function(){return c}});var a=n(52300),o=n(98361),r=function(){return{width:window.innerWidth}},c=function(e){var t=new o.Z;return t.setPublicKey("-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArq9XTUSeYr2+N1h3Afl/z8Dse/2yD0ZGrKwx+EEEcdsBLca9Ynmx3nIB5obmLlSfmskLpBo0UACBmB5rEjBp2Q2f3AG3Hjd4B+gNCG6BDaawuDlgANIhGnaTLrIqWrrcm4EMzJOnAOI1fgzJRsOOUEfaS318Eq9OVO3apEyCCt0lOQK6PuksduOjVxtltDav+guVAA068NrPYmRNabVKRNLJpL8w4D44sfth5RvZ3q9t+6RTArpEtc5sh5ChzvqPOzKGMXW83C95TxmXqpbK6olN4RevSfVjEAgCydH6HN6OhtOQEcnrU97r9H0iZOWwbw3pVrZiUkuRD1R56Wzs2wIDAQAB-----END PUBLIC KEY-----"),t.encrypt(a.DS.encode(e))},s=function(e){return e.slice(e.lastIndexOf(".")+1).toLowerCase()}},66582:function(e,t,n){"use strict";var a=n(97857),o=n.n(a),r=n(57557),c=n.n(r),s=["post","delete","put"];t.Z=function(e,t){var n={},a=function(a){n[a]=function(n,r){var i=e[a].url,l=e[a];return r&&(i=i+"/"+r),s.some((function(t){return t===e[a].method.toLowerCase()}))?t(i,{method:e[a].method,data:n}):"get"===e[a].method||"GET"===e[a].method?t.get(i,o()(o()({},c()(l,["method","url"])),{},{params:n})):void 0}};for(var r in e)a(r);return n}},78158:function(e,t,n){"use strict";n.d(t,{v_:function(){return x}});var a=n(15009),o=n.n(a),r=n(99289),c=n.n(r),s=n(9783),i=n.n(s),l=n(97857),u=n.n(l),d=n(39918),m=n(40063),g=n(61921),f=n(26855),p=n(45360),v=n(24701),_=n(11238),h=n(31098),k={200:m.Z.t("message.200"),201:m.Z.t("message.201"),202:m.Z.t("message.202"),204:m.Z.t("message.204"),400:m.Z.t("message.400"),401:m.Z.t("message.401"),403:m.Z.t("message.403"),404:m.Z.t("message.404"),406:m.Z.t("message.406"),410:m.Z.t("message.410"),413:m.Z.t("message.413"),422:m.Z.t("message.422"),500:m.Z.t("message.500"),502:m.Z.t("message.502"),503:m.Z.t("message.503"),504:m.Z.t("message.504")},Z=(0,_.l7)({errorHandler:function(e){var t=e.response;if("Failed to fetch"===e.message)f.Z.error({description:m.Z.t("message.networkAnomalyDescription"),message:m.Z.t("message.networkAnomaly")});else if(t&&t.status){var n=k[t.status]||t.statusText,a=t.status,o=t.url;f.Z.error({message:"".concat(m.Z.t("message.requestError")," ").concat(a,": ").concat(o),description:n})}return t},timeout:3e5,getResponse:!0});Z.interceptors.request.use((function(e,t){var n=(0,h._y)(t.data),a=(0,h._y)(t.params);return{url:e,options:u()(u()({},t),{},{data:n,params:a,headers:u()(u()({},t.skipToken?void 0:i()({},d._n,(0,g.c)())),t.headers),interceptors:!0})}})),Z.interceptors.response.use(function(){var e=c()(o()().mark((function e(t,n){var a,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(413!==(null==t?void 0:t.status)&&504!==(null==t?void 0:t.status)||p.ZP.error(k[null==t?void 0:t.status]),"blob"!==n.responseType){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,null==t||null===(a=t.clone())||void 0===a?void 0:a.json();case 5:return 100===(null==(r=e.sent)?void 0:r.code)?p.ZP.error(null==r?void 0:r.message):401===(null==r?void 0:r.code)?(f.Z.error({message:null==r?void 0:r.message,description:null==r?void 0:r.message,duration:3}),g.Z.removeAll(),v.m8.push("/login")):0!==(null==r?void 0:r.code)&&f.Z.error({message:"".concat(m.Z.t("message.hint")," : ").concat(null==r?void 0:r.code),description:null==r?void 0:r.message,duration:3}),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),t.ZP=Z;var x=function(e,t){return Z.post(e,{data:t})}},86635:function(e){function t(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=function(){return[]},t.resolve=t,t.id=86635,e.exports=t},24654:function(){}}]);
//# sourceMappingURL=p__login__index.769c79cb.async.js.map