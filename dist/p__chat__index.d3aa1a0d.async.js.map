{"version":3,"file":"p__chat__index.d3aa1a0d.async.js","mappings":"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","sources":["webpack:///./src/components/message-input/index.less?677d","webpack:///./src/components/message-input/index.tsx","webpack:///./src/components/rename-modal/index.tsx","webpack:///./src/assets/svg/chat-app-cube.svg","webpack:///./src/pages/chat/chat-configuration-modal/index.less?3283","webpack:///./src/pages/chat/chat-configuration-modal/assistant-setting.tsx","webpack:///./src/pages/chat/chat-configuration-modal/model-setting.tsx","webpack:///./src/pages/chat/chat-configuration-modal/prompt-engine.tsx","webpack:///./src/pages/chat/chat-configuration-modal/index.tsx","webpack:///./src/pages/chat/chat-container/index.less?a72e","webpack:///./src/pages/chat/chat-container/index.tsx","webpack:///./src/pages/chat/index.less?fa52","webpack:///./src/pages/chat/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"messageInputWrapper\":\"messageInputWrapper___nie1o\",\"documentCard\":\"documentCard___JpeyA\",\"listWrapper\":\"listWrapper___CSYW_\",\"inputWrapper\":\"inputWrapper___xWIXi\",\"deleteIcon\":\"deleteIcon___ilZaY\"};","import { useTranslate } from '@/hooks/common-hooks';\nimport {\n  useDeleteDocument,\n  useFetchDocumentInfosByIds,\n  useRemoveNextDocument,\n  useUploadAndParseDocument,\n} from '@/hooks/document-hooks';\nimport { getExtension } from '@/utils/document-util';\nimport { formatBytes } from '@/utils/file-util';\nimport {\n  CloseCircleOutlined,\n  InfoCircleOutlined,\n  LoadingOutlined,\n} from '@ant-design/icons';\nimport type { GetProp, UploadFile } from 'antd';\nimport {\n  Button,\n  Card,\n  Flex,\n  Input,\n  List,\n  Space,\n  Spin,\n  Typography,\n  Upload,\n  UploadProps,\n} from 'antd';\nimport classNames from 'classnames';\nimport get from 'lodash/get';\nimport { Paperclip } from 'lucide-react';\nimport {\n  ChangeEventHandler,\n  memo,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport FileIcon from '../file-icon';\nimport styles from './index.less';\n\ntype FileType = Parameters<GetProp<UploadProps, 'beforeUpload'>>[0];\nconst { Text } = Typography;\n\nconst getFileId = (file: UploadFile) => get(file, 'response.data.0');\n\nconst getFileIds = (fileList: UploadFile[]) => {\n  const ids = fileList.reduce((pre, cur) => {\n    return pre.concat(get(cur, 'response.data', []));\n  }, []);\n\n  return ids;\n};\n\nconst isUploadSuccess = (file: UploadFile) => {\n  const code = get(file, 'response.code');\n  return typeof code === 'number' && code === 0;\n};\n\ninterface IProps {\n  disabled: boolean;\n  value: string;\n  sendDisabled: boolean;\n  sendLoading: boolean;\n  onPressEnter(documentIds: string[]): void;\n  onInputChange: ChangeEventHandler<HTMLInputElement>;\n  conversationId: string;\n  uploadMethod?: string;\n  isShared?: boolean;\n  showUploadIcon?: boolean;\n  createConversationBeforeUploadDocument?(message: string): Promise<any>;\n}\n\nconst getBase64 = (file: FileType): Promise<string> =>\n  new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file as any);\n    reader.onload = () => resolve(reader.result as string);\n    reader.onerror = (error) => reject(error);\n  });\n\nconst MessageInput = ({\n  isShared = false,\n  disabled,\n  value,\n  onPressEnter,\n  sendDisabled,\n  sendLoading,\n  onInputChange,\n  conversationId,\n  showUploadIcon = true,\n  createConversationBeforeUploadDocument,\n  uploadMethod = 'upload_and_parse',\n}: IProps) => {\n  const { t } = useTranslate('chat');\n  const { removeDocument } = useRemoveNextDocument();\n  const { deleteDocument } = useDeleteDocument();\n  const { data: documentInfos, setDocumentIds } = useFetchDocumentInfosByIds();\n  const { uploadAndParseDocument } = useUploadAndParseDocument(uploadMethod);\n  const conversationIdRef = useRef(conversationId);\n  const [fileList, setFileList] = useState<UploadFile[]>([]);\n\n  const handlePreview = async (file: UploadFile) => {\n    if (!file.url && !file.preview) {\n      file.preview = await getBase64(file.originFileObj as FileType);\n    }\n  };\n\n  const handleChange: UploadProps['onChange'] = async ({\n    // fileList: newFileList,\n    file,\n  }) => {\n    let nextConversationId: string = conversationId;\n    if (createConversationBeforeUploadDocument) {\n      const creatingRet = await createConversationBeforeUploadDocument(\n        file.name,\n      );\n      if (creatingRet?.code === 0) {\n        nextConversationId = creatingRet.data.id;\n      }\n    }\n    setFileList((list) => {\n      list.push({\n        ...file,\n        status: 'uploading',\n        originFileObj: file as any,\n      });\n      return [...list];\n    });\n\n    const ret = await uploadAndParseDocument({\n      conversationId: nextConversationId,\n      fileList: [file],\n    });\n    setFileList((list) => {\n      const nextList = list.filter((x) => x.uid !== file.uid);\n      nextList.push({\n        ...file,\n        originFileObj: file as any,\n        response: ret,\n        percent: 100,\n        status: ret?.code === 0 ? 'done' : 'error',\n      });\n      return nextList;\n    });\n  };\n\n  const isUploadingFile = fileList.some((x) => x.status === 'uploading');\n\n  const handlePressEnter = useCallback(async () => {\n    if (isUploadingFile) return;\n    const ids = getFileIds(fileList.filter((x) => isUploadSuccess(x)));\n\n    onPressEnter(ids);\n    setFileList([]);\n  }, [fileList, onPressEnter, isUploadingFile]);\n\n  const handleRemove = useCallback(\n    async (file: UploadFile) => {\n      const ids = get(file, 'response.data', []);\n      // Upload Successfully\n      if (Array.isArray(ids) && ids.length) {\n        if (isShared) {\n          await deleteDocument(ids);\n        } else {\n          await removeDocument(ids[0]);\n        }\n        setFileList((preList) => {\n          return preList.filter((x) => getFileId(x) !== ids[0]);\n        });\n      } else {\n        // Upload failed\n        setFileList((preList) => {\n          return preList.filter((x) => x.uid !== file.uid);\n        });\n      }\n    },\n    [removeDocument, deleteDocument, isShared],\n  );\n\n  const getDocumentInfoById = useCallback(\n    (id: string) => {\n      return documentInfos.find((x) => x.id === id);\n    },\n    [documentInfos],\n  );\n\n  useEffect(() => {\n    const ids = getFileIds(fileList);\n    setDocumentIds(ids);\n  }, [fileList, setDocumentIds]);\n\n  useEffect(() => {\n    if (\n      conversationIdRef.current &&\n      conversationId !== conversationIdRef.current\n    ) {\n      setFileList([]);\n    }\n    conversationIdRef.current = conversationId;\n  }, [conversationId, setFileList]);\n\n  return (\n    <Flex gap={20} vertical className={styles.messageInputWrapper}>\n      <Input\n        size=\"large\"\n        placeholder={t('sendPlaceholder')}\n        value={value}\n        disabled={disabled}\n        className={classNames({ [styles.inputWrapper]: fileList.length === 0 })}\n        suffix={\n          <Space>\n            {showUploadIcon && (\n              <Upload\n                onPreview={handlePreview}\n                onChange={handleChange}\n                multiple={false}\n                onRemove={handleRemove}\n                showUploadList={false}\n                beforeUpload={() => {\n                  return false;\n                }}\n              >\n                <Button\n                  type={'text'}\n                  disabled={disabled}\n                  icon={<Paperclip></Paperclip>}\n                ></Button>\n              </Upload>\n            )}\n            <Button\n              type=\"primary\"\n              onClick={handlePressEnter}\n              loading={sendLoading}\n              disabled={sendDisabled || isUploadingFile}\n            >\n              {t('send')}\n            </Button>\n          </Space>\n        }\n        onPressEnter={handlePressEnter}\n        onChange={onInputChange}\n      />\n\n      {fileList.length > 0 && (\n        <List\n          grid={{\n            gutter: 16,\n            xs: 1,\n            sm: 1,\n            md: 1,\n            lg: 1,\n            xl: 2,\n            xxl: 4,\n          }}\n          dataSource={fileList}\n          className={styles.listWrapper}\n          renderItem={(item) => {\n            const id = getFileId(item);\n            const documentInfo = getDocumentInfoById(id);\n            const fileExtension = getExtension(documentInfo?.name ?? '');\n            const fileName = item.originFileObj?.name ?? '';\n\n            return (\n              <List.Item>\n                <Card className={styles.documentCard}>\n                  <Flex gap={10} align=\"center\">\n                    {item.status === 'uploading' ? (\n                      <Spin\n                        indicator={\n                          <LoadingOutlined style={{ fontSize: 24 }} spin />\n                        }\n                      />\n                    ) : item.status === 'error' ? (\n                      <InfoCircleOutlined size={30}></InfoCircleOutlined>\n                    ) : (\n                      <FileIcon id={id} name={fileName}></FileIcon>\n                    )}\n                    <Flex vertical style={{ width: '90%' }}>\n                      <Text\n                        ellipsis={{ tooltip: fileName }}\n                        className={styles.nameText}\n                      >\n                        <b> {fileName}</b>\n                      </Text>\n                      {item.status === 'error' ? (\n                        t('uploadFailed')\n                      ) : (\n                        <>\n                          {item.percent !== 100 ? (\n                            t('uploading')\n                          ) : !item.response ? (\n                            t('parsing')\n                          ) : (\n                            <Space>\n                              <span>{fileExtension?.toUpperCase()},</span>\n                              <span>\n                                {formatBytes(\n                                  getDocumentInfoById(id)?.size ?? 0,\n                                )}\n                              </span>\n                            </Space>\n                          )}\n                        </>\n                      )}\n                    </Flex>\n                  </Flex>\n\n                  {item.status !== 'uploading' && (\n                    <span className={styles.deleteIcon}>\n                      <CloseCircleOutlined onClick={() => handleRemove(item)} />\n                    </span>\n                  )}\n                </Card>\n              </List.Item>\n            );\n          }}\n        />\n      )}\n    </Flex>\n  );\n};\n\nexport default memo(MessageInput);\n","import { useTranslate } from '@/hooks/common-hooks';\nimport { Form, Input, Modal } from 'antd';\nimport { useEffect } from 'react';\nimport { IModalManagerChildrenProps } from '../modal-manager';\n\ninterface IProps extends Omit<IModalManagerChildrenProps, 'showModal'> {\n  loading: boolean;\n  initialName: string;\n  onOk: (name: string) => void;\n  showModal?(): void;\n}\n\nconst RenameModal = ({\n  visible,\n  hideModal,\n  loading,\n  initialName,\n  onOk,\n}: IProps) => {\n  const [form] = Form.useForm();\n  const { t } = useTranslate('common');\n\n  type FieldType = {\n    name?: string;\n  };\n\n  const handleOk = async () => {\n    const ret = await form.validateFields();\n\n    return onOk(ret.name);\n  };\n\n  const handleCancel = () => {\n    hideModal();\n  };\n\n  const onFinish = (values: any) => {\n    console.log('Success:', values);\n  };\n\n  const onFinishFailed = (errorInfo: any) => {\n    console.log('Failed:', errorInfo);\n  };\n\n  useEffect(() => {\n    if (visible) {\n      form.setFieldValue('name', initialName);\n    }\n  }, [initialName, form, visible]);\n\n  return (\n    <Modal\n      title={t('rename')}\n      open={visible}\n      onOk={handleOk}\n      onCancel={handleCancel}\n      okButtonProps={{ loading }}\n      confirmLoading={loading}\n    >\n      <Form\n        name=\"basic\"\n        labelCol={{ span: 4 }}\n        wrapperCol={{ span: 20 }}\n        style={{ maxWidth: 600 }}\n        onFinish={onFinish}\n        onFinishFailed={onFinishFailed}\n        autoComplete=\"off\"\n        form={form}\n      >\n        <Form.Item<FieldType>\n          label={t('name')}\n          name=\"name\"\n          rules={[{ required: true, message: t('namePlaceholder') }]}\n        >\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n};\n\nexport default RenameModal;\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nimport * as React from \"react\";\nconst SvgChatAppCube = (props) => /* @__PURE__ */ React.createElement(\"svg\", __spreadValues({ width: 15, height: 14, fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, props), /* @__PURE__ */ React.createElement(\"path\", { d: \"m6.188 12.104.859.478c.165.092.248.138.335.156a.581.581 0 0 0 .236 0c.087-.018.17-.064.335-.156l.86-.478m-5.25-1.458-.833-.462c-.175-.097-.262-.146-.326-.215a.583.583 0 0 1-.125-.212c-.029-.09-.029-.19-.029-.39V8.46m0-2.917v-.91c0-.199 0-.299.03-.388a.583.583 0 0 1 .124-.212c.064-.07.151-.118.326-.215l.833-.463m2.624-1.458.86-.477c.165-.092.248-.138.335-.156a.583.583 0 0 1 .236 0c.087.018.17.064.335.156l.86.477m2.624 1.458.833.463c.175.097.262.146.326.215a.584.584 0 0 1 .125.212c.029.089.029.189.029.389v.909m0 2.917v.909c0 .2 0 .3-.03.389a.584.584 0 0 1-.124.212c-.064.07-.151.118-.326.215l-.832.462m-5.25-4.375 1.312.73m0 0 1.313-.73m-1.313.73v1.458M2.25 4.084l1.313.729m7.874 0 1.313-.73M7.5 11.376v1.459\", stroke: \"#A5A3A9\", strokeWidth: 1.5, strokeLinecap: \"round\", strokeLinejoin: \"round\" }));\nexport { SvgChatAppCube as ReactComponent };\nexport default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTYuMTg4IDEyLjEwNC44NTkuNDc4Yy4xNjUuMDkyLjI0OC4xMzguMzM1LjE1NmEuNTgxLjU4MSAwIDAgMCAuMjM2IDBjLjA4Ny0uMDE4LjE3LS4wNjQuMzM1LS4xNTZsLjg2LS40NzhtLTUuMjUtMS40NTgtLjgzMy0uNDYyYy0uMTc1LS4wOTctLjI2Mi0uMTQ2LS4zMjYtLjIxNWEuNTgzLjU4MyAwIDAgMS0uMTI1LS4yMTJjLS4wMjktLjA5LS4wMjktLjE5LS4wMjktLjM5VjguNDZtMC0yLjkxN3YtLjkxYzAtLjE5OSAwLS4yOTkuMDMtLjM4OGEuNTgzLjU4MyAwIDAgMSAuMTI0LS4yMTJjLjA2NC0uMDcuMTUxLS4xMTguMzI2LS4yMTVsLjgzMy0uNDYzbTIuNjI0LTEuNDU4Ljg2LS40NzdjLjE2NS0uMDkyLjI0OC0uMTM4LjMzNS0uMTU2YS41ODMuNTgzIDAgMCAxIC4yMzYgMGMuMDg3LjAxOC4xNy4wNjQuMzM1LjE1NmwuODYuNDc3bTIuNjI0IDEuNDU4LjgzMy40NjNjLjE3NS4wOTcuMjYyLjE0Ni4zMjYuMjE1YS41ODQuNTg0IDAgMCAxIC4xMjUuMjEyYy4wMjkuMDg5LjAyOS4xODkuMDI5LjM4OXYuOTA5bTAgMi45MTd2LjkwOWMwIC4yIDAgLjMtLjAzLjM4OWEuNTg0LjU4NCAwIDAgMS0uMTI0LjIxMmMtLjA2NC4wNy0uMTUxLjExOC0uMzI2LjIxNWwtLjgzMi40NjJtLTUuMjUtNC4zNzUgMS4zMTIuNzNtMCAwIDEuMzEzLS43M20tMS4zMTMuNzN2MS40NThNMi4yNSA0LjA4NGwxLjMxMy43MjltNy44NzQgMCAxLjMxMy0uNzNNNy41IDExLjM3NnYxLjQ1OSIgc3Ryb2tlPSIjQTVBM0E5IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+\";\n","// extracted by mini-css-extract-plugin\nexport default {\"chatConfigurationDescription\":\"chatConfigurationDescription___Marto\",\"variableContainer\":\"variableContainer___Y8OCn\",\"variableAlign\":\"variableAlign___V0wtR\",\"variableLabel\":\"variableLabel___lux8o\",\"variableIcon\":\"variableIcon___aAfD2\",\"variableTable\":\"variableTable___q3ddB\",\"editableRow\":\"editableRow____LyFZ\",\"segmentedHidden\":\"segmentedHidden___jWNN7\",\"sliderInputNumber\":\"sliderInputNumber___cS3d6\",\"variableSlider\":\"variableSlider___l0sWn\"};","import { PlusOutlined } from '@ant-design/icons';\nimport { Form, Input, message, Select, Switch, Upload } from 'antd';\nimport classNames from 'classnames';\nimport { ISegmentedContentProps } from '../interface';\n\nimport KnowledgeBaseItem from '@/components/knowledge-base-item';\nimport { useTranslate } from '@/hooks/common-hooks';\nimport { useFetchTenantInfo } from '@/hooks/user-setting-hooks';\nimport { useCallback } from 'react';\nimport styles from './index.less';\n\nconst AssistantSetting = ({ show, form }: ISegmentedContentProps) => {\n  const { t } = useTranslate('chat');\n  const { data } = useFetchTenantInfo(true);\n\n  const normFile = (e: any) => {\n    if (Array.isArray(e)) {\n      return e;\n    }\n    return e?.fileList;\n  };\n\n  const handleTtsChange = useCallback(\n    (checked: boolean) => {\n      if (checked && !data.tts_id) {\n        message.error(`Please set TTS model firstly. \n        Setting >> Model providers >> System model settings`);\n        form.setFieldValue(['prompt_config', 'tts'], false);\n      }\n    },\n    [data, form],\n  );\n\n  const uploadButtion = (\n    <button style={{ border: 0, background: 'none' }} type=\"button\">\n      <PlusOutlined />\n      <div style={{ marginTop: 8 }}>{t('upload', { keyPrefix: 'common' })}</div>\n    </button>\n  );\n\n  return (\n    <section\n      className={classNames({\n        [styles.segmentedHidden]: !show,\n      })}\n    >\n      <Form.Item\n        name={'name'}\n        label={t('assistantName')}\n        rules={[{ required: true, message: t('assistantNameMessage') }]}\n      >\n        <Input placeholder={t('namePlaceholder')} />\n      </Form.Item>\n      {/*<Form.Item name={'description'} label={t('description')}>\n        <Input placeholder={t('descriptionPlaceholder')} />\n      </Form.Item>\n      <Form.Item\n        name=\"icon\"\n        label={t('assistantAvatar')}\n        valuePropName=\"fileList\"\n        getValueFromEvent={normFile}\n      >\n        <Upload\n          listType=\"picture-card\"\n          maxCount={1}\n          beforeUpload={() => false}\n          showUploadList={{ showPreviewIcon: false, showRemoveIcon: false }}\n        >\n          {show ? uploadButtion : null}\n        </Upload>\n      </Form.Item>*/}\n      <Form.Item\n        name={'language'}\n        label={t('language')}\n        initialValue={'English'}\n        tooltip=\"coming soon\"\n        style={{ display: 'none' }}\n        required={false}\n      >\n        <Select\n          options={[\n            { value: 'Chinese', label: t('chinese', { keyPrefix: 'common' }) },\n            { value: 'English', label: t('english', { keyPrefix: 'common' }) },\n          ]}\n        />\n      </Form.Item>\n      <Form.Item\n        name={['prompt_config', 'empty_response']}\n        label={t('emptyResponse')}\n        tooltip={t('emptyResponseTip')}\n      >\n        <Input placeholder=\"\" />\n      </Form.Item>\n      <Form.Item\n        name={['prompt_config', 'prologue']}\n        label={t('setAnOpener')}\n        tooltip={t('setAnOpenerTip')}\n        initialValue={t('setAnOpenerInitial')}\n      >\n        <Input.TextArea autoSize={{ minRows: 3 }} />\n      </Form.Item>\n     {/* <Form.Item\n        label={t('quote')}\n        valuePropName=\"checked\"\n        name={['prompt_config', 'quote']}\n        tooltip={t('quoteTip')}\n        initialValue={true}\n      >\n        <Switch />\n      </Form.Item>\n      <Form.Item\n        label={t('keyword')}\n        valuePropName=\"checked\"\n        name={['prompt_config', 'keyword']}\n        tooltip={t('keywordTip')}\n        initialValue={false}\n      >\n        <Switch />\n      </Form.Item>\n       <Form.Item\n        label={t('selfRag')}\n        valuePropName=\"checked\"\n        name={['prompt_config', 'self_rag']}\n        tooltip={t('selfRagTip')}\n        initialValue={false}\n      >\n        <Switch />\n      </Form.Item> \n      <Form.Item\n        label={t('tts')}\n        valuePropName=\"checked\"\n        name={['prompt_config', 'tts']}\n       tooltip={t('ttsTip')} \n        tooltip={\"Enabled Future\"}\n        initialValue={false}\n        required={false}\n      >\n        <Switch onChange={handleTtsChange}  />\n      </Form.Item>*/}\n      <KnowledgeBaseItem></KnowledgeBaseItem>\n    </section>\n  );\n};\n\nexport default AssistantSetting;\n","import classNames from 'classnames';\nimport { useEffect } from 'react';\nimport { ISegmentedContentProps } from '../interface';\n\nimport LlmSettingItems from '@/components/llm-setting-items';\nimport { variableEnabledFieldMap } from '@/constants/chat';\nimport { Variable } from '@/interfaces/database/chat';\nimport styles from './index.less';\n\nconst ModelSetting = ({\n  show,\n  form,\n  initialLlmSetting,\n  visible,\n}: ISegmentedContentProps & {\n  initialLlmSetting?: Variable;\n  visible?: boolean;\n}) => {\n  useEffect(() => {\n    if (visible) {\n      const values = Object.keys(variableEnabledFieldMap).reduce<\n        Record<string, boolean>\n      >((pre, field) => {\n        pre[field] =\n          initialLlmSetting === undefined\n            ? true\n            : !!initialLlmSetting[\n                variableEnabledFieldMap[\n                  field as keyof typeof variableEnabledFieldMap\n                ] as keyof Variable\n              ];\n        return pre;\n      }, {});\n      form.setFieldsValue(values);\n    }\n  }, [form, initialLlmSetting, visible]);\n\n  return (\n    <section\n      className={classNames({\n        [styles.segmentedHidden]: !show,\n      })}\n    >\n      {visible && <LlmSettingItems prefix=\"llm_setting\"></LlmSettingItems>}\n    </section>\n  );\n};\n\nexport default ModelSetting;\n","import SimilaritySlider from '@/components/similarity-slider';\nimport { DeleteOutlined, QuestionCircleOutlined } from '@ant-design/icons';\nimport {\n  Button,\n  Col,\n  Divider,\n  Form,\n  Input,\n  Row,\n  Switch,\n  Table,\n  TableProps,\n  Tooltip,\n} from 'antd';\nimport classNames from 'classnames';\nimport {\n  ForwardedRef,\n  forwardRef,\n  useEffect,\n  useImperativeHandle,\n  useState,\n} from 'react';\nimport { v4 as uuid } from 'uuid';\nimport {\n  VariableTableDataType as DataType,\n  IPromptConfigParameters,\n  ISegmentedContentProps,\n} from '../interface';\nimport { EditableCell, EditableRow } from './editable-cell';\n\nimport Rerank from '@/components/rerank';\nimport TopNItem from '@/components/top-n-item';\nimport { UseKnowledgeGraphItem } from '@/components/use-knowledge-graph-item';\nimport { useTranslate } from '@/hooks/common-hooks';\nimport { useSelectPromptConfigParameters } from '../hooks';\nimport styles from './index.less';\n\nconst PromptEngine = (\n  { show }: ISegmentedContentProps,\n  ref: ForwardedRef<Array<IPromptConfigParameters>>,\n) => {\n  const [dataSource, setDataSource] = useState<DataType[]>([]);\n  const parameters = useSelectPromptConfigParameters();\n  const { t } = useTranslate('chat');\n\n  const components = {\n    body: {\n      row: EditableRow,\n      cell: EditableCell,\n    },\n  };\n\n  const handleRemove = (key: string) => () => {\n    const newData = dataSource.filter((item) => item.key !== key);\n    setDataSource(newData);\n  };\n\n  const handleSave = (row: DataType) => {\n    const newData = [...dataSource];\n    const index = newData.findIndex((item) => row.key === item.key);\n    const item = newData[index];\n    newData.splice(index, 1, {\n      ...item,\n      ...row,\n    });\n    setDataSource(newData);\n  };\n\n  const handleAdd = () => {\n    setDataSource((state) => [\n      ...state,\n      {\n        key: uuid(),\n        variable: '',\n        optional: true,\n      },\n    ]);\n  };\n\n  const handleOptionalChange = (row: DataType) => (checked: boolean) => {\n    const newData = [...dataSource];\n    const index = newData.findIndex((item) => row.key === item.key);\n    const item = newData[index];\n    newData.splice(index, 1, {\n      ...item,\n      optional: checked,\n    });\n    setDataSource(newData);\n  };\n\n  useImperativeHandle(\n    ref,\n    () => {\n      return dataSource\n        .filter((x) => x.variable.trim() !== '')\n        .map((x) => ({ key: x.variable, optional: x.optional }));\n    },\n    [dataSource],\n  );\n\n  const columns: TableProps<DataType>['columns'] = [\n    {\n      title: t('key'),\n      dataIndex: 'variable',\n      key: 'variable',\n      onCell: (record: DataType) => ({\n        record,\n        editable: true,\n        dataIndex: 'variable',\n        title: 'key',\n        handleSave,\n      }),\n    },\n    {\n      title: t('optional'),\n      dataIndex: 'optional',\n      key: 'optional',\n      width: 40,\n      align: 'center',\n      render(text, record) {\n        return (\n          <Switch\n            size=\"small\"\n            checked={text}\n            onChange={handleOptionalChange(record)}\n          />\n        );\n      },\n    },\n    {\n      title: t('operation'),\n      dataIndex: 'operation',\n      width: 30,\n      key: 'operation',\n      align: 'center',\n      render(_, record) {\n        return <DeleteOutlined onClick={handleRemove(record.key)} />;\n      },\n    },\n  ];\n\n  useEffect(() => {\n    setDataSource(parameters);\n  }, [parameters]);\n\n  return (\n    <section\n      className={classNames({\n        [styles.segmentedHidden]: !show,\n      })}\n    >\n      <Form.Item\n        label={t('system')}\n        rules={[{ required: true, message: t('systemMessage') }]}\n        tooltip={t('systemTip')}\n        name={['prompt_config', 'system']}\n        initialValue={t('systemInitialValue')}\n      >\n        <Input.TextArea autoSize={{ maxRows: 8, minRows: 5 }} />\n      </Form.Item>\n      <Divider></Divider>\n      <SimilaritySlider isTooltipShown></SimilaritySlider>\n      <TopNItem></TopNItem>\n     {/* <Form.Item\n        label={t('multiTurn')}\n        tooltip={t('multiTurnTip')}\n        name={['prompt_config', 'refine_multiturn']}\n        initialValue={true}\n      >\n        <Switch></Switch>\n      </Form.Item>\n      <UseKnowledgeGraphItem\n        filedName={['prompt_config', 'use_kg']}\n      ></UseKnowledgeGraphItem>*/}\n     {/* <Rerank></Rerank>*/}\n       {/*<section className={classNames(styles.variableContainer)}>\n        <Row align={'middle'} justify=\"end\">\n          <Col span={9} className={styles.variableAlign}>\n            <label className={styles.variableLabel}>\n              {t('variable')}\n              <Tooltip title={t('variableTip')}>\n                <QuestionCircleOutlined className={styles.variableIcon} />\n              </Tooltip>\n            </label>\n          </Col>\n          <Col span={15} className={styles.variableAlign}>\n            <Button size=\"small\" onClick={handleAdd}>\n              {t('add')}\n            </Button>\n          </Col>\n        </Row>\n        {/*dataSource.length > 0 && (\n          <Row>\n            <Col span={7}> </Col>\n            <Col span={17}>\n              <Table\n                dataSource={dataSource}\n                columns={columns}\n                rowKey={'key'}\n                className={styles.variableTable}\n                components={components}\n                rowClassName={() => styles.editableRow}\n              />\n            </Col>\n          </Row>\n        )\n      </section>*/}\n    </section>\n  );\n};\n\nexport default forwardRef(PromptEngine);\n","import { ReactComponent as ChatConfigurationAtom } from '@/assets/svg/chat-configuration-atom.svg';\nimport { IModalManagerChildrenProps } from '@/components/modal-manager';\nimport {\n  ModelVariableType,\n  settledModelVariableMap,\n} from '@/constants/knowledge';\nimport { useTranslate } from '@/hooks/common-hooks';\nimport { useFetchModelId } from '@/hooks/logic-hooks';\nimport { IDialog } from '@/interfaces/database/chat';\nimport { getBase64FromUploadFileList } from '@/utils/file-util';\nimport { removeUselessFieldsFromValues } from '@/utils/form';\nimport { Divider, Flex, Form, Modal, Segmented, UploadFile } from 'antd';\nimport { SegmentedValue } from 'antd/es/segmented';\nimport camelCase from 'lodash/camelCase';\nimport { useEffect, useRef, useState } from 'react';\nimport { IPromptConfigParameters } from '../interface';\nimport AssistantSetting from './assistant-setting';\nimport ModelSetting from './model-setting';\nimport PromptEngine from './prompt-engine';\n\nimport styles from './index.less';\n\nconst layout = {\n  labelCol: { span: 9 },\n  wrapperCol: { span: 15 },\n};\n\nconst validateMessages = {\n  required: '${label} is required!',\n  types: {\n    email: '${label} is not a valid email!',\n    number: '${label} is not a valid number!',\n  },\n  number: {\n    range: '${label} must be between ${min} and ${max}',\n  },\n};\n\nenum ConfigurationSegmented {\n  AssistantSetting = 'Assistant Setting',\n  PromptEngine = 'Prompt Engine',\n  ModelSetting = 'Model Setting',\n}\n\nconst segmentedMap = {\n  [ConfigurationSegmented.AssistantSetting]: AssistantSetting,\n  [ConfigurationSegmented.ModelSetting]: ModelSetting,\n  [ConfigurationSegmented.PromptEngine]: PromptEngine,\n};\n\ninterface IProps extends IModalManagerChildrenProps {\n  initialDialog: IDialog;\n  loading: boolean;\n  onOk: (dialog: IDialog) => void;\n  clearDialog: () => void;\n}\n\nconst ChatConfigurationModal = ({\n  visible,\n  hideModal,\n  initialDialog,\n  loading,\n  onOk,\n  clearDialog,\n}: IProps) => {\n  const [form] = Form.useForm();\n\n  const [value, setValue] = useState<ConfigurationSegmented>(\n    ConfigurationSegmented.AssistantSetting,\n  );\n  const promptEngineRef = useRef<Array<IPromptConfigParameters>>([]);\n  const modelId = useFetchModelId();\n  const { t } = useTranslate('chat');\n\n  const handleOk = async () => {\n    \n    const values = await form.validateFields();\n    //alert(JSON.stringify(values)); return;\n    const nextValues: any = removeUselessFieldsFromValues(\n      values,\n      'llm_setting.',\n    );\n    \n    const emptyResponse = nextValues.prompt_config?.empty_response ?? '';\n   \n    const icon = null;//await getBase64FromUploadFileList(values.icon);\n   \n    const finalValues = {\n      dialog_id: initialDialog.id,\n      ...nextValues,\n      vector_similarity_weight: 1 - nextValues.vector_similarity_weight,\n      prompt_config: {\n        ...nextValues.prompt_config,\n        parameters: promptEngineRef.current,\n        empty_response: emptyResponse,\n      },\n      icon,\n    };\n    \n    onOk(finalValues);\n  };\n\n  const handleSegmentedChange = (val: SegmentedValue) => {\n    setValue(val as ConfigurationSegmented);\n  };\n\n  const handleModalAfterClose = () => {\n    clearDialog();\n    form.resetFields();\n  };\n\n  const title = (\n    <Flex gap={16}>\n      {/*<ChatConfigurationAtom></ChatConfigurationAtom>*/}\n      <div>\n        <b>{t('chatConfiguration')}</b>\n        <div className={styles.chatConfigurationDescription}>\n          {t('chatConfigurationDescription')}\n        </div>\n      </div>\n    </Flex>\n  );\n\n  useEffect(() => {\n    if (visible) {\n      const icon = initialDialog.icon;\n      let fileList: UploadFile[] = [];\n\n      if (icon) {\n        fileList = [{ uid: '1', name: 'file', thumbUrl: icon, status: 'done' }];\n      }\n      form.setFieldsValue({\n        ...initialDialog,\n        llm_setting:\n          initialDialog.llm_setting ??\n          settledModelVariableMap[ModelVariableType.Precise],\n        icon: fileList,\n        llm_id: initialDialog.llm_id ?? modelId,\n        vector_similarity_weight:\n          1 - (initialDialog.vector_similarity_weight ?? 0.3),\n      });\n    }\n  }, [initialDialog, form, visible, modelId]);\n\n  return (\n    <Modal\n      title={title}\n      width={688}\n      open={visible}\n      onOk={handleOk}\n      onCancel={hideModal}\n      confirmLoading={loading}\n      destroyOnClose\n      afterClose={handleModalAfterClose}\n    >\n      <Segmented\n        size={'large'}\n        value={value}\n        onChange={handleSegmentedChange}\n        options={Object.values(ConfigurationSegmented).map((x) => ({\n          label: t(camelCase(x)),\n          value: x,\n        }))}\n        block\n      />\n      <Divider></Divider>\n      <Form\n        {...layout}\n        name=\"nest-messages\"\n        form={form}\n        style={{ maxWidth: 600 }}\n        validateMessages={validateMessages}\n        colon={false}\n      >\n        {Object.entries(segmentedMap).map(([key, Element]) => (\n          <Element\n            key={key}\n            show={key === value}\n            form={form}\n            {...(key === ConfigurationSegmented.ModelSetting\n              ? { initialLlmSetting: initialDialog.llm_setting, visible }\n              : {})}\n            {...(key === ConfigurationSegmented.PromptEngine\n              ? { ref: promptEngineRef }\n              : {})}\n          ></Element>\n        ))}\n      </Form>\n    </Modal>\n  );\n};\n\nexport default ChatConfigurationModal;\n","// extracted by mini-css-extract-plugin\nexport default {\"chatContainer\":\"chatContainer___KnZy3\",\"messageContainer\":\"messageContainer___HpbDk\"};","import MessageItem from '@/components/message-item';\nimport { MessageType } from '@/constants/chat';\nimport { Flex, Spin } from 'antd';\nimport {\n  useCreateConversationBeforeUploadDocument,\n  useGetFileIcon,\n  useGetSendButtonDisabled,\n  useSendButtonDisabled,\n  useSendNextMessage,\n} from '../hooks';\nimport { buildMessageItemReference } from '../utils';\n\nimport MessageInput from '@/components/message-input';\nimport PdfDrawer from '@/components/pdf-drawer';\nimport { useClickDrawer } from '@/components/pdf-drawer/hooks';\nimport {\n  useFetchNextConversation,\n  useGetChatSearchParams,\n} from '@/hooks/chat-hooks';\nimport { useFetchUserInfo } from '@/hooks/user-setting-hooks';\nimport { buildMessageUuidWithRole } from '@/utils/chat';\nimport { memo } from 'react';\nimport styles from './index.less';\n\ninterface IProps {\n  controller: AbortController;\n}\n\nconst ChatContainer = ({ controller }: IProps) => {\n  const { conversationId } = useGetChatSearchParams();\n  const { data: conversation } = useFetchNextConversation();\n\n  const {\n    value,\n    ref,\n    loading,\n    sendLoading,\n    derivedMessages,\n    handleInputChange,\n    handlePressEnter,\n    regenerateMessage,\n    removeMessageById,\n  } = useSendNextMessage(controller);\n\n  const { visible, hideModal, documentId, selectedChunk, clickDocumentButton } =\n    useClickDrawer();\n  const disabled = useGetSendButtonDisabled();\n  const sendDisabled = useSendButtonDisabled(value);\n  useGetFileIcon();\n  const { data: userInfo } = useFetchUserInfo();\n  const { createConversationBeforeUploadDocument } =\n    useCreateConversationBeforeUploadDocument();\n\n  return (\n    <>\n      <Flex flex={1} className={styles.chatContainer} vertical>\n        <Flex flex={1} vertical className={styles.messageContainer}>\n          <div>\n            <Spin spinning={loading}>\n              {derivedMessages?.map((message, i) => {\n                return (\n                  <MessageItem\n                    loading={\n                      message.role === MessageType.Assistant &&\n                      sendLoading &&\n                      derivedMessages.length - 1 === i\n                    }\n                    key={buildMessageUuidWithRole(message)}\n                    item={message}\n                    nickname={userInfo.nickname}\n                    avatar={userInfo.avatar}\n                    avatardialog={conversation.avatar}\n                    reference={buildMessageItemReference(\n                      {\n                        message: derivedMessages,\n                        reference: conversation.reference,\n                      },\n                      message,\n                    )}\n                    clickDocumentButton={clickDocumentButton}\n                    index={i}\n                    removeMessageById={removeMessageById}\n                    regenerateMessage={regenerateMessage}\n                    sendLoading={sendLoading}\n                  ></MessageItem>\n                );\n              })}\n            </Spin>\n          </div>\n          <div ref={ref} />\n        </Flex>\n        <MessageInput\n          disabled={disabled}\n          sendDisabled={sendDisabled}\n          sendLoading={sendLoading}\n          value={value}\n          onInputChange={handleInputChange}\n          onPressEnter={handlePressEnter}\n          conversationId={conversationId}\n          createConversationBeforeUploadDocument={\n            createConversationBeforeUploadDocument\n          }\n        ></MessageInput>\n      </Flex>\n      <PdfDrawer\n        visible={visible}\n        hideModal={hideModal}\n        documentId={documentId}\n        chunk={selectedChunk}\n      ></PdfDrawer>\n    </>\n  );\n};\n\nexport default memo(ChatContainer);\n","// extracted by mini-css-extract-plugin\nexport default {\"chatWrapper\":\"chatWrapper___LQ6YY\",\"chatAppWrapper\":\"chatAppWrapper___hrF6r\",\"chatAppContent\":\"chatAppContent___Ri0fp\",\"chatAppCard\":\"chatAppCard___kPbxc\",\"cubeIcon\":\"cubeIcon___zAmbo\",\"chatAppCardSelected\":\"chatAppCardSelected___h9j2W\",\"chatAppCardSelectedDark\":\"chatAppCardSelectedDark___K4uSc\",\"chatTitleWrapper\":\"chatTitleWrapper___MXbZF\",\"chatTitle\":\"chatTitle___cyXkX\",\"chatTitleContent\":\"chatTitleContent___XsLt3\",\"chatSpin\":\"chatSpin___J9mE8\",\"chatTitleCard\":\"chatTitleCard___Pnbv0\",\"chatTitleCardSelected\":\"chatTitleCardSelected___A8BIt\",\"chatTitleCardSelectedDark\":\"chatTitleCardSelectedDark___isklU\",\"divider\":\"divider___d5TdM\"};","import { ReactComponent as ChatAppCube } from '@/assets/svg/chat-app-cube.svg';\nimport RenameModal from '@/components/rename-modal';\nimport { DeleteOutlined, EditOutlined } from '@ant-design/icons';\nimport {\n  Avatar,\n  Button,\n  Card,\n  Divider,\n  Dropdown,\n  Flex,\n  MenuProps,\n  Space,\n  Spin,\n  Tag,\n  Tooltip,\n  Typography,\n} from 'antd';\nimport { MenuItemProps } from 'antd/lib/menu/MenuItem';\nimport classNames from 'classnames';\nimport { useCallback, useState } from 'react';\nimport ChatConfigurationModal from './chat-configuration-modal';\nimport ChatContainer from './chat-container';\nimport {\n  useDeleteConversation,\n  useDeleteDialog,\n  useEditDialog,\n  useHandleItemHover,\n  useRenameConversation,\n  useSelectDerivedConversationList,\n} from './hooks';\n\nimport EmbedModal from '@/components/api-service/embed-modal';\nimport { useShowEmbedModal } from '@/components/api-service/hooks';\nimport SvgIcon from '@/components/svg-icon';\nimport { useTheme } from '@/components/theme-provider';\nimport { SharedFrom } from '@/constants/chat';\nimport {\n  useClickConversationCard,\n  useClickDialogCard,\n  useFetchNextDialogList,\n  useGetChatSearchParams,\n} from '@/hooks/chat-hooks';\nimport { useTranslate } from '@/hooks/common-hooks';\nimport { useSetSelectedRecord } from '@/hooks/logic-hooks';\nimport { IDialog } from '@/interfaces/database/chat';\nimport { PictureInPicture2 } from 'lucide-react';\nimport styles from './index.less';\n\nconst { Text } = Typography;\n\nconst Chat = () => {\n  const { data: dialogList, loading: dialogLoading } = useFetchNextDialogList();\n  const { onRemoveDialog } = useDeleteDialog();\n  const { onRemoveConversation } = useDeleteConversation();\n  const { handleClickDialog } = useClickDialogCard();\n  const { handleClickConversation } = useClickConversationCard();\n  const { dialogId, conversationId } = useGetChatSearchParams();\n  const { theme } = useTheme();\n  const {\n    list: conversationList,\n    addTemporaryConversation,\n    loading: conversationLoading,\n  } = useSelectDerivedConversationList();\n  const { activated, handleItemEnter, handleItemLeave } = useHandleItemHover();\n  const {\n    activated: conversationActivated,\n    handleItemEnter: handleConversationItemEnter,\n    handleItemLeave: handleConversationItemLeave,\n  } = useHandleItemHover();\n  const {\n    conversationRenameLoading,\n    initialConversationName,\n    onConversationRenameOk,\n    conversationRenameVisible,\n    hideConversationRenameModal,\n    showConversationRenameModal,\n  } = useRenameConversation();\n  const {\n    dialogSettingLoading,\n    initialDialog,\n    onDialogEditOk,\n    dialogEditVisible,\n    clearDialog,\n    hideDialogEditModal,\n    showDialogEditModal,\n  } = useEditDialog();\n  const { t } = useTranslate('chat');\n  const { currentRecord, setRecord } = useSetSelectedRecord<IDialog>();\n  const [controller, setController] = useState(new AbortController());\n  const { showEmbedModal, hideEmbedModal, embedVisible, beta } =\n    useShowEmbedModal();\n\n  const handleAppCardEnter = (id: string) => () => {\n    handleItemEnter(id);\n  };\n\n  const handleConversationCardEnter = (id: string) => () => {\n    handleConversationItemEnter(id);\n  };\n\n  const handleShowChatConfigurationModal =\n    (dialogId?: string): any =>\n    (info: any) => {\n      info?.domEvent?.preventDefault();\n      info?.domEvent?.stopPropagation();\n      showDialogEditModal(dialogId);\n    };\n\n  const handleRemoveDialog =\n    (dialogId: string): MenuItemProps['onClick'] =>\n    ({ domEvent }) => {\n      domEvent.preventDefault();\n      domEvent.stopPropagation();\n      onRemoveDialog([dialogId]);\n    };\n\n  const handleShowOverviewModal =\n    (dialog: IDialog): any =>\n    (info: any) => {\n      info?.domEvent?.preventDefault();\n      info?.domEvent?.stopPropagation();\n      setRecord(dialog);\n      showEmbedModal();\n    };\n\n  const handleRemoveConversation =\n    (conversationId: string): MenuItemProps['onClick'] =>\n    ({ domEvent }) => {\n      domEvent.preventDefault();\n      domEvent.stopPropagation();\n      onRemoveConversation([conversationId]);\n    };\n\n  const handleShowConversationRenameModal =\n    (conversationId: string): MenuItemProps['onClick'] =>\n    ({ domEvent }) => {\n      domEvent.preventDefault();\n      domEvent.stopPropagation();\n      showConversationRenameModal(conversationId);\n    };\n\n  const handleDialogCardClick = useCallback(\n    (dialogId: string) => () => {\n      handleClickDialog(dialogId);\n    },\n    [handleClickDialog],\n  );\n\n  const handleConversationCardClick = useCallback(\n    (conversationId: string, isNew: boolean) => () => {\n      handleClickConversation(conversationId, isNew ? 'true' : '');\n      setController((pre) => {\n        pre.abort();\n        return new AbortController();\n      });\n    },\n    [handleClickConversation],\n  );\n\n  const handleCreateTemporaryConversation = useCallback(() => {\n    addTemporaryConversation();\n  }, [addTemporaryConversation]);\n\n  const buildAppItems = (dialog: IDialog) => {\n    const dialogId = dialog.id;\n\n    const appItems: MenuProps['items'] = [\n      {\n        key: '1',\n        onClick: handleShowChatConfigurationModal(dialogId),\n        label: (\n          <Space>\n            <EditOutlined />\n            {t('edit', { keyPrefix: 'common' })}\n          </Space>\n        ),\n      },\n      { type: 'divider' },\n      {\n        key: '2',\n        onClick: handleRemoveDialog(dialogId),\n        label: (\n          <Space>\n            <DeleteOutlined />\n            {t('delete', { keyPrefix: 'common' })}\n          </Space>\n        ),\n      },\n      { type: 'divider' },\n      {\n        key: '3',\n        onClick: handleShowOverviewModal(dialog),\n        label: (\n          <Space>\n            {/* <KeyOutlined /> */}\n            <PictureInPicture2 className=\"size-4\" />\n            {t('embedIntoSite', { keyPrefix: 'common' })}\n          </Space>\n        ),\n      },\n    ];\n\n    return appItems;\n  };\n\n  const buildConversationItems = (conversationId: string) => {\n    const appItems: MenuProps['items'] = [\n      {\n        key: '1',\n        onClick: handleShowConversationRenameModal(conversationId),\n        label: (\n          <Space>\n            <EditOutlined />\n            {t('rename', { keyPrefix: 'common' })}\n          </Space>\n        ),\n      },\n      { type: 'divider' },\n      {\n        key: '2',\n        onClick: handleRemoveConversation(conversationId),\n        label: (\n          <Space>\n            <DeleteOutlined />\n            {t('delete', { keyPrefix: 'common' })}\n          </Space>\n        ),\n      },\n    ];\n\n    return appItems;\n  };\n\n  return (\n    <Flex className={styles.chatWrapper}>\n      <Flex className={styles.chatAppWrapper}>\n        <Flex flex={1} vertical>\n          <Button type=\"primary\" onClick={handleShowChatConfigurationModal()}>\n            {t('createAssistant')}\n          </Button>\n          <Divider></Divider>\n          <Flex className={styles.chatAppContent} vertical gap={10}>\n            <Spin spinning={dialogLoading} wrapperClassName={styles.chatSpin}>\n              {dialogList.map((x) => (\n                <Card\n                  key={x.id}\n                  hoverable\n                  className={classNames(styles.chatAppCard, {\n                    [theme === 'dark'\n                      ? styles.chatAppCardSelectedDark\n                      : styles.chatAppCardSelected]: dialogId === x.id,\n                  })}\n                  onMouseEnter={handleAppCardEnter(x.id)}\n                  onMouseLeave={handleItemLeave}\n                  onClick={handleDialogCardClick(x.id)}\n                >\n                  <Flex justify=\"space-between\" align=\"center\">\n                    <Space size={15}>\n                      <Avatar src={x.icon} shape={'square'} />\n                      <section>\n                        <b>\n                          <Text\n                            ellipsis={{ tooltip: x.name }}\n                            style={{ width: 130 }}\n                          >\n                            {x.name}\n                          </Text>\n                        </b>\n                        <div>{x.description}</div>\n                      </section>\n                    </Space>\n                    {activated === x.id && (\n                      <section>\n                        <Dropdown menu={{ items: buildAppItems(x) }}>\n                          <ChatAppCube\n                            className={styles.cubeIcon}\n                          ></ChatAppCube>\n                        </Dropdown>\n                      </section>\n                    )}\n                  </Flex>\n                </Card>\n              ))}\n            </Spin>\n          </Flex>\n        </Flex>\n      </Flex>\n      <Divider type={'vertical'} className={styles.divider}></Divider>\n      <Flex className={styles.chatTitleWrapper}>\n        <Flex flex={1} vertical>\n          <Flex\n            justify={'space-between'}\n            align=\"center\"\n            className={styles.chatTitle}\n          >\n            <Space>\n              <b>{t('chat')}</b>\n              <Tag>{conversationList.length}</Tag>\n            </Space>\n            <Tooltip title={t('newChat')}>\n              <div>\n                <SvgIcon\n                  name=\"plus-circle-fill\"\n                  width={20}\n                  onClick={handleCreateTemporaryConversation}\n                ></SvgIcon>\n              </div>\n            </Tooltip>\n          </Flex>\n          <Divider></Divider>\n          <Flex vertical gap={10} className={styles.chatTitleContent}>\n            <Spin\n              spinning={conversationLoading}\n              wrapperClassName={styles.chatSpin}\n            >\n              {conversationList.map((x) => (\n                <Card\n                  key={x.id}\n                  hoverable\n                  onClick={handleConversationCardClick(x.id, x.is_new)}\n                  onMouseEnter={handleConversationCardEnter(x.id)}\n                  onMouseLeave={handleConversationItemLeave}\n                  className={classNames(styles.chatTitleCard, {\n                    [theme === 'dark'\n                      ? styles.chatTitleCardSelectedDark\n                      : styles.chatTitleCardSelected]: x.id === conversationId,\n                  })}\n                >\n                  <Flex justify=\"space-between\" align=\"center\">\n                    <div>\n                      <Text\n                        ellipsis={{ tooltip: x.name }}\n                        style={{ width: 150 }}\n                      >\n                        {x.name}\n                      </Text>\n                    </div>\n                    {conversationActivated === x.id &&\n                      x.id !== '' &&\n                      !x.is_new && (\n                        <section>\n                          <Dropdown\n                            menu={{ items: buildConversationItems(x.id) }}\n                          >\n                            <ChatAppCube\n                              className={styles.cubeIcon}\n                            ></ChatAppCube>\n                          </Dropdown>\n                        </section>\n                      )}\n                  </Flex>\n                </Card>\n              ))}\n            </Spin>\n          </Flex>\n        </Flex>\n      </Flex>\n      <Divider type={'vertical'} className={styles.divider}></Divider>\n      <ChatContainer controller={controller}></ChatContainer>\n      {dialogEditVisible && (\n        <ChatConfigurationModal\n          visible={dialogEditVisible}\n          initialDialog={initialDialog}\n          showModal={showDialogEditModal}\n          hideModal={hideDialogEditModal}\n          loading={dialogSettingLoading}\n          onOk={onDialogEditOk}\n          clearDialog={clearDialog}\n        ></ChatConfigurationModal>\n      )}\n      <RenameModal\n        visible={conversationRenameVisible}\n        hideModal={hideConversationRenameModal}\n        onOk={onConversationRenameOk}\n        initialName={initialConversationName}\n        loading={conversationRenameLoading}\n      ></RenameModal>\n\n      {embedVisible && (\n        <EmbedModal\n          visible={embedVisible}\n          hideModal={hideEmbedModal}\n          token={currentRecord.id}\n          form={SharedFrom.Chat}\n          beta={beta}\n          isAgent={false}\n        ></EmbedModal>\n      )}\n    </Flex>\n  );\n};\n\nexport default Chat;\n"],"names":["Text","Typography","getFileId","file","get","getFileIds","fileList","reduce","pre","cur","concat","getBase64","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","MessageInput","_ref","_ref$isShared","isShared","disabled","value","onPressEnter","sendDisabled","sendLoading","onInputChange","conversationId","_ref$showUploadIcon","showUploadIcon","createConversationBeforeUploadDocument","_ref$uploadMethod","uploadMethod","t","useTranslate","removeDocument","useRemoveNextDocument","deleteDocument","useDeleteDocument","_useFetchDocumentInfo","useFetchDocumentInfosByIds","documentInfos","data","setDocumentIds","uploadAndParseDocument","useUploadAndParseDocument","conversationIdRef","useRef","_useState","useState","_useState2","_slicedToArray","setFileList","handlePreview","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","url","preview","originFileObj","sent","stop","_x","apply","arguments","handleChange","_ref4","_callee2","_ref3","nextConversationId","creatingRet","ret","_context2","name","code","id","list","push","_objectSpread","status","_toConsumableArray","nextList","filter","x","uid","response","percent","_x2","isUploadingFile","some","handlePressEnter","useCallback","_callee3","ids","_context3","abrupt","handleRemove","_ref6","_callee4","_context4","Array","isArray","length","preList","_x3","getDocumentInfoById","find","useEffect","current","_jsxs","Flex","gap","vertical","className","styles","messageInputWrapper","children","_jsx","Input","size","placeholder","classNames","_defineProperty","inputWrapper","suffix","Space","Upload","onPreview","onChange","multiple","onRemove","showUploadList","beforeUpload","Button","type","icon","Paperclip","onClick","loading","List","grid","gutter","xs","sm","md","lg","xl","xxl","dataSource","listWrapper","renderItem","item","_documentInfo$name","_item$originFileObj$n","_item$originFileObj","_getDocumentInfoById$","_getDocumentInfoById","documentInfo","fileExtension","getExtension","fileName","Item","Card","documentCard","align","Spin","indicator","LoadingOutlined","style","fontSize","spin","InfoCircleOutlined","FileIcon","width","ellipsis","tooltip","nameText","_Fragment","toUpperCase","formatBytes","deleteIcon","CloseCircleOutlined","memo","visible","hideModal","initialName","onOk","_Form$useForm","Form","useForm","form","handleOk","validateFields","setFieldValue","Modal","title","open","onCancel","okButtonProps","confirmLoading","labelCol","span","wrapperCol","maxWidth","onFinish","values","console","log","onFinishFailed","errorInfo","autoComplete","label","rules","required","message","__defProp","Object","defineProperty","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","enumerable","configurable","writable","SvgChatAppCube","props","a","b","prop","call","__spreadValues","height","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","show","useFetchTenantInfo","checked","tts_id","PlusOutlined","keyPrefix","initialValue","display","Select","options","TextArea","autoSize","minRows","KnowledgeBaseItem","initialLlmSetting","keys","variableEnabledFieldMap","field","undefined","setFieldsValue","LlmSettingItems","prefix","PromptEngine","ref","setDataSource","parameters","useSelectPromptConfigParameters","handleSave","row","newData","index","findIndex","splice","useImperativeHandle","variable","trim","map","optional","maxRows","Divider","SimilaritySlider","isTooltipShown","TopNItem","forwardRef","layout","validateMessages","types","email","number","range","ConfigurationSegmented","segmentedMap","AssistantSetting","ModelSetting","initialDialog","clearDialog","setValue","promptEngineRef","modelId","useFetchModelId","_nextValues$prompt_co","_nextValues$prompt_co2","nextValues","emptyResponse","finalValues","removeUselessFieldsFromValues","prompt_config","empty_response","dialog_id","vector_similarity_weight","_initialDialog$llm_se","_initialDialog$llm_id","_initialDialog$vector","thumbUrl","llm_setting","settledModelVariableMap","ModelVariableType","Precise","llm_id","destroyOnClose","afterClose","resetFields","Segmented","val","camelCase","block","colon","entries","Element","ChatContainer","controller","useGetChatSearchParams","conversation","useFetchNextConversation","_useSendNextMessage","useSendNextMessage","derivedMessages","handleInputChange","regenerateMessage","removeMessageById","_useClickDrawer","useClickDrawer","documentId","selectedChunk","clickDocumentButton","useGetSendButtonDisabled","useSendButtonDisabled","useGetFileIcon","userInfo","useFetchUserInfo","useCreateConversationBeforeUploadDocument","flex","spinning","i","MessageItem","role","MessageType","Assistant","nickname","avatar","avatardialog","reference","buildMessageItemReference","buildMessageUuidWithRole","PdfDrawer","chunk","_useFetchNextDialogLi","useFetchNextDialogList","dialogList","dialogLoading","onRemoveDialog","useDeleteDialog","onRemoveConversation","useDeleteConversation","handleClickDialog","useClickDialogCard","handleClickConversation","useClickConversationCard","_useGetChatSearchPara","dialogId","theme","useTheme","_useSelectDerivedConv","useSelectDerivedConversationList","conversationList","addTemporaryConversation","conversationLoading","_useHandleItemHover","useHandleItemHover","activated","handleItemEnter","handleItemLeave","_useHandleItemHover2","conversationActivated","handleConversationItemEnter","handleConversationItemLeave","_useRenameConversatio","useRenameConversation","conversationRenameLoading","initialConversationName","onConversationRenameOk","conversationRenameVisible","hideConversationRenameModal","showConversationRenameModal","_useEditDialog","useEditDialog","dialogSettingLoading","onDialogEditOk","dialogEditVisible","hideDialogEditModal","showDialogEditModal","_useSetSelectedRecord","useSetSelectedRecord","currentRecord","setRecord","AbortController","setController","_useShowEmbedModal","useShowEmbedModal","showEmbedModal","hideEmbedModal","embedVisible","beta","handleShowChatConfigurationModal","info","_info$domEvent","_info$domEvent2","domEvent","preventDefault","stopPropagation","handleRemoveDialog","handleShowOverviewModal","dialog","_info$domEvent3","_info$domEvent4","handleRemoveConversation","handleShowConversationRenameModal","handleDialogCardClick","handleConversationCardClick","isNew","abort","handleCreateTemporaryConversation","buildAppItems","EditOutlined","DeleteOutlined","PictureInPicture2","buildConversationItems","wrapperClassName","hoverable","onMouseEnter","onMouseLeave","justify","Avatar","src","shape","description","Dropdown","menu","items","ChatAppCube","Tag","Tooltip","SvgIcon","is_new","ChatConfigurationModal","showModal","RenameModal","EmbedModal","token","SharedFrom","Chat","isAgent"],"sourceRoot":""}