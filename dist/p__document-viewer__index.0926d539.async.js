(self.webpackChunk=self.webpackChunk||[]).push([[948],{40169:function(e,n,t){"use strict";t.d(n,{Kj:function(){return i},Wy:function(){return s},eV:function(){return o},nK:function(){return u},qg:function(){return r},qp:function(){return l},rU:function(){return f},ru:function(){return m}});var c=t(19632),a=t.n(c),o={aep:"aep.svg",ai:"ai.svg",avi:"avi.svg",css:"css.svg",csv:"csv.svg",dmg:"dmg.svg",doc:"doc.svg",docx:"docx.svg",eps:"eps.svg",exe:"exe.svg",fig:"fig.svg",gif:"gif.svg",html:"html.svg",indd:"indd.svg",java:"java.svg",jpeg:"jpeg.svg",jpg:"jpg.svg",js:"js.svg",json:"json.svg",mkv:"mkv.svg",mp3:"mp3.svg",mp4:"mp4.svg",mpeg:"mpeg.svg",pdf:"pdf.svg",png:"png.svg",ppt:"ppt.svg",pptx:"pptx.svg",psd:"psd.svg",rss:"rss.svg",sql:"sql.svg",svg:"svg.svg",tiff:"tiff.svg",txt:"txt.svg",wav:"wav.svg",webp:"webp.svg",xls:"xls.svg",xlsx:"xlsx.svg",xml:"xml.svg"},r=["English","Other_language"],s={English:"English",Other_language:"Lang 2"},i={English:"en",Chinese:"zh","Traditional Chinese":"zh-TRADITIONAL",Indonesia:"id",Spanish:"es",Vietnamese:"vi",Japanese:"ja","Portuguese BR":"pt-br"},u=function(e){return e.Bmp="image/bmp",e.Csv="text/csv",e.Odt="application/vnd.oasis.opendocument.text",e.Doc="application/msword",e.Docx="application/vnd.openxmlformats-officedocument.wordprocessingml.document",e.Gif="image/gif",e.Htm="text/htm",e.Html="text/html",e.Jpg="image/jpg",e.Jpeg="image/jpeg",e.Pdf="application/pdf",e.Png="image/png",e.Ppt="application/vnd.ms-powerpoint",e.Pptx="application/vnd.openxmlformats-officedocument.presentationml.presentation",e.Tiff="image/tiff",e.Txt="text/plain",e.Xls="application/vnd.ms-excel",e.Xlsx="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",e.Mp4="video/mp4",e.Json="application/json",e}({}),l="demo.ragflow.io",f=["jpg","jpeg","png","gif","bmp","tif","tiff","webp","ico"],d=["xlsx","xls","pdf","docx"].concat(f),m=a()(d)},86968:function(e,n,t){"use strict";t.d(n,{I3:function(){return p},pG:function(){return g},qM:function(){return v}});var c=t(15009),a=t.n(c),o=t(99289),r=t.n(o),s=t(5574),i=t.n(s),u=t(21640),l=t(3321),f=(t(18446),t(62435)),d=t(67421),m=t(86074),g=function(){var e=(0,f.useState)(!1),n=i()(e,2),t=n[0],c=n[1],a=(0,f.useCallback)((function(){c(!0)}),[]),o=(0,f.useCallback)((function(){c(!1)}),[]),r=(0,f.useCallback)((function(){c(!t)}),[t]);return{visible:t,showModal:a,hideModal:o,switchVisible:r}};var p=function(){var e=l.Z.useApp().modal,n=(0,d.$G)().t;return(0,f.useCallback)((function(t){var c=t.title,o=t.content,s=t.onOk,i=t.onCancel;return new Promise((function(t,l){e.confirm({title:null!=c?c:n("common.deleteModalTitle"),icon:(0,m.jsx)(u.Z,{}),content:o,okText:n("common.ok"),okType:"danger",cancelText:n("common.cancel"),onOk:function(){return r()(a()().mark((function e(){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==s?void 0:s();case 3:n=e.sent,t(n),console.info(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},onCancel:function(){null==i||i()}})}))}),[n,e])},v=function(e){return(0,d.$G)("translation",{keyPrefix:e})}},4772:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var c=t(86250),a=t(38925),o=t(86968),r=(t(62435),"errorWrapper___QfVXQ"),s=t(86074),i=function(e){var n=e.children,t=(0,o.qM)("fileManager").t;return(0,s.jsx)(c.Z,{align:"center",justify:"center",className:r,children:(0,s.jsx)(a.Z,{type:"error",message:(0,s.jsx)("h2",{children:n||t("fileError")})})})}},11785:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return H}});var c=t(5574),a=t.n(c),o=t(40169),r=t(60806),s=t(86250),i=t(98163),u=t(24701),l=t(75081),f=t(4772),d=t(9783),m=t.n(d),g=t(15009),p=t.n(g),v=t(99289),h=t.n(v),_=t(39918),x=t(61921),k=t(40903),b=t(87066),w=t(59255),j=t(62435),y=function(e){var n=(0,j.useState)(""),t=a()(n,2),c=t[0],o=t[1],r=(0,j.useCallback)(h()(p()().mark((function n(){var t,c;return p()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.Z.get(e);case 2:return t=n.sent,(c=t.data)instanceof ArrayBuffer||0===c.code||o(c.message),n.abrupt("return",t);case 6:case"end":return n.stop()}}),n)}))),[e]);return(0,j.useEffect)((function(){r()}),[r]),{fetchDocument:r,error:c}},C=function(){var e=(0,j.useCallback)(function(){var e=h()(p()().mark((function e(n){var t;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.Z.get(n,{headers:m()({},_._n,(0,x.c)()),responseType:"arraybuffer"});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]);return{fetchDocument:e}},T="docxViewerWrapper___bSxaq",S="box___sXFPE",E=t(86074),D=function(e){var n=function(e){var n=(0,j.useState)(!0),t=a()(n,2),c=t[0],o=t[1],r=(0,j.useState)(),s=a()(r,2),i=s[0],u=s[1],l=C().fetchDocument,f=(0,j.useRef)(null),d=(0,j.useCallback)(h()(p()().mark((function n(){var t;return p()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l(e);case 3:t=n.sent,w.convertToHtml({arrayBuffer:t.data},{includeDefaultStyleMap:!0}).then((function(e){o(!0);var n=document.createElement("div");n.className="document-container",n.innerHTML=e.value;var t=f.current;t&&(t.innerHTML=n.outerHTML)})).catch((function(){o(!1)})),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),u(n.t0.toString());case 10:case"end":return n.stop()}}),n,null,[[0,7]])}))),[e,l]);return(0,j.useEffect)((function(){d()}),[d]),{succeed:c,containerRef:f,error:i}}(e.filePath),t=n.succeed,c=n.containerRef,o=n.error;return(0,E.jsx)(E.Fragment,{children:t?(0,E.jsx)("section",{className:T,children:(0,E.jsx)("div",{id:"docx",ref:c,className:S,children:(0,E.jsx)(l.Z,{})})}):(0,E.jsx)(f.Z,{children:o})})},Z=(t(21992),function(e){var n=function(e){var n=(0,j.useState)(!0),t=a()(n,2),c=t[0],o=t[1],r=C().fetchDocument,s=(0,j.useRef)(null),i=y(e).error,u=(0,j.useCallback)(h()(p()().mark((function n(){var t,c,a;return p()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s.current&&(c=k.Z.init(s.current)),n.next=3,r(e);case 3:a=n.sent,null===(t=c)||void 0===t||t.preview(a.data).then((function(){console.log("succeed"),o(!0)})).catch((function(e){console.warn("failed",e),c.destroy(),o(!1)}));case 5:case"end":return n.stop()}}),n)}))),[e,r]);return(0,j.useEffect)((function(){u()}),[u]),{status:c,containerRef:s,error:i}}(e.filePath),t=n.status,c=n.containerRef,o=n.error;return(0,E.jsx)("div",{id:"excel",ref:c,style:{height:"100%",width:"100%"},children:t||(0,E.jsx)(f.Z,{children:o})})}),M=t(21687),P=t(49723),F=P.Hz,N=function(e){var n=e.url,t=y(n).error,c=function(){},a=m()({},_._n,(0,x.c)());return(0,E.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,E.jsx)(F,{url:n,httpHeaders:a,beforeLoad:(0,E.jsx)(M.Z,{active:!0}),workerSrc:"/pdfjs-dist/pdf.worker.min.js",errorMessage:(0,E.jsx)(f.Z,{children:t}),onError:function(e){console.warn(e)},children:function(e){return(0,E.jsx)(P.Nb,{pdfDocument:e,enableAreaSelection:function(e){return e.altKey},onScrollChange:c,scrollRef:function(){},onSelectionFinished:function(){return null},highlightTransform:function(){return(0,E.jsx)("div",{})},highlights:[]})}})})},O="viewerWrapper___Hh0uK",R="image___OwcS1",H=function(){var e=(0,u.UO)().id,n=(0,u.lr)(),t=a()(n,1)[0],c=t.get("ext"),l=t.get("prefix"),f="".concat(r.N,"/").concat(l||"file","/get/").concat(e);return(0,E.jsxs)("section",{className:O,children:[o.rU.includes(c)&&(0,E.jsx)(s.Z,{className:R,align:"center",justify:"center",children:(0,E.jsx)(i.Z,{src:f,preview:!1})}),"pdf"===c&&(0,E.jsx)(N,{url:f}),("xlsx"===c||"xls"===c)&&(0,E.jsx)(Z,{filePath:f}),"docx"===c&&(0,E.jsx)(D,{filePath:f})]})}},60806:function(e,n,t){"use strict";t.d(n,{N:function(){return c}});var c="http://localhost:9380/v1";n.Z={login:"".concat(c,"/user/login"),logout:"".concat(c,"/user/logout"),register:"".concat(c,"/user/register"),setting:"".concat(c,"/user/setting"),user_info:"".concat(c,"/user/info"),tenant_info:"".concat(c,"/user/tenant_info"),set_tenant_info:"".concat(c,"/user/set_tenant_info"),addTenantUser:function(e){return"".concat(c,"/tenant/").concat(e,"/user")},listTenantUser:function(e){return"".concat(c,"/tenant/").concat(e,"/user/list")},deleteTenantUser:function(e,n){return"".concat(c,"/tenant/").concat(e,"/user/").concat(n)},listTenant:"".concat(c,"/tenant/list"),agreeTenant:function(e){return"".concat(c,"/tenant/agree/").concat(e)},factories_list:"".concat(c,"/llm/factories"),llm_list:"".concat(c,"/llm/list"),my_llm:"".concat(c,"/llm/my_llms"),set_api_key:"".concat(c,"/llm/set_api_key"),add_llm:"".concat(c,"/llm/add_llm"),delete_llm:"".concat(c,"/llm/delete_llm"),deleteFactory:"".concat(c,"/llm/delete_factory"),kb_list:"".concat(c,"/kb/list"),create_kb:"".concat(c,"/kb/create"),update_kb:"".concat(c,"/kb/update"),rm_kb:"".concat(c,"/kb/rm"),get_kb_detail:"".concat(c,"/kb/detail"),getKnowledgeGraph:function(e){return"".concat(c,"/kb/").concat(e,"/knowledge_graph")},listTag:function(e){return"".concat(c,"/kb/").concat(e,"/tags")},listTagByKnowledgeIds:"".concat(c,"/kb/tags"),removeTag:function(e){return"".concat(c,"/kb/").concat(e,"/rm_tags")},renameTag:function(e){return"".concat(c,"/kb/").concat(e,"/rename_tag")},chunk_list:"".concat(c,"/chunk/list"),create_chunk:"".concat(c,"/chunk/create"),set_chunk:"".concat(c,"/chunk/set"),get_chunk:"".concat(c,"/chunk/get"),switch_chunk:"".concat(c,"/chunk/switch"),rm_chunk:"".concat(c,"/chunk/rm"),retrieval_test:"".concat(c,"/chunk/retrieval_test"),knowledge_graph:"".concat(c,"/chunk/knowledge_graph"),get_document_list:"".concat(c,"/document/list"),document_change_status:"".concat(c,"/document/change_status"),document_rm:"".concat(c,"/document/rm"),document_delete:"".concat(c,"/api/document"),document_rename:"".concat(c,"/document/rename"),document_create:"".concat(c,"/document/create"),document_run:"".concat(c,"/document/run"),document_change_parser:"".concat(c,"/document/change_parser"),document_thumbnails:"".concat(c,"/document/thumbnails"),get_document_file:"".concat(c,"/document/get"),document_upload:"".concat(c,"/document/upload"),web_crawl:"".concat(c,"/document/web_crawl"),document_infos:"".concat(c,"/document/infos"),upload_and_parse:"".concat(c,"/document/upload_and_parse"),parse:"".concat(c,"/document/parse"),setMeta:"".concat(c,"/document/set_meta"),setDialog:"".concat(c,"/dialog/set"),getDialog:"".concat(c,"/dialog/get"),removeDialog:"".concat(c,"/dialog/rm"),listDialog:"".concat(c,"/dialog/list"),setConversation:"".concat(c,"/conversation/set"),getConversation:"".concat(c,"/conversation/get"),getConversationSSE:"".concat(c,"/conversation/getsse"),listConversation:"".concat(c,"/conversation/list"),removeConversation:"".concat(c,"/conversation/rm"),completeConversation:"".concat(c,"/conversation/completion"),deleteMessage:"".concat(c,"/conversation/delete_msg"),thumbup:"".concat(c,"/conversation/thumbup"),tts:"".concat(c,"/conversation/tts"),ask:"".concat(c,"/conversation/ask"),mindmap:"".concat(c,"/conversation/mindmap"),getRelatedQuestions:"".concat(c,"/conversation/related_questions"),createToken:"".concat(c,"/api/new_token"),listToken:"".concat(c,"/api/token_list"),removeToken:"".concat(c,"/api/rm"),getStats:"".concat(c,"/api/stats"),createExternalConversation:"".concat(c,"/api/new_conversation"),getExternalConversation:"".concat(c,"/api/conversation"),completeExternalConversation:"".concat(c,"/api/completion"),uploadAndParseExternal:"".concat(c,"/api/document/upload_and_parse"),listFile:"".concat(c,"/file/listall"),uploadFile:"".concat(c,"/file/upload"),removeFile:"".concat(c,"/file/rm"),renameFile:"".concat(c,"/file/rename"),getAllParentFolder:"".concat(c,"/file/all_parent_folder"),createFolder:"".concat(c,"/file/create"),connectFileToKnowledge:"".concat(c,"/file2document/convert"),getFile:"".concat(c,"/file/get"),moveFile:"".concat(c,"/file/mv"),getSystemVersion:"".concat(c,"/system/version"),getSystemStatus:"".concat(c,"/system/status"),getSystemTokenList:"".concat(c,"/system/token_list"),createSystemToken:"".concat(c,"/system/new_token"),listSystemToken:"".concat(c,"/system/token_list"),removeSystemToken:"".concat(c,"/system/token"),listTemplates:"".concat(c,"/canvas/templates"),listCanvas:"".concat(c,"/canvas/list"),getCanvas:"".concat(c,"/canvas/get"),getCanvasSSE:"".concat(c,"/canvas/getsse"),removeCanvas:"".concat(c,"/canvas/rm"),setCanvas:"".concat(c,"/canvas/set"),resetCanvas:"".concat(c,"/canvas/reset"),runCanvas:"".concat(c,"/canvas/completion"),testDbConnect:"".concat(c,"/canvas/test_db_connect"),getInputElements:"".concat(c,"/canvas/input_elements"),debug:"".concat(c,"/canvas/debug")}},86635:function(e){function n(e){return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}))}n.keys=function(){return[]},n.resolve=n,n.id=86635,e.exports=n},64838:function(){},27922:function(){},15212:function(){},85777:function(){},76929:function(){},45036:function(){}}]);
//# sourceMappingURL=p__document-viewer__index.0926d539.async.js.map