{"version":3,"file":"1340.56985f87.async.js","mappings":"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","sources":["webpack:///./node_modules/@antv/component/esm/animation/utils.js","webpack:///./node_modules/@antv/component/esm/core/component.js","webpack:///./node_modules/@antv/component/esm/shapes/Text.js","webpack:///./node_modules/@antv/component/esm/util/angle-converter.js","webpack:///./node_modules/@antv/component/esm/animation/fadeOut.js","webpack:///./node_modules/@antv/component/esm/util/primitive.js","webpack:///./node_modules/@antv/component/esm/ui/grid/index.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/get.js","webpack:///./node_modules/@antv/component/esm/util/interpolate.js","webpack:///./node_modules/@antv/component/esm/util/omit.js","webpack:///./node_modules/@antv/component/esm/ui/axis/guides/utils.js","webpack:///./node_modules/@antv/component/esm/ui/axis/guides/line.js","webpack:///./node_modules/@antv/component/esm/util/keyframe-interpolate.js","webpack:///./node_modules/@antv/component/esm/ui/axis/guides/grid.js","webpack:///./node_modules/@antv/component/esm/util/in-range.js","webpack:///./node_modules/@antv/component/esm/util/transform.js","webpack:///./node_modules/@antv/component/esm/util/defined.js","webpack:///./node_modules/@antv/component/esm/ui/axis/utils/bounds.js","webpack:///./node_modules/@antv/component/esm/ui/axis/utils/contain.js","webpack:///./node_modules/@antv/component/esm/ui/axis/utils/intersect.js","webpack:///./node_modules/@antv/component/esm/ui/axis/utils/test.js","webpack:///./node_modules/@antv/component/esm/ui/axis/overlap/autoEllipsis.js","webpack:///./node_modules/@antv/component/esm/ui/axis/overlap/autoHide.js","webpack:///./node_modules/@antv/component/esm/ui/axis/overlap/index.js","webpack:///./node_modules/@antv/component/esm/ui/axis/overlap/autoRotate.js","webpack:///./node_modules/@antv/component/esm/ui/axis/overlap/autoWrap.js","webpack:///./node_modules/@antv/component/esm/ui/axis/utils/index.js","webpack:///./node_modules/@antv/component/esm/ui/axis/guides/labels.js","webpack:///./node_modules/@antv/component/esm/util/wrap.js","webpack:///./node_modules/@antv/component/esm/ui/axis/guides/ticks.js","webpack:///./node_modules/@antv/component/esm/ui/axis/guides/title.js","webpack:///./node_modules/@antv/component/esm/ui/axis/axis.js","webpack:///./node_modules/@antv/component/esm/util/sampling.js","webpack:///./node_modules/@antv/component/esm/ui/axis/constant.js","webpack:///./node_modules/@antv/component/esm/ui/indicator/constant.js","webpack:///./node_modules/@antv/component/esm/ui/indicator/indicator.js","webpack:///./node_modules/@antv/component/esm/util/layout/utils/helper.js","webpack:///./node_modules/@antv/component/esm/util/layout/flex/index.js","webpack:///./node_modules/@antv/component/esm/util/layout/grid/index.js","webpack:///./node_modules/@antv/component/esm/ui/layout/layout.js","webpack:///./node_modules/@antv/component/esm/util/layout/executer.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/noop.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/debounce.js","webpack:///./node_modules/@antv/component/esm/ui/navigator/index.js","webpack:///./node_modules/@antv/component/esm/util/transpose.js","webpack:///./node_modules/@antv/component/esm/ui/legend/category/item.js","webpack:///./node_modules/@antv/component/esm/ui/legend/category/items.js","webpack:///./node_modules/@antv/component/esm/util/group-by.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/set.js","webpack:///./node_modules/@antv/component/esm/ui/legend/category.js","webpack:///./node_modules/@antv/component/esm/ui/legend/constant.js","webpack:///./node_modules/@antv/component/esm/ui/legend/continuous/handle.js","webpack:///./node_modules/@antv/component/esm/ui/legend/utils.js","webpack:///./node_modules/@antv/component/esm/ui/marker/index.js","webpack:///./node_modules/@antv/component/esm/ui/marker/utils.js","webpack:///./node_modules/@antv/component/esm/ui/marker/symbol.js","webpack:///./node_modules/@antv/component/esm/ui/slider/constant.js","webpack:///./node_modules/@antv/component/esm/ui/slider/handle.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/clone.js","webpack:///./node_modules/@antv/component/esm/ui/sparkline/columns.js","webpack:///./node_modules/@antv/component/esm/ui/sparkline/lines.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/is-array-like.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/is-equal.js","webpack:///./node_modules/@antv/component/esm/util/path.js","webpack:///./node_modules/@antv/component/esm/ui/sparkline/path.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/min.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/min-by.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/max.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/max-by.js","webpack:///./node_modules/@antv/component/esm/ui/sparkline/utils.js","webpack:///./node_modules/@antv/component/esm/ui/sparkline/index.js","webpack:///./node_modules/@antv/component/esm/ui/slider/index.js","webpack:///./node_modules/@antv/component/esm/ui/title/index.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/dom/create-dom.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/substitute.js","webpack:///./node_modules/@antv/component/esm/util/replace-children.js","webpack:///./node_modules/@antv/component/esm/ui/tooltip/constant.js","webpack:///./node_modules/@antv/component/esm/ui/tooltip/index.js","webpack:///./node_modules/@antv/component/esm/util/bbox.js","webpack:///./node_modules/@antv/component/esm/util/callback.js","webpack:///./node_modules/@antv/component/esm/util/classnames.js","webpack:///./node_modules/@antv/component/esm/util/deep-assign.js","webpack:///./node_modules/@antv/component/esm/util/ellipsis.js","webpack:///./node_modules/@antv/component/esm/util/event.js","webpack:///./node_modules/@antv/component/esm/util/extend-display-object.js","webpack:///./node_modules/@antv/component/esm/util/if-show.js","webpack:///./node_modules/@antv/component/esm/util/matrix.js","webpack:///./node_modules/@antv/component/esm/util/number.js","webpack:///./node_modules/@antv/component/esm/util/offscreen.js","webpack:///./node_modules/@antv/component/esm/util/scale-to-pixel.js","webpack:///./node_modules/@antv/component/esm/util/selection.js","webpack:///./node_modules/@antv/component/esm/util/group.js","webpack:///./node_modules/@antv/component/esm/util/series.js","webpack:///./node_modules/@antv/component/esm/util/shape.js","webpack:///./node_modules/@antv/component/esm/util/string.js","webpack:///./node_modules/@antv/component/esm/util/style.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/memoize.js","webpack:///./node_modules/@antv/component/esm/util/text.js","webpack:///./node_modules/@antv/component/esm/util/traverse.js","webpack:///./node_modules/@antv/component/esm/util/visibility.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/clamp.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/deep-mix.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/is-array.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/is-function.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/is-nil.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/is-number.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/is-object-like.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/is-object.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/is-type.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/is-plain-object.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/is-string.js","webpack:///./node_modules/@antv/event-emitter/esm/index.js","webpack:///./node_modules/@antv/g-plugin-canvas-path-generator/dist/index.esm.js","webpack:///./node_modules/@antv/g-plugin-canvas-picker/dist/index.esm.js","webpack:///./node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js","webpack:///./node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js","webpack:///./node_modules/@antv/g-plugin-image-loader/dist/index.esm.js","webpack:///./node_modules/@antv/g-plugin-canvas-renderer/dist/index.esm.js","webpack:///./node_modules/@antv/g-plugin-dom-interaction/dist/index.esm.js","webpack:///./node_modules/@antv/g-plugin-html-renderer/dist/index.esm.js","webpack:///./node_modules/@antv/g-canvas/dist/index.esm.js","webpack:///./node_modules/@antv/g-lite/node_modules/eventemitter3/index.mjs","webpack:///./node_modules/@antv/util/esm/path/parser/params-count.js","webpack:///./node_modules/@antv/util/esm/path/util/is-path-array.js","webpack:///./node_modules/@antv/util/esm/path/util/is-absolute-array.js","webpack:///./node_modules/@antv/util/esm/path/util/is-normalized-array.js","webpack:///./node_modules/@antv/util/esm/path/parser/params-parser.js","webpack:///./node_modules/@antv/util/esm/path/parser/finalize-segment.js","webpack:///./node_modules/@antv/util/esm/path/parser/scan-flag.js","webpack:///./node_modules/@antv/util/esm/path/parser/is-digit-start.js","webpack:///./node_modules/@antv/util/esm/path/parser/scan-param.js","webpack:///./node_modules/@antv/util/esm/path/parser/skip-spaces.js","webpack:///./node_modules/@antv/util/esm/path/parser/is-space.js","webpack:///./node_modules/@antv/util/esm/path/parser/scan-segment.js","webpack:///./node_modules/@antv/util/esm/path/parser/is-path-command.js","webpack:///./node_modules/@antv/util/esm/path/parser/is-arc-command.js","webpack:///./node_modules/@antv/util/esm/path/parser/path-parser.js","webpack:///./node_modules/@antv/util/esm/path/convert/path-2-absolute.js","webpack:///./node_modules/@antv/util/esm/path/parser/parse-path-string.js","webpack:///./node_modules/@antv/util/esm/path/process/normalize-segment.js","webpack:///./node_modules/@antv/util/esm/path/process/normalize-path.js","webpack:///./node_modules/@antv/util/esm/path/util/mid-point.js","webpack:///./node_modules/@antv/util/esm/path/util/segment-line-factory.js","webpack:///./node_modules/@antv/util/esm/path/util/segment-arc-factory.js","webpack:///./node_modules/@antv/util/esm/path/util/segment-cubic-factory.js","webpack:///./node_modules/@antv/util/esm/path/util/segment-quad-factory.js","webpack:///./node_modules/@antv/util/esm/path/util/path-length-factory.js","webpack:///./node_modules/@antv/util/esm/lodash/min.js","webpack:///./node_modules/@antv/util/esm/lodash/max.js","webpack:///./node_modules/@antv/util/esm/lodash/mod.js","webpack:///./node_modules/@antv/util/esm/path/process/fix-arc.js","webpack:///./node_modules/@antv/util/esm/path/process/line-2-cubic.js","webpack:///./node_modules/@antv/util/esm/path/process/segment-2-cubic.js","webpack:///./node_modules/@antv/util/esm/path/process/quad-2-cubic.js","webpack:///./node_modules/@antv/util/esm/path/convert/path-2-curve.js","webpack:///./node_modules/@antv/util/esm/path/util/is-curve-array.js","webpack:///./node_modules/@antv/util/esm/path/util/equalize-segments.js","webpack:///./node_modules/@antv/util/esm/path/util/get-draw-direction.js","webpack:///./node_modules/@antv/util/esm/path/util/get-path-area.js","webpack:///./node_modules/@antv/util/esm/path/util/get-point-at-length.js","webpack:///./node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack:///./node_modules/@babel/runtime/helpers/esm/get.js","webpack:///./node_modules/@babel/runtime/helpers/esm/superPropGet.js","webpack:///./node_modules/@antv/g-lite/dist/index.esm.js","webpack:///./node_modules/@antv/util/esm/path/util/get-total-length.js","webpack:///./node_modules/@antv/util/esm/path/process/reverse-curve.js","webpack:///./node_modules/@antv/util/esm/path/util/get-rotated-curve.js","webpack:///./node_modules/@antv/util/esm/path/process/clone-path.js","webpack:///./node_modules/@antv/g-lite/node_modules/eventemitter3/index.js","webpack:///./node_modules/@antv/g-math/dist/index.esm.js","webpack:///./node_modules/@antv/g-plugin-dragndrop/dist/index.esm.js","webpack:///./node_modules/@antv/g-camera-api/dist/index.esm.js","webpack:///./node_modules/@antv/g-dom-mutation-observer-api/dist/index.esm.js","webpack:///./node_modules/@antv/g-web-animations-api/dist/index.esm.js","webpack:///./node_modules/@antv/scale/esm/utils/internMap.js","webpack:///./node_modules/@antv/scale/esm/scales/band.js","webpack:///./node_modules/@antv/scale/esm/scales/base.js","webpack:///./node_modules/@antv/scale/esm/scales/continuous.js","webpack:///./node_modules/@antv/scale/esm/utils/clamp.js","webpack:///./node_modules/@antv/scale/esm/scales/linear.js","webpack:///./node_modules/@antv/scale/esm/scales/ordinal.js","webpack:///./node_modules/@antv/scale/esm/tick-methods/d3-ticks.js","webpack:///./node_modules/@antv/scale/esm/utils/bisect.js","webpack:///./node_modules/@antv/scale/esm/utils/compose.js","webpack:///./node_modules/@antv/scale/esm/utils/d3-linear-nice.js","webpack:///./node_modules/@antv/scale/esm/utils/color.js","webpack:///./node_modules/@antv/scale/esm/utils/interpolate.js","webpack:///./node_modules/@antv/util/esm/lodash/is-null.js","webpack:///./node_modules/@antv/scale/esm/utils/is-valid.js","webpack:///./node_modules/@antv/scale/esm/utils/normalize.js","webpack:///./node_modules/@antv/scale/esm/utils/ticks.js","webpack:///./node_modules/@antv/util/esm/lodash/clamp.js","webpack:///./node_modules/@antv/util/esm/lodash/deep-mix.js","webpack:///./node_modules/@antv/util/esm/lodash/identity.js","webpack:///./node_modules/@antv/util/esm/lodash/is-array-like.js","webpack:///./node_modules/@antv/util/esm/lodash/is-array.js","webpack:///./node_modules/@antv/util/esm/lodash/is-boolean.js","webpack:///./node_modules/@antv/util/esm/lodash/is-function.js","webpack:///./node_modules/@antv/util/esm/lodash/is-nil.js","webpack:///./node_modules/@antv/util/esm/lodash/is-number-equal.js","webpack:///./node_modules/@antv/util/esm/lodash/is-number.js","webpack:///./node_modules/@antv/util/esm/lodash/is-object-like.js","webpack:///./node_modules/@antv/util/esm/lodash/is-object.js","webpack:///./node_modules/@antv/util/esm/lodash/is-plain-object.js","webpack:///./node_modules/@antv/util/esm/lodash/is-string.js","webpack:///./node_modules/@antv/util/esm/lodash/is-type.js","webpack:///./node_modules/@antv/util/esm/lodash/is-undefined.js","webpack:///./node_modules/@antv/util/esm/path/util/rotate-vector.js","webpack:///./node_modules/@antv/util/esm/path/process/arc-2-cubic.js","webpack:///./node_modules/@antv/util/esm/path/util/distance-square-root.js","webpack:///./node_modules/color-name/index.js","webpack:///./node_modules/color-string/index.js","webpack:///./node_modules/gl-matrix/esm/common.js","webpack:///./node_modules/gl-matrix/esm/mat3.js","webpack:///./node_modules/gl-matrix/esm/mat4.js","webpack:///./node_modules/gl-matrix/esm/quat.js","webpack:///./node_modules/gl-matrix/esm/vec2.js","webpack:///./node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/gl-matrix/esm/vec4.js","webpack:///./node_modules/lodash/_baseHasIn.js","webpack:///./node_modules/lodash/_basePick.js","webpack:///./node_modules/lodash/_basePickBy.js","webpack:///./node_modules/lodash/_baseSet.js","webpack:///./node_modules/lodash/_hasPath.js","webpack:///./node_modules/lodash/_hasUnicode.js","webpack:///./node_modules/lodash/hasIn.js","webpack:///./node_modules/lodash/pick.js","webpack:///./node_modules/simple-swizzle/index.js","webpack:///./node_modules/simple-swizzle/node_modules/is-arrayish/index.js","webpack:///./node_modules/@umijs/babel-preset-umi/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js","webpack:///./node_modules/@babel/runtime/helpers/esm/callSuper.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","webpack:///./node_modules/d3-color/src/color.js","webpack:///./node_modules/d3-color/src/define.js","webpack:///./node_modules/d3-dispatch/src/dispatch.js","webpack:///./node_modules/d3-force/src/center.js","webpack:///./node_modules/d3-force/src/constant.js","webpack:///./node_modules/d3-force/src/jiggle.js","webpack:///./node_modules/d3-force/src/link.js","webpack:///./node_modules/d3-force/src/manyBody.js","webpack:///./node_modules/d3-force/src/lcg.js","webpack:///./node_modules/d3-force/src/simulation.js","webpack:///./node_modules/d3-force/src/x.js","webpack:///./node_modules/d3-force/src/y.js","webpack:///./node_modules/d3-quadtree/src/add.js","webpack:///./node_modules/d3-quadtree/src/quad.js","webpack:///./node_modules/d3-quadtree/src/x.js","webpack:///./node_modules/d3-quadtree/src/y.js","webpack:///./node_modules/d3-quadtree/src/quadtree.js","webpack:///./node_modules/d3-quadtree/src/cover.js","webpack:///./node_modules/d3-quadtree/src/data.js","webpack:///./node_modules/d3-quadtree/src/extent.js","webpack:///./node_modules/d3-quadtree/src/find.js","webpack:///./node_modules/d3-quadtree/src/remove.js","webpack:///./node_modules/d3-quadtree/src/root.js","webpack:///./node_modules/d3-quadtree/src/size.js","webpack:///./node_modules/d3-quadtree/src/visit.js","webpack:///./node_modules/d3-quadtree/src/visitAfter.js","webpack:///./node_modules/d3-timer/src/timer.js"],"sourcesContent":["import { __assign, __read } from \"tslib\";\n/* global Keyframe */\nimport { isNil } from '@antv/util';\nimport { show, hide } from '../util';\nfunction isStandardAnimationOption(option) {\n    if (typeof option === 'boolean')\n        return false;\n    return 'enter' in option && 'update' in option && 'exit' in option;\n}\nexport function parseAnimationOption(option) {\n    // option is false => all animation is false\n    // option is { enter: {}, update: {}, exit: {}, ...baseOption } =>\n    //    { enter: { ...enter, ...baseOption }, update: { ...update, ...baseOption }, exit: { ...exit, ...baseOption } }\n    // option is { enter: {}, update: {}, exit: {} } => option\n    if (!option)\n        return { enter: false, update: false, exit: false };\n    var keys = ['enter', 'update', 'exit'];\n    var baseOption = Object.fromEntries(Object.entries(option).filter(function (_a) {\n        var _b = __read(_a, 1), k = _b[0];\n        return !keys.includes(k);\n    }));\n    return Object.fromEntries(keys.map(function (k) {\n        if (isStandardAnimationOption(option)) {\n            if (option[k] === false)\n                return [k, false];\n            return [k, __assign(__assign({}, option[k]), baseOption)];\n        }\n        return [k, baseOption];\n    }));\n}\nexport function onAnimateFinished(animation, callback) {\n    if (!animation)\n        callback();\n    else\n        animation.finished.then(callback);\n}\nexport function onAnimatesFinished(animations, callback) {\n    if (animations.length === 0)\n        callback();\n    else\n        Promise.all(animations.map(function (a) { return a === null || a === void 0 ? void 0 : a.finished; })).then(callback);\n}\nfunction attr(target, value) {\n    if ('update' in target)\n        target.update(value);\n    else\n        target.attr(value);\n}\nexport function animate(target, keyframes, options) {\n    if (keyframes.length === 0)\n        return null;\n    if (!options) {\n        var state = keyframes.slice(-1)[0];\n        attr(target, { style: state });\n        return null;\n    }\n    return target.animate(keyframes, options);\n}\nfunction identicalTextNode(source, target) {\n    if (source.nodeName !== 'text' || target.nodeName !== 'text')\n        return false;\n    if (source.attributes.text !== target.attributes.text)\n        return false;\n    return true;\n}\n/**\n * transition source shape to target shape\n * @param source\n * @param target\n * @param options\n * @param after destroy or hide source shape after transition\n */\nexport function transitionShape(source, target, options, after) {\n    if (after === void 0) { after = 'destroy'; }\n    // If source and target are both text node and with same text,\n    // do not apply shape animation.\n    if (identicalTextNode(source, target)) {\n        source.remove();\n        return [null];\n    }\n    var afterTransition = function () {\n        if (after === 'destroy')\n            source.destroy();\n        else if (after === 'hide')\n            hide(source);\n        if (target.isVisible())\n            show(target);\n    };\n    if (!options) {\n        afterTransition();\n        return [null];\n    }\n    var _a = options.duration, duration = _a === void 0 ? 0 : _a, _b = options.delay, delay = _b === void 0 ? 0 : _b;\n    var middle = Math.ceil(+duration / 2);\n    var offset = +duration / 4;\n    var _c = __read(source.getGeometryBounds().center, 2), sx = _c[0], sy = _c[1];\n    var _d = __read(target.getGeometryBounds().center, 2), ex = _d[0], ey = _d[1];\n    var _e = __read([(sx + ex) / 2 - sx, (sy + ey) / 2 - sy], 2), mx = _e[0], my = _e[1];\n    var _f = source.style.opacity, so = _f === void 0 ? 1 : _f;\n    var _g = target.style.opacity, to = _g === void 0 ? 1 : _g;\n    var st = source.style.transform || '';\n    var tt = target.style.transform || '';\n    // const st = source.style._transform || '';\n    // const tt = target.style._transform || '';\n    var sourceAnimation = source.animate([\n        { opacity: so, transform: \"translate(0, 0) \".concat(st) },\n        { opacity: 0, transform: \"translate(\".concat(mx, \", \").concat(my, \") \").concat(st) },\n    ], __assign(__assign({ fill: 'both' }, options), { duration: delay + middle + offset }));\n    var targetAnimation = target.animate([\n        { opacity: 0, transform: \"translate(\".concat(-mx, \", \").concat(-my, \") \").concat(tt), offset: 0.01 },\n        { opacity: to, transform: \"translate(0, 0) \".concat(tt) },\n    ], __assign(__assign({ fill: 'both' }, options), { duration: middle + offset, delay: delay + middle - offset }));\n    onAnimateFinished(targetAnimation, afterTransition);\n    return [sourceAnimation, targetAnimation];\n}\n/**\n * execute transition animation on element\n * @description in the current stage, only support the following properties:\n * x, y, width, height, opacity, fill, stroke, lineWidth, radius\n * @param target element to be animated\n * @param state target properties or element\n * @param options transition options\n * @param animate whether to animate\n * @returns transition instance\n */\nexport function transition(target, state, options) {\n    var from = {};\n    var to = {};\n    Object.entries(state).forEach(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], tarStyle = _b[1];\n        if (!isNil(tarStyle)) {\n            //  CSS attr / getAttribute \n            //  x/y 0 \n            var currStyle = target.style[key] || target.parsedStyle[key] || 0; // x/y\n            if (currStyle !== tarStyle) {\n                from[key] = currStyle;\n                to[key] = tarStyle;\n            }\n        }\n    });\n    if (!options) {\n        attr(target, to);\n        return null;\n    }\n    return animate(target, [from, to], __assign({ fill: 'both' }, options));\n}\n//# sourceMappingURL=utils.js.map","import { __extends, __rest } from \"tslib\";\nimport { CustomElement } from '../shapes';\nimport { createOffscreenGroup, deepAssign, visibility } from '../util';\nfunction applyVisibility() {\n    visibility(this, this.attributes.visibility !== 'hidden');\n}\nvar Component = /** @class */ (function (_super) {\n    __extends(Component, _super);\n    function Component(options, defaultStyleProps) {\n        if (defaultStyleProps === void 0) { defaultStyleProps = {}; }\n        var _this = _super.call(this, deepAssign({}, { style: defaultStyleProps }, options)) || this;\n        _this.initialized = false;\n        _this._defaultOptions = defaultStyleProps;\n        return _this;\n    }\n    Object.defineProperty(Component.prototype, \"offscreenGroup\", {\n        get: function () {\n            if (!this._offscreen)\n                this._offscreen = createOffscreenGroup(this);\n            return this._offscreen;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Component.prototype, \"defaultOptions\", {\n        get: function () {\n            return this._defaultOptions;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Component.prototype.connectedCallback = function () {\n        this.render(this.attributes, this);\n        this.bindEvents(this.attributes, this);\n        this.initialized = true;\n    };\n    Component.prototype.disconnectedCallback = function () {\n        var _a;\n        (_a = this._offscreen) === null || _a === void 0 ? void 0 : _a.destroy();\n    };\n    Component.prototype.attributeChangedCallback = function (name) {\n        if (name === 'visibility') {\n            applyVisibility.call(this);\n        }\n    };\n    Component.prototype.update = function (attr, animate) {\n        var _a;\n        this.attr(deepAssign({}, this.attributes, attr || {}));\n        return (_a = this.render) === null || _a === void 0 ? void 0 : _a.call(this, this.attributes, this, animate);\n    };\n    Component.prototype.clear = function () {\n        this.removeChildren();\n    };\n    Component.prototype.bindEvents = function (attributes, container) { };\n    Component.prototype.getSubShapeStyle = function (attributes) {\n        var x = attributes.x, y = attributes.y, transform = attributes.transform, transformOrigin = attributes.transformOrigin, _class = attributes.class, className = attributes.className, zIndex = attributes.zIndex, style = __rest(attributes, [\"x\", \"y\", \"transform\", \"transformOrigin\", \"class\", \"className\", \"zIndex\"]);\n        return style;\n    };\n    return Component;\n}(CustomElement));\nexport { Component };\n//# sourceMappingURL=component.js.map","import { __assign, __extends, __rest } from \"tslib\";\nimport { Text as GText } from '@antv/g';\nimport { createOffscreenGroup } from '../util/offscreen';\nvar Text = /** @class */ (function (_super) {\n    __extends(Text, _super);\n    function Text(_a) {\n        if (_a === void 0) { _a = {}; }\n        var style = _a.style, restOptions = __rest(_a, [\"style\"]);\n        return _super.call(this, __assign({ style: __assign({ text: '', fill: 'black', fontFamily: 'sans-serif', fontSize: 16, fontStyle: 'normal', fontVariant: 'normal', fontWeight: 'normal', lineWidth: 1, textAlign: 'start', textBaseline: 'middle' }, style) }, restOptions)) || this;\n    }\n    Object.defineProperty(Text.prototype, \"offscreenGroup\", {\n        get: function () {\n            if (!this._offscreen)\n                this._offscreen = createOffscreenGroup(this);\n            return this._offscreen;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Text.prototype.disconnectedCallback = function () {\n        var _a;\n        (_a = this._offscreen) === null || _a === void 0 ? void 0 : _a.destroy();\n    };\n    return Text;\n}(GText));\nexport { Text };\n//# sourceMappingURL=Text.js.map","export function degToRad(deg) {\n    return (deg * Math.PI) / 180;\n}\nexport function radToDeg(rad) {\n    return Number(((rad * 180) / Math.PI).toPrecision(5));\n}\n//# sourceMappingURL=angle-converter.js.map","import { transition } from './utils';\nexport default function (element, options) {\n    if (!element.style.opacity)\n        element.style.opacity = 1;\n    return transition(element, { opacity: 0 }, options);\n}\n//# sourceMappingURL=fadeOut.js.map","export var PRIMILTIVE_ATTRIBUTES = [\n    '$el',\n    'cx',\n    'cy',\n    'd',\n    'dx',\n    'dy',\n    'fill',\n    'fillOpacity',\n    'filter',\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'fontVariant',\n    'fontWeight',\n    'height',\n    'img',\n    'increasedLineWidthForHitTesting',\n    'innerHTML',\n    'isBillboard',\n    'billboardRotation',\n    'isSizeAttenuation',\n    'isClosed',\n    'isOverflowing',\n    'leading',\n    'letterSpacing',\n    'lineDash',\n    'lineHeight',\n    'lineWidth',\n    'markerEnd',\n    'markerEndOffset',\n    'markerMid',\n    'markerStart',\n    'markerStartOffset',\n    'maxLines',\n    'metrics',\n    'miterLimit',\n    'offsetX',\n    'offsetY',\n    'opacity',\n    'path',\n    'points',\n    'r',\n    'radius',\n    'rx',\n    'ry',\n    'shadowColor',\n    'src',\n    'stroke',\n    'strokeOpacity',\n    'text',\n    'textAlign',\n    'textBaseline',\n    'textDecorationColor',\n    'textDecorationLine',\n    'textDecorationStyle',\n    'textOverflow',\n    'textPath',\n    'textPathSide',\n    'textPathStartOffset',\n    'transform',\n    'transformOrigin',\n    'visibility',\n    'width',\n    'wordWrap',\n    'wordWrapWidth',\n    'x',\n    'x1',\n    'x2',\n    'y',\n    'y1',\n    'y2',\n    'z1',\n    'z2',\n    'zIndex',\n];\nexport function isPrimitiveAttribute(key) {\n    return PRIMILTIVE_ATTRIBUTES.includes(key);\n}\nexport function getPrimitiveAttributes(attributes) {\n    var object = {};\n    for (var key in attributes) {\n        if (isPrimitiveAttribute(key))\n            object[key] = attributes[key];\n    }\n    return object;\n}\n//# sourceMappingURL=primitive.js.map","import { __assign, __extends, __read, __rest, __spreadArray } from \"tslib\";\nimport { fadeOut, onAnimateFinished, transition } from '../../animation';\nimport { Component } from '../../core';\nimport { classNames, distance, getCallbackValue, getPrimitiveAttributes, select } from '../../util';\nvar CLASS_NAMES = classNames({\n    lineGroup: 'line-group',\n    line: 'line',\n    regionGroup: 'region-group',\n    region: 'region',\n}, 'grid');\nfunction getStraightPath(points) {\n    return points.reduce(function (acc, curr, idx) {\n        acc.push(__spreadArray([idx === 0 ? 'M' : 'L'], __read(curr), false));\n        return acc;\n    }, []);\n}\nfunction getSurroundPath(points, attr, reversed) {\n    var _a = attr.connect, connect = _a === void 0 ? 'line' : _a, center = attr.center;\n    if (connect === 'line')\n        return getStraightPath(points);\n    if (!center)\n        return [];\n    var radius = distance(points[0], center);\n    var sweepFlag = reversed ? 0 : 1;\n    return points.reduce(function (r, p, idx) {\n        if (idx === 0)\n            r.push(__spreadArray(['M'], __read(p), false));\n        else\n            r.push(__spreadArray(['A', radius, radius, 0, 0, sweepFlag], __read(p), false));\n        return r;\n    }, []);\n}\nfunction getLinePath(points, cfg, reversed) {\n    if (cfg.type === 'surround')\n        return getSurroundPath(points, cfg, reversed);\n    return getStraightPath(points);\n}\nfunction connectPaths(from, to, cfg) {\n    var type = cfg.type, connect = cfg.connect, center = cfg.center, closed = cfg.closed;\n    var closeFlag = closed ? [['Z']] : [];\n    var _a = __read([getLinePath(from, cfg), getLinePath(to.slice().reverse(), cfg, true)], 2), path1 = _a[0], path2 = _a[1];\n    var _b = __read([from[0], to.slice(-1)[0]], 2), startOfFrom = _b[0], endOfTo = _b[1];\n    var createPath = function (insertA, insertB) {\n        return [path1, insertA, path2, insertB, closeFlag].flat();\n    };\n    if (connect === 'line' || type === 'surround') {\n        return createPath([__spreadArray(['L'], __read(endOfTo), false)], [__spreadArray(['L'], __read(startOfFrom), false)]);\n    }\n    if (!center)\n        throw new Error('Arc grid need to specified center');\n    var _c = __read([distance(endOfTo, center), distance(startOfFrom, center)], 2), raduis1 = _c[0], radius2 = _c[1];\n    return createPath([\n        __spreadArray(['A', raduis1, raduis1, 0, 0, 1], __read(endOfTo), false),\n        __spreadArray(['L'], __read(endOfTo), false),\n    ], [\n        __spreadArray(['A', radius2, radius2, 0, 0, 0], __read(startOfFrom), false),\n        __spreadArray(['L'], __read(startOfFrom), false),\n    ]);\n}\nfunction renderGridLine(container, data, attr, style) {\n    var animate = attr.animate, isBillboard = attr.isBillboard;\n    var lines = data.map(function (item, idx) {\n        return {\n            id: item.id || \"grid-line-\".concat(idx),\n            d: getLinePath(item.points, attr),\n        };\n    });\n    return container\n        .selectAll(CLASS_NAMES.line.class)\n        .data(lines, function (d) { return d.id; })\n        .join(function (enter) {\n        return enter.append('path').each(function (datum, index) {\n            var lineStyle = getCallbackValue(getPrimitiveAttributes(__assign({ d: datum.d }, style)), [datum, index, lines]);\n            this.attr(__assign({ class: CLASS_NAMES.line.name, stroke: '#D9D9D9', lineWidth: 1, lineDash: [4, 4], isBillboard: isBillboard }, lineStyle));\n        });\n    }, function (update) {\n        return update.transition(function (datum, index) {\n            var lineStyle = getCallbackValue(getPrimitiveAttributes(__assign({ d: datum.d }, style)), [datum, index, lines]);\n            return transition(this, lineStyle, animate.update);\n        });\n    }, function (exit) {\n        return exit.transition(function () {\n            var _this = this;\n            var animation = fadeOut(this, animate.exit);\n            onAnimateFinished(animation, function () { return _this.remove(); });\n            return animation;\n        });\n    })\n        .transitions();\n}\nfunction renderAlternateRegion(container, data, style) {\n    var animate = style.animate, connect = style.connect, areaFill = style.areaFill;\n    if (data.length < 2 || !areaFill || !connect)\n        return [];\n    var colors = Array.isArray(areaFill) ? areaFill : [areaFill, 'transparent'];\n    var getColor = function (idx) { return colors[idx % colors.length]; };\n    var regions = [];\n    for (var idx = 0; idx < data.length - 1; idx++) {\n        var _a = __read([data[idx].points, data[idx + 1].points], 2), prev = _a[0], curr = _a[1];\n        var path = connectPaths(prev, curr, style);\n        regions.push({ d: path, fill: getColor(idx) });\n    }\n    return container\n        .selectAll(CLASS_NAMES.region.class)\n        .data(regions, function (_, i) { return i; })\n        .join(function (enter) {\n        return enter\n            .append('path')\n            .each(function (datum, index) {\n            var regionStyle = getCallbackValue(datum, [datum, index, regions]);\n            this.attr(regionStyle);\n        })\n            .attr('className', CLASS_NAMES.region.name);\n    }, function (update) {\n        return update.transition(function (datum, index) {\n            var regionStyle = getCallbackValue(datum, [datum, index, regions]);\n            return transition(this, regionStyle, animate.update);\n        });\n    }, function (exit) {\n        return exit.transition(function () {\n            var _this = this;\n            var animation = fadeOut(this, animate.exit);\n            onAnimateFinished(animation, function () { return _this.remove(); });\n            return animation;\n        });\n    })\n        .transitions();\n}\nfunction getData(attr) {\n    var _a = attr.data, data = _a === void 0 ? [] : _a, closed = attr.closed;\n    if (!closed)\n        return data;\n    return data.map(function (datum) {\n        var points = datum.points;\n        var _a = __read(points, 1), start = _a[0];\n        return __assign(__assign({}, datum), { points: __spreadArray(__spreadArray([], __read(points), false), [start], false) });\n    });\n}\nvar Grid = /** @class */ (function (_super) {\n    __extends(Grid, _super);\n    function Grid() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Grid.prototype.render = function (attributes, container) {\n        // @ts-ignore do no passBy className\n        var type = attributes.type, center = attributes.center, areaFill = attributes.areaFill, closed = attributes.closed, style = __rest(attributes, [\"type\", \"center\", \"areaFill\", \"closed\"]);\n        var data = getData(attributes);\n        var lineGroup = select(container).maybeAppendByClassName(CLASS_NAMES.lineGroup, 'g');\n        var regionGroup = select(container).maybeAppendByClassName(CLASS_NAMES.regionGroup, 'g');\n        var lineTransitions = renderGridLine(lineGroup, data, attributes, style);\n        var reigionTransitions = renderAlternateRegion(regionGroup, data, attributes);\n        return __spreadArray(__spreadArray([], __read(lineTransitions), false), __read(reigionTransitions), false);\n    };\n    return Grid;\n}(Component));\nexport { Grid };\n//# sourceMappingURL=index.js.map","import isString from './is-string';\n/**\n * https://github.com/developit/dlv/blob/master/index.js\n * @param obj\n * @param key\n * @param defaultValue\n */\nexport default (function (obj, key, defaultValue) {\n    var p = 0;\n    var keyArr = isString(key) ? key.split('.') : key;\n    while (obj && p < keyArr.length) {\n        obj = obj[keyArr[p++]];\n    }\n    return obj === undefined || p < keyArr.length ? defaultValue : obj;\n});\n//# sourceMappingURL=get.js.map","import { __read } from \"tslib\";\nexport var numberInterpolate = function (from, to) {\n    return function (t) {\n        return from * (1 - t) + to * t;\n    };\n};\nexport function arrayInterpolate(from, to) {\n    var nb = to ? to.length : 0;\n    var na = from ? Math.min(nb, from.length) : 0;\n    return function (t) {\n        var x = new Array(na);\n        var c = new Array(nb);\n        var i = 0;\n        for (i = 0; i < na; ++i)\n            x[i] = interpolate(from[i], to[i]);\n        for (; i < nb; ++i)\n            c[i] = to[i];\n        for (i = 0; i < na; ++i)\n            c[i] = x[i](t);\n        return c;\n    };\n}\nexport function objectInterpolate(from, to) {\n    if (from === void 0) { from = {}; }\n    if (to === void 0) { to = {}; }\n    var i = {};\n    var c = {};\n    Object.entries(to).forEach(function (_a) {\n        var _b = __read(_a, 2), k = _b[0], v = _b[1];\n        if (k in from)\n            i[k] = interpolate(from[k], v);\n        else\n            c[k] = v;\n    });\n    return function (t) {\n        Object.entries(i).forEach(function (_a) {\n            var _b = __read(_a, 2), k = _b[0], v = _b[1];\n            return (c[k] = v(t));\n        });\n        return c;\n    };\n}\nexport function interpolate(from, to) {\n    if (typeof from === 'number' && typeof to === 'number') {\n        // @ts-ignore\n        return numberInterpolate(from, to);\n    }\n    if (Array.isArray(from) && Array.isArray(to)) {\n        // @ts-ignore\n        return arrayInterpolate(from, to);\n    }\n    if (typeof from === 'object' && typeof to === 'object') {\n        // @ts-ignore\n        return objectInterpolate(from, to);\n    }\n    return (function (t) { return from; });\n}\n//# sourceMappingURL=interpolate.js.map","export function omit(obj, keys) {\n    var res = {};\n    var innerKeys = Array.isArray(keys) ? keys : [keys];\n    for (var key in obj) {\n        if (!innerKeys.includes(key)) {\n            res[key] = obj[key];\n        }\n    }\n    return res;\n}\n//# sourceMappingURL=omit.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { isFunction } from '@antv/util';\nimport { degToRad, getCallbackValue, normalize, vertical } from '../../../util';\nexport function getCallbackStyle(style, params) {\n    return Object.fromEntries(Object.entries(style).map(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], val = _b[1];\n        return [key, getCallbackValue(val, params)];\n    }));\n}\nexport function baseDependencies(attr) {\n    if (attr.type === 'linear') {\n        var startPos = attr.startPos, endPos = attr.endPos;\n        return __spreadArray(__spreadArray([], __read(startPos), false), __read(endPos), false);\n    }\n    var startAngle = attr.startAngle, endAngle = attr.endAngle, center = attr.center, radius = attr.radius;\n    return __spreadArray(__spreadArray([startAngle, endAngle], __read(center), false), [radius], false);\n}\nexport function filterExec(data, filter) {\n    return !!filter && isFunction(filter) ? data.filter(filter) : data;\n}\n/** ---- to avoid cycle dependency */\nexport function getLineAngle(value, attr) {\n    var startAngle = attr.startAngle, endAngle = attr.endAngle;\n    return (endAngle - startAngle) * value + startAngle;\n}\nexport function getLineTangentVector(value, attr) {\n    if (attr.type === 'linear') {\n        var _a = __read(attr.startPos, 2), startX = _a[0], startY = _a[1], _b = __read(attr.endPos, 2), endX = _b[0], endY = _b[1];\n        var _c = __read([endX - startX, endY - startY], 2), dx = _c[0], dy = _c[1];\n        return normalize([dx, dy]);\n    }\n    var angle = degToRad(getLineAngle(value, attr));\n    return [-Math.sin(angle), Math.cos(angle)];\n}\nexport function getDirectionVector(value, direction, attr) {\n    var tangentVector = getLineTangentVector(value, attr);\n    return vertical(tangentVector, direction !== 'positive');\n}\nexport function getLabelVector(value, attr) {\n    return getDirectionVector(value, attr.labelDirection, attr);\n}\n//# sourceMappingURL=utils.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { get } from '@antv/util';\nimport { transition } from '../../../animation';\nimport { degToRad, keyframeInterpolate, omit, renderExtDo, scaleToPixel, subStyleProps, } from '../../../util';\nimport { CLASS_NAMES } from '../constant';\nimport { getLineAngle, getLineTangentVector } from './utils';\nexport function getLinearValuePos(value, attr) {\n    var _a = __read(attr.startPos, 2), sx = _a[0], sy = _a[1], _b = __read(attr.endPos, 2), ex = _b[0], ey = _b[1];\n    var _c = __read([ex - sx, ey - sy], 2), dx = _c[0], dy = _c[1];\n    return [sx + dx * value, sy + dy * value];\n}\nexport function getArcValuePos(value, attr) {\n    var radius = attr.radius, _a = __read(attr.center, 2), cx = _a[0], cy = _a[1];\n    var angle = degToRad(getLineAngle(value, attr));\n    return [cx + radius * Math.cos(angle), cy + radius * Math.sin(angle)];\n}\nexport function getValuePos(value, attr) {\n    if (attr.type === 'linear')\n        return getLinearValuePos(value, attr);\n    return getArcValuePos(value, attr);\n}\nexport function isAxisHorizontal(attr) {\n    return getLineTangentVector(0, attr)[1] === 0;\n}\nexport function isAxisVertical(attr) {\n    return getLineTangentVector(0, attr)[0] === 0;\n}\nfunction isCircle(startAngle, endAngle) {\n    return endAngle - startAngle === 360;\n}\nfunction getArcPath(startAngle, endAngle, cx, cy, radius) {\n    var diffAngle = endAngle - startAngle;\n    var _a = __read([radius, radius], 2), rx = _a[0], ry = _a[1];\n    var _b = __read([degToRad(startAngle), degToRad(endAngle)], 2), startAngleRadians = _b[0], endAngleRadians = _b[1];\n    var getPosByAngle = function (angle) { return [cx + radius * Math.cos(angle), cy + radius * Math.sin(angle)]; };\n    var _c = __read(getPosByAngle(startAngleRadians), 2), x1 = _c[0], y1 = _c[1];\n    var _d = __read(getPosByAngle(endAngleRadians), 2), x2 = _d[0], y2 = _d[1];\n    if (isCircle(startAngle, endAngle)) {\n        var middleAngleRadians = (endAngleRadians + startAngleRadians) / 2;\n        var _e = __read(getPosByAngle(middleAngleRadians), 2), xm = _e[0], ym = _e[1];\n        return [\n            ['M', x1, y1],\n            ['A', rx, ry, 0, 1, 0, xm, ym],\n            ['A', rx, ry, 0, 1, 0, x2, y2],\n        ];\n    }\n    // \n    var large = diffAngle > 180 ? 1 : 0;\n    // 1- 0-\n    var sweep = startAngle > endAngle ? 0 : 1;\n    var isClosePath = false;\n    return isClosePath\n        ? \"M\".concat(cx, \",\").concat(cy, \",L\").concat(x1, \",\").concat(y1, \",A\").concat(rx, \",\").concat(ry, \",0,\").concat(large, \",\").concat(sweep, \",\").concat(x2, \",\").concat(y2, \",L\").concat(cx, \",\").concat(cy)\n        : \"M\".concat(x1, \",\").concat(y1, \",A\").concat(rx, \",\").concat(ry, \",0,\").concat(large, \",\").concat(sweep, \",\").concat(x2, \",\").concat(y2);\n}\nfunction getArcAttr(arc) {\n    var _a = arc.attributes, startAngle = _a.startAngle, endAngle = _a.endAngle, center = _a.center, radius = _a.radius;\n    return __spreadArray(__spreadArray([startAngle, endAngle], __read(center), false), [radius], false);\n}\nfunction renderArc(container, attr, style, animate) {\n    var startAngle = attr.startAngle, endAngle = attr.endAngle, center = attr.center, radius = attr.radius;\n    return container\n        .selectAll(CLASS_NAMES.line.class)\n        .data([{ d: getArcPath.apply(void 0, __spreadArray(__spreadArray([startAngle, endAngle], __read(center), false), [radius], false)) }], function (d, i) { return i; })\n        .join(function (enter) {\n        return enter\n            .append('path')\n            .attr('className', CLASS_NAMES.line.name)\n            .styles(attr)\n            .styles({ d: function (d) { return d.d; } });\n    }, function (update) {\n        return update\n            .transition(function () {\n            var _this = this;\n            var animation = keyframeInterpolate(this, getArcAttr(this), __spreadArray(__spreadArray([startAngle, endAngle], __read(center), false), [radius], false), animate.update);\n            if (animation) {\n                var layout = function () {\n                    var data = get(_this.attributes, '__keyframe_data__');\n                    _this.style.d = getArcPath.apply(void 0, __spreadArray([], __read(data), false));\n                };\n                animation.onframe = layout;\n                animation.onfinish = layout;\n            }\n            return animation;\n        })\n            .styles(attr);\n    }, function (exit) { return exit.remove(); })\n        .styles(style)\n        .transitions();\n}\nfunction renderTruncation(container, _a) {\n    var truncRange = _a.truncRange, truncShape = _a.truncShape, lineExtension = _a.lineExtension;\n    // TODO\n}\nfunction extendLine(startPos, endPos, range) {\n    if (range === void 0) { range = [0, 0]; }\n    var _a = __read([startPos, endPos, range], 3), _b = __read(_a[0], 2), x1 = _b[0], y1 = _b[1], _c = __read(_a[1], 2), x2 = _c[0], y2 = _c[1], _d = __read(_a[2], 2), l1 = _d[0], l2 = _d[1];\n    var _e = __read([x2 - x1, y2 - y1], 2), x = _e[0], y = _e[1];\n    var L = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\n    var _f = __read([-l1 / L, l2 / L], 2), s1 = _f[0], s2 = _f[1];\n    return [s1 * x, s1 * y, s2 * x, s2 * y];\n}\nfunction getLinePath(points) {\n    var _a = __read(points, 2), _b = __read(_a[0], 2), x1 = _b[0], y1 = _b[1], _c = __read(_a[1], 2), x2 = _c[0], y2 = _c[1];\n    return { x1: x1, y1: y1, x2: x2, y2: y2 };\n}\nfunction renderLinear(container, attr, style, animate) {\n    var showTrunc = attr.showTrunc, startPos = attr.startPos, endPos = attr.endPos, truncRange = attr.truncRange, lineExtension = attr.lineExtension;\n    var _a = __read([startPos, endPos], 2), _b = __read(_a[0], 2), x1 = _b[0], y1 = _b[1], _c = __read(_a[1], 2), x2 = _c[0], y2 = _c[1];\n    var _d = __read(lineExtension ? extendLine(startPos, endPos, lineExtension) : new Array(4).fill(0), 4), ox1 = _d[0], oy1 = _d[1], ox2 = _d[2], oy2 = _d[3];\n    var renderLine = function (data) {\n        return container\n            .selectAll(CLASS_NAMES.line.class)\n            .data(data, function (d, i) { return i; })\n            .join(function (enter) {\n            return enter\n                .append('line')\n                .attr('className', function (d) { return \"\".concat(CLASS_NAMES.line.name, \" \").concat(d.className); })\n                .styles(style)\n                .transition(function (d) {\n                return transition(this, getLinePath(d.line), false);\n            });\n        }, function (update) {\n            return update.styles(style).transition(function (_a) {\n                var line = _a.line;\n                return transition(this, getLinePath(line), animate.update);\n            });\n        }, function (exit) { return exit.remove(); })\n            .transitions();\n    };\n    if (!showTrunc || !truncRange) {\n        return renderLine([\n            {\n                line: [\n                    [x1 + ox1, y1 + oy1],\n                    [x2 + ox2, y2 + oy2],\n                ],\n                className: CLASS_NAMES.line.name,\n            },\n        ]);\n    }\n    var _e = __read(truncRange, 2), r1 = _e[0], r2 = _e[1];\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var _f = __read([x1 + dx * r1, y1 + dy * r1], 2), x3 = _f[0], y3 = _f[1];\n    var _g = __read([x1 + dx * r2, y1 + dy * r2], 2), x4 = _g[0], y4 = _g[1];\n    var animation = renderLine([\n        {\n            line: [\n                [x1 + ox1, y1 + oy1],\n                [x3, y3],\n            ],\n            className: CLASS_NAMES.lineFirst.name,\n        },\n        {\n            line: [\n                [x4, y4],\n                [x2 + ox2, y2 + oy2],\n            ],\n            className: CLASS_NAMES.lineSecond.name,\n        },\n    ]);\n    renderTruncation(container, attr);\n    return animation;\n}\nfunction renderAxisArrow(container, type, attr, style) {\n    var showArrow = attr.showArrow, showTrunc = attr.showTrunc, lineArrow = attr.lineArrow, lineArrowOffset = attr.lineArrowOffset, lineArrowSize = attr.lineArrowSize;\n    var shapeToAddArrow;\n    if (type === 'arc')\n        shapeToAddArrow = container.select(CLASS_NAMES.line.class);\n    else if (showTrunc)\n        shapeToAddArrow = container.select(CLASS_NAMES.lineSecond.class);\n    else\n        shapeToAddArrow = container.select(CLASS_NAMES.line.class);\n    if (!showArrow || !lineArrow || (attr.type === 'arc' && isCircle(attr.startAngle, attr.endAngle))) {\n        var node = shapeToAddArrow.node();\n        if (node)\n            node.style.markerEnd = undefined;\n        return;\n    }\n    var arrow = renderExtDo(lineArrow);\n    arrow.attr(style);\n    scaleToPixel(arrow, lineArrowSize, true);\n    shapeToAddArrow.style('markerEnd', arrow).style('markerEndOffset', -lineArrowOffset);\n}\nexport function renderAxisLine(container, attr, animate) {\n    var type = attr.type;\n    var animation;\n    var style = subStyleProps(attr, 'line');\n    if (type === 'linear')\n        animation = renderLinear(container, attr, omit(style, 'arrow'), animate);\n    else\n        animation = renderArc(container, attr, omit(style, 'arrow'), animate);\n    renderAxisArrow(container, type, attr, style);\n    return animation;\n}\n//# sourceMappingURL=line.js.map","import { __assign } from \"tslib\";\nimport { interpolate } from './interpolate';\nexport function keyframeInterpolate(element, from, to, options) {\n    if (!options) {\n        element.attr('__keyframe_data__', to);\n        return null;\n    }\n    var _a = options.duration, duration = _a === void 0 ? 0 : _a;\n    var int = interpolate(from, to);\n    var count = Math.ceil(+duration / 16);\n    var keyframes = new Array(count)\n        .fill(0)\n        .map(function (datum, index, array) { return ({ __keyframe_data__: int(index / (array.length - 1)) }); });\n    // @ts-ignore\n    return element.animate(keyframes, __assign({ fill: 'both' }, options));\n}\n//# sourceMappingURL=keyframe-interpolate.js.map","import { __assign, __read } from \"tslib\";\nimport { isFunction } from '@antv/util';\nimport { degToRad, getCallbackValue, scale, subStyleProps } from '../../../util';\nimport { Grid } from '../../grid';\nimport { CLASS_NAMES } from '../constant';\nimport { getValuePos } from './line';\nimport { filterExec, getDirectionVector } from './utils';\nfunction getGridVector(value, attr) {\n    return getDirectionVector(value, attr.gridDirection, attr);\n}\nfunction getGridCenter(attr) {\n    var type = attr.type, gridCenter = attr.gridCenter;\n    if (type === 'linear')\n        return gridCenter;\n    return gridCenter || attr.center;\n}\nfunction renderStraight(data, attr) {\n    var gridLength = attr.gridLength;\n    return data.map(function (_a, index) {\n        var value = _a.value;\n        var _b = __read(getValuePos(value, attr), 2), x = _b[0], y = _b[1];\n        var _c = __read(scale(getGridVector(value, attr), gridLength), 2), dx = _c[0], dy = _c[1];\n        return {\n            id: index,\n            points: [\n                [x, y],\n                [x + dx, y + dy],\n            ],\n        };\n    });\n}\nfunction renderSurround(data, attr) {\n    var controlAngles = attr.gridControlAngles;\n    var center = getGridCenter(attr);\n    if (!center)\n        throw new Error('grid center is not provide');\n    if (data.length < 2)\n        throw new Error('Invalid grid data');\n    if (!controlAngles || controlAngles.length === 0)\n        throw new Error('Invalid gridControlAngles');\n    var _a = __read(center, 2), cx = _a[0], cy = _a[1];\n    return data.map(function (_a, index) {\n        var value = _a.value;\n        var _b = __read(getValuePos(value, attr), 2), sx = _b[0], sy = _b[1];\n        var _c = __read([sx - cx, sy - cy], 2), dx = _c[0], dy = _c[1];\n        var points = [];\n        controlAngles.forEach(function (angle) {\n            var angleInRad = degToRad(angle);\n            var _a = __read([Math.cos(angleInRad), Math.sin(angleInRad)], 2), cosa = _a[0], sina = _a[1];\n            var x = dx * cosa - dy * sina + cx;\n            var y = dx * sina + dy * cosa + cy;\n            points.push([x, y]);\n        });\n        return { points: points, id: index };\n    });\n}\nexport function renderGrid(container, data, attr, animate) {\n    var gridAttr = subStyleProps(attr, 'grid');\n    var type = gridAttr.type, areaFill = gridAttr.areaFill;\n    var center = getGridCenter(attr);\n    var finalData = filterExec(data, attr.gridFilter);\n    var gridItems = type === 'segment' ? renderStraight(finalData, attr) : renderSurround(finalData, attr);\n    var style = __assign(__assign({}, gridAttr), { center: center, areaFill: isFunction(areaFill)\n            ? finalData.map(function (datum, index) { return getCallbackValue(areaFill, [datum, index, finalData]); })\n            : areaFill, animate: animate, data: gridItems });\n    return container\n        .selectAll(CLASS_NAMES.grid.class)\n        .data([1])\n        .join(function (enter) { return enter.append(function () { return new Grid({ style: style }); }).attr('className', CLASS_NAMES.grid.name); }, function (update) {\n        return update.transition(function () {\n            return this.update(style);\n        });\n    }, function (exit) { return exit.remove(); })\n        .transitions();\n}\n//# sourceMappingURL=grid.js.map","export function inRange(n, start, end, includeLeft, includeRight) {\n    if (includeLeft === void 0) { includeLeft = true; }\n    if (includeRight === void 0) { includeRight = false; }\n    if ((includeLeft && n === start) || (includeRight && n === end))\n        return true;\n    return n > start && n < end;\n}\n//# sourceMappingURL=in-range.js.map","import { __read } from \"tslib\";\nexport function getTranslate(node, x, y) {\n    var _a = node.getBBox(), width = _a.width, height = _a.height;\n    var _b = __read([x, y].map(function (v, i) {\n        var _a;\n        return v.includes('%')\n            ? (parseFloat(((_a = v.match(/[+-]?([0-9]*[.])?[0-9]+/)) === null || _a === void 0 ? void 0 : _a[0]) || '0') / 100) * (i === 0 ? width : height)\n            : v;\n    }), 2), tx = _b[0], ty = _b[1];\n    return [tx, ty];\n}\n/**\n * transform that support translate percent value\n */\nexport function percentTransform(node, val) {\n    if (!val)\n        return;\n    try {\n        var reg = /translate\\(([+-]*[\\d]+[%]*),[ ]*([+-]*[\\d]+[%]*)\\)/g;\n        var computedVal = val.replace(reg, function (match, x, y) { return \"translate(\".concat(getTranslate(node, x, y), \")\"); });\n        node.attr('transform', computedVal);\n    }\n    catch (e) {\n        // do nothing\n    }\n}\n//# sourceMappingURL=transform.js.map","export var defined = function (x) { return x !== undefined && x != null && !Number.isNaN(x); };\n//# sourceMappingURL=defined.js.map","import { __read } from \"tslib\";\nimport { degToRad, parseSeriesAttr, textOf } from '../../../util';\nvar Bounds = /** @class */ (function () {\n    function Bounds(x1, y1, x2, y2) {\n        this.set(x1, y1, x2, y2);\n    }\n    Object.defineProperty(Bounds.prototype, \"left\", {\n        get: function () {\n            return this.x1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"top\", {\n        get: function () {\n            return this.y1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"right\", {\n        get: function () {\n            return this.x2;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"bottom\", {\n        get: function () {\n            return this.y2;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"width\", {\n        get: function () {\n            return this.defined('x2') && this.defined('x1') ? this.x2 - this.x1 : undefined;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"height\", {\n        get: function () {\n            return this.defined('y2') && this.defined('y1') ? this.y2 - this.y1 : undefined;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Bounds.prototype.rotatedPoints = function (radian, x, y) {\n        var _a = this, x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;\n        var cos = Math.cos(radian);\n        var sin = Math.sin(radian);\n        var cx = x - x * cos + y * sin;\n        var cy = y - x * sin - y * cos;\n        var points = [\n            [cos * x1 - sin * y2 + cx, sin * x1 + cos * y2 + cy],\n            [cos * x2 - sin * y2 + cx, sin * x2 + cos * y2 + cy],\n            [cos * x1 - sin * y1 + cx, sin * x1 + cos * y1 + cy],\n            [cos * x2 - sin * y1 + cx, sin * x2 + cos * y1 + cy],\n        ];\n        return points;\n    };\n    Bounds.prototype.set = function (x1, y1, x2, y2) {\n        if (x2 < x1) {\n            this.x2 = x1;\n            this.x1 = x2;\n        }\n        else {\n            this.x1 = x1;\n            this.x2 = x2;\n        }\n        if (y2 < y1) {\n            this.y2 = y1;\n            this.y1 = y2;\n        }\n        else {\n            this.y1 = y1;\n            this.y2 = y2;\n        }\n        return this;\n    };\n    Bounds.prototype.defined = function (key) {\n        return this[key] !== Number.MAX_VALUE && this[key] !== -Number.MAX_VALUE;\n    };\n    return Bounds;\n}());\nexport { Bounds };\n/**\n * Can't use getBounds directly since we should not use AABB here.\n */\nexport function getBounds(item, margin) {\n    var angle = item.getEulerAngles() || 0;\n    item.setEulerAngles(0);\n    // get dimensions\n    var _a = item.getBounds(), _b = __read(_a.min, 2), x = _b[0], y = _b[1], _c = __read(_a.max, 2), right = _c[0], bottom = _c[1];\n    var _d = item.getBBox(), w = _d.width, h = _d.height;\n    var height = h;\n    var dx = 0;\n    var dy = 0;\n    var anchorX = x;\n    var anchorY = y;\n    var text = textOf(item);\n    if (text) {\n        // [to fix]  G  bbox \n        height -= 1.5;\n        var a = text.style.textAlign;\n        var b_1 = text.style.textBaseline;\n        // horizontal alignment\n        if (a === 'center') {\n            anchorX = (x + right) / 2;\n        }\n        else if (a === 'right' || a === 'end') {\n            anchorX = right;\n        }\n        else {\n            // left by default, do nothing\n        }\n        // vertical alignment\n        if (b_1 === 'middle') {\n            anchorY = (y + bottom) / 2;\n        }\n        else if (b_1 === 'bottom') {\n            anchorY = bottom;\n        }\n    }\n    var _e = __read(parseSeriesAttr(margin), 4), _f = _e[0], t = _f === void 0 ? 0 : _f, _g = _e[1], r = _g === void 0 ? 0 : _g, _h = _e[2], b = _h === void 0 ? t : _h, _j = _e[3], l = _j === void 0 ? r : _j;\n    var bounds = new Bounds((dx += x) - l, (dy += y) - t, dx + w + r, dy + height + b);\n    item.setEulerAngles(angle);\n    return bounds.rotatedPoints(degToRad(angle), anchorX, anchorY);\n}\n//# sourceMappingURL=bounds.js.map","import { getBounds } from './bounds';\nfunction onLine(line, point) {\n    return (point[0] <= Math.max(line[0][0], line[1][0]) &&\n        point[0] <= Math.min(line[0][0], line[1][0]) &&\n        point[1] <= Math.max(line[0][1], line[1][1]) &&\n        point[1] <= Math.min(line[0][1], line[1][1]));\n}\nfunction direction(a, b, c) {\n    var val = (b[1] - a[1]) * (c[0] - b[0]) - (b[0] - a[0]) * (c[1] - b[1]);\n    if (val === 0)\n        return 0;\n    return val < 0 ? 2 : 1;\n}\nfunction isIntersect(line1, line2) {\n    var dir1 = direction(line1[0], line1[1], line2[0]);\n    var dir2 = direction(line1[0], line1[1], line2[1]);\n    var dir3 = direction(line2[0], line2[1], line1[0]);\n    var dir4 = direction(line2[0], line2[1], line1[1]);\n    if (dir1 !== dir2 && dir3 !== dir4)\n        return true;\n    if (dir1 === 0 && onLine(line1, line2[0]))\n        return true;\n    if (dir2 === 0 && onLine(line1, line2[1]))\n        return true;\n    if (dir3 === 0 && onLine(line2, line1[0]))\n        return true;\n    if (dir4 === 0 && onLine(line2, line1[1]))\n        return true;\n    return false;\n}\nexport function isPointInsideRectangle(polygon, point) {\n    var n = polygon.length;\n    if (n < 3)\n        return false;\n    var lineToInfinity = [point, [9999, point[1]]];\n    var count = 0;\n    var i = 0;\n    do {\n        var side = [polygon[i], polygon[(i + 1) % n]];\n        if (isIntersect(side, lineToInfinity)) {\n            if (direction(side[0], point, side[1]) === 0)\n                return onLine(side, point);\n            count++;\n        }\n        i = (i + 1) % n;\n    } while (i !== 0);\n    return !!(count & 1);\n}\nexport function isRectangleBInsideA(rectA, rectB) {\n    return rectB.every(function (point) { return isPointInsideRectangle(rectA, point); });\n}\n/**\n *  child  container \n */\nexport function contain(container, child, margin) {\n    var x1 = container.x1, x2 = container.x2, y1 = container.y1, y2 = container.y2;\n    var parent = [\n        [x1, y1],\n        [x2, y1],\n        [x2, y2],\n        [x1, y2],\n    ];\n    var element = getBounds(child, margin);\n    return isRectangleBInsideA(parent, element);\n}\n//# sourceMappingURL=contain.js.map","import { __read, __values } from \"tslib\";\nimport { getBounds } from './bounds';\n/**\n * Detect whether line-line collision.\n * From: https://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect\n */\nfunction lineToLine(line1, line2) {\n    var _a = __read(line1, 4), x0 = _a[0], y0 = _a[1], x1 = _a[2], y1 = _a[3];\n    var _b = __read(line2, 4), x2 = _b[0], y2 = _b[1], x3 = _b[2], y3 = _b[3];\n    var s10x = x1 - x0;\n    var s10y = y1 - y0;\n    var s32x = x3 - x2;\n    var s32y = y3 - y2;\n    var denom = s10x * s32y - s32x * s10y;\n    if (denom === 0)\n        return false;\n    var denomPositive = denom > 0;\n    var s02x = x0 - x2;\n    var s02y = y0 - y2;\n    var sNum = s10x * s02y - s10y * s02x;\n    if (sNum < 0 === denomPositive)\n        return false;\n    var tNum = s32x * s02y - s32y * s02x;\n    if (tNum < 0 === denomPositive)\n        return false;\n    if (sNum > denom === denomPositive || tNum > denom === denomPositive)\n        return false;\n    return true;\n}\nfunction intersectBoxLine(box /**  */, line) {\n    var lines = [\n        [box[0], box[1], box[2], box[3]],\n        [box[2], box[3], box[4], box[5]],\n        [box[4], box[5], box[6], box[7]],\n        [box[6], box[7], box[0], box[1]],\n    ];\n    return lines.some(function (boxLine) { return lineToLine(line, boxLine); });\n}\nexport var IntersectUtils = { lineToLine: lineToLine, intersectBoxLine: intersectBoxLine, getBounds: getBounds };\n/**\n *  DisplayObject \n */\nexport function intersect(a, b, margin) {\n    var e_1, _a;\n    var p = getBounds(a, margin).flat(1);\n    var q = getBounds(b, margin).flat(1);\n    var linesP = [\n        [p[0], p[1], p[2], p[3]],\n        [p[0], p[1], p[4], p[5]],\n        [p[4], p[5], p[6], p[7]],\n        [p[2], p[3], p[6], p[7]],\n    ];\n    try {\n        for (var linesP_1 = __values(linesP), linesP_1_1 = linesP_1.next(); !linesP_1_1.done; linesP_1_1 = linesP_1.next()) {\n            var line = linesP_1_1.value;\n            if (intersectBoxLine(q, line))\n                return true;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (linesP_1_1 && !linesP_1_1.done && (_a = linesP_1.return)) _a.call(linesP_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return false;\n}\n//# sourceMappingURL=intersect.js.map","import { __read, __values } from \"tslib\";\nimport { parseSeriesAttr, scale } from '../../../util';\nimport { getLabelVector } from '../guides/utils';\nimport { isAxisVertical } from '../guides/line';\nimport { Bounds } from './bounds';\nimport { contain } from './contain';\nimport { intersect } from './intersect';\n/**\n * \n * @returns return false if no crossSize, else croseBBox\n */\nfunction createCrossBBox(attr, padding) {\n    var type = attr.type, labelDirection = attr.labelDirection, crossSize = attr.crossSize;\n    if (!crossSize)\n        return false;\n    if (type === 'arc') {\n        var center = attr.center, radius = attr.radius;\n        var _a = __read(center, 2), cx = _a[0], cy = _a[1];\n        var size = labelDirection === 'negative' ? 0 : crossSize;\n        var dMin = -radius - size;\n        var dMax = radius + size;\n        var _b = __read(parseSeriesAttr(padding), 4), top_1 = _b[0], right_1 = _b[1], bottom_1 = _b[2], left_1 = _b[3];\n        // \n        return new Bounds(cx + dMin - left_1, cy + dMin - top_1, cx + dMax + right_1, cy + dMax + bottom_1);\n    }\n    var _c = __read(attr.startPos, 2), sx = _c[0], sy = _c[1], _d = __read(attr.endPos, 2), ex = _d[0], ey = _d[1];\n    // \n    var _e = __read(isAxisVertical(attr)\n        ? [-padding, 0, padding, 0]\n        : [0, padding, 0, -padding], 4), top = _e[0], right = _e[1], bottom = _e[2], left = _e[3];\n    var labelVector = getLabelVector(0, attr);\n    var diff = scale(labelVector, crossSize);\n    var bbox = new Bounds(sx, sy, ex, ey);\n    bbox.x1 += left;\n    bbox.y1 += top;\n    bbox.x2 += right + diff[0];\n    bbox.y2 += bottom + diff[1];\n    return bbox;\n}\nexport function boundTest(items, attr, margin) {\n    var e_1, _a;\n    var crossPadding = attr.crossPadding;\n    var resultSet = new Set();\n    var prev = null;\n    var crossBBox = createCrossBBox(attr, crossPadding);\n    var testContain = function (item) {\n        if (crossBBox)\n            return contain(crossBBox, item);\n        return true;\n    };\n    var testIntersect = function (prevItem, currItem) {\n        if (!prevItem || !prevItem.firstChild)\n            return true;\n        // Get the first child of the item(Text).\n        // @ts-ignore\n        return !intersect(prevItem.firstChild, currItem.firstChild, parseSeriesAttr(margin));\n    };\n    try {\n        for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n            var curr = items_1_1.value;\n            if (!testContain(curr)) {\n                resultSet.add(curr);\n            }\n            else if (!prev || testIntersect(prev, curr)) {\n                prev = curr;\n            }\n            else {\n                resultSet.add(prev);\n                resultSet.add(curr);\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return Array.from(resultSet);\n}\n//# sourceMappingURL=test.js.map","import { __read } from \"tslib\";\nimport { isNil } from '@antv/util';\nimport { getFont, measureTextWidth } from '../../../util';\nimport { boundTest } from '../utils/test';\nfunction parseLengthString(str, font) {\n    if (font === void 0) { font = {}; }\n    if (isNil(str))\n        return 0;\n    if (typeof str === 'number')\n        return str;\n    return Math.floor(measureTextWidth(str, font));\n}\nexport default function ellipseLabels(labels, overlapCfg, attr, utils) {\n    if (labels.length <= 1)\n        return;\n    var _a = overlapCfg.suffix, suffix = _a === void 0 ? '...' : _a, minLength = overlapCfg.minLength, _b = overlapCfg.maxLength, maxLength = _b === void 0 ? Infinity : _b, _c = overlapCfg.step, ellipsisStep = _c === void 0 ? ' ' : _c, _d = overlapCfg.margin, margin = _d === void 0 ? [0, 0, 0, 0] : _d;\n    var font = getFont(utils.getTextShape(labels[0]));\n    var step = parseLengthString(ellipsisStep, font);\n    var min = minLength ? parseLengthString(minLength, font) : step;\n    var max = parseLengthString(maxLength, font);\n    // Enable to ellipsis label when overlap.\n    if (isNil(max) || max === Infinity) {\n        max = Math.max.apply(null, labels.map(function (d) { return d.getBBox().width; }));\n    }\n    // Generally, 100 ticks cost less than 300ms. If cost time exceed, means ticks count is too large to see.\n    var source = labels.slice();\n    var _e = __read(margin, 4), _f = _e[0], top = _f === void 0 ? 0 : _f, _g = _e[1], right = _g === void 0 ? 0 : _g, _h = _e[2], bottom = _h === void 0 ? top : _h, _j = _e[3], left = _j === void 0 ? right : _j;\n    var _loop_1 = function (allowedLength) {\n        source.forEach(function (label) {\n            utils.ellipsis(utils.getTextShape(label), allowedLength, suffix);\n        });\n        source = boundTest(labels, attr, margin);\n        // \n        if (source.length < 1)\n            return { value: void 0 };\n    };\n    for (var allowedLength = max; allowedLength > min + step; allowedLength -= step) {\n        var state_1 = _loop_1(allowedLength);\n        if (typeof state_1 === \"object\")\n            return state_1.value;\n    }\n}\n//# sourceMappingURL=autoEllipsis.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { defined, getLocalBBox, hide } from '../../../util';\nimport { isAxisHorizontal, isAxisVertical } from '../guides/line';\nimport { boundTest } from '../utils/test';\nvar methods = {\n    parity: function (items, _a) {\n        var _b = _a.seq, seq = _b === void 0 ? 2 : _b;\n        return items.filter(function (item, i) { return (i % seq ? (hide(item), false) : true); });\n    },\n};\nvar filterDefined = function (arr) { return arr.filter(defined); };\nexport default function hideLabels(labels, overlapCfg, attr, utils) {\n    var count = labels.length;\n    var keepHeader = overlapCfg.keepHeader, keepTail = overlapCfg.keepTail;\n    if (count <= 1 || (count === 2 && keepHeader && keepTail))\n        return;\n    var parityHide = methods.parity;\n    var reset = function (els) { return (els.forEach(utils.show), els); };\n    var seq = 2;\n    var source = labels.slice();\n    var target = labels.slice();\n    var minLabelWidth = Math.min.apply(Math, __spreadArray([1], __read(labels.map(function (d) { return d.getBBox().width; })), false));\n    if (attr.type === 'linear' && (isAxisHorizontal(attr) || isAxisVertical(attr))) {\n        var minX = getLocalBBox(labels[0]).left;\n        var maxX = getLocalBBox(labels[count - 1]).right;\n        var distance = Math.abs(maxX - minX) || 1;\n        seq = Math.max(Math.floor((count * minLabelWidth) / distance), seq);\n    }\n    var first;\n    var last;\n    if (keepHeader)\n        first = source.splice(0, 1)[0];\n    if (keepTail) {\n        last = source.splice(-1, 1)[0];\n        source.reverse();\n    }\n    reset(source);\n    while (seq < labels.length &&\n        boundTest(filterDefined(last ? __spreadArray(__spreadArray([last], __read(target), false), [first], false) : __spreadArray([first], __read(target), false)), attr, overlapCfg === null || overlapCfg === void 0 ? void 0 : overlapCfg.margin).length) {\n        //  ( first)\n        if (last && !first && seq % 2 === 0) {\n            var rest = source.splice(0, 1);\n            rest.forEach(utils.hide);\n        }\n        else if (last && first) {\n            //  first \n            var rest = source.splice(0, 1);\n            rest.forEach(utils.hide);\n        }\n        target = parityHide(reset(source), { seq: seq });\n        seq++;\n    }\n}\n//# sourceMappingURL=autoHide.js.map","import { isInOffscreenGroup } from '../../../util';\nimport ellipsis from './autoEllipsis';\nimport hide from './autoHide';\nimport rotate from './autoRotate';\nimport wrap from './autoWrap';\nexport var OverlapUtils = new Map([\n    ['hide', hide],\n    ['rotate', rotate],\n    ['ellipsis', ellipsis],\n    ['wrap', wrap],\n]);\nexport function canProcessOverlap(labels, attr, type) {\n    if (attr.labelOverlap.length < 1)\n        return false;\n    if (type === 'hide')\n        return !isInOffscreenGroup(labels[0]);\n    if (type === 'rotate')\n        return !labels.some(function (label) { var _a; return !!((_a = label.attr('transform')) === null || _a === void 0 ? void 0 : _a.includes('rotate')); });\n    if (type === 'ellipsis' || type === 'wrap')\n        return labels.filter(function (item) { return item.querySelector('text'); }).length > 1;\n    return true;\n}\nexport function processOverlap(labels, attr, utils) {\n    var _a = attr.labelOverlap, labelOverlap = _a === void 0 ? [] : _a;\n    if (!labelOverlap.length)\n        return;\n    labelOverlap.forEach(function (overlapCfg) {\n        var type = overlapCfg.type;\n        var util = OverlapUtils.get(type);\n        if (canProcessOverlap(labels, attr, type))\n            util === null || util === void 0 ? void 0 : util(labels, overlapCfg, attr, utils);\n    });\n}\n//# sourceMappingURL=index.js.map","import { __values } from \"tslib\";\nimport { boundTest } from '../utils/test';\nexport default function rotateLabels(labels, overlapCfg, attr, utils) {\n    var e_1, _a;\n    var _b = overlapCfg.optionalAngles, optionalAngles = _b === void 0 ? [0, 45, 90] : _b, margin = overlapCfg.margin, _c = overlapCfg.recoverWhenFailed, recoverWhenFailed = _c === void 0 ? true : _c;\n    var defaultAngles = labels.map(function (label) { return label.getLocalEulerAngles(); });\n    var runAndPassed = function () { return boundTest(labels, attr, margin).length < 1; };\n    var setLabelsRotate = function (angle) {\n        return labels.forEach(function (label, index) {\n            var rotate = Array.isArray(angle) ? angle[index] : angle;\n            utils.rotate(label, +rotate);\n        });\n    };\n    try {\n        for (var optionalAngles_1 = __values(optionalAngles), optionalAngles_1_1 = optionalAngles_1.next(); !optionalAngles_1_1.done; optionalAngles_1_1 = optionalAngles_1.next()) {\n            var angle = optionalAngles_1_1.value;\n            setLabelsRotate(angle);\n            if (runAndPassed())\n                return;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (optionalAngles_1_1 && !optionalAngles_1_1.done && (_a = optionalAngles_1.return)) _a.call(optionalAngles_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    if (recoverWhenFailed) {\n        setLabelsRotate(defaultAngles);\n    }\n}\n//# sourceMappingURL=autoRotate.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { isAxisHorizontal } from '../guides/line';\nimport { boundTest } from '../utils/test';\nfunction inferTextBaseline(attr) {\n    var type = attr.type, labelDirection = attr.labelDirection;\n    if (type === 'linear' && isAxisHorizontal(attr)) {\n        return labelDirection === 'negative' ? 'bottom' : 'top';\n    }\n    return 'middle';\n}\nexport default function wrapLabels(labels, overlapCfg, attr, utils) {\n    var _a = overlapCfg.wordWrapWidth, wordWrapWidth = _a === void 0 ? 50 : _a, _b = overlapCfg.maxLines, maxLines = _b === void 0 ? 3 : _b, _c = overlapCfg.recoverWhenFailed, recoverWhenFailed = _c === void 0 ? true : _c, _d = overlapCfg.margin, margin = _d === void 0 ? [0, 0, 0, 0] : _d;\n    var defaultLines = labels.map(function (label) { return label.attr('maxLines') || 1; });\n    var minLines = Math.min.apply(Math, __spreadArray([], __read(defaultLines), false));\n    var runAndPassed = function () { return boundTest(labels, attr, margin).length < 1; };\n    var textBaseline = inferTextBaseline(attr);\n    var setLabelsWrap = function (lines) {\n        return labels.forEach(function (label, index) {\n            var maxLines = Array.isArray(lines) ? lines[index] : lines;\n            utils.wrap(label, wordWrapWidth, maxLines, textBaseline);\n        });\n    };\n    if (minLines > maxLines)\n        return;\n    for (var lines = minLines; lines <= maxLines; lines++) {\n        setLabelsWrap(lines);\n        if (runAndPassed())\n            return;\n    }\n    if (recoverWhenFailed) {\n        setLabelsWrap(defaultLines);\n    }\n}\n//# sourceMappingURL=autoWrap.js.map","export * from './test';\nexport function getFactor() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var fn = function (str) { return (str === 'positive' ? -1 : 1); };\n    return args.reduce(function (acc, cur) { return acc * fn(cur); }, 1);\n}\n//# sourceMappingURL=index.js.map","import { __assign, __read, __rest, __spreadArray } from \"tslib\";\nimport { get, isFunction } from '@antv/util';\nimport { fadeOut, onAnimateFinished, onAnimatesFinished, transition, transitionShape } from '../../../animation';\nimport { add, defined, ellipsisIt, getCallbackValue, hide, inRange, percentTransform, radToDeg, renderExtDo, scale, select, show, splitStyle, subStyleProps, wrapIt, } from '../../../util';\nimport { CLASS_NAMES } from '../constant';\nimport { processOverlap } from '../overlap';\nimport { getFactor } from '../utils';\nimport { getValuePos } from './line';\nimport { filterExec, getCallbackStyle, getLabelVector, getLineTangentVector } from './utils';\nfunction angleNormalizer(angle) {\n    var normalizedAngle = angle;\n    while (normalizedAngle < 0)\n        normalizedAngle += 360;\n    return Math.round(normalizedAngle % 360);\n}\nfunction getAngle(v1, v2) {\n    var _a = __read(v1, 2), x1 = _a[0], y1 = _a[1];\n    var _b = __read(v2, 2), x2 = _b[0], y2 = _b[1];\n    var _c = __read([x1 * x2 + y1 * y2, x1 * y2 - y1 * x2], 2), dot = _c[0], det = _c[1];\n    return Math.atan2(det, dot);\n}\n/** to correct label rotation to avoid inverted character */\nfunction correctLabelRotation(_rotate) {\n    var rotate = (_rotate + 360) % 180;\n    if (!inRange(rotate, -90, 90))\n        rotate += 180;\n    return rotate;\n}\n/** get rotation from preset or layout */\nfunction getLabelRotation(datum, label, attr) {\n    var _a;\n    var labelAlign = attr.labelAlign;\n    // if label rotate is set, use it\n    var customRotate = (_a = label.style.transform) === null || _a === void 0 ? void 0 : _a.includes('rotate');\n    if (customRotate)\n        return label.getLocalEulerAngles();\n    var rotate = 0;\n    var labelVector = getLabelVector(datum.value, attr);\n    var tangentVector = getLineTangentVector(datum.value, attr);\n    if (labelAlign === 'horizontal')\n        return 0;\n    if (labelAlign === 'perpendicular')\n        rotate = getAngle([1, 0], labelVector);\n    else\n        rotate = getAngle([tangentVector[0] < 0 ? -1 : 1, 0], tangentVector);\n    return correctLabelRotation(radToDeg(rotate));\n}\n/** get the label align according to its tick and label angle  */\nfunction getLabelStyle(value, rotate, attr) {\n    var type = attr.type, labelAlign = attr.labelAlign;\n    var labelVector = getLabelVector(value, attr);\n    var labelAngle = angleNormalizer(rotate);\n    var tickAngle = angleNormalizer(radToDeg(getAngle([1, 0], labelVector)));\n    var textAlign = 'center';\n    var textBaseline = 'middle';\n    if (type === 'linear') {\n        // tick  label \n        if ([90, 270].includes(tickAngle) && labelAngle === 0) {\n            textAlign = 'center';\n            textBaseline = labelVector[1] === 1 ? 'top' : 'bottom';\n        }\n        else if (!(tickAngle % 180) && [90, 270].includes(labelAngle)) {\n            textAlign = 'center';\n        }\n        //  tick  label  label \n        else if (tickAngle === 0) {\n            if (inRange(labelAngle, 0, 90, false, true)) {\n                textAlign = 'start';\n            }\n            else if (inRange(labelAngle, 0, 90) || inRange(labelAngle, 270, 360)) {\n                textAlign = 'start';\n            }\n        }\n        else if (tickAngle === 90) {\n            if (inRange(labelAngle, 0, 90, false, true)) {\n                textAlign = 'start';\n            }\n            else if (inRange(labelAngle, 90, 180) || inRange(labelAngle, 270, 360)) {\n                textAlign = 'end';\n            }\n        }\n        else if (tickAngle === 270) {\n            if (inRange(labelAngle, 0, 90, false, true)) {\n                textAlign = 'end';\n            }\n            else if (inRange(labelAngle, 90, 180) || inRange(labelAngle, 270, 360)) {\n                textAlign = 'start';\n            }\n        }\n        else if (tickAngle === 180) {\n            if (labelAngle === 90) {\n                textAlign = 'start';\n            }\n            else if (inRange(labelAngle, 0, 90) || inRange(labelAngle, 270, 360)) {\n                textAlign = 'end';\n            }\n        }\n        /**\n         * todo tick \n         */\n    }\n    else {\n        //  label \n        if (labelAlign === 'parallel') {\n            if (inRange(tickAngle, 0, 180, true)) {\n                textBaseline = 'top';\n            }\n            else {\n                textBaseline = 'bottom';\n            }\n        }\n        else if (labelAlign === 'horizontal') {\n            if (inRange(tickAngle, 90, 270, false)) {\n                textAlign = 'end';\n            }\n            else if (inRange(tickAngle, 270, 360, false) || inRange(tickAngle, 0, 90)) {\n                textAlign = 'start';\n            }\n        }\n        else if (labelAlign === 'perpendicular') {\n            if (inRange(tickAngle, 90, 270)) {\n                textAlign = 'end';\n            }\n            else {\n                textAlign = 'start';\n            }\n        }\n    }\n    return { textAlign: textAlign, textBaseline: textBaseline };\n}\nfunction setRotateAndAdjustLabelAlign(rotate, group, attr) {\n    group.setLocalEulerAngles(rotate);\n    var value = group.__data__.value;\n    var textStyle = getLabelStyle(value, rotate, attr);\n    var label = group.querySelector(CLASS_NAMES.labelItem.class);\n    if (label)\n        applyTextStyle(label, textStyle);\n}\nfunction getLabelPos(datum, data, attr) {\n    var showTick = attr.showTick, tickLength = attr.tickLength, tickDirection = attr.tickDirection, labelDirection = attr.labelDirection, labelSpacing = attr.labelSpacing;\n    var index = data.indexOf(datum);\n    var finalLabelSpacing = getCallbackValue(labelSpacing, [datum, index, data]);\n    var _a = __read([getLabelVector(datum.value, attr), getFactor(labelDirection, tickDirection)], 2), labelVector = _a[0], unionFactor = _a[1];\n    var extraLength = unionFactor === 1 ? getCallbackValue(showTick ? tickLength : 0, [datum, index, data]) : 0;\n    var _b = __read(add(scale(labelVector, finalLabelSpacing + extraLength), getValuePos(datum.value, attr)), 2), x = _b[0], y = _b[1];\n    return { x: x, y: y };\n}\nfunction formatter(datum, index, data, attr) {\n    var labelFormatter = attr.labelFormatter;\n    var element = isFunction(labelFormatter)\n        ? function () { return renderExtDo(getCallbackValue(labelFormatter, [datum, index, data, getLabelVector(datum.value, attr)])); }\n        : function () { return renderExtDo(datum.label || ''); };\n    return element;\n}\nfunction applyTextStyle(node, style) {\n    if (node.nodeName === 'text')\n        node.attr(style);\n}\nfunction overlapHandler(attr) {\n    processOverlap(this.node().childNodes, attr, {\n        hide: hide,\n        show: show,\n        rotate: function (label, angle) {\n            setRotateAndAdjustLabelAlign(+angle, label, attr);\n        },\n        ellipsis: function (label, len, suffix) {\n            label && ellipsisIt(label, len || Infinity, suffix);\n        },\n        wrap: function (label, width, lines) {\n            label && wrapIt(label, width, lines);\n        },\n        getTextShape: function (label) { return label.querySelector('text'); },\n    });\n}\nfunction renderLabel(container, datum, data, style, attr) {\n    var index = data.indexOf(datum);\n    var label = select(container)\n        .append(formatter(datum, index, data, attr))\n        .attr('className', CLASS_NAMES.labelItem.name)\n        .node();\n    var _a = __read(splitStyle(getCallbackStyle(style, [datum, index, data])), 2), labelStyle = _a[0], _b = _a[1], transform = _b.transform, groupStyle = __rest(_b, [\"transform\"]);\n    percentTransform(label, transform);\n    var rotate = getLabelRotation(datum, label, attr);\n    if (!label.getLocalEulerAngles()) {\n        label.setLocalEulerAngles(rotate);\n    }\n    applyTextStyle(label, __assign(__assign({}, getLabelStyle(datum.value, rotate, attr)), labelStyle));\n    container.attr(groupStyle);\n    return label;\n}\nexport function renderLabels(container, data, attr, animate) {\n    var finalData = filterExec(data, attr.labelFilter);\n    var style = subStyleProps(attr, 'label');\n    return container\n        .selectAll(CLASS_NAMES.label.class)\n        .data(finalData, function (d, i) { return i; })\n        .join(function (enter) {\n        return enter\n            .append('g')\n            .attr('className', CLASS_NAMES.label.name)\n            .transition(function (datum) {\n            renderLabel(this, datum, data, style, attr);\n            var _a = getLabelPos(datum, data, attr), x = _a.x, y = _a.y;\n            // .axis-label\n            this.style.transform = \"translate(\".concat(x, \", \").concat(y, \")\");\n            return null;\n        })\n            .call(function () {\n            overlapHandler.call(container, attr);\n        });\n    }, function (update) {\n        return update\n            .transition(function (datum) {\n            var prevLabel = this.querySelector(CLASS_NAMES.labelItem.class);\n            var label = renderLabel(this, datum, data, style, attr);\n            var shapeAnimation = transitionShape(prevLabel, label, animate.update);\n            var _a = getLabelPos(datum, data, attr), x = _a.x, y = _a.y;\n            var animation = transition(this, { transform: \"translate(\".concat(x, \", \").concat(y, \")\") }, animate.update);\n            return __spreadArray(__spreadArray([], __read(shapeAnimation), false), [animation], false);\n            // return [animation];\n        })\n            .call(function (selection) {\n            var transitions = get(selection, '_transitions').flat().filter(defined);\n            onAnimatesFinished(transitions, function () {\n                overlapHandler.call(container, attr);\n            });\n        });\n    }, function (exit) {\n        return exit.transition(function () {\n            var _this = this;\n            var animation = fadeOut(this.childNodes[0], animate.exit);\n            onAnimateFinished(animation, function () { return select(_this).remove(); });\n            return animation;\n        });\n    })\n        .transitions();\n}\n//# sourceMappingURL=labels.js.map","import { applyToText } from './text';\nexport function wrapIt(node, wordWrapWidth, maxLines, textBaseline) {\n    if (maxLines === void 0) { maxLines = 2; }\n    if (textBaseline === void 0) { textBaseline = 'top'; }\n    applyToText(node, { wordWrap: true, wordWrapWidth: wordWrapWidth, maxLines: maxLines, textBaseline: textBaseline });\n}\n//# sourceMappingURL=wrap.js.map","import { __assign, __read } from \"tslib\";\nimport { isFunction } from '@antv/util';\nimport { fadeOut, onAnimateFinished, transition } from '../../../animation';\nimport { getCallbackValue, select, splitStyle, subStyleProps } from '../../../util';\nimport { CLASS_NAMES } from '../constant';\nimport { getValuePos } from './line';\nimport { filterExec, getCallbackStyle, getDirectionVector } from './utils';\nexport function getTickVector(value, attr) {\n    return getDirectionVector(value, attr.tickDirection, attr);\n}\nexport function getTickPoints(unitVector, tickLength) {\n    var _a = __read(unitVector, 2), dx = _a[0], dy = _a[1];\n    return [\n        [0, 0],\n        [dx * tickLength, dy * tickLength],\n    ];\n}\nfunction getTickLineLayout(datum, index, data, tickVector, attr) {\n    var tickLength = attr.tickLength;\n    var _a = __read(getTickPoints(tickVector, getCallbackValue(tickLength, [datum, index, data])), 2), _b = __read(_a[0], 2), x1 = _b[0], y1 = _b[1], _c = __read(_a[1], 2), x2 = _c[0], y2 = _c[1];\n    return { x1: x1, x2: x2, y1: y1, y2: y2 };\n}\nfunction createTickEl(container, datum, index, data, attr) {\n    var formatter = attr.tickFormatter;\n    var tickVector = getTickVector(datum.value, attr);\n    var el = 'line';\n    if (isFunction(formatter))\n        el = function () { return getCallbackValue(formatter, [datum, index, data, tickVector]); };\n    return container.append(el).attr('className', CLASS_NAMES.tickItem.name);\n}\nfunction applyTickStyle(datum, index, data, tick, group, attr, style) {\n    var tickVector = getTickVector(datum.value, attr);\n    var _a = getTickLineLayout(datum, index, data, tickVector, attr), x1 = _a.x1, x2 = _a.x2, y1 = _a.y1, y2 = _a.y2;\n    var _b = __read(splitStyle(getCallbackStyle(style, [datum, index, data, tickVector])), 2), tickStyle = _b[0], groupStyle = _b[1];\n    tick.node().nodeName === 'line' && tick.styles(__assign({ x1: x1, x2: x2, y1: y1, y2: y2 }, tickStyle));\n    group.attr(groupStyle);\n    tick.styles(tickStyle);\n}\nfunction createTick(datum, index, data, attr, tickAttr, animate) {\n    var tick = createTickEl(select(this), datum, index, data, attr);\n    applyTickStyle(datum, index, data, tick, this, attr, tickAttr);\n    var _a = __read(getValuePos(datum.value, attr), 2), x = _a[0], y = _a[1];\n    return transition(this, { transform: \"translate(\".concat(x, \", \").concat(y, \")\") }, animate);\n}\nexport function renderTicks(container, axisData, attr, animate) {\n    var finalData = filterExec(axisData, attr.tickFilter);\n    var tickAttr = subStyleProps(attr, 'tick');\n    return container\n        .selectAll(CLASS_NAMES.tick.class)\n        .data(finalData, function (d) { return d.id || d.label; })\n        .join(function (enter) {\n        return enter\n            .append('g')\n            .attr('className', CLASS_NAMES.tick.name)\n            .transition(function (datum, index) {\n            return createTick.call(this, datum, index, finalData, attr, tickAttr, false);\n        });\n    }, function (update) {\n        return update.transition(function (datum, index) {\n            this.removeChildren();\n            return createTick.call(this, datum, index, finalData, attr, tickAttr, animate.update);\n        });\n    }, function (exit) {\n        return exit.transition(function () {\n            var _this = this;\n            var animation = fadeOut(this.childNodes[0], animate.exit);\n            onAnimateFinished(animation, function () { return _this.remove(); });\n            return animation;\n        });\n    })\n        .transitions();\n}\n//# sourceMappingURL=ticks.js.map","import { __assign, __read, __rest } from \"tslib\";\nimport { transition } from '../../../animation';\nimport { normalize, parseSeriesAttr, percentTransform, renderExtDo, scale, select, splitStyle, subStyleProps, } from '../../../util';\nimport { parsePosition } from '../../title';\nimport { CLASS_NAMES } from '../constant';\nfunction getTitlePosition(mainGroup, titleGroup, attr) {\n    var _a = attr.titlePosition, position = _a === void 0 ? 'lb' : _a, spacing = attr.titleSpacing;\n    var pos = parsePosition(position);\n    var _b = mainGroup.node().getLocalBounds(), _c = __read(_b.min, 2), mainX = _c[0], mainY = _c[1], _d = __read(_b.halfExtents, 2), mainHalfWidth = _d[0], mainHalfHeight = _d[1];\n    var _e = __read(titleGroup.node().getLocalBounds().halfExtents, 2), titleHalfWidth = _e[0], titleHalfHeight = _e[1];\n    var _f = __read([mainX + mainHalfWidth, mainY + mainHalfHeight], 2), x = _f[0], y = _f[1];\n    var _g = __read(parseSeriesAttr(spacing), 4), spacingTop = _g[0], spacingRight = _g[1], spacingBottom = _g[2], spacingLeft = _g[3];\n    if (['start', 'end'].includes(position) && attr.type === 'linear') {\n        var startPos = attr.startPos, endPos = attr.endPos;\n        // todo did not consider the truncate case\n        var _h = __read(position === 'start' ? [startPos, endPos] : [endPos, startPos], 2), from = _h[0], to = _h[1];\n        var direction = normalize([-to[0] + from[0], -to[1] + from[1]]);\n        var _j = __read(scale(direction, spacingTop), 2), dx = _j[0], dy = _j[1];\n        return { x: from[0] + dx, y: from[1] + dy };\n    }\n    if (pos.includes('t'))\n        y -= mainHalfHeight + titleHalfHeight + spacingTop;\n    if (pos.includes('r'))\n        x += mainHalfWidth + titleHalfWidth + spacingRight;\n    if (pos.includes('l'))\n        x -= mainHalfWidth + titleHalfWidth + spacingLeft;\n    if (pos.includes('b'))\n        y += mainHalfHeight + titleHalfHeight + spacingBottom;\n    return { x: x, y: y };\n}\nfunction inferTransform(n, direction, position) {\n    var halfExtents = n.getGeometryBounds().halfExtents;\n    var height = halfExtents[1] * 2;\n    if (direction === 'vertical') {\n        if (position === 'left')\n            return \"rotate(-90) translate(0, \".concat(height / 2, \")\");\n        if (position === 'right')\n            return \"rotate(-90) translate(0, -\".concat(height / 2, \")\");\n    }\n    return '';\n}\nfunction applyTitleStyle(title, group, axis, attr, animate) {\n    var style = subStyleProps(attr, 'title');\n    var _a = __read(splitStyle(style), 2), titleStyle = _a[0], _b = _a[1], specified = _b.transform, transformOrigin = _b.transformOrigin, groupStyle = __rest(_b, [\"transform\", \"transformOrigin\"]);\n    group.styles(groupStyle);\n    var transform = specified || inferTransform(title.node(), titleStyle.direction, titleStyle.position);\n    title.styles(__assign(__assign({}, titleStyle), { transformOrigin: transformOrigin }));\n    percentTransform(title.node(), transform);\n    var _c = getTitlePosition(\n    // @ts-ignore\n    select(axis._offscreen || axis.querySelector(CLASS_NAMES.mainGroup.class)), group, attr), x = _c.x, y = _c.y;\n    var animation = transition(group.node(), { transform: \"translate(\".concat(x, \", \").concat(y, \")\") }, animate);\n    return animation;\n}\nexport function renderTitle(container, axis, attr, animate) {\n    var titleText = attr.titleText;\n    return container\n        .selectAll(CLASS_NAMES.title.class)\n        .data([{ title: titleText }].filter(function (d) { return !!d.title; }), function (d, i) { return d.title; })\n        .join(function (enter) {\n        return enter\n            .append(function () { return renderExtDo(titleText); })\n            .attr('className', CLASS_NAMES.title.name)\n            .transition(function () {\n            return applyTitleStyle(select(this), container, axis, attr, animate.enter);\n        });\n    }, function (update) {\n        return update.transition(function () {\n            return applyTitleStyle(select(this), container, axis, attr, animate.update);\n        });\n    }, function (exit) { return exit.remove(); })\n        .transitions();\n}\n//# sourceMappingURL=title.js.map","import { __extends, __read, __spreadArray } from \"tslib\";\nimport { parseAnimationOption } from '../../animation';\nimport { Component } from '../../core';\nimport { ifShow, sampling, select } from '../../util';\nimport { AXIS_BASE_DEFAULT_ATTR, CLASS_NAMES } from './constant';\nimport { renderGrid } from './guides/grid';\nimport { renderLabels } from './guides/labels';\nimport { renderAxisLine } from './guides/line';\nimport { renderTicks } from './guides/ticks';\nimport { renderTitle } from './guides/title';\nfunction renderAxisMain(attributes, container, data, animation) {\n    var showLine = attributes.showLine, showTick = attributes.showTick, showLabel = attributes.showLabel;\n    /** line */\n    var lineGroup = container.maybeAppendByClassName(CLASS_NAMES.lineGroup, 'g');\n    var lineTransitions = ifShow(showLine, lineGroup, function (group) {\n        return renderAxisLine(group, attributes, animation);\n    }) || [];\n    /** tick */\n    var tickGroup = container.maybeAppendByClassName(CLASS_NAMES.tickGroup, 'g');\n    var tickTransitions = ifShow(showTick, tickGroup, function (group) {\n        return renderTicks(group, data, attributes, animation);\n    }) || [];\n    /** label */\n    var labelGroup = container.maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g');\n    var labelTransitions = ifShow(showLabel, labelGroup, function (group) {\n        return renderLabels(group, data, attributes, animation);\n    }) || [];\n    return __spreadArray(__spreadArray(__spreadArray([], __read(lineTransitions), false), __read(tickTransitions), false), __read(labelTransitions), false).filter(function (t) { return !!t; });\n}\nvar Axis = /** @class */ (function (_super) {\n    __extends(Axis, _super);\n    function Axis(options) {\n        return _super.call(this, options, AXIS_BASE_DEFAULT_ATTR) || this;\n    }\n    Axis.prototype.render = function (attributes, container, specificAnimation) {\n        var _this = this;\n        var titleText = attributes.titleText, data = attributes.data, animate = attributes.animate, showTitle = attributes.showTitle, showGrid = attributes.showGrid, dataThreshold = attributes.dataThreshold, truncRange = attributes.truncRange;\n        var sampledData = sampling(data, dataThreshold).filter(function (_a) {\n            var value = _a.value;\n            if (truncRange && value > truncRange[0] && value < truncRange[1])\n                return false;\n            return true;\n        });\n        var finalAnimation = parseAnimationOption(specificAnimation === undefined ? animate : specificAnimation);\n        /** grid */\n        var gridGroup = select(container).maybeAppendByClassName(CLASS_NAMES.gridGroup, 'g');\n        var gridTransitions = ifShow(showGrid, gridGroup, function (group) { return renderGrid(group, sampledData, attributes, finalAnimation); }) || [];\n        /** main group */\n        var mainGroup = select(container).maybeAppendByClassName(CLASS_NAMES.mainGroup, 'g');\n        if (titleText && ((!this.initialized && finalAnimation.enter) || (this.initialized && finalAnimation.update))) {\n            renderAxisMain(attributes, select(this.offscreenGroup), sampledData, parseAnimationOption(false));\n        }\n        // render\n        var mainTransitions = renderAxisMain(attributes, select(mainGroup.node()), sampledData, finalAnimation);\n        /** title */\n        var titleGroup = select(container).maybeAppendByClassName(CLASS_NAMES.titleGroup, 'g');\n        var titleTransitions = ifShow(showTitle, titleGroup, function (group) {\n            return renderTitle(group, _this, attributes, finalAnimation);\n        }) || [];\n        return __spreadArray(__spreadArray(__spreadArray([], __read(gridTransitions), false), __read(mainTransitions), false), __read(titleTransitions), false).flat().filter(function (t) { return !!t; });\n    };\n    return Axis;\n}(Component));\nexport { Axis };\n//# sourceMappingURL=axis.js.map","export function sampling(data, size) {\n    if (data.length <= size)\n        return data;\n    var step = Math.floor(data.length / size);\n    var result = [];\n    for (var i = 0; i < data.length; i += step) {\n        result.push(data[i]);\n    }\n    return result;\n}\n//# sourceMappingURL=sampling.js.map","import { deepMix } from '@antv/util';\nimport { Path } from '../../shapes';\nimport { classNames } from '../../util';\nexport var AXIS_BASE_DEFAULT_ATTR = {\n    data: [],\n    animate: {\n        enter: false,\n        update: {\n            duration: 100,\n            easing: 'ease-in-out-sine',\n            fill: 'both',\n        },\n        exit: {\n            duration: 100,\n            fill: 'both',\n        },\n    },\n    showArrow: true,\n    showGrid: true,\n    showLabel: true,\n    showLine: true,\n    showTick: true,\n    showTitle: true,\n    showTrunc: false,\n    dataThreshold: 100,\n    lineLineWidth: 1,\n    lineStroke: 'black',\n    crossPadding: 10,\n    titleFill: 'black',\n    titleFontSize: 12,\n    titlePosition: 'lb',\n    titleSpacing: 0,\n    titleTextAlign: 'center',\n    titleTextBaseline: 'middle',\n    lineArrow: function () {\n        return new Path({\n            style: {\n                d: [['M', 10, 10], ['L', -10, 0], ['L', 10, -10], ['L', 0, 0], ['L', 10, 10], ['Z']],\n                fill: 'black',\n                transformOrigin: 'center',\n            },\n        });\n    },\n    labelAlign: 'parallel',\n    labelDirection: 'positive',\n    labelFontSize: 12,\n    labelSpacing: 0,\n    gridConnect: 'line',\n    gridControlAngles: [],\n    gridDirection: 'positive',\n    gridLength: 0,\n    gridType: 'segment',\n    lineArrowOffset: 15,\n    lineArrowSize: 10,\n    tickDirection: 'positive',\n    tickLength: 5,\n    tickLineWidth: 1,\n    tickStroke: 'black',\n    labelOverlap: [\n    // { type: 'rotate', optionalAngles: [0, 45, 90] },\n    // { type: 'ellipsis', suffix: '...', minLength: 14, maxLength: 160 },\n    // { type: 'hide' },\n    ],\n};\nexport var ARC_DEFAULT_OPTIONS = deepMix({}, AXIS_BASE_DEFAULT_ATTR, {\n    style: {\n        type: 'arc',\n    },\n});\nexport var HELIX_DEFAULT_OPTIONS = deepMix({}, AXIS_BASE_DEFAULT_ATTR, {\n    style: {},\n});\nexport var CLASS_NAMES = classNames({\n    mainGroup: 'main-group',\n    gridGroup: 'grid-group',\n    grid: 'grid',\n    lineGroup: 'line-group',\n    line: 'line',\n    tickGroup: 'tick-group',\n    tick: 'tick',\n    tickItem: 'tick-item',\n    labelGroup: 'label-group',\n    label: 'label',\n    labelItem: 'label-item',\n    titleGroup: 'title-group',\n    title: 'title',\n    lineFirst: 'line-first',\n    lineSecond: 'line-second',\n}, 'axis');\n//# sourceMappingURL=constant.js.map","export var DEFAULT_INDICATOR_STYLE_PROPS = {\n    backgroundFill: '#262626',\n    backgroundLineCap: 'round',\n    backgroundLineWidth: 1,\n    backgroundStroke: '#333',\n    backgroundZIndex: -1,\n    formatter: function (val) { return val.toString(); },\n    labelFill: '#fff',\n    labelFontSize: 12,\n    labelTextBaseline: 'middle',\n    padding: [2, 4],\n    position: 'right',\n    radius: 0,\n    zIndex: 999,\n};\n//# sourceMappingURL=constant.js.map","import { __assign, __extends, __read, __rest, __spreadArray } from \"tslib\";\nimport { ElementEvent } from '@antv/g';\nimport { Component } from '../../core';\nimport { Group } from '../../shapes';\nimport { BBox, classNames, hide, isHorizontal, parseSeriesAttr, renderExtDo, select, show, splitStyle, subStyleProps, } from '../../util';\nimport { DEFAULT_INDICATOR_STYLE_PROPS } from './constant';\nvar CLASS_NAMES = classNames({\n    background: 'background',\n    labelGroup: 'label-group',\n    label: 'label',\n}, 'indicator');\nvar Indicator = /** @class */ (function (_super) {\n    __extends(Indicator, _super);\n    function Indicator(options) {\n        var _this = _super.call(this, options, DEFAULT_INDICATOR_STYLE_PROPS) || this;\n        _this.point = [0, 0];\n        _this.group = _this.appendChild(new Group({}));\n        _this.isMutationObserved = true;\n        return _this;\n    }\n    Indicator.prototype.renderBackground = function () {\n        if (!this.label)\n            return;\n        var _a = this.attributes, position = _a.position, padding = _a.padding;\n        var _b = __read(parseSeriesAttr(padding), 4), t = _b[0], r = _b[1], b = _b[2], l = _b[3];\n        var _c = this.label.node().getLocalBounds(), min = _c.min, max = _c.max;\n        var bbox = new BBox(min[0] - l, min[1] - t, max[0] + r - min[0] + l, max[1] + b - min[1] + t);\n        var path = this.getPath(position, bbox);\n        var style = subStyleProps(this.attributes, 'background');\n        this.background = select(this.group)\n            .maybeAppendByClassName(CLASS_NAMES.background, 'path')\n            .styles(__assign(__assign({}, style), { d: path }));\n        this.group.appendChild(this.label.node());\n    };\n    Indicator.prototype.renderLabel = function () {\n        var _a = this.attributes, formatter = _a.formatter, labelText = _a.labelText;\n        var style = subStyleProps(this.attributes, 'label');\n        var _b = __read(splitStyle(style), 2), _c = _b[0], groupStyle = _b[1], rawText = _c.text, textStyle = __rest(_c, [\"text\"]);\n        this.label = select(this.group).maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g').styles(groupStyle);\n        if (!labelText)\n            return;\n        var text = this.label\n            .maybeAppendByClassName(CLASS_NAMES.label, function () { return renderExtDo(formatter(labelText)); })\n            .style('text', formatter(labelText).toString());\n        text.selectAll('text').styles(textStyle);\n    };\n    Indicator.prototype.adjustLayout = function () {\n        var _a = __read(this.point, 2), dx = _a[0], dy = _a[1];\n        var _b = this.attributes, x = _b.x, y = _b.y;\n        this.group.attr('transform', \"translate(\".concat(x - dx, \", \").concat(y - dy, \")\"));\n    };\n    Indicator.prototype.getPath = function (position, bbox) {\n        var r = this.attributes.radius;\n        var x = bbox.x, y = bbox.y, width = bbox.width, height = bbox.height;\n        var pathArray = [\n            // 0 \n            ['M', x + r, y],\n            // 1 \n            ['L', x + width - r, y],\n            // 2 \n            ['A', r, r, 0, 0, 1, x + width, y + r],\n            // 3 \n            ['L', x + width, y + height - r],\n            // 4 \n            ['A', r, r, 0, 0, 1, x + width - r, y + height],\n            // 5 \n            ['L', x + r, y + height],\n            // 6 \n            ['A', r, r, 0, 0, 1, x, y + height - r],\n            // 7 \n            ['L', x, y + r],\n            // 8 \n            ['A', r, r, 0, 0, 1, x + r, y],\n            // 9 \n            ['Z'],\n        ];\n        //  position \n        var revertPositionMap = { top: 4, right: 6, bottom: 0, left: 2 };\n        var index = revertPositionMap[position];\n        var newPath = this.createCorner([pathArray[index].slice(-2), pathArray[index + 1].slice(-2)]);\n        // \n        pathArray.splice.apply(pathArray, __spreadArray([index + 1, 1], __read(newPath), false));\n        pathArray[0][0] = 'M';\n        return pathArray;\n    };\n    Indicator.prototype.createCorner = function (edge, size) {\n        if (size === void 0) { size = 10; }\n        // intrinsic parameter\n        var cornerScale = 0.8;\n        var isH = isHorizontal.apply(void 0, __spreadArray([], __read(edge), false));\n        var _a = __read(edge, 2), _b = __read(_a[0], 2), x0 = _b[0], y0 = _b[1], _c = __read(_a[1], 2), x1 = _c[0], y1 = _c[1];\n        var _d = __read(isH ? [x1 - x0, [x0, x1]] : [y1 - y0, [y0, y1]], 2), len = _d[0], _e = __read(_d[1], 2), b0 = _e[0], b1 = _e[1];\n        var hL = len / 2;\n        var sign = len / Math.abs(len);\n        var cL = size * sign;\n        var hCL = cL / 2;\n        var cS = ((cL * Math.sqrt(3)) / 2) * cornerScale;\n        var _f = __read([b0, b0 + hL - hCL, b0 + hL, b0 + hL + hCL, b1], 5), a0 = _f[0], a1 = _f[1], a2 = _f[2], a3 = _f[3], a4 = _f[4];\n        if (isH) {\n            this.point = [a2, y0 - cS];\n            return [\n                ['L', a0, y0],\n                ['L', a1, y0],\n                ['L', a2, y0 - cS],\n                ['L', a3, y0],\n                ['L', a4, y0],\n            ];\n        }\n        this.point = [x0 + cS, a2];\n        return [\n            ['L', x0, a0],\n            ['L', x0, a1],\n            ['L', x0 + cS, a2],\n            ['L', x0, a3],\n            ['L', x0, a4],\n        ];\n    };\n    Indicator.prototype.applyVisibility = function () {\n        var visibility = this.attributes.visibility;\n        if (visibility === 'hidden')\n            hide(this);\n        else\n            show(this);\n    };\n    Indicator.prototype.bindEvents = function () {\n        this.label.on(ElementEvent.BOUNDS_CHANGED, this.renderBackground);\n    };\n    Indicator.prototype.render = function () {\n        this.renderLabel();\n        this.renderBackground();\n        this.adjustLayout();\n        this.applyVisibility();\n    };\n    return Indicator;\n}(Component));\nexport { Indicator };\n//# sourceMappingURL=indicator.js.map","import { __read } from \"tslib\";\nimport { BBox } from '../../bbox';\nexport function getItemsBBox(items) {\n    var minX = Infinity;\n    var minY = Infinity;\n    var maxX = -Infinity;\n    var maxY = -Infinity;\n    for (var i = 0; i < items.length; i++) {\n        var _a = items[i], x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        var _b = __read([x + width, y + height], 2), X = _b[0], Y = _b[1];\n        if (x < minX)\n            minX = x;\n        if (y < minY)\n            minY = y;\n        if (X > maxX)\n            maxX = X;\n        if (Y > maxY)\n            maxY = Y;\n    }\n    return new BBox(minX, minY, maxX - minX, maxY - minY);\n}\n//# sourceMappingURL=helper.js.map","import { __read } from \"tslib\";\nimport { getItemsBBox } from '../utils';\nimport { BBox } from '../../bbox';\nexport var flex = function (container, children, config) {\n    var width = container.width, height = container.height;\n    var _a = config.flexDirection, flexDirection = _a === void 0 ? 'row' : _a, _b = config.flexWrap, flexWrap = _b === void 0 ? 'nowrap' : _b, _c = config.justifyContent, justifyContent = _c === void 0 ? 'flex-start' : _c, _d = config.alignContent, alignContent = _d === void 0 ? 'flex-start' : _d, _e = config.alignItems, alignItems = _e === void 0 ? 'flex-start' : _e;\n    var isHorizontalFlow = flexDirection === 'row'; // || flexDirection === 'row-reverse';\n    var isLeftToRightFlow = flexDirection === 'row' || flexDirection === 'column';\n    // implement default layout;\n    // flex direction\n    var direction = isHorizontalFlow ? (isLeftToRightFlow ? [1, 0] : [-1, 0]) : isLeftToRightFlow ? [0, 1] : [0, -1];\n    var _f = __read([0, 0], 2), offsetX = _f[0], offsetY = _f[1];\n    var itemsFromDirection = children.map(function (child) {\n        var _a;\n        var width = child.width, height = child.height;\n        var _b = __read([offsetX, offsetY], 2), x = _b[0], y = _b[1];\n        _a = __read([offsetX + width * direction[0], offsetY + height * direction[1]], 2), offsetX = _a[0], offsetY = _a[1];\n        return new BBox(x, y, width, height);\n    });\n    // flex wrap\n    // todo\n    // justify content\n    // flex-start, flex-end, center\n    var itemsForJustifyContentBBox = getItemsBBox(itemsFromDirection);\n    var justifyContentOffset = {\n        'flex-start': 0,\n        'flex-end': isHorizontalFlow\n            ? width - itemsForJustifyContentBBox.width\n            : height - itemsForJustifyContentBBox.height,\n        center: isHorizontalFlow\n            ? (width - itemsForJustifyContentBBox.width) / 2\n            : (height - itemsForJustifyContentBBox.height) / 2,\n    };\n    var itemsFromJustifyContent = itemsFromDirection.map(function (item) {\n        var x = item.x, y = item.y;\n        var itemBox = BBox.fromRect(item);\n        itemBox.x = isHorizontalFlow ? x + justifyContentOffset[justifyContent] : x;\n        itemBox.y = isHorizontalFlow ? y : y + justifyContentOffset[justifyContent];\n        return itemBox;\n    });\n    // align items\n    // flex-start, flex-end, center\n    var itemsForAlignItemsBBox = getItemsBBox(itemsFromJustifyContent);\n    var calcAlignItemsOffset = function (box) {\n        var _a = __read(isHorizontalFlow ? ['height', height] : ['width', width], 2), key = _a[0], size = _a[1];\n        switch (alignItems) {\n            case 'flex-start':\n                return 0;\n            case 'flex-end':\n                return size - box[key];\n            case 'center':\n                return size / 2 - box[key] / 2;\n            default:\n                return 0;\n        }\n    };\n    var itemsFromAlignItems = itemsFromJustifyContent.map(function (item) {\n        var x = item.x, y = item.y;\n        var itemBox = BBox.fromRect(item);\n        itemBox.x = isHorizontalFlow ? x : x + calcAlignItemsOffset(itemBox);\n        itemBox.y = isHorizontalFlow ? y + calcAlignItemsOffset(itemBox) : y;\n        return itemBox;\n    });\n    var finalItems = itemsFromAlignItems.map(function (item) {\n        var _a, _b;\n        var itemBox = BBox.fromRect(item);\n        itemBox.x += (_a = container.x) !== null && _a !== void 0 ? _a : 0;\n        itemBox.y += (_b = container.y) !== null && _b !== void 0 ? _b : 0;\n        return itemBox;\n    });\n    return finalItems;\n};\n//# sourceMappingURL=index.js.map","export var grid = function (container, children, config) {\n    // todo\n    return [];\n};\n//# sourceMappingURL=index.js.map","import { __extends, __read } from \"tslib\";\nimport { ElementEvent } from '@antv/g';\nimport { Group } from '../../shapes';\nimport { BBox } from '../../util';\nimport { calcLayout } from '../../util/layout';\nimport { parseSeriesAttr } from '../../util/series';\nvar Layout = /** @class */ (function (_super) {\n    __extends(Layout, _super);\n    function Layout(options) {\n        var _this = _super.call(this, options) || this;\n        _this.layoutEvents = [ElementEvent.BOUNDS_CHANGED, ElementEvent.INSERTED, ElementEvent.REMOVED];\n        _this.$margin = parseSeriesAttr(0);\n        _this.$padding = parseSeriesAttr(0);\n        var _a = options.style || {}, _b = _a.margin, margin = _b === void 0 ? 0 : _b, _c = _a.padding, padding = _c === void 0 ? 0 : _c;\n        _this.margin = margin;\n        _this.padding = padding;\n        _this.isMutationObserved = true;\n        _this.bindEvents();\n        return _this;\n    }\n    Object.defineProperty(Layout.prototype, \"margin\", {\n        get: function () {\n            return this.$margin;\n        },\n        set: function (value) {\n            this.$margin = parseSeriesAttr(value);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Layout.prototype, \"padding\", {\n        get: function () {\n            return this.$padding;\n        },\n        set: function (value) {\n            this.$padding = parseSeriesAttr(value);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Layout.prototype.getBBox = function () {\n        var _a = this.attributes, _b = _a.x, x = _b === void 0 ? 0 : _b, _c = _a.y, y = _c === void 0 ? 0 : _c, width = _a.width, height = _a.height;\n        var _d = __read(this.$margin, 4), marginTop = _d[0], marginRight = _d[1], marginBottom = _d[2], marginLeft = _d[3];\n        return new BBox(x - marginLeft, y - marginTop, width + marginLeft + marginRight, height + marginTop + marginBottom);\n    };\n    Layout.prototype.appendChild = function (child, index) {\n        child.isMutationObserved = true;\n        _super.prototype.appendChild.call(this, child, index);\n        return child;\n    };\n    Layout.prototype.getAvailableSpace = function () {\n        var _a = this.attributes, width = _a.width, height = _a.height;\n        var _b = __read(this.$padding, 4), paddingTop = _b[0], paddingRight = _b[1], paddingBottom = _b[2], paddingLeft = _b[3];\n        var _c = __read(this.$margin, 4), marginTop = _c[0], marginLeft = _c[3];\n        return new BBox(paddingLeft + marginLeft, paddingTop + marginTop, width - paddingLeft - paddingRight, height - paddingTop - paddingBottom);\n    };\n    Layout.prototype.layout = function () {\n        if (!this.attributes.display || !this.isConnected)\n            return;\n        if (this.children.some(function (child) { return !child.isConnected; }))\n            return;\n        try {\n            var _a = this.attributes, x = _a.x, y = _a.y;\n            this.style.transform = \"translate(\".concat(x, \", \").concat(y, \")\");\n            var bboxes_1 = calcLayout(this.getAvailableSpace(), this.children.map(function (child) { return child.getBBox(); }), this.attributes);\n            this.children.forEach(function (child, index) {\n                var _a = bboxes_1[index], x = _a.x, y = _a.y;\n                child.style.transform = \"translate(\".concat(x, \", \").concat(y, \")\");\n            });\n        }\n        catch (e) {\n            // do nothing\n        }\n    };\n    Layout.prototype.bindEvents = function () {\n        var _this = this;\n        this.layoutEvents.forEach(function (event) {\n            _this.addEventListener(event, function (e) {\n                if (!e.target)\n                    return;\n                e.target.isMutationObserved = true;\n                _this.layout();\n            });\n        });\n    };\n    Layout.prototype.attributeChangedCallback = function (name, oldValue, newValue) {\n        if (name === 'margin')\n            this.margin = newValue;\n        else if (name === 'padding')\n            this.padding = newValue;\n        this.layout();\n    };\n    return Layout;\n}(Group));\nexport { Layout };\n//# sourceMappingURL=layout.js.map","import { flex } from './flex';\nimport { grid } from './grid';\nexport default (function (container, children, config) {\n    if (children.length === 0)\n        return [];\n    var callers = { flex: flex, grid: grid };\n    var caller = config.display in callers ? callers[config.display] : null;\n    // @ts-ignore\n    return (caller === null || caller === void 0 ? void 0 : caller.call(null, container, children, config)) || [];\n});\n//# sourceMappingURL=executer.js.map","export default (function () { });\n//# sourceMappingURL=noop.js.map","function debounce(func, wait, immediate) {\n    var timeout;\n    return function () {\n        var context = this, args = arguments;\n        var later = function () {\n            timeout = null;\n            if (!immediate) {\n                func.apply(context, args);\n            }\n        };\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) {\n            func.apply(context, args);\n        }\n    };\n}\nexport default debounce;\n//# sourceMappingURL=debounce.js.map","import { __assign, __extends, __read, __rest, __spreadArray } from \"tslib\";\nimport { ElementEvent } from '@antv/g';\nimport { clamp, debounce } from '@antv/util';\nimport { animate, onAnimateFinished } from '../../animation';\nimport { Component } from '../../core';\nimport { Group } from '../../shapes';\nimport { BBox, classNames, hide, scaleToPixel, select, show, splitStyle, subStyleProps, transpose, visibility, } from '../../util';\nimport { button } from '../marker/symbol';\nvar CLASS_NAMES = classNames({\n    prevBtnGroup: 'prev-btn-group',\n    prevBtn: 'prev-btn',\n    nextBtnGroup: 'next-btn-group',\n    nextBtn: 'next-btn',\n    pageInfoGroup: 'page-info-group',\n    pageInfo: 'page-info',\n    playWindow: 'play-window',\n    contentGroup: 'content-group',\n    controller: 'controller',\n    clipPath: 'clip-path',\n}, 'navigator');\nvar Navigator = /** @class */ (function (_super) {\n    __extends(Navigator, _super);\n    function Navigator(options) {\n        var _this = _super.call(this, options, {\n            x: 0,\n            y: 0,\n            animate: {\n                easing: 'linear',\n                duration: 200,\n                fill: 'both',\n            },\n            buttonCursor: 'pointer',\n            buttonFill: 'black',\n            buttonD: button(0, 0, 6),\n            buttonSize: 12,\n            controllerPadding: 5,\n            controllerSpacing: 5,\n            formatter: function (curr, total) { return \"\".concat(curr, \"/\").concat(total); },\n            defaultPage: 0,\n            loop: false,\n            orientation: 'horizontal',\n            pageNumFill: 'black',\n            pageNumFontSize: 12,\n            pageNumTextAlign: 'start',\n            pageNumTextBaseline: 'middle',\n        }) || this;\n        _this.playState = 'idle';\n        _this.contentGroup = _this.appendChild(new Group({ class: CLASS_NAMES.contentGroup.name }));\n        _this.playWindow = _this.contentGroup.appendChild(new Group({ class: CLASS_NAMES.playWindow.name }));\n        _this.innerCurrPage = _this.defaultPage;\n        return _this;\n    }\n    Object.defineProperty(Navigator.prototype, \"defaultPage\", {\n        get: function () {\n            var defaultPage = this.attributes.defaultPage;\n            return clamp(defaultPage, 0, Math.max(this.pageViews.length - 1, 0));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"pageViews\", {\n        get: function () {\n            return this.playWindow.children;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"controllerShape\", {\n        // todo fixme\n        get: function () {\n            return this.totalPages > 1 ? { width: 55, height: 0 } : { width: 0, height: 0 };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"pageShape\", {\n        get: function () {\n            var pageViews = this.pageViews;\n            var _a = __read(transpose(pageViews.map(function (pageView) {\n                var _a = pageView.getBBox(), width = _a.width, height = _a.height;\n                return [width, height];\n            })).map(function (arr) { return Math.max.apply(Math, __spreadArray([], __read(arr), false)); }), 2), maxWidth = _a[0], maxHeight = _a[1];\n            var _b = this.attributes, _c = _b.pageWidth, pageWidth = _c === void 0 ? maxWidth : _c, _d = _b.pageHeight, pageHeight = _d === void 0 ? maxHeight : _d;\n            return { pageWidth: pageWidth, pageHeight: pageHeight };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Navigator.prototype.getContainer = function () {\n        return this.playWindow;\n    };\n    Object.defineProperty(Navigator.prototype, \"totalPages\", {\n        get: function () {\n            return this.pageViews.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"currPage\", {\n        get: function () {\n            return this.innerCurrPage;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Navigator.prototype.getBBox = function () {\n        var _a = _super.prototype.getBBox.call(this), x = _a.x, y = _a.y;\n        var controllerShape = this.controllerShape;\n        var _b = this.pageShape, pageWidth = _b.pageWidth, pageHeight = _b.pageHeight;\n        return new BBox(x, y, pageWidth + controllerShape.width, pageHeight);\n    };\n    Navigator.prototype.goTo = function (pageNum) {\n        var _this = this;\n        var animateOptions = this.attributes.animate;\n        var _a = this, currPage = _a.currPage, playState = _a.playState, playWindow = _a.playWindow, pageViews = _a.pageViews;\n        if (playState !== 'idle' || pageNum < 0 || pageViews.length <= 0 || pageNum >= pageViews.length)\n            return null;\n        pageViews[currPage].setLocalPosition(0, 0);\n        this.prepareFollowingPage(pageNum);\n        var _b = __read(this.getFollowingPageDiff(pageNum), 2), dx = _b[0], dy = _b[1];\n        this.playState = 'running';\n        var animation = animate(playWindow, [{ transform: \"translate(0, 0)\" }, { transform: \"translate(\".concat(-dx, \", \").concat(-dy, \")\") }], animateOptions);\n        onAnimateFinished(animation, function () {\n            _this.innerCurrPage = pageNum;\n            _this.playState = 'idle';\n            _this.setVisiblePages([pageNum]);\n            _this.updatePageInfo();\n        });\n        return animation;\n    };\n    Navigator.prototype.prev = function () {\n        var loop = this.attributes.loop;\n        var pages = this.pageViews.length;\n        var page = this.currPage;\n        if (!loop && page <= 0)\n            return null;\n        var following = loop ? (page - 1 + pages) % pages : clamp(page - 1, 0, pages);\n        return this.goTo(following);\n    };\n    Navigator.prototype.next = function () {\n        var loop = this.attributes.loop;\n        var pages = this.pageViews.length;\n        var page = this.currPage;\n        if (!loop && page >= pages - 1)\n            return null;\n        var following = loop ? (page + 1) % pages : clamp(page + 1, 0, pages);\n        return this.goTo(following);\n    };\n    Navigator.prototype.renderClipPath = function (container) {\n        var _a = this.pageShape, pageWidth = _a.pageWidth, pageHeight = _a.pageHeight;\n        if (!pageWidth || !pageHeight) {\n            this.contentGroup.style.clipPath = undefined;\n            return;\n        }\n        this.clipPath = container.maybeAppendByClassName(CLASS_NAMES.clipPath, 'rect').styles({\n            width: pageWidth,\n            height: pageHeight,\n        });\n        this.contentGroup.attr('clipPath', this.clipPath.node());\n    };\n    Navigator.prototype.setVisiblePages = function (pages) {\n        this.playWindow.children.forEach(function (page, index) {\n            if (pages.includes(index))\n                show(page);\n            else\n                hide(page);\n        });\n    };\n    Navigator.prototype.adjustControllerLayout = function () {\n        var _a = this, prevBtn = _a.prevBtnGroup, nextBtn = _a.nextBtnGroup, pageNum = _a.pageInfoGroup;\n        var _b = this.attributes, orientation = _b.orientation, padding = _b.controllerPadding;\n        var _c = pageNum.getBBox(), pW = _c.width, pH = _c.height;\n        var _d = __read(orientation === 'horizontal' ? [-180, 0] : [-90, 90], 2), r1 = _d[0], r2 = _d[1];\n        prevBtn.setLocalEulerAngles(r1);\n        nextBtn.setLocalEulerAngles(r2);\n        var _e = prevBtn.getBBox(), bpW = _e.width, bpH = _e.height;\n        var _f = nextBtn.getBBox(), bnW = _f.width, bnH = _f.height;\n        var maxWidth = Math.max(bpW, pW, bnW);\n        var _g = orientation === 'horizontal'\n            ? {\n                offset: [\n                    [0, 0],\n                    [bpW / 2 + padding, 0],\n                    [bpW + pW + padding * 2, 0],\n                ],\n                textAlign: 'start',\n            }\n            : {\n                offset: [\n                    [maxWidth / 2, -bpH - padding],\n                    [maxWidth / 2, 0],\n                    [maxWidth / 2, bnH + padding],\n                ],\n                textAlign: 'center',\n            }, _h = __read(_g.offset, 3), _j = __read(_h[0], 2), o1x = _j[0], o1y = _j[1], _k = __read(_h[1], 2), o2x = _k[0], o2y = _k[1], _l = __read(_h[2], 2), o3x = _l[0], o3y = _l[1], textAlign = _g.textAlign;\n        var pageNumText = pageNum.querySelector('text');\n        pageNumText && (pageNumText.style.textAlign = textAlign);\n        prevBtn.setLocalPosition(o1x, o1y);\n        pageNum.setLocalPosition(o2x, o2y);\n        nextBtn.setLocalPosition(o3x, o3y);\n    };\n    Navigator.prototype.updatePageInfo = function () {\n        var _a;\n        var _b = this, currPage = _b.currPage, pageViews = _b.pageViews, formatter = _b.attributes.formatter;\n        if (pageViews.length < 2)\n            return;\n        (_a = this.pageInfoGroup.querySelector(CLASS_NAMES.pageInfo.class)) === null || _a === void 0 ? void 0 : _a.attr('text', formatter(currPage + 1, pageViews.length));\n        this.adjustControllerLayout();\n    };\n    Navigator.prototype.getFollowingPageDiff = function (pageNum) {\n        var currPage = this.currPage;\n        if (currPage === pageNum)\n            return [0, 0];\n        var orientation = this.attributes.orientation;\n        var _a = this.pageShape, pageWidth = _a.pageWidth, pageHeight = _a.pageHeight;\n        var sign = pageNum < currPage ? -1 : 1;\n        return orientation === 'horizontal' ? [sign * pageWidth, 0] : [0, sign * pageHeight];\n    };\n    Navigator.prototype.prepareFollowingPage = function (pageNum) {\n        var _a = this, currPage = _a.currPage, pageViews = _a.pageViews;\n        this.setVisiblePages([pageNum, currPage]);\n        if (pageNum !== currPage) {\n            var _b = __read(this.getFollowingPageDiff(pageNum), 2), dx = _b[0], dy = _b[1];\n            pageViews[pageNum].setLocalPosition(dx, dy);\n        }\n    };\n    Navigator.prototype.renderController = function (container) {\n        var _this = this;\n        var spacing = this.attributes.controllerSpacing;\n        var _a = this.pageShape, pageWidth = _a.pageWidth, pageHeight = _a.pageHeight;\n        var visible = this.pageViews.length >= 2;\n        var group = container.maybeAppendByClassName(CLASS_NAMES.controller, 'g');\n        visibility(group.node(), visible);\n        if (!visible)\n            return;\n        var style = subStyleProps(this.attributes, 'button');\n        var textStyle = subStyleProps(this.attributes, 'pageNum');\n        var _b = __read(splitStyle(style), 2), _c = _b[0], groupStyle = _b[1], size = _c.size, pathStyle = __rest(_c, [\"size\"]);\n        var whetherToAddEventListener = !group.select(CLASS_NAMES.prevBtnGroup.class).node();\n        var prevBtnGroup = group.maybeAppendByClassName(CLASS_NAMES.prevBtnGroup, 'g').styles(groupStyle);\n        this.prevBtnGroup = prevBtnGroup.node();\n        var prevBtn = prevBtnGroup.maybeAppendByClassName(CLASS_NAMES.prevBtn, 'path');\n        var nextBtnGroup = group.maybeAppendByClassName(CLASS_NAMES.nextBtnGroup, 'g').styles(groupStyle);\n        this.nextBtnGroup = nextBtnGroup.node();\n        var nextBtn = nextBtnGroup.maybeAppendByClassName(CLASS_NAMES.nextBtn, 'path');\n        [prevBtn, nextBtn].forEach(function (btn) {\n            btn.styles(__assign(__assign({}, pathStyle), { transformOrigin: 'center' }));\n            scaleToPixel(btn.node(), size, true);\n        });\n        var pageInfoGroup = group.maybeAppendByClassName(CLASS_NAMES.pageInfoGroup, 'g');\n        this.pageInfoGroup = pageInfoGroup.node();\n        pageInfoGroup.maybeAppendByClassName(CLASS_NAMES.pageInfo, 'text').styles(textStyle);\n        this.updatePageInfo();\n        // group.node().style.transform = `translate(${pageWidth + spacing}, ${pageHeight / 2})`;\n        // put it on the right side of the container\n        group.node().setLocalPosition(pageWidth + spacing, pageHeight / 2);\n        if (whetherToAddEventListener) {\n            this.prevBtnGroup.addEventListener('click', function () {\n                _this.prev();\n            });\n            this.nextBtnGroup.addEventListener('click', function () {\n                _this.next();\n            });\n        }\n    };\n    Navigator.prototype.render = function (attributes, container) {\n        var _a = attributes.x, x = _a === void 0 ? 0 : _a, _b = attributes.y, y = _b === void 0 ? 0 : _b;\n        this.attr('transform', \"translate(\".concat(x, \", \").concat(y, \")\"));\n        /**\n         * container\n         *  |- contentGroup (with clip path)\n         *    |- playWindow (with animation)\n         *      |- pages\n         *  |- clipPath\n         */\n        var containerSelection = select(container);\n        this.renderClipPath(containerSelection);\n        this.renderController(containerSelection);\n        this.setVisiblePages([this.defaultPage]);\n        this.goTo(this.defaultPage);\n    };\n    Navigator.prototype.bindEvents = function () {\n        var _this = this;\n        var render = debounce(function () { return _this.render(_this.attributes, _this); }, 50);\n        this.playWindow.addEventListener(ElementEvent.INSERTED, render);\n        this.playWindow.addEventListener(ElementEvent.REMOVED, render);\n    };\n    return Navigator;\n}(Component));\nexport { Navigator };\n//# sourceMappingURL=index.js.map","export function transpose(m) {\n    var _a;\n    return ((_a = m[0]) === null || _a === void 0 ? void 0 : _a.map(function (x, i) { return m.map(function (x) { return x[i]; }); })) || [];\n}\n//# sourceMappingURL=transpose.js.map","import { __assign, __extends, __read, __rest } from \"tslib\";\nimport { Circle, } from '@antv/g';\nimport { Marker } from '../../marker';\nimport { Component } from '../../../core';\nimport { classNames, copyAttributes, ellipsisIt, ifShow, parseSeriesAttr, renderExtDo, scaleToPixel, select, subStyleProps, } from '../../../util';\nvar CLASS_NAMES = classNames({\n    layout: 'flex',\n    markerGroup: 'marker-group',\n    marker: 'marker',\n    labelGroup: 'label-group',\n    label: 'label',\n    valueGroup: 'value-group',\n    value: 'value',\n    backgroundGroup: 'background-group',\n    background: 'background',\n}, 'legend-category-item');\nfunction styleOfMarker(group) {\n    var marker = group.querySelector(CLASS_NAMES.marker.class);\n    if (marker)\n        return marker.style;\n    return {};\n}\nvar CategoryItem = /** @class */ (function (_super) {\n    __extends(CategoryItem, _super);\n    function CategoryItem(options) {\n        return _super.call(this, options, {\n            span: [1, 1],\n            marker: function () { return new Circle({ style: { r: 6 } }); },\n            markerSize: 10,\n            labelFill: '#646464',\n            valueFill: '#646464',\n            labelFontSize: 12,\n            valueFontSize: 12,\n            labelTextBaseline: 'middle',\n            valueTextBaseline: 'middle',\n        }) || this;\n    }\n    Object.defineProperty(CategoryItem.prototype, \"showValue\", {\n        get: function () {\n            var valueText = this.attributes.valueText;\n            if (!valueText)\n                return false;\n            if (typeof valueText === 'string' || typeof valueText === 'number')\n                return valueText !== '';\n            if (typeof valueText === 'function')\n                return true;\n            return valueText.attr('text') !== '';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoryItem.prototype, \"actualSpace\", {\n        get: function () {\n            var label = this.labelGroup;\n            var value = this.valueGroup;\n            var markerSize = this.attributes.markerSize;\n            var _a = label.node().getBBox(), labelWidth = _a.width, labelHeight = _a.height;\n            var _b = value.node().getBBox(), valueWidth = _b.width, valueHeight = _b.height;\n            return {\n                markerWidth: markerSize,\n                labelWidth: labelWidth,\n                valueWidth: valueWidth,\n                height: Math.max(markerSize, labelHeight, valueHeight),\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoryItem.prototype, \"span\", {\n        get: function () {\n            var span = this.attributes.span;\n            if (!span)\n                return [1, 1];\n            var _a = __read(parseSeriesAttr(span), 2), span1 = _a[0], innerSpan = _a[1];\n            var span2 = this.showValue ? innerSpan : 0;\n            var basis = span1 + span2;\n            return [span1 / basis, span2 / basis];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoryItem.prototype, \"shape\", {\n        get: function () {\n            var _a;\n            var _b = this.attributes, markerSize = _b.markerSize, fullWidth = _b.width;\n            var actualSpace = this.actualSpace;\n            var markerWidth = actualSpace.markerWidth, height = actualSpace.height;\n            var _c = this.actualSpace, labelWidth = _c.labelWidth, valueWidth = _c.valueWidth;\n            var _d = __read(this.spacing, 2), spacing1 = _d[0], spacing2 = _d[1];\n            if (fullWidth) {\n                var width_1 = fullWidth - markerSize - spacing1 - spacing2;\n                var _e = __read(this.span, 2), span1 = _e[0], span2 = _e[1];\n                _a = __read([span1 * width_1, span2 * width_1], 2), labelWidth = _a[0], valueWidth = _a[1];\n            }\n            var width = markerWidth + labelWidth + valueWidth + spacing1 + spacing2;\n            return { width: width, height: height, markerWidth: markerWidth, labelWidth: labelWidth, valueWidth: valueWidth };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoryItem.prototype, \"spacing\", {\n        get: function () {\n            var spacing = this.attributes.spacing;\n            if (!spacing)\n                return [0, 0];\n            var _a = __read(parseSeriesAttr(spacing), 2), spacing1 = _a[0], spacing2 = _a[1];\n            if (this.showValue)\n                return [spacing1, spacing2];\n            return [spacing1, 0];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoryItem.prototype, \"layout\", {\n        get: function () {\n            var _a = this.shape, markerWidth = _a.markerWidth, labelWidth = _a.labelWidth, valueWidth = _a.valueWidth, width = _a.width, height = _a.height;\n            var _b = __read(this.spacing, 2), spacing1 = _b[0], spacing2 = _b[1];\n            return {\n                height: height,\n                width: width,\n                markerWidth: markerWidth,\n                labelWidth: labelWidth,\n                valueWidth: valueWidth,\n                position: [markerWidth / 2, markerWidth + spacing1, markerWidth + labelWidth + spacing1 + spacing2],\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoryItem.prototype, \"scaleSize\", {\n        get: function () {\n            var markerShapeStyle = styleOfMarker(this.markerGroup.node());\n            var _a = this.attributes, markerSize = _a.markerSize, _b = _a.markerStrokeWidth, markerStrokeWidth = _b === void 0 ? markerShapeStyle.strokeWidth : _b, _c = _a.markerLineWidth, markerLineWidth = _c === void 0 ? markerShapeStyle.lineWidth : _c, _d = _a.markerStroke, markerStroke = _d === void 0 ? markerShapeStyle.stroke : _d;\n            // empirical value\n            var strokeWidth = +(markerStrokeWidth || markerLineWidth || (markerStroke ? 1 : 0)) * Math.sqrt(2);\n            var _e = this.markerGroup.node().getBBox(), width = _e.width, height = _e.height;\n            return (1 - strokeWidth / Math.max(width, height)) * markerSize;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CategoryItem.prototype.renderMarker = function (container) {\n        var _this = this;\n        var marker = this.attributes.marker;\n        var style = subStyleProps(this.attributes, 'marker');\n        this.markerGroup = container.maybeAppendByClassName(CLASS_NAMES.markerGroup, 'g').style('zIndex', 0);\n        ifShow(!!marker, this.markerGroup, function () {\n            var _a;\n            var parent = _this.markerGroup.node();\n            var oldMarker = (_a = parent.childNodes) === null || _a === void 0 ? void 0 : _a[0];\n            var newMarker = typeof marker === 'string'\n                ? new Marker({ style: { symbol: marker }, className: CLASS_NAMES.marker.name })\n                : marker();\n            if (!oldMarker) {\n                if (!(newMarker instanceof Marker))\n                    select(newMarker).attr('className', CLASS_NAMES.marker.name).styles(style);\n                parent.appendChild(newMarker);\n            }\n            else if (newMarker.nodeName === oldMarker.nodeName) {\n                if (oldMarker instanceof Marker)\n                    oldMarker.update(__assign(__assign({}, style), { symbol: marker }));\n                else {\n                    copyAttributes(oldMarker, newMarker);\n                    select(oldMarker).styles(style);\n                }\n            }\n            else {\n                oldMarker.remove();\n                select(newMarker).attr('className', CLASS_NAMES.marker.name).styles(style);\n                parent.appendChild(newMarker);\n            }\n            // record the scale of marker\n            _this.markerGroup.node().scale(1 / _this.markerGroup.node().getScale()[0]);\n            var scale = scaleToPixel(_this.markerGroup.node(), _this.scaleSize, true);\n            _this.markerGroup.node().style._transform = \"scale(\".concat(scale, \")\");\n        });\n    };\n    CategoryItem.prototype.renderLabel = function (container) {\n        var _a = subStyleProps(this.attributes, 'label'), label = _a.text, style = __rest(_a, [\"text\"]);\n        this.labelGroup = container.maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g').style('zIndex', 0);\n        this.labelGroup.maybeAppendByClassName(CLASS_NAMES.label, function () { return renderExtDo(label); }).styles(style);\n    };\n    CategoryItem.prototype.renderValue = function (container) {\n        var _this = this;\n        var _a = subStyleProps(this.attributes, 'value'), value = _a.text, style = __rest(_a, [\"text\"]);\n        this.valueGroup = container.maybeAppendByClassName(CLASS_NAMES.valueGroup, 'g').style('zIndex', 0);\n        ifShow(this.showValue, this.valueGroup, function () {\n            _this.valueGroup.maybeAppendByClassName(CLASS_NAMES.value, function () { return renderExtDo(value); }).styles(style);\n        });\n    };\n    CategoryItem.prototype.renderBackground = function (container) {\n        var _a = this.shape, width = _a.width, height = _a.height;\n        var style = subStyleProps(this.attributes, 'background');\n        this.background = container.maybeAppendByClassName(CLASS_NAMES.backgroundGroup, 'g').style('zIndex', -1);\n        this.background.maybeAppendByClassName(CLASS_NAMES.background, 'rect').styles(__assign({ width: width, height: height }, style));\n    };\n    CategoryItem.prototype.adjustLayout = function () {\n        var _a = this.layout, labelWidth = _a.labelWidth, valueWidth = _a.valueWidth, height = _a.height, _b = __read(_a.position, 3), markerX = _b[0], labelX = _b[1], valueX = _b[2];\n        var halfHeight = height / 2;\n        // console.log(this.markerGroup.node().style._transform);\n        this.markerGroup.styles({\n            transform: \"translate(\".concat(markerX, \", \").concat(halfHeight, \")\").concat(this.markerGroup.node().style._transform),\n        });\n        this.labelGroup.styles({ transform: \"translate(\".concat(labelX, \", \").concat(halfHeight, \")\") });\n        ellipsisIt(this.labelGroup.select(CLASS_NAMES.label.class).node(), Math.ceil(labelWidth));\n        if (this.showValue) {\n            this.valueGroup.styles({ transform: \"translate(\".concat(valueX, \", \").concat(halfHeight, \")\") });\n            ellipsisIt(this.valueGroup.select(CLASS_NAMES.value.class).node(), Math.ceil(valueWidth));\n        }\n    };\n    CategoryItem.prototype.render = function (attributes, container) {\n        var ctn = select(container);\n        var _a = attributes.x, x = _a === void 0 ? 0 : _a, _b = attributes.y, y = _b === void 0 ? 0 : _b;\n        ctn.styles({ transform: \"translate(\".concat(x, \", \").concat(y, \")\") });\n        this.renderMarker(ctn);\n        this.renderLabel(ctn);\n        this.renderValue(ctn);\n        this.renderBackground(ctn);\n        this.adjustLayout();\n    };\n    return CategoryItem;\n}(Component));\nexport { CategoryItem };\n//# sourceMappingURL=item.js.map","import { __assign, __extends, __read, __spreadArray } from \"tslib\";\nimport { CustomEvent } from '@antv/g';\nimport { noop, set } from '@antv/util';\nimport { Component } from '../../../core';\nimport { Group } from '../../../shapes';\nimport { classNames, deepAssign, getCallbackValue, groupBy, select, subStyleProps, } from '../../../util';\nimport { Navigator } from '../../navigator';\nimport { ifHorizontal } from '../utils';\nimport { CategoryItem } from './item';\nvar CLASS_NAMES = classNames({\n    page: 'item-page',\n    navigator: 'navigator',\n    item: 'item',\n}, 'items');\n/**\n * if value exists, it need to follow rule, otherwise, return default value\n * @param value\n * @param rule\n * @param defaultValue\n * @returns\n */\nvar ifSatisfied = function (value, rule, defaultValue) {\n    if (defaultValue === void 0) { defaultValue = true; }\n    if (value) {\n        return rule(value);\n    }\n    return defaultValue;\n};\nvar CategoryItems = /** @class */ (function (_super) {\n    __extends(CategoryItems, _super);\n    function CategoryItems(options) {\n        var _this = _super.call(this, options, {\n            data: [],\n            gridRow: Infinity,\n            gridCol: undefined,\n            padding: 0,\n            width: 1000,\n            height: 100,\n            rowPadding: 0,\n            colPadding: 0,\n            layout: 'flex',\n            orientation: 'horizontal',\n            click: noop,\n            mouseenter: noop,\n            mouseleave: noop,\n        }) || this;\n        _this.navigatorShape = [0, 0];\n        return _this;\n    }\n    Object.defineProperty(CategoryItems.prototype, \"pageViews\", {\n        get: function () {\n            return this.navigator.getContainer();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoryItems.prototype, \"grid\", {\n        get: function () {\n            var _a = this.attributes, gridRow = _a.gridRow, gridCol = _a.gridCol, data = _a.data;\n            if (!gridRow && !gridCol)\n                throw new Error('gridRow and gridCol can not be set null at the same time');\n            if (!!gridRow && !!gridCol)\n                return [gridRow, gridCol];\n            if (gridRow)\n                return [gridRow, data.length];\n            return [data.length, gridCol]; // !!gridCol\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CategoryItems.prototype, \"renderData\", {\n        get: function () {\n            var _a = this.attributes, data = _a.data, layout = _a.layout;\n            var style = subStyleProps(this.attributes, 'item');\n            var d = data.map(function (datum, index) {\n                var _a = datum.id, id = _a === void 0 ? index : _a, labelText = datum.label, valueText = datum.value;\n                return {\n                    id: \"\".concat(id),\n                    index: index,\n                    style: __assign({ layout: layout, labelText: labelText, valueText: valueText }, Object.fromEntries(Object.entries(style).map(function (_a) {\n                        var _b = __read(_a, 2), key = _b[0], val = _b[1];\n                        return [key, getCallbackValue(val, [datum, index, data])];\n                    }))),\n                };\n            });\n            return d;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CategoryItems.prototype.getGridLayout = function () {\n        var _this = this;\n        var _a = this.attributes, orientation = _a.orientation, width = _a.width, rowPadding = _a.rowPadding, colPadding = _a.colPadding;\n        var _b = __read(this.navigatorShape, 1), navWidth = _b[0];\n        var _c = __read(this.grid, 2), gridRow = _c[0], gridCol = _c[1];\n        var pageSize = gridCol * gridRow;\n        var prevOffset = 0;\n        return this.pageViews.children.map(function (item, index) {\n            var _a, _b;\n            // calc page, row and column\n            var page = Math.floor(index / pageSize);\n            var pageIndex = index % pageSize;\n            var dir = _this.ifHorizontal(gridCol, gridRow);\n            var pos = [Math.floor(pageIndex / dir), pageIndex % dir];\n            if (orientation === 'vertical')\n                pos.reverse();\n            var _c = __read(pos, 2), row = _c[0], col = _c[1];\n            // calc x, y and shape\n            var colWidth = (width - navWidth - (gridCol - 1) * colPadding) / gridCol;\n            // const rowHeight = getRenderBBox(item).height;\n            var rowHeight = item.getBBox().height;\n            var _d = __read([0, 0], 2), x = _d[0], y = _d[1];\n            if (orientation === 'horizontal') {\n                _a = __read([prevOffset, row * (rowHeight + rowPadding)], 2), x = _a[0], y = _a[1];\n                prevOffset = col === gridCol - 1 ? 0 : prevOffset + colWidth + colPadding;\n            }\n            else {\n                _b = __read([col * (colWidth + colPadding), prevOffset], 2), x = _b[0], y = _b[1];\n                prevOffset = row === gridRow - 1 ? 0 : prevOffset + rowHeight + rowPadding;\n            }\n            return { page: page, index: index, row: row, col: col, pageIndex: pageIndex, width: colWidth, height: rowHeight, x: x, y: y };\n        });\n    };\n    CategoryItems.prototype.getFlexLayout = function () {\n        var _a = this.attributes, maxWidth = _a.width, maxHeight = _a.height, rowPadding = _a.rowPadding, cP = _a.colPadding;\n        var _b = __read(this.navigatorShape, 1), navWidth = _b[0];\n        var _c = __read(this.grid, 2), gridRow = _c[0], gridCol = _c[1];\n        var _d = __read([maxWidth - navWidth, maxHeight], 2), limitWidth = _d[0], limitHeight = _d[1];\n        var _e = __read([0, 0, 0, 0, 0, 0, 0, 0], 8), x = _e[0], y = _e[1], page = _e[2], pageIndex = _e[3], col = _e[4], row = _e[5], prevWidth = _e[6], prevHeight = _e[7];\n        return this.pageViews.children.map(function (item, index) {\n            var _a, _b, _c, _d;\n            // const { width, height } = getRenderBBox(item);\n            var _e = item.getBBox(), width = _e.width, height = _e.height;\n            var colPadding = prevWidth === 0 ? 0 : cP;\n            // assume that every item has the same height\n            var nextWidth = prevWidth + colPadding + width;\n            // inline\n            if (nextWidth <= limitWidth && ifSatisfied(col, function (c) { return c < gridCol; })) {\n                _a = __read([prevWidth + colPadding, prevHeight, nextWidth], 3), x = _a[0], y = _a[1], prevWidth = _a[2];\n                return { width: width, height: height, x: x, y: y, page: page, index: index, pageIndex: pageIndex++, row: row, col: col++ };\n            }\n            // wrap\n            _b = __read([row + 1, 0, 0, prevHeight + height + rowPadding], 4), row = _b[0], col = _b[1], prevWidth = _b[2], prevHeight = _b[3];\n            var nextHeight = prevHeight + height;\n            if (nextHeight <= limitHeight && ifSatisfied(row, function (r) { return r < gridRow; })) {\n                _c = __read([prevWidth, prevHeight, width], 3), x = _c[0], y = _c[1], prevWidth = _c[2];\n                return { width: width, height: height, x: x, y: y, page: page, index: index, pageIndex: pageIndex++, row: row, col: col++ };\n            }\n            // paging\n            _d = __read([0, 0, width, 0, page + 1, 0, 0, 0], 8), x = _d[0], y = _d[1], prevWidth = _d[2], prevHeight = _d[3], page = _d[4], pageIndex = _d[5], row = _d[6], col = _d[7];\n            return { width: width, height: height, x: x, y: y, page: page, index: index, pageIndex: pageIndex++, row: row, col: col++ };\n        });\n    };\n    Object.defineProperty(CategoryItems.prototype, \"itemsLayout\", {\n        get: function () {\n            this.navigatorShape = [0, 0];\n            var cb = this.attributes.layout === 'grid' ? this.getGridLayout : this.getFlexLayout;\n            var layout = cb.call(this);\n            // re layout\n            if (layout.slice(-1)[0].page > 0) {\n                this.navigatorShape = [55, 0];\n                return cb.call(this);\n            }\n            return layout;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CategoryItems.prototype.ifHorizontal = function (a, b) {\n        var orientation = this.attributes.orientation;\n        return ifHorizontal(orientation, a, b);\n    };\n    CategoryItems.prototype.flattenPage = function (container) {\n        container.querySelectorAll(CLASS_NAMES.item.class).forEach(function (item) {\n            container.appendChild(item);\n        });\n        container.querySelectorAll(CLASS_NAMES.page.class).forEach(function (page) {\n            var removedPage = container.removeChild(page);\n            removedPage.destroy();\n        });\n    };\n    CategoryItems.prototype.renderItems = function (container) {\n        var _a = this.attributes, click = _a.click, mouseenter = _a.mouseenter, mouseleave = _a.mouseleave;\n        this.flattenPage(container);\n        var dispatchCustomEvent = this.dispatchCustomEvent.bind(this);\n        select(container)\n            .selectAll(CLASS_NAMES.item.class)\n            .data(this.renderData, function (d) { return d.id; })\n            .join(function (enter) {\n            return enter\n                .append(function (_a) {\n                var style = _a.style;\n                return new CategoryItem({ style: style });\n            })\n                .attr('className', CLASS_NAMES.item.name)\n                .on('click', function () {\n                click === null || click === void 0 ? void 0 : click(this);\n                dispatchCustomEvent('itemClick', { item: this });\n            })\n                .on('pointerenter', function () {\n                mouseenter === null || mouseenter === void 0 ? void 0 : mouseenter(this);\n                dispatchCustomEvent('itemMouseenter', { item: this });\n            })\n                .on('pointerleave', function () {\n                mouseleave === null || mouseleave === void 0 ? void 0 : mouseleave(this);\n                dispatchCustomEvent('itemMouseleave', { item: this });\n            });\n        }, function (update) {\n            return update.each(function (_a) {\n                var style = _a.style;\n                this.update(style);\n            });\n        }, function (exit) { return exit.remove(); });\n    };\n    CategoryItems.prototype.relayoutNavigator = function () {\n        var _a;\n        var _b = this.attributes, layout = _b.layout, width = _b.width;\n        var height = ((_a = this.pageViews.children[0]) === null || _a === void 0 ? void 0 : _a.getBBox().height) || 0;\n        var _c = __read(this.navigatorShape, 2), navWidth = _c[0], navHeight = _c[1];\n        this.navigator.update(layout === 'grid' ? { pageWidth: width - navWidth, pageHeight: height - navHeight } : {});\n    };\n    CategoryItems.prototype.adjustLayout = function () {\n        var _this = this;\n        var itemsLayouts = Object.entries(groupBy(this.itemsLayout, 'page')).map(function (_a) {\n            var _b = __read(_a, 2), page = _b[0], layouts = _b[1];\n            return ({\n                page: page,\n                layouts: layouts,\n            });\n        });\n        var categoryItems = __spreadArray([], __read(this.navigator.getContainer().children), false);\n        itemsLayouts.forEach(function (_a) {\n            var layouts = _a.layouts;\n            var page = _this.pageViews.appendChild(new Group({ className: CLASS_NAMES.page.name }));\n            layouts.forEach(function (layout) {\n                var x = layout.x, y = layout.y, index = layout.index, width = layout.width, height = layout.height;\n                var item = categoryItems[index];\n                // @ts-ignore\n                page.appendChild(item);\n                set(item, '__layout__', layout);\n                item.update({ x: x, y: y, width: width, height: height });\n            });\n        });\n        this.relayoutNavigator();\n    };\n    CategoryItems.prototype.renderNavigator = function (container) {\n        var orientation = this.attributes.orientation;\n        var navStyle = subStyleProps(this.attributes, 'nav');\n        var style = deepAssign({ orientation: orientation }, navStyle);\n        var that = this;\n        container\n            .selectAll(CLASS_NAMES.navigator.class)\n            .data(['nav'])\n            .join(function (enter) {\n            return enter\n                .append(function () { return new Navigator({ style: style }); })\n                .attr('className', CLASS_NAMES.navigator.name)\n                .each(function () {\n                that.navigator = this;\n            });\n        }, function (update) {\n            return update.each(function () {\n                this.update(style);\n            });\n        }, function (exit) { return exit.remove(); });\n        return this.navigator;\n    };\n    CategoryItems.prototype.getBBox = function () {\n        return this.navigator.getBBox();\n    };\n    CategoryItems.prototype.render = function (attributes, container) {\n        var data = this.attributes.data;\n        if (!data || data.length === 0)\n            return;\n        /**\n         * 1. render items\n         * 2. paging\n         * 3. layout\n         */\n        var navigator = this.renderNavigator(select(container));\n        this.renderItems(navigator.getContainer());\n        this.adjustLayout();\n    };\n    CategoryItems.prototype.dispatchCustomEvent = function (type, payload) {\n        var evt = new CustomEvent(type, {\n            detail: payload,\n        });\n        this.dispatchEvent(evt);\n    };\n    return CategoryItems;\n}(Component));\nexport { CategoryItems };\n//# sourceMappingURL=items.js.map","export function groupBy(source, by) {\n    return source.reduce(function (acc, curr) {\n        (acc[curr[by]] = acc[curr[by]] || []).push(curr);\n        return acc;\n    }, {});\n}\n//# sourceMappingURL=group-by.js.map","import isObject from './is-object';\nimport isString from './is-string';\nimport isNumber from './is-number';\n/**\n * https://github.com/developit/dlv/blob/master/index.js\n * @param obj\n * @param path\n * @param value\n */\nexport default (function (obj, path, value) {\n    var o = obj;\n    var keyArr = isString(path) ? path.split('.') : path;\n    keyArr.forEach(function (key, idx) {\n        // \n        if (idx < keyArr.length - 1) {\n            if (!isObject(o[key])) {\n                o[key] = isNumber(keyArr[idx + 1]) ? [] : {};\n            }\n            o = o[key];\n        }\n        else {\n            o[key] = value;\n        }\n    });\n    return obj;\n});\n//# sourceMappingURL=set.js.map","import { __assign, __extends, __read } from \"tslib\";\nimport { Component } from '../../core';\nimport { BBox, select, splitStyle, subStyleProps } from '../../util';\nimport { getBBox, Title } from '../title';\nimport { CategoryItems } from './category/items';\nimport { CATEGORY_DEFAULT_OPTIONS, CLASS_NAMES } from './constant';\nvar Category = /** @class */ (function (_super) {\n    __extends(Category, _super);\n    function Category(options) {\n        return _super.call(this, options, CATEGORY_DEFAULT_OPTIONS) || this;\n    }\n    Category.prototype.renderTitle = function (container, width, height) {\n        var _a = this.attributes, showTitle = _a.showTitle, titleText = _a.titleText;\n        var style = subStyleProps(this.attributes, 'title');\n        var _b = __read(splitStyle(style), 2), titleStyle = _b[0], groupStyle = _b[1];\n        this.titleGroup = container.maybeAppendByClassName(CLASS_NAMES.titleGroup, 'g').styles(groupStyle);\n        var finalTitleStyle = __assign(__assign({ width: width, height: height }, titleStyle), { text: showTitle ? titleText : '' });\n        this.title = this.titleGroup\n            .maybeAppendByClassName(CLASS_NAMES.title, function () { return new Title({ style: finalTitleStyle }); })\n            .update(finalTitleStyle);\n    };\n    Category.prototype.renderItems = function (container, bbox) {\n        var x = bbox.x, y = bbox.y, width = bbox.width, height = bbox.height;\n        var style = subStyleProps(this.attributes, 'title', true);\n        var _a = __read(splitStyle(style), 2), partialItemStyle = _a[0], groupStyle = _a[1];\n        // overwrite width and height to available space\n        // overwrite x and y to 0\n        var itemStyle = __assign(__assign({}, partialItemStyle), { width: width, height: height, x: 0, y: 0 });\n        this.itemsGroup = container\n            .maybeAppendByClassName(CLASS_NAMES.itemsGroup, 'g')\n            .styles(__assign(__assign({}, groupStyle), { transform: \"translate(\".concat(x, \", \").concat(y, \")\") }));\n        var that = this;\n        this.itemsGroup\n            .selectAll(CLASS_NAMES.items.class)\n            .data(['items'])\n            .join(function (enter) {\n            return enter\n                .append(function () { return new CategoryItems({ style: itemStyle }); })\n                .attr('className', CLASS_NAMES.items.name)\n                .each(function () {\n                that.items = select(this);\n            });\n        }, function (update) { return update.update(itemStyle); }, function (exit) { return exit.remove(); });\n    };\n    Category.prototype.adjustLayout = function () {\n        var showTitle = this.attributes.showTitle;\n        if (showTitle) {\n            var _a = this.title.node().getAvailableSpace(), x = _a.x, y = _a.y;\n            this.itemsGroup.node().style.transform = \"translate(\".concat(x, \", \").concat(y, \")\");\n        }\n    };\n    Object.defineProperty(Category.prototype, \"availableSpace\", {\n        get: function () {\n            var _a = this.attributes, showTitle = _a.showTitle, width = _a.width, height = _a.height;\n            if (!showTitle)\n                return new BBox(0, 0, width, height);\n            return this.title.node().getAvailableSpace();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Category.prototype.getBBox = function () {\n        var _a, _b;\n        var title = (_a = this.title) === null || _a === void 0 ? void 0 : _a.node();\n        var items = (_b = this.items) === null || _b === void 0 ? void 0 : _b.node();\n        if (!title || !items)\n            return _super.prototype.getBBox.call(this);\n        return getBBox(title, items);\n    };\n    Category.prototype.render = function (attributes, container) {\n        var _a = this.attributes, width = _a.width, height = _a.height, _b = _a.x, x = _b === void 0 ? 0 : _b, _c = _a.y, y = _c === void 0 ? 0 : _c;\n        var ctn = select(container);\n        container.style.transform = \"translate(\".concat(x, \", \").concat(y, \")\");\n        this.renderTitle(ctn, width, height);\n        this.renderItems(ctn, this.availableSpace);\n        this.adjustLayout();\n    };\n    return Category;\n}(Component));\nexport { Category };\n//# sourceMappingURL=category.js.map","import { classNames, deepAssign, superStyleProps } from '../../util';\nimport { DEFAULT_HANDLE_CFG } from './continuous/handle';\nexport var LEGEND_BASE_DEFAULT_OPTIONS = {\n    showTitle: true,\n    padding: 0,\n    orientation: 'horizontal',\n    backgroundFill: 'transparent',\n    titleText: '',\n    titleSpacing: 4,\n    titlePosition: 'top-left',\n    titleFill: '#2C3542',\n    titleFontWeight: 'bold',\n    titleFontFamily: 'sans-serif',\n    titleFontSize: 12,\n};\nexport var CATEGORY_DEFAULT_OPTIONS = deepAssign({}, LEGEND_BASE_DEFAULT_OPTIONS, {});\nexport var CONTINUOUS_DEFAULT_OPTIONS = deepAssign({}, LEGEND_BASE_DEFAULT_OPTIONS, superStyleProps(DEFAULT_HANDLE_CFG, 'handle'), {\n    color: [\n        '#d0e3fa',\n        '#acc7f6',\n        '#8daaf2',\n        '#6d8eea',\n        '#4d73cd',\n        '#325bb1',\n        '#5a3e75',\n        '#8c3c79',\n        '#e23455',\n        '#e7655b',\n    ],\n    indicatorBackgroundFill: '#262626',\n    indicatorLabelFill: 'white',\n    indicatorLabelFontSize: 12,\n    indicatorVisibility: 'hidden',\n    labelAlign: 'value',\n    labelDirection: 'positive',\n    labelSpacing: 5,\n    showHandle: true,\n    showIndicator: true,\n    showLabel: true,\n    slidable: true,\n    titleText: '',\n    type: 'continuous',\n});\n// \nexport var STEP_RATIO = 0.01;\n// namevalue\nexport var NAME_VALUE_RATIO = 0.5;\nexport var CLASS_NAMES = classNames({\n    title: 'title',\n    titleGroup: 'title-group',\n    items: 'items',\n    itemsGroup: 'items-group',\n    contentGroup: 'content-group',\n    ribbonGroup: 'ribbon-group',\n    ribbon: 'ribbon',\n    handlesGroup: 'handles-group',\n    handle: 'handle',\n    startHandle: 'start-handle',\n    endHandle: 'end-handle',\n    labelGroup: 'label-group',\n    label: 'label',\n    indicator: 'indicator',\n}, 'legend');\n//# sourceMappingURL=constant.js.map","import { __assign, __extends, __read, __rest } from \"tslib\";\nimport { Component } from '../../../core';\nimport { classNames, ifShow, select, subStyleProps } from '../../../util';\nimport { Marker } from '../../marker';\nimport { ifHorizontal } from '../utils';\nvar CLASS_NAMES = classNames({\n    markerGroup: 'marker-group',\n    marker: 'marker',\n    labelGroup: 'label-group',\n    label: 'label',\n}, 'handle');\n// todo @xiaoiver,  TEXT_INHERITABLE_PROPS \nexport var DEFAULT_HANDLE_CFG = {\n    showLabel: true,\n    formatter: function (val) { return val.toString(); },\n    markerSize: 25,\n    markerStroke: '#c5c5c5',\n    markerFill: '#fff',\n    markerLineWidth: 1,\n    labelFontSize: 12,\n    labelFill: '#c5c5c5',\n    labelText: '',\n    orientation: 'vertical',\n    spacing: 0,\n};\nvar Handle = /** @class */ (function (_super) {\n    __extends(Handle, _super);\n    function Handle(options) {\n        return _super.call(this, options, DEFAULT_HANDLE_CFG) || this;\n    }\n    Handle.prototype.render = function (attributes, container) {\n        var markerGroup = select(container).maybeAppendByClassName(CLASS_NAMES.markerGroup, 'g');\n        this.renderMarker(markerGroup);\n        var labelGroup = select(container).maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g');\n        this.renderLabel(labelGroup);\n    };\n    Handle.prototype.renderMarker = function (container) {\n        var _this = this;\n        var _a = this.attributes, orientation = _a.orientation, _b = _a.markerSymbol, markerSymbol = _b === void 0 ? ifHorizontal(orientation, 'horizontalHandle', 'verticalHandle') : _b;\n        ifShow(!!markerSymbol, container, function (group) {\n            var handleStyle = subStyleProps(_this.attributes, 'marker');\n            var markerStyle = __assign({ symbol: markerSymbol }, handleStyle);\n            _this.marker = group\n                .maybeAppendByClassName(CLASS_NAMES.marker, function () { return new Marker({ style: markerStyle }); })\n                .update(markerStyle);\n        });\n    };\n    Handle.prototype.renderLabel = function (container) {\n        var _this = this;\n        var _a = this.attributes, showLabel = _a.showLabel, orientation = _a.orientation, _b = _a.spacing, spacing = _b === void 0 ? 0 : _b, formatter = _a.formatter;\n        ifShow(showLabel, container, function (group) {\n            var _a;\n            var _b = subStyleProps(_this.attributes, 'label'), text = _b.text, labelStyle = __rest(_b, [\"text\"]);\n            // adjust layout\n            var _c = ((_a = group.select(CLASS_NAMES.marker.class)) === null || _a === void 0 ? void 0 : _a.node().getBBox()) || {}, _d = _c.width, width = _d === void 0 ? 0 : _d, _e = _c.height, height = _e === void 0 ? 0 : _e;\n            var _f = __read(ifHorizontal(orientation, [0, height + spacing, 'center', 'top'], [width + spacing, 0, 'start', 'middle']), 4), x = _f[0], y = _f[1], textAlign = _f[2], textBaseline = _f[3];\n            group\n                .maybeAppendByClassName(CLASS_NAMES.label, 'text')\n                .styles(__assign(__assign({}, labelStyle), { x: x, y: y, text: formatter(text).toString(), textAlign: textAlign, textBaseline: textBaseline }));\n        });\n    };\n    return Handle;\n}(Component));\nexport { Handle };\n//# sourceMappingURL=handle.js.map","import { __read } from \"tslib\";\nimport { Marker } from '../marker';\n/**\n * tick\n */\nexport function getStepValueByValue(value, step, min) {\n    var count = Math.round((value - min) / step);\n    return min + count * step;\n}\nexport function hiddenHandle(x, y, r) {\n    // \n    var ratio = 1.4;\n    var diffY = ratio * r;\n    return [['M', x - r, y - diffY], ['L', x + r, y - diffY], ['L', x + r, y + diffY], ['L', x - r, y + diffY], ['Z']];\n}\n// \nvar HANDLE_HEIGHT_RATIO = 1.4;\nvar HANDLE_TRIANGLE_RATIO = 0.4;\n// \nexport function verticalHandle(x, y, r) {\n    var width = r;\n    var height = width * HANDLE_HEIGHT_RATIO;\n    var halfWidth = width / 2;\n    var oneSixthWidth = width / 6;\n    var triangleX = x + height * HANDLE_TRIANGLE_RATIO;\n    return [\n        ['M', x, y],\n        ['L', triangleX, y + halfWidth],\n        ['L', x + height, y + halfWidth],\n        ['L', x + height, y - halfWidth],\n        ['L', triangleX, y - halfWidth],\n        ['Z'],\n        // \n        ['M', triangleX, y + oneSixthWidth],\n        ['L', x + height - 2, y + oneSixthWidth],\n        ['M', triangleX, y - oneSixthWidth],\n        ['L', x + height - 2, y - oneSixthWidth],\n    ];\n}\n// \nexport function horizontalHandle(x, y, r) {\n    var width = r;\n    var height = width * HANDLE_HEIGHT_RATIO;\n    var halfWidth = width / 2;\n    var oneSixthWidth = width / 6;\n    var triangleY = y + height * HANDLE_TRIANGLE_RATIO;\n    return [\n        ['M', x, y],\n        ['L', x - halfWidth, triangleY],\n        ['L', x - halfWidth, y + height],\n        ['L', x + halfWidth, y + height],\n        ['L', x + halfWidth, triangleY],\n        ['Z'],\n        // \n        ['M', x - oneSixthWidth, triangleY],\n        ['L', x - oneSixthWidth, y + height - 2],\n        ['M', x + oneSixthWidth, triangleY],\n        ['L', x + oneSixthWidth, y + height - 2],\n    ];\n}\nMarker.registerSymbol('hiddenHandle', hiddenHandle);\nMarker.registerSymbol('verticalHandle', verticalHandle);\nMarker.registerSymbol('horizontalHandle', horizontalHandle);\nexport var ifH = function (orientation, a, b) {\n    if (orientation === void 0) { orientation = 'horizontal'; }\n    return (orientation === 'horizontal' ? a : b);\n};\n// @chushen\nexport function getSafetySelections(domain, newSelection, oldSelection, precision) {\n    var _a;\n    if (precision === void 0) { precision = 4; }\n    var _b = __read(domain, 2), min = _b[0], max = _b[1];\n    var _c = __read(newSelection, 2), start = _c[0], end = _c[1];\n    var _d = __read(oldSelection, 2), prevStart = _d[0], prevEnd = _d[1];\n    var _e = __read([start, end], 2), startVal = _e[0], endVal = _e[1];\n    var range = endVal - startVal;\n    // startVal endVal\n    if (startVal > endVal) {\n        _a = __read([endVal, startVal], 2), startVal = _a[0], endVal = _a[1];\n    }\n    // \n    if (range > max - min) {\n        return [min, max];\n    }\n    if (startVal < min) {\n        if (prevStart === min && prevEnd === endVal) {\n            return [min, endVal];\n        }\n        return [min, range + min];\n    }\n    if (endVal > max) {\n        if (prevEnd === max && prevStart === startVal) {\n            return [startVal, max];\n        }\n        return [max - range, max];\n    }\n    // \n    return [startVal, endVal];\n}\nexport function ifHorizontal(orientation, a, b) {\n    if (orientation === void 0) { orientation = 'horizontal'; }\n    return orientation === 'horizontal' ? a : b;\n}\n//# sourceMappingURL=utils.js.map","import { __assign, __extends, __rest } from \"tslib\";\nimport { isFunction } from '@antv/util';\nimport { Component } from '../../core';\nimport { ifShow, select } from '../../util';\nimport { bowtie, circle, cross, dash, diamond, dot, hexagon, hv, hvh, hyphen, line, plus, point, smooth, square, tick, triangle, triangleDown, vh, vhv, } from './symbol';\nimport { parseMarker } from './utils';\nfunction getType(symbol) {\n    var markerType = parseMarker(symbol);\n    if (['base64', 'url', 'image'].includes(markerType)) {\n        return 'image';\n    }\n    if (symbol && markerType === 'symbol') {\n        return 'path';\n    }\n    return null;\n}\nvar Marker = /** @class */ (function (_super) {\n    __extends(Marker, _super);\n    function Marker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Marker.prototype.render = function (attributes, container) {\n        var _a = attributes.x, x = _a === void 0 ? 0 : _a, _b = attributes.y, y = _b === void 0 ? 0 : _b;\n        var _c = this.getSubShapeStyle(attributes), symbol = _c.symbol, _d = _c.size, size = _d === void 0 ? 16 : _d, style = __rest(_c, [\"symbol\", \"size\"]);\n        var type = getType(symbol);\n        ifShow(!!type, select(container), function (group) {\n            group\n                .maybeAppendByClassName(\"marker\", type)\n                .attr('className', \"marker \".concat(type, \"-marker\"))\n                .call(function (selection) {\n                if (type === 'image') {\n                    // todo  path symbol \n                    var r = size * 2;\n                    selection.styles({\n                        img: symbol,\n                        width: r,\n                        height: r,\n                        x: x - size,\n                        y: y - size,\n                    });\n                }\n                else {\n                    var r = size / 2;\n                    var symbolFn = isFunction(symbol) ? symbol : Marker.getSymbol(symbol);\n                    selection.styles(__assign({ d: symbolFn === null || symbolFn === void 0 ? void 0 : symbolFn(x, y, r) }, style));\n                }\n            });\n        });\n    };\n    Marker.MARKER_SYMBOL_MAP = new Map();\n    /**\n     *  icon \n     * @param type\n     * @param path\n     */\n    Marker.registerSymbol = function (type, symbol) {\n        Marker.MARKER_SYMBOL_MAP.set(type, symbol);\n    };\n    /**\n     *  icon  path\n     */\n    Marker.getSymbol = function (type) {\n        return Marker.MARKER_SYMBOL_MAP.get(type);\n    };\n    /**\n     * @returns  icon \n     */\n    Marker.getSymbols = function () {\n        return Array.from(Marker.MARKER_SYMBOL_MAP.keys());\n    };\n    return Marker;\n}(Component));\nexport { Marker };\n/** Shapes for Point Geometry */\nMarker.registerSymbol('cross', cross);\nMarker.registerSymbol('hyphen', hyphen);\nMarker.registerSymbol('line', line);\nMarker.registerSymbol('plus', plus);\nMarker.registerSymbol('tick', tick);\nMarker.registerSymbol('circle', circle);\nMarker.registerSymbol('point', point);\nMarker.registerSymbol('bowtie', bowtie);\nMarker.registerSymbol('hexagon', hexagon);\nMarker.registerSymbol('square', square);\nMarker.registerSymbol('diamond', diamond);\nMarker.registerSymbol('triangle', triangle);\nMarker.registerSymbol('triangle-down', triangleDown);\n/** LineSymbols */\nMarker.registerSymbol('line', line);\nMarker.registerSymbol('dot', dot);\nMarker.registerSymbol('dash', dash);\nMarker.registerSymbol('smooth', smooth);\nMarker.registerSymbol('hv', hv);\nMarker.registerSymbol('vh', vh);\nMarker.registerSymbol('hvh', hvh);\nMarker.registerSymbol('vhv', vhv);\n//# sourceMappingURL=index.js.map","import { isObject, isString, isFunction } from '@antv/util';\n/**\n * marker\n */\nexport function parseMarker(icon) {\n    var type = 'default';\n    if (isObject(icon) && icon instanceof Image)\n        type = 'image';\n    else if (isFunction(icon))\n        type = 'symbol';\n    else if (isString(icon)) {\n        var dataURLsPattern = new RegExp('data:(image|text)');\n        if (icon.match(dataURLsPattern)) {\n            type = 'base64';\n        }\n        else if (/^(https?:\\/\\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\\.)+[a-zA-Z]+)(:\\d+)?(\\/.*)?(\\?.*)?(#.*)?$/.test(icon)) {\n            type = 'url';\n        }\n        else {\n            // symbol string \n            type = 'symbol';\n        }\n    }\n    return type;\n}\n//# sourceMappingURL=utils.js.map","/**\n * \n */\nexport var circle = function (x, y, r) {\n    return [['M', x - r, y], ['A', r, r, 0, 1, 0, x + r, y], ['A', r, r, 0, 1, 0, x - r, y], ['Z']];\n};\n/**\n * Cname circle to point.\n */\nexport var point = circle;\n/**\n * \n */\nexport var square = function (x, y, r) {\n    return [['M', x - r, y - r], ['L', x + r, y - r], ['L', x + r, y + r], ['L', x - r, y + r], ['Z']];\n};\n/**\n * \n */\nexport var diamond = function (x, y, r) {\n    return [['M', x - r, y], ['L', x, y - r], ['L', x + r, y], ['L', x, y + r], ['Z']];\n};\n/**\n * \n */\nexport var triangle = function (x, y, r) {\n    var diffY = r * Math.sin((1 / 3) * Math.PI);\n    return [['M', x - r, y + diffY], ['L', x, y - diffY], ['L', x + r, y + diffY], ['Z']];\n};\n/**\n * \n */\nexport var triangleDown = function (x, y, r) {\n    var diffY = r * Math.sin((1 / 3) * Math.PI);\n    return [['M', x - r, y - diffY], ['L', x + r, y - diffY], ['L', x, y + diffY], ['Z']];\n};\n/**\n * \n */\nexport var hexagon = function (x, y, r) {\n    var diffX = (r / 2) * Math.sqrt(3);\n    return [\n        ['M', x, y - r],\n        ['L', x + diffX, y - r / 2],\n        ['L', x + diffX, y + r / 2],\n        ['L', x, y + r],\n        ['L', x - diffX, y + r / 2],\n        ['L', x - diffX, y - r / 2],\n        ['Z'],\n    ];\n};\n/**\n * \n */\nexport var bowtie = function (x, y, r) {\n    var diffY = r - 1.5;\n    return [['M', x - r, y - diffY], ['L', x + r, y + diffY], ['L', x + r, y - diffY], ['L', x - r, y + diffY], ['Z']];\n};\n/** --  ------------------------------------------------------------------------------- */\n/**\n * |\n */\nexport var line = function (x, y, r) {\n    return [\n        ['M', x, y + r],\n        ['L', x, y - r],\n    ];\n};\n/**\n * \n */\nexport var cross = function (x, y, r) {\n    return [\n        ['M', x - r, y - r],\n        ['L', x + r, y + r],\n        ['M', x + r, y - r],\n        ['L', x - r, y + r],\n    ];\n};\n/**\n * \n */\nexport var tick = function (x, y, r) {\n    return [\n        ['M', x - r / 2, y - r],\n        ['L', x + r / 2, y - r],\n        ['M', x, y - r],\n        ['L', x, y + r],\n        ['M', x - r / 2, y + r],\n        ['L', x + r / 2, y + r],\n    ];\n};\n/**\n * +\n */\nexport var plus = function (x, y, r) {\n    return [\n        ['M', x - r, y],\n        ['L', x + r, y],\n        ['M', x, y - r],\n        ['L', x, y + r],\n    ];\n};\n/**\n * -\n */\nexport var hyphen = function (x, y, r) {\n    return [\n        ['M', x - r, y],\n        ['L', x + r, y],\n    ];\n};\n/** --  marker ------------------------------------------------------------------------------- */\n/**\n * ---\n */\nexport var dot = function (x, y, r) {\n    return [\n        ['M', x - r, y],\n        ['L', x + r, y],\n    ];\n};\nexport var dash = dot;\nexport var smooth = function (x, y, r) {\n    return [\n        ['M', x - r, y],\n        ['A', r / 2, r / 2, 0, 1, 1, x, y],\n        ['A', r / 2, r / 2, 0, 1, 0, x + r, y],\n    ];\n};\nexport var hv = function (x, y, r) {\n    return [\n        ['M', x - r - 1, y - 2.5],\n        ['L', x, y - 2.5],\n        ['L', x, y + 2.5],\n        ['L', x + r + 1, y + 2.5],\n    ];\n};\nexport var vh = function (x, y, r) {\n    return [\n        ['M', x - r - 1, y + 2.5],\n        ['L', x, y + 2.5],\n        ['L', x, y - 2.5],\n        ['L', x + r + 1, y - 2.5],\n    ];\n};\nexport var hvh = function (x, y, r) {\n    return [\n        ['M', x - (r + 1), y + 2.5],\n        ['L', x - r / 2, y + 2.5],\n        ['L', x - r / 2, y - 2.5],\n        ['L', x + r / 2, y - 2.5],\n        ['L', x + r / 2, y + 2.5],\n        ['L', x + r + 1, y + 2.5],\n    ];\n};\nexport function vhv(x, y) {\n    //  13px 8px\n    return [\n        ['M', x - 5, y + 2.5],\n        ['L', x - 5, y],\n        ['L', x, y],\n        ['L', x, y - 3],\n        ['L', x, y + 3],\n        ['L', x + 6.5, y + 3],\n    ];\n}\n/** --------------------------------------------------------------------------------- */\nexport var button = function (x, y, r) {\n    return [['M', x - r, y - r], ['L', x + r, y], ['L', x - r, y + r], ['Z']];\n};\n//# sourceMappingURL=symbol.js.map","import { classNames } from '../../util';\nexport var HANDLE_ICON_DEFAULT_CFG = {\n    fill: '#fff',\n    lineWidth: 1,\n    radius: 2,\n    size: 10,\n    stroke: '#bfbfbf',\n    strokeOpacity: 1,\n    zIndex: 0,\n};\nexport var HANDLE_LABEL_DEFAULT_CFG = {\n    fill: '#000',\n    fillOpacity: 0.45,\n    fontSize: 12,\n    textAlign: 'center',\n    textBaseline: 'middle',\n    zIndex: 1,\n};\nexport var HANDLE_DEFAULT_CFG = {\n    x: 0,\n    y: 0,\n    orientation: 'horizontal',\n    showLabel: true,\n    type: 'start',\n};\nexport var CLASS_NAMES = classNames({\n    foreground: 'foreground',\n    handle: 'handle',\n    selection: 'selection',\n    sparkline: 'sparkline',\n    sparklineGroup: 'sparkline-group',\n    track: 'track',\n    brushArea: 'brush-area',\n}, 'slider');\n//# sourceMappingURL=constant.js.map","import { __assign, __extends, __read, __rest } from \"tslib\";\nimport { Component } from '../../core';\nimport { classNames, ifShow, select, splitStyle, subStyleProps } from '../../util';\nimport { HANDLE_DEFAULT_CFG, HANDLE_ICON_DEFAULT_CFG, HANDLE_LABEL_DEFAULT_CFG } from './constant';\nvar CLASS_NAMES = classNames({\n    labelGroup: 'label-group',\n    label: 'label',\n    iconGroup: 'icon-group',\n    icon: 'icon',\n    iconRect: 'icon-rect',\n    iconLine: 'icon-line',\n}, 'handle');\nvar HandleIcon = /** @class */ (function (_super) {\n    __extends(HandleIcon, _super);\n    function HandleIcon() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HandleIcon.prototype.render = function (attributes, container) {\n        var x = attributes.x, y = attributes.y, _a = attributes.size, size = _a === void 0 ? 10 : _a, _b = attributes.radius, radius = _b === void 0 ? size / 4 : _b, orientation = attributes.orientation, iconStyle = __rest(attributes, [\"x\", \"y\", \"size\", \"radius\", \"orientation\"]);\n        // \n        var width = size;\n        var height = width * 2.4;\n        var rect = select(container)\n            .maybeAppendByClassName(CLASS_NAMES.iconRect, 'rect')\n            .styles(__assign(__assign({}, iconStyle), { width: width, height: height, radius: radius, x: x - width / 2, y: y - height / 2, transformOrigin: 'center' }));\n        var x1 = x + (1 / 3) * width - width / 2;\n        var x2 = x + (2 / 3) * width - width / 2;\n        var y1 = y + (1 / 4) * height - height / 2;\n        var y2 = y + (3 / 4) * height - height / 2;\n        rect.maybeAppendByClassName(\"\".concat(CLASS_NAMES.iconLine, \"-1\"), 'line').styles(__assign({ x1: x1, x2: x1, y1: y1, y2: y2 }, iconStyle));\n        rect.maybeAppendByClassName(\"\".concat(CLASS_NAMES.iconLine, \"-2\"), 'line').styles(__assign({ x1: x2, x2: x2, y1: y1, y2: y2 }, iconStyle));\n        if (orientation === 'vertical')\n            rect.node().style.transform = 'rotate(90)';\n    };\n    return HandleIcon;\n}(Component));\nvar Handle = /** @class */ (function (_super) {\n    __extends(Handle, _super);\n    function Handle(options) {\n        return _super.call(this, options, HANDLE_DEFAULT_CFG) || this;\n    }\n    Handle.prototype.renderLabel = function (container) {\n        var _this = this;\n        var _a = this.attributes, x = _a.x, y = _a.y, showLabel = _a.showLabel;\n        var _b = subStyleProps(this.attributes, 'label'), _c = _b.x, labelX = _c === void 0 ? 0 : _c, _d = _b.y, labelY = _d === void 0 ? 0 : _d, transform = _b.transform, transformOrigin = _b.transformOrigin, style = __rest(_b, [\"x\", \"y\", \"transform\", \"transformOrigin\"]);\n        var _e = __read(splitStyle(style, []), 2), labelStyle = _e[0], groupStyle = _e[1];\n        var labelGroup = select(container).maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g').styles(groupStyle);\n        // @ts-ignore\n        var _f = __assign(__assign({}, HANDLE_LABEL_DEFAULT_CFG), labelStyle), text = _f.text, rest = __rest(_f, [\"text\"]);\n        ifShow(!!showLabel, labelGroup, function (group) {\n            _this.label = group.maybeAppendByClassName(CLASS_NAMES.label, 'text').styles(__assign(__assign({}, rest), { x: x + labelX, y: y + labelY, transform: transform, transformOrigin: transformOrigin, text: \"\".concat(text) }));\n            /** avoid trigger event on label */\n            _this.label.on('mousedown', function (e) {\n                e.stopPropagation();\n            });\n            _this.label.on('touchstart', function (e) {\n                e.stopPropagation();\n            });\n        });\n    };\n    Handle.prototype.renderIcon = function (container) {\n        var _a = this.attributes, x = _a.x, y = _a.y, orientation = _a.orientation, type = _a.type;\n        var iconStyle = __assign(__assign({ x: x, y: y, orientation: orientation }, HANDLE_ICON_DEFAULT_CFG), subStyleProps(this.attributes, 'icon'));\n        var _b = this.attributes.iconShape, iconShape = _b === void 0 ? function () { return new HandleIcon({ style: iconStyle }); } : _b;\n        var iconGroup = select(container).maybeAppendByClassName(CLASS_NAMES.iconGroup, 'g');\n        iconGroup\n            .selectAll(CLASS_NAMES.icon.class)\n            .data([iconShape])\n            .join(function (enter) {\n            return enter\n                .append(typeof iconShape === 'string' ? iconShape : function () { return iconShape(type); })\n                .attr('className', CLASS_NAMES.icon.name);\n        }, function (update) { return update.update(iconStyle); }, function (exit) { return exit.remove(); });\n    };\n    Handle.prototype.render = function (attributes, container) {\n        this.renderIcon(container);\n        this.renderLabel(container);\n    };\n    return Handle;\n}(Component));\nexport { Handle };\n//# sourceMappingURL=handle.js.map","import isArray from './is-array';\nvar clone = function (obj) {\n    if (typeof obj !== 'object' || obj === null) {\n        return obj;\n    }\n    var rst;\n    if (isArray(obj)) {\n        rst = [];\n        for (var i = 0, l = obj.length; i < l; i++) {\n            if (typeof obj[i] === 'object' && obj[i] != null) {\n                rst[i] = clone(obj[i]);\n            }\n            else {\n                rst[i] = obj[i];\n            }\n        }\n    }\n    else {\n        rst = {};\n        for (var k in obj) {\n            if (typeof obj[k] === 'object' && obj[k] != null) {\n                rst[k] = clone(obj[k]);\n            }\n            else {\n                rst[k] = obj[k];\n            }\n        }\n    }\n    return rst;\n};\nexport default clone;\n//# sourceMappingURL=clone.js.map","import { __assign, __extends, __rest } from \"tslib\";\nimport { deepMix } from '@antv/util';\nimport { DisplayObject, Group } from '../../shapes';\nimport { deepAssign, select } from '../../util';\nvar Columns = /** @class */ (function (_super) {\n    __extends(Columns, _super);\n    function Columns(_a) {\n        var _this = this;\n        var style = _a.style, rest = __rest(_a, [\"style\"]);\n        _this = _super.call(this, deepMix({}, { type: 'column' }, __assign({ style: style }, rest))) || this;\n        _this.columnsGroup = new Group({ name: 'columns' });\n        _this.appendChild(_this.columnsGroup);\n        _this.render();\n        return _this;\n    }\n    Columns.prototype.render = function () {\n        var _a = this.attributes, columns = _a.columns, x = _a.x, y = _a.y;\n        this.columnsGroup.style.transform = \"translate(\".concat(x, \", \").concat(y, \")\");\n        select(this.columnsGroup)\n            .selectAll('.column')\n            .data(columns.flat())\n            .join(function (enter) {\n            return enter\n                .append('rect')\n                .attr('className', 'column')\n                .each(function (style) {\n                this.attr(style);\n            });\n        }, function (update) {\n            return update.each(function (style) {\n                this.attr(style);\n            });\n        }, function (exit) { return exit.remove(); });\n    };\n    Columns.prototype.update = function (attr) {\n        this.attr(deepAssign({}, this.attributes, attr));\n        this.render();\n    };\n    Columns.prototype.clear = function () {\n        this.removeChildren();\n    };\n    return Columns;\n}(DisplayObject));\nexport { Columns };\n//# sourceMappingURL=columns.js.map","import { __assign, __extends, __rest } from \"tslib\";\nimport { deepMix } from '@antv/util';\nimport { DisplayObject, Group } from '../../shapes';\nimport { deepAssign, select } from '../../util';\nvar Lines = /** @class */ (function (_super) {\n    __extends(Lines, _super);\n    function Lines(_a) {\n        var _this = this;\n        var style = _a.style, rest = __rest(_a, [\"style\"]);\n        _this = _super.call(this, deepMix({}, { type: 'lines' }, __assign({ style: style }, rest))) || this;\n        _this.linesGroup = _this.appendChild(new Group());\n        _this.areasGroup = _this.appendChild(new Group());\n        _this.render();\n        return _this;\n    }\n    Lines.prototype.render = function () {\n        var _a = this.attributes, lines = _a.lines, areas = _a.areas, x = _a.x, y = _a.y;\n        this.style.transform = \"translate(\".concat(x, \", \").concat(y, \")\");\n        if (lines)\n            this.renderLines(lines);\n        if (areas)\n            this.renderAreas(areas);\n    };\n    Lines.prototype.clear = function () {\n        this.linesGroup.removeChildren();\n        this.areasGroup.removeChildren();\n    };\n    Lines.prototype.update = function (attr) {\n        this.attr(deepAssign({}, this.attributes, attr));\n        this.render();\n    };\n    Lines.prototype.renderLines = function (lines) {\n        select(this.linesGroup)\n            .selectAll('.line')\n            .data(lines)\n            .join(function (enter) {\n            return enter\n                .append('path')\n                .attr('className', 'line')\n                .each(function (style) {\n                this.attr(style);\n            });\n        }, function (update) {\n            return update.each(function (style) {\n                this.attr(style);\n            });\n        }, function (exit) { return exit.remove(); });\n    };\n    Lines.prototype.renderAreas = function (areas) {\n        select(this.linesGroup)\n            .selectAll('.area')\n            .data(areas)\n            .join(function (enter) {\n            return enter\n                .append('path')\n                .attr('className', 'area')\n                .each(function (style) {\n                this.attr(style);\n            });\n        }, function (update) {\n            return update.each(function (style) {\n                this.style(style);\n            });\n        }, function (exit) { return exit.remove(); });\n    };\n    return Lines;\n}(DisplayObject));\nexport { Lines };\n//# sourceMappingURL=lines.js.map","var isArrayLike = function (value) {\n    /**\n     * isArrayLike([1, 2, 3]) => true\n     * isArrayLike(document.body.children) => true\n     * isArrayLike('abc') => true\n     * isArrayLike(Function) => false\n     */\n    return value !== null && typeof value !== 'function' && isFinite(value.length);\n};\nexport default isArrayLike;\n//# sourceMappingURL=is-array-like.js.map","import isObjectLike from './is-object-like';\nimport isArrayLike from './is-array-like';\nimport isString from './is-string';\nvar isEqual = function (value, other) {\n    if (value === other) {\n        return true;\n    }\n    if (!value || !other) {\n        return false;\n    }\n    if (isString(value) || isString(other)) {\n        return false;\n    }\n    if (isArrayLike(value) || isArrayLike(other)) {\n        if (value.length !== other.length) {\n            return false;\n        }\n        var rst = true;\n        for (var i = 0; i < value.length; i++) {\n            rst = isEqual(value[i], other[i]);\n            if (!rst) {\n                break;\n            }\n        }\n        return rst;\n    }\n    if (isObjectLike(value) || isObjectLike(other)) {\n        var valueKeys = Object.keys(value);\n        var otherKeys = Object.keys(other);\n        if (valueKeys.length !== otherKeys.length) {\n            return false;\n        }\n        var rst = true;\n        for (var i = 0; i < valueKeys.length; i++) {\n            rst = isEqual(value[valueKeys[i]], other[valueKeys[i]]);\n            if (!rst) {\n                break;\n            }\n        }\n        return rst;\n    }\n    return false;\n};\nexport default isEqual;\n//# sourceMappingURL=is-equal.js.map","import { __read } from \"tslib\";\nimport { add, sub, min as _min, max as _max, scale, distance } from './matrix';\nfunction smoothBezier(points, smooth, isLoop, constraint) {\n    var _a;\n    var cps = [];\n    var hasConstraint = !!constraint;\n    var prevPoint;\n    var nextPoint;\n    var min = [Infinity, Infinity];\n    var max = [-Infinity, -Infinity];\n    var nextCp0;\n    var cp1;\n    var cp0;\n    if (hasConstraint) {\n        _a = __read(constraint, 2), min = _a[0], max = _a[1];\n        for (var i = 0, l = points.length; i < l; i += 1) {\n            var point = points[i];\n            min = _min(min, point);\n            max = _max(max, point);\n        }\n    }\n    for (var i = 0, len = points.length; i < len; i += 1) {\n        var point = points[i];\n        if (i === 0 && !isLoop) {\n            cp0 = point;\n        }\n        else if (i === len - 1 && !isLoop) {\n            cp1 = point;\n            cps.push(cp0);\n            cps.push(cp1);\n        }\n        else {\n            var prevIdx = [i ? i - 1 : len - 1, i - 1][isLoop ? 0 : 1];\n            prevPoint = points[prevIdx];\n            nextPoint = points[isLoop ? (i + 1) % len : i + 1];\n            var v = [0, 0];\n            v = sub(nextPoint, prevPoint);\n            v = scale(v, smooth);\n            var d0 = distance(point, prevPoint);\n            var d1 = distance(point, nextPoint);\n            var sum = d0 + d1;\n            if (sum !== 0) {\n                d0 /= sum;\n                d1 /= sum;\n            }\n            var v1 = scale(v, -d0);\n            var v2 = scale(v, d1);\n            cp1 = add(point, v1);\n            nextCp0 = add(point, v2);\n            // \n            nextCp0 = _min(nextCp0, _max(nextPoint, point));\n            nextCp0 = _max(nextCp0, _min(nextPoint, point));\n            //  cp1 \n            v1 = sub(nextCp0, point);\n            v1 = scale(v1, -d0 / d1);\n            cp1 = add(point, v1);\n            // \n            cp1 = _min(cp1, _max(prevPoint, point));\n            cp1 = _max(cp1, _min(prevPoint, point));\n            //  nextCp0 \n            v2 = sub(point, cp1);\n            v2 = scale(v2, d1 / d0);\n            nextCp0 = add(point, v2);\n            if (hasConstraint) {\n                cp1 = _max(cp1, min);\n                cp1 = _min(cp1, max);\n                nextCp0 = _max(nextCp0, min);\n                nextCp0 = _min(nextCp0, max);\n            }\n            cps.push(cp0);\n            cps.push(cp1);\n            cp0 = nextCp0;\n        }\n    }\n    if (isLoop) {\n        cps.push(cps.shift());\n    }\n    return cps;\n}\n/**\n * create bezier spline from catmull rom spline\n * @param {Array} crp Catmull Rom Points\n * @param {boolean} z Spline is loop\n * @param {Array} constraint Constraint\n */\nexport function catmullRom2Bezier(crp, z, constraint) {\n    var _a;\n    if (z === void 0) { z = false; }\n    if (constraint === void 0) { constraint = [\n        [0, 0],\n        [1, 1],\n    ]; }\n    var isLoop = !!z;\n    var pointList = [];\n    for (var i = 0, l = crp.length; i < l; i += 2) {\n        pointList.push([crp[i], crp[i + 1]]);\n    }\n    var controlPointList = smoothBezier(pointList, 0.4, isLoop, constraint);\n    var len = pointList.length;\n    var d1 = [];\n    var cp1;\n    var cp2;\n    var p;\n    for (var i = 0; i < len - 1; i += 1) {\n        cp1 = controlPointList[i * 2];\n        cp2 = controlPointList[i * 2 + 1];\n        p = pointList[i + 1];\n        d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]]);\n    }\n    if (isLoop) {\n        cp1 = controlPointList[len];\n        cp2 = controlPointList[len + 1];\n        _a = __read(pointList, 1), p = _a[0];\n        d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]]);\n    }\n    return d1;\n}\n//# sourceMappingURL=path.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { clone, isEqual, clamp } from '@antv/util';\nimport { catmullRom2Bezier } from '../../util';\n/**\n * xy\n */\nexport function dataToLines(data, scales) {\n    var _a;\n    var x = scales.x, y = scales.y;\n    var _b = __read((y.getOptions().range || [0, 0]), 2), max = _b[0], min = _b[1];\n    if (min > max)\n        _a = __read([max, min], 2), min = _a[0], max = _a[1];\n    return data.map(function (points) {\n        var lines = points.map(function (val, idx) {\n            return [x.map(idx), clamp(y.map(val), min, max)];\n        });\n        return lines;\n    });\n}\n/**\n * path\n */\nexport function lineToLinePath(line, reverse) {\n    if (reverse === void 0) { reverse = false; }\n    var M = reverse ? line.length - 1 : 0;\n    var linePath = line.map(function (point, idx) { return __spreadArray([idx === M ? 'M' : 'L'], __read(point), false); });\n    return reverse ? linePath.reverse() : linePath;\n}\n/**\n * path\n * @param points \n * @param reverse \n */\nexport function lineToCurvePath(line, reverse) {\n    if (reverse === void 0) { reverse = false; }\n    if (line.length <= 2) {\n        return lineToLinePath(line);\n    }\n    var data = [];\n    var len = line.length;\n    for (var idx = 0; idx < len; idx += 1) {\n        var point = reverse ? line[len - idx - 1] : line[idx];\n        if (!isEqual(point, data.slice(-2))) {\n            data.push.apply(data, __spreadArray([], __read(point), false));\n        }\n    }\n    var path = catmullRom2Bezier(data, false);\n    if (reverse) {\n        path.unshift(__spreadArray(['M'], __read(line[len - 1]), false));\n    }\n    else {\n        path.unshift(__spreadArray(['M'], __read(line[0]), false));\n    }\n    return path;\n}\n/**\n * baselinepath\n */\nexport function closePathByBaseLine(path, width, baseline) {\n    var closedPath = clone(path);\n    closedPath.push(['L', width, baseline], ['L', 0, baseline], ['Z']);\n    return closedPath;\n}\n/**\n * path\n * \n */\nexport function linesToAreaPaths(lines, smooth, width, baseline) {\n    return lines.map(function (line) {\n        return closePathByBaseLine(smooth ? lineToCurvePath(line) : lineToLinePath(line), width, baseline);\n    });\n}\n/**\n * \n */\nexport function linesToStackAreaPaths(lines, width, baseline) {\n    var paths = [];\n    for (var idx = lines.length - 1; idx >= 0; idx -= 1) {\n        var currLine = lines[idx];\n        var currCurvePath = lineToLinePath(currLine);\n        var path = void 0;\n        if (idx === 0) {\n            // y=0\n            path = closePathByBaseLine(currCurvePath, width, baseline);\n        }\n        else {\n            // \n            var belowLine = lines[idx - 1];\n            var belowCurvePath = lineToLinePath(belowLine, true);\n            belowCurvePath[0][0] = 'L';\n            // \n            path = __spreadArray(__spreadArray(__spreadArray([], __read(currCurvePath), false), __read(belowCurvePath), false), [['Z']], false);\n        }\n        paths.push(path);\n    }\n    return paths;\n}\n/**\n * \n */\nexport function linesToStackCurveAreaPaths(lines, width, baseline) {\n    var paths = [];\n    for (var idx = lines.length - 1; idx >= 0; idx -= 1) {\n        var currLine = lines[idx];\n        var currCurvePath = lineToCurvePath(currLine);\n        var path = void 0;\n        if (idx === 0) {\n            // y=0\n            path = closePathByBaseLine(currCurvePath, width, baseline);\n        }\n        else {\n            // \n            var belowLine = lines[idx - 1];\n            var belowCurvePath = lineToCurvePath(belowLine, true);\n            /**\n             * \n             *  M C C C C C\n             *  A  ->  B\n             *          \n             *  D  <-  C\n             *  C C C C C M\n             *\n             */\n            var A = currLine[0];\n            // const B = currLine[currLine.length - 1];\n            // const C = belowLine[belowLine.length - 1];\n            // const D = belowLine[0];\n            //  M X Y  L X Y\n            belowCurvePath[0][0] = 'L';\n            // \n            path = __spreadArray(__spreadArray(__spreadArray([], __read(currCurvePath), false), __read(belowCurvePath), false), [__spreadArray(['M'], __read(A), false), ['Z']], false);\n        }\n        paths.push(path);\n    }\n    return paths;\n}\n//# sourceMappingURL=path.js.map","import isArray from './is-array';\n/**\n * @param {Array} arr The array to iterate over.\n * @return {*} Returns the minimum value.\n * @example\n *\n * min([1, 2]);\n * // => 1\n *\n * min([]);\n * // => undefined\n *\n * const data = new Array(1250010).fill(1).map((d,idx) => idx);\n *\n * min(data);\n * // => 1250010\n * // Math.min(...data) will encounter \"Maximum call stack size exceeded\" error\n */\nexport default (function (arr) {\n    if (!isArray(arr)) {\n        return undefined;\n    }\n    return arr.reduce(function (prev, curr) {\n        return Math.min(prev, curr);\n    }, arr[0]);\n});\n//# sourceMappingURL=min.js.map","import isArray from './is-array';\nimport isFunction from './is-function';\n/**\n * @param {Array} arr The array to iterate over.\n * @param {Function} [fn] The iteratee invoked per element.\n * @return {*} Returns the minimum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * minBy(objects, function(o) { return o.n; });\n * // => { 'n': 1 }\n *\n * minBy(objects, 'n');\n * // => { 'n': 1 }\n */\nexport default (function (arr, fn) {\n    if (!isArray(arr)) {\n        return undefined;\n    }\n    var minItem;\n    var min = Infinity;\n    for (var i = 0; i < arr.length; i++) {\n        var item = arr[i];\n        var v = isFunction(fn) ? fn(item) : item[fn];\n        if (v < min) {\n            minItem = item;\n            min = v;\n        }\n    }\n    return minItem;\n});\n//# sourceMappingURL=min-by.js.map","/**\n * \n * @param arr \n * @return \n */\nexport default function max(arr) {\n    if (!Array.isArray(arr))\n        return -Infinity;\n    var length = arr.length;\n    if (!length)\n        return -Infinity;\n    var max = arr[0];\n    for (var i = 1; i < length; i++) {\n        max = Math.max(max, arr[i]);\n    }\n    return max;\n}\n//# sourceMappingURL=max.js.map","import isArray from './is-array';\nimport isFunction from './is-function';\n/**\n * @param {Array} arr The array to iterate over.\n * @param {Function} [fn] The iteratee invoked per element.\n * @return {*} Returns the maximum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * maxBy(objects, function(o) { return o.n; });\n * // => { 'n': 2 }\n *\n * maxBy(objects, 'n');\n * // => { 'n': 2 }\n */\nexport default (function (arr, fn) {\n    if (!isArray(arr)) {\n        return undefined;\n    }\n    var maxItem;\n    var max = -Infinity;\n    for (var i = 0; i < arr.length; i++) {\n        var item = arr[i];\n        var v = isFunction(fn) ? fn(item) : item[fn];\n        if (v > max) {\n            maxItem = item;\n            max = v;\n        }\n    }\n    return maxItem;\n});\n//# sourceMappingURL=max-by.js.map","import { __read } from \"tslib\";\nimport { clone, min, minBy, max, maxBy } from '@antv/util';\n/**\n * \n */\nexport function getRange(data) {\n    if (data.length === 0)\n        return [0, 0];\n    return [\n        min(minBy(data, function (arr) { return min(arr) || 0; })),\n        max(maxBy(data, function (arr) { return max(arr) || 0; })),\n    ];\n}\n/**\n * \n */\nexport function getStackedData(_) {\n    var data = clone(_);\n    // \n    var datumLen = data[0].length;\n    // \n    var _a = __read([Array(datumLen).fill(0), Array(datumLen).fill(0)], 2), positivePrev = _a[0], negativePrev = _a[1];\n    for (var i = 0; i < data.length; i += 1) {\n        var datum = data[i];\n        for (var j = 0; j < datumLen; j += 1) {\n            if (datum[j] >= 0) {\n                datum[j] += positivePrev[j];\n                positivePrev[j] = datum[j];\n            }\n            else {\n                datum[j] += negativePrev[j];\n                negativePrev[j] = datum[j];\n            }\n        }\n    }\n    return data;\n}\n//# sourceMappingURL=utils.js.map","import { __assign, __extends, __read } from \"tslib\";\nimport { Band, Linear } from '@antv/scale';\nimport { clone, isArray, isFunction, isNumber } from '@antv/util';\nimport { Component } from '../../core';\nimport { maybeAppend, select, subStyleProps } from '../../util';\nimport { Columns } from './columns';\nimport { Lines } from './lines';\nimport { dataToLines, lineToCurvePath, lineToLinePath, linesToAreaPaths, linesToStackAreaPaths, linesToStackCurveAreaPaths, } from './path';\nimport { getRange, getStackedData } from './utils';\nvar Sparkline = /** @class */ (function (_super) {\n    __extends(Sparkline, _super);\n    function Sparkline(options) {\n        return _super.call(this, options, {\n            type: 'line',\n            x: 0,\n            y: 0,\n            width: 200,\n            height: 20,\n            isStack: false,\n            color: ['#83daad', '#edbf45', '#d2cef9', '#e290b3', '#6f63f4'],\n            smooth: true,\n            lineLineWidth: 1,\n            areaOpacity: 0,\n            isGroup: false,\n            columnLineWidth: 1,\n            columnStroke: '#fff',\n            scale: 1,\n            spacing: 0,\n        }) || this;\n    }\n    Object.defineProperty(Sparkline.prototype, \"rawData\", {\n        /**\n         * data\n         * \n         */\n        get: function () {\n            var rawData = this.attributes.data;\n            if (!rawData || (rawData === null || rawData === void 0 ? void 0 : rawData.length) === 0)\n                return [[]];\n            var data = clone(rawData);\n            // number[] -> number[][]\n            return isNumber(data[0]) ? [data] : data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sparkline.prototype, \"data\", {\n        get: function () {\n            if (this.attributes.isStack)\n                return getStackedData(this.rawData);\n            return this.rawData;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sparkline.prototype, \"scales\", {\n        get: function () {\n            return this.createScales(this.data);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sparkline.prototype, \"baseline\", {\n        /**\n         *  0\n         */\n        get: function () {\n            var y = this.scales.y;\n            var _a = __read(y.getOptions().domain || [0, 0], 2), y1 = _a[0], y2 = _a[1];\n            if (y2 < 0) {\n                return y.map(y2);\n            }\n            return y.map(y1 < 0 ? 0 : y1);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sparkline.prototype, \"containerShape\", {\n        get: function () {\n            var _a = this.attributes, width = _a.width, height = _a.height;\n            return { width: width, height: height };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sparkline.prototype, \"linesStyle\", {\n        get: function () {\n            var _this = this;\n            var _a = this.attributes, type = _a.type, isStack = _a.isStack, smooth = _a.smooth;\n            if (type !== 'line')\n                throw new Error('linesStyle can only be used in line type');\n            var areaStyle = subStyleProps(this.attributes, 'area');\n            var lineStyle = subStyleProps(this.attributes, 'line');\n            var width = this.containerShape.width;\n            var data = this.data;\n            if (data[0].length === 0)\n                return { lines: [], areas: [] };\n            var _b = this.scales, x = _b.x, y = _b.y;\n            // Path\n            var lines = dataToLines(data, { type: 'line', x: x, y: y });\n            // path\n            var areas = [];\n            if (areaStyle) {\n                var baseline = this.baseline;\n                if (isStack) {\n                    areas = smooth\n                        ? linesToStackCurveAreaPaths(lines, width, baseline)\n                        : linesToStackAreaPaths(lines, width, baseline);\n                }\n                else {\n                    areas = linesToAreaPaths(lines, smooth, width, baseline);\n                }\n            }\n            return {\n                lines: lines.map(function (line, idx) {\n                    return __assign({ stroke: _this.getColor(idx), d: smooth ? lineToCurvePath(line) : lineToLinePath(line) }, lineStyle);\n                }),\n                areas: areas.map(function (path, idx) {\n                    return __assign({ d: path, fill: _this.getColor(idx) }, areaStyle);\n                }),\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Sparkline.prototype, \"columnsStyle\", {\n        get: function () {\n            var _this = this;\n            var columnStyle = subStyleProps(this.attributes, 'column');\n            var _a = this.attributes, isStack = _a.isStack, type = _a.type, scale = _a.scale;\n            if (type !== 'column')\n                throw new Error('columnsStyle can only be used in column type');\n            var height = this.containerShape.height;\n            var data = this.rawData;\n            if (!data)\n                return { columns: [] };\n            if (isStack)\n                data = getStackedData(data);\n            var _b = this.createScales(data), x = _b.x, y = _b.y;\n            var _c = __read(getRange(data), 2), minVal = _c[0], maxVal = _c[1];\n            var heightScale = new Linear({\n                domain: [0, maxVal - (minVal > 0 ? 0 : minVal)],\n                range: [0, height * scale],\n            });\n            var bandWidth = x.getBandWidth();\n            var rawData = this.rawData;\n            return {\n                columns: data.map(function (column, i) {\n                    return column.map(function (val, j) {\n                        var barWidth = bandWidth / data.length;\n                        var getShape = function () {\n                            return {\n                                x: x.map(j) + barWidth * i,\n                                y: val >= 0 ? y.map(val) : y.map(0),\n                                width: barWidth,\n                                height: heightScale.map(Math.abs(val)),\n                            };\n                        };\n                        var getStackShape = function () {\n                            return {\n                                x: x.map(j),\n                                y: y.map(val),\n                                width: bandWidth,\n                                height: heightScale.map(rawData[i][j]),\n                            };\n                        };\n                        return __assign(__assign({ fill: _this.getColor(i) }, columnStyle), (isStack ? getStackShape() : getShape()));\n                    });\n                }),\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Sparkline.prototype.render = function (attributes, container) {\n        maybeAppend(container, '.container', 'rect').attr('className', 'container').node();\n        var type = attributes.type, x = attributes.x, y = attributes.y;\n        var className = \"spark\".concat(type);\n        var style = __assign({ x: x, y: y }, (type === 'line' ? this.linesStyle : this.columnsStyle));\n        select(container)\n            .selectAll('.spark')\n            .data([type])\n            .join(function (enter) {\n            return enter\n                .append(function (type) {\n                if (type === 'line')\n                    return new Lines({ className: className, style: style });\n                return new Columns({ className: className, style: style });\n            })\n                .attr('className', \"spark \".concat(className));\n        }, function (update) { return update.update(style); }, function (exit) { return exit.remove(); });\n    };\n    /**\n     * color\n     */\n    Sparkline.prototype.getColor = function (index) {\n        var color = this.attributes.color;\n        if (isArray(color)) {\n            return color[index % color.length];\n        }\n        if (isFunction(color)) {\n            return color.call(null, index);\n        }\n        return color;\n    };\n    /**\n     * scale\n     */\n    Sparkline.prototype.createScales = function (data) {\n        var _a, _b;\n        var _c = this.attributes, type = _c.type, scale = _c.scale, _d = _c.range, range = _d === void 0 ? [] : _d, spacing = _c.spacing;\n        var _e = this.containerShape, width = _e.width, height = _e.height;\n        var _f = __read(getRange(data), 2), minVal = _f[0], maxVal = _f[1];\n        var yScale = new Linear({\n            domain: [(_a = range[0]) !== null && _a !== void 0 ? _a : minVal, (_b = range[1]) !== null && _b !== void 0 ? _b : maxVal],\n            range: [height, height * (1 - scale)],\n        });\n        if (type === 'line') {\n            return {\n                type: type,\n                x: new Linear({\n                    domain: [0, data[0].length - 1],\n                    range: [0, width],\n                }),\n                y: yScale,\n            };\n        }\n        return {\n            type: type,\n            x: new Band({\n                domain: data[0].map(function (val, idx) { return idx; }),\n                range: [0, width],\n                paddingInner: spacing,\n                paddingOuter: spacing / 2,\n                align: 0.5,\n            }),\n            y: yScale,\n        };\n    };\n    Sparkline.tag = 'sparkline';\n    return Sparkline;\n}(Component));\nexport { Sparkline };\n//# sourceMappingURL=index.js.map","import { __assign, __extends, __read } from \"tslib\";\nimport { CustomEvent } from '@antv/g';\nimport { clamp } from '@antv/util';\nimport { transition } from '../../animation';\nimport { Component } from '../../core';\nimport { Text } from '../../shapes';\nimport { getEventPos, ifShow, parseSeriesAttr, select, subStyleProps, superStyleProps, toPrecision } from '../../util';\nimport { Sparkline } from '../sparkline';\nimport { CLASS_NAMES, HANDLE_DEFAULT_CFG, HANDLE_ICON_DEFAULT_CFG, HANDLE_LABEL_DEFAULT_CFG } from './constant';\nimport { Handle } from './handle';\nvar Slider = /** @class */ (function (_super) {\n    __extends(Slider, _super);\n    function Slider(options) {\n        var _this = _super.call(this, options, __assign(__assign(__assign({ x: 0, y: 0, animate: { duration: 100, fill: 'both' }, brushable: true, formatter: function (val) { return val.toString(); }, handleSpacing: 2, orientation: 'horizontal', padding: 0, autoFitLabel: true, scrollable: true, selectionFill: '#5B8FF9', selectionFillOpacity: 0.45, selectionZIndex: 2, showHandle: true, showLabel: true, slidable: true, trackFill: '#416180', trackLength: 200, trackOpacity: 0.05, trackSize: 20, trackZIndex: -1, values: [0, 1], type: 'range', selectionType: 'select', handleIconOffset: 0 }, superStyleProps(HANDLE_DEFAULT_CFG, 'handle')), superStyleProps(HANDLE_ICON_DEFAULT_CFG, 'handleIcon')), superStyleProps(HANDLE_LABEL_DEFAULT_CFG, 'handleLabel'))) || this;\n        _this.range = [0, 1];\n        _this.onDragStart = function (target) { return function (e) {\n            e.stopPropagation();\n            _this.target = target;\n            _this.prevPos = _this.getOrientVal(getEventPos(e));\n            var _a = _this.availableSpace, x = _a.x, y = _a.y;\n            var _b = _this.getBBox(), X = _b.x, Y = _b.y;\n            _this.selectionStartPos = _this.getRatio(_this.prevPos - _this.getOrientVal([x, y]) - _this.getOrientVal([+X, +Y]));\n            _this.selectionWidth = 0;\n            document.addEventListener('pointermove', _this.onDragging);\n            document.addEventListener('pointerup', _this.onDragEnd);\n        }; };\n        _this.onDragging = function (e) {\n            var _a = _this.attributes, slidable = _a.slidable, brushable = _a.brushable, type = _a.type;\n            e.stopPropagation();\n            var currPos = _this.getOrientVal(getEventPos(e));\n            var diffPos = currPos - _this.prevPos;\n            if (!diffPos)\n                return;\n            var deltaVal = _this.getRatio(diffPos);\n            switch (_this.target) {\n                case 'start':\n                    if (slidable)\n                        _this.setValuesOffset(deltaVal);\n                    break;\n                case 'end':\n                    if (slidable)\n                        _this.setValuesOffset(0, deltaVal);\n                    break;\n                case 'selection':\n                    if (slidable)\n                        _this.setValuesOffset(deltaVal, deltaVal);\n                    break;\n                case 'track':\n                    if (!brushable)\n                        return;\n                    // \n                    _this.selectionWidth += deltaVal;\n                    if (type === 'range') {\n                        _this.innerSetValues([_this.selectionStartPos, _this.selectionStartPos + _this.selectionWidth].sort(), true);\n                    }\n                    else\n                        _this.innerSetValues([0, _this.selectionStartPos + _this.selectionWidth], true);\n                    break;\n                default:\n                    break;\n            }\n            _this.prevPos = currPos;\n        };\n        _this.onDragEnd = function () {\n            document.removeEventListener('pointermove', _this.onDragging);\n            document.removeEventListener('pointermove', _this.onDragging);\n            document.removeEventListener('pointerup', _this.onDragEnd);\n            _this.target = '';\n            //  handle \n            _this.updateHandlesPosition(false);\n        };\n        _this.onValueChange = function (oldValue) {\n            var _a = _this.attributes, onChange = _a.onChange, type = _a.type;\n            var internalOldValue = type === 'range' ? oldValue : oldValue[1];\n            var value = type === 'range' ? _this.getValues() : _this.getValues()[1];\n            var evt = new CustomEvent('valuechange', {\n                detail: { oldValue: internalOldValue, value: value },\n            });\n            _this.dispatchEvent(evt);\n            onChange === null || onChange === void 0 ? void 0 : onChange(value);\n        };\n        _this.selectionStartPos = 0;\n        _this.selectionWidth = 0;\n        _this.prevPos = 0;\n        _this.target = '';\n        return _this;\n    }\n    Object.defineProperty(Slider.prototype, \"values\", {\n        get: function () {\n            return this.attributes.values;\n        },\n        set: function (values) {\n            this.attributes.values = this.clampValues(values);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Slider.prototype, \"sparklineStyle\", {\n        get: function () {\n            var orientation = this.attributes.orientation;\n            if (orientation !== 'horizontal')\n                return null;\n            var attr = subStyleProps(this.attributes, 'sparkline');\n            return __assign(__assign({ zIndex: 0 }, this.availableSpace), attr);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Slider.prototype, \"shape\", {\n        get: function () {\n            var _a = this.attributes, trackLength = _a.trackLength, trackSize = _a.trackSize;\n            var _b = __read(this.getOrientVal([\n                [trackLength, trackSize],\n                [trackSize, trackLength],\n            ]), 2), width = _b[0], height = _b[1];\n            return { width: width, height: height };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Slider.prototype, \"availableSpace\", {\n        get: function () {\n            var _a = this.attributes, x = _a.x, y = _a.y, padding = _a.padding;\n            var _b = __read(parseSeriesAttr(padding), 4), top = _b[0], right = _b[1], bottom = _b[2], left = _b[3];\n            var _c = this.shape, width = _c.width, height = _c.height;\n            return {\n                x: left,\n                y: top,\n                width: width - (left + right),\n                height: height - (top + bottom),\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Slider.prototype.getValues = function () {\n        return this.values;\n    };\n    /**  */\n    Slider.prototype.setValues = function (values, animate) {\n        if (values === void 0) { values = [0, 0]; }\n        if (animate === void 0) { animate = false; }\n        this.attributes.values = values;\n        var animation = animate === false ? false : this.attributes.animate;\n        this.updateSelectionArea(animation);\n        this.updateHandlesPosition(animation);\n    };\n    Slider.prototype.updateSelectionArea = function (animation) {\n        var newSelectionArea = this.calcSelectionArea();\n        this.foregroundGroup.selectAll(CLASS_NAMES.selection.class).each(function (datum, index) {\n            transition(this, newSelectionArea[index], animation);\n        });\n    };\n    Slider.prototype.updateHandlesPosition = function (animation) {\n        if (!this.attributes.showHandle)\n            return;\n        this.startHandle && transition(this.startHandle, this.getHandleStyle('start'), animation);\n        this.endHandle && transition(this.endHandle, this.getHandleStyle('end'), animation);\n    };\n    Slider.prototype.innerSetValues = function (values, trigger) {\n        if (values === void 0) { values = [0, 0]; }\n        if (trigger === void 0) { trigger = false; }\n        var oldValues = this.values;\n        var newValues = this.clampValues(values);\n        this.attributes.values = newValues;\n        this.setValues(newValues);\n        if (trigger) {\n            this.onValueChange(oldValues);\n        }\n    };\n    Slider.prototype.renderTrack = function (container) {\n        var _a = this.attributes, x = _a.x, y = _a.y;\n        var style = subStyleProps(this.attributes, 'track');\n        this.trackShape = select(container)\n            .maybeAppendByClassName(CLASS_NAMES.track, 'rect')\n            .styles(__assign(__assign({ x: x, y: y }, this.shape), style));\n    };\n    Slider.prototype.renderBrushArea = function (container) {\n        var _a = this.attributes, x = _a.x, y = _a.y, brushable = _a.brushable;\n        this.brushArea = select(container)\n            .maybeAppendByClassName(CLASS_NAMES.brushArea, 'rect')\n            .styles(__assign({ x: x, y: y, fill: 'transparent', cursor: brushable ? 'crosshair' : 'default' }, this.shape));\n    };\n    Slider.prototype.renderSparkline = function (container) {\n        var _this = this;\n        var _a = this.attributes, x = _a.x, y = _a.y, orientation = _a.orientation;\n        var sparklineGroup = select(container).maybeAppendByClassName(CLASS_NAMES.sparklineGroup, 'g');\n        ifShow(orientation === 'horizontal', sparklineGroup, function (group) {\n            var style = __assign(__assign({}, _this.sparklineStyle), { x: x, y: y });\n            group.maybeAppendByClassName(CLASS_NAMES.sparkline, function () { return new Sparkline({ style: style }); }).update(style);\n        });\n    };\n    Slider.prototype.renderHandles = function () {\n        var _this = this;\n        var _a;\n        var _b = this.attributes, showHandle = _b.showHandle, type = _b.type;\n        var availableHandle = type === 'range' ? ['start', 'end'] : ['end'];\n        var data = showHandle ? availableHandle : [];\n        var that = this;\n        (_a = this.foregroundGroup) === null || _a === void 0 ? void 0 : _a.selectAll(CLASS_NAMES.handle.class).data(data.map(function (type) { return ({ type: type }); }), function (d) { return d.type; }).join(function (enter) {\n            return enter\n                .append(function (_a) {\n                var type = _a.type;\n                return new Handle({ style: _this.getHandleStyle(type) });\n            })\n                .each(function (_a) {\n                var type = _a.type;\n                this.attr('class', \"\".concat(CLASS_NAMES.handle.name, \" \").concat(type, \"-handle\"));\n                var name = \"\".concat(type, \"Handle\");\n                that[name] = this;\n                this.addEventListener('pointerdown', that.onDragStart(type));\n            });\n        }, function (update) {\n            return update.each(function (_a) {\n                var type = _a.type;\n                this.update(that.getHandleStyle(type));\n            });\n        }, function (exit) {\n            return exit\n                .each(function (_a) {\n                var type = _a.type;\n                var name = \"\".concat(type, \"Handle\");\n                that[name] = undefined;\n            })\n                .remove();\n        });\n    };\n    Slider.prototype.renderSelection = function (container) {\n        var _a = this.attributes, x = _a.x, y = _a.y, type = _a.type, selectionType = _a.selectionType;\n        this.foregroundGroup = select(container).maybeAppendByClassName(CLASS_NAMES.foreground, 'g');\n        // value  slider \n        var selectionStyle = subStyleProps(this.attributes, 'selection');\n        var applyStyle = function (selection) {\n            return selection\n                .style('visibility', function (d) { return (d.show ? 'visible' : 'hidden'); })\n                .style('cursor', function (d) {\n                if (selectionType === 'select')\n                    return 'grab';\n                if (selectionType === 'invert')\n                    return 'crosshair';\n                return 'default';\n            })\n                .styles(__assign(__assign({}, selectionStyle), { transform: \"translate(\".concat(x, \", \").concat(y, \")\") }));\n        };\n        var that = this;\n        this.foregroundGroup\n            .selectAll(CLASS_NAMES.selection.class)\n            .data(type === 'value'\n            ? []\n            : this.calcSelectionArea().map(function (area, index) { return ({\n                style: __assign({}, area),\n                index: index,\n                // \n                show: selectionType === 'select' ? index === 1 : index !== 1,\n            }); }), function (d) { return d.index; })\n            .join(function (enter) {\n            return enter\n                .append('rect')\n                .attr('className', CLASS_NAMES.selection.name)\n                .call(applyStyle)\n                .each(function (datum, index) {\n                var _this = this;\n                if (index === 1) {\n                    that.selectionShape = select(this);\n                    // drag\n                    this.on('pointerdown', function (e) {\n                        _this.attr('cursor', 'grabbing');\n                        that.onDragStart('selection')(e);\n                    });\n                    // hover\n                    that.dispatchCustomEvent(this, 'pointerenter', 'selectionMouseenter');\n                    that.dispatchCustomEvent(this, 'pointerleave', 'selectionMouseleave');\n                    that.dispatchCustomEvent(this, 'click', 'selectionClick');\n                    // \n                    this.addEventListener('pointerdown', function () {\n                        _this.attr('cursor', 'grabbing');\n                    });\n                    this.addEventListener('pointerup', function () {\n                        _this.attr('cursor', 'pointer');\n                    });\n                    this.addEventListener('pointerover', function () {\n                        _this.attr('cursor', 'pointer');\n                    });\n                }\n                else {\n                    this.on('pointerdown', that.onDragStart('track'));\n                }\n            });\n        }, function (update) { return update.call(applyStyle); }, function (exit) { return exit.remove(); });\n        this.updateSelectionArea(false);\n        this.renderHandles();\n    };\n    Slider.prototype.render = function (attributes, container) {\n        this.renderTrack(container);\n        this.renderSparkline(container);\n        this.renderBrushArea(container);\n        this.renderSelection(container);\n    };\n    Slider.prototype.clampValues = function (values, precision) {\n        var _a;\n        if (precision === void 0) { precision = 4; }\n        var _b = __read(this.range, 2), min = _b[0], max = _b[1];\n        var _c = __read(this.getValues().map(function (num) { return toPrecision(num, precision); }), 2), prevStart = _c[0], prevEnd = _c[1];\n        var internalValues = Array.isArray(values) ? values : [prevStart, values !== null && values !== void 0 ? values : prevEnd];\n        var _d = __read((internalValues || [prevStart, prevEnd]).map(function (num) { return toPrecision(num, precision); }), 2), startVal = _d[0], endVal = _d[1];\n        if (this.attributes.type === 'value')\n            return [0, clamp(endVal, min, max)];\n        // startVal endVal\n        if (startVal > endVal) {\n            _a = __read([endVal, startVal], 2), startVal = _a[0], endVal = _a[1];\n        }\n        var range = endVal - startVal;\n        // \n        if (range > max - min)\n            return [min, max];\n        if (startVal < min) {\n            if (prevStart === min && prevEnd === endVal)\n                return [min, endVal];\n            return [min, range + min];\n        }\n        if (endVal > max) {\n            if (prevEnd === max && prevStart === startVal)\n                return [startVal, max];\n            return [max - range, max];\n        }\n        // \n        return [startVal, endVal];\n    };\n    /**\n     * \n     * \n     */\n    Slider.prototype.calcSelectionArea = function (values) {\n        var _a = __read(this.clampValues(values), 2), start = _a[0], end = _a[1];\n        var _b = this.availableSpace, x = _b.x, y = _b.y, width = _b.width, height = _b.height;\n        // \n        return this.getOrientVal([\n            [\n                { y: y, height: height, x: x, width: start * width },\n                { y: y, height: height, x: start * width + x, width: (end - start) * width },\n                { y: y, height: height, x: end * width, width: (1 - end) * width },\n            ],\n            [\n                { x: x, width: width, y: y, height: start * height },\n                { x: x, width: width, y: start * height + y, height: (end - start) * height },\n                { x: x, width: width, y: end * height, height: (1 - end) * height },\n            ],\n        ]);\n    };\n    /**\n     * x y\n     */\n    Slider.prototype.calcHandlePosition = function (handleType) {\n        var handleIconOffset = this.attributes.handleIconOffset;\n        var _a = this.availableSpace, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        var _b = __read(this.clampValues(), 2), stVal = _b[0], endVal = _b[1];\n        var offset = handleType === 'start' ? -handleIconOffset : handleIconOffset;\n        var L = (handleType === 'start' ? stVal : endVal) * this.getOrientVal([width, height]) + offset;\n        return {\n            x: x + this.getOrientVal([L, width / 2]),\n            y: y + this.getOrientVal([height / 2, L]),\n        };\n    };\n    Slider.prototype.inferTextStyle = function (handleType) {\n        var orientation = this.attributes.orientation;\n        if (orientation === 'horizontal')\n            return {};\n        if (handleType === 'start')\n            return { transformOrigin: 'left center', transform: 'rotate(90)', textAlign: 'start' };\n        if (handleType === 'end')\n            return { transformOrigin: 'right center', transform: 'rotate(90)', textAlign: 'end' };\n        return {};\n    };\n    /**\n     * \n     * @param handleType startend\n     * @returns\n     */\n    Slider.prototype.calcHandleText = function (handleType) {\n        var _a;\n        var _b = this.attributes, type = _b.type, orientation = _b.orientation, formatter = _b.formatter, autoFitLabel = _b.autoFitLabel;\n        var handleStyle = subStyleProps(this.attributes, 'handle');\n        var labelStyle = subStyleProps(handleStyle, 'label');\n        var spacing = handleStyle.spacing;\n        var size = this.getHandleSize();\n        var values = this.clampValues();\n        var value = handleType === 'start' ? values[0] : values[1];\n        var text = formatter(value);\n        var temp = new Text({\n            style: __assign(__assign(__assign({}, labelStyle), this.inferTextStyle(handleType)), { text: text }),\n        });\n        // \n        var _c = temp.getBBox(), textWidth = _c.width, textHeight = _c.height;\n        temp.destroy();\n        if (!autoFitLabel) {\n            if (type === 'value')\n                return { text: text, x: 0, y: -textHeight - spacing };\n            var finaleWidth = spacing + size + (orientation === 'horizontal' ? textWidth / 2 : 0);\n            return _a = { text: text }, _a[orientation === 'horizontal' ? 'x' : 'y'] = handleType === 'start' ? -finaleWidth : finaleWidth, _a;\n        }\n        var x = 0;\n        var y = 0;\n        // \n        var _d = this.availableSpace, iW = _d.width, iH = _d.height;\n        var _e = this.calcSelectionArea()[1], fX = _e.x, fY = _e.y, fW = _e.width, fH = _e.height;\n        var totalSpacing = spacing + size;\n        if (orientation === 'horizontal') {\n            var finalWidth = totalSpacing + textWidth / 2;\n            if (handleType === 'start') {\n                var left = fX - totalSpacing - textWidth;\n                x = left > 0 ? -finalWidth : finalWidth;\n            }\n            else {\n                var sign = iW - fX - fW - totalSpacing > textWidth;\n                x = sign ? finalWidth : -finalWidth;\n            }\n        }\n        else {\n            var positiveSize = totalSpacing;\n            var negativeSize = textHeight + totalSpacing;\n            if (handleType === 'start') {\n                y = fY - size > textHeight ? -negativeSize : positiveSize;\n            }\n            else {\n                y = iH - (fY + fH) - size > textHeight ? negativeSize : -positiveSize;\n            }\n        }\n        return { x: x, y: y, text: text };\n    };\n    Slider.prototype.getHandleLabelStyle = function (handleType) {\n        var style = subStyleProps(this.attributes, 'handleLabel');\n        return __assign(__assign(__assign({}, style), this.calcHandleText(handleType)), this.inferTextStyle(handleType));\n    };\n    Slider.prototype.getHandleIconStyle = function () {\n        var shape = this.attributes.handleIconShape;\n        var style = subStyleProps(this.attributes, 'handleIcon');\n        var cursor = this.getOrientVal(['ew-resize', 'ns-resize']);\n        var size = this.getHandleSize();\n        return __assign({ cursor: cursor, shape: shape, size: size }, style);\n    };\n    Slider.prototype.getHandleStyle = function (handleType) {\n        var _a = this.attributes, ox = _a.x, oy = _a.y, showLabel = _a.showLabel, showLabelOnInteraction = _a.showLabelOnInteraction, orientation = _a.orientation;\n        var _b = this.calcHandlePosition(handleType), x = _b.x, y = _b.y;\n        var textStyle = this.calcHandleText(handleType);\n        var internalShowLabel = showLabel;\n        if (!showLabel && showLabelOnInteraction) {\n            if (this.target)\n                internalShowLabel = true;\n            else\n                internalShowLabel = false;\n        }\n        return __assign(__assign(__assign({}, superStyleProps(this.getHandleIconStyle(), 'icon')), superStyleProps(__assign(__assign({}, this.getHandleLabelStyle(handleType)), textStyle), 'label')), { transform: \"translate(\".concat(x + ox, \", \").concat(y + oy, \")\"), orientation: orientation, showLabel: internalShowLabel, type: handleType, zIndex: 3 });\n    };\n    Slider.prototype.getHandleSize = function () {\n        var _a = this.attributes, size = _a.handleIconSize, width = _a.width, height = _a.height;\n        if (size)\n            return size;\n        //  size  height + 4  1/ 2.4\n        return Math.floor((this.getOrientVal([+height, +width]) + 4) / 2.4);\n    };\n    Slider.prototype.getOrientVal = function (_a) {\n        var _b = __read(_a, 2), x = _b[0], y = _b[1];\n        var orientation = this.attributes.orientation;\n        return orientation === 'horizontal' ? x : y;\n    };\n    Slider.prototype.setValuesOffset = function (stOffset, endOffset, animate) {\n        if (endOffset === void 0) { endOffset = 0; }\n        if (animate === void 0) { animate = false; }\n        var type = this.attributes.type;\n        var _a = __read(this.getValues(), 2), oldStartVal = _a[0], oldEndVal = _a[1];\n        var internalStartOffset = type === 'range' ? stOffset : 0;\n        var values = [oldStartVal + internalStartOffset, oldEndVal + endOffset].sort();\n        if (animate)\n            this.setValues(values);\n        else\n            this.innerSetValues(values, true);\n    };\n    Slider.prototype.getRatio = function (val) {\n        var _a = this.availableSpace, width = _a.width, height = _a.height;\n        return val / this.getOrientVal([width, height]);\n    };\n    Slider.prototype.dispatchCustomEvent = function (target, event, name) {\n        var _this = this;\n        target.on(event, function (e) {\n            e.stopPropagation();\n            _this.dispatchEvent(new CustomEvent(name, { detail: e }));\n        });\n    };\n    Slider.prototype.bindEvents = function () {\n        // scroll \n        this.addEventListener('wheel', this.onScroll);\n        var brushArea = this.brushArea;\n        this.dispatchCustomEvent(brushArea, 'click', 'trackClick');\n        this.dispatchCustomEvent(brushArea, 'pointerenter', 'trackMouseenter');\n        this.dispatchCustomEvent(brushArea, 'pointerleave', 'trackMouseleave');\n        // Drag and brush\n        brushArea.on('pointerdown', this.onDragStart('track'));\n    };\n    Slider.prototype.onScroll = function (event) {\n        var scrollable = this.attributes.scrollable;\n        if (scrollable) {\n            var deltaX = event.deltaX, deltaY = event.deltaY;\n            var offset = deltaY || deltaX;\n            var deltaVal = this.getRatio(offset);\n            this.setValuesOffset(deltaVal, deltaVal, true);\n        }\n    };\n    Slider.tag = 'slider';\n    return Slider;\n}(Component));\nexport { Slider };\n//# sourceMappingURL=index.js.map","import { __extends, __read, __rest } from \"tslib\";\nimport { Component } from '../../core';\nimport { BBox, classNames, ifShow, parseSeriesAttr, select, splitStyle } from '../../util';\nvar CLASS_NAMES = classNames({\n    text: 'text',\n}, 'title');\n/**\n * @example\n * lt -> ['l', 't']\n * left-top -> ['l', 't']\n * inner -> i\n */\nexport function parsePosition(position) {\n    if (!/\\S+-\\S+/g.test(position))\n        return position.length > 2 ? [position[0]] : position.split('');\n    return position.split('-').map(function (str) {\n        return str[0];\n    });\n}\n/**\n * calculate the actual bbox of the element with title\n * @example a legend with width x, height y, but the real bbox is x1 < x, y1 < y\n */\nexport function getBBox(title, content) {\n    var _a = title.attributes, position = _a.position, spacing = _a.spacing, inset = _a.inset, text = _a.text;\n    var titleBBox = title.getBBox();\n    var contentBBox = content.getBBox();\n    var pos = parsePosition(position);\n    var _b = __read(parseSeriesAttr(text ? spacing : 0), 4), spacingTop = _b[0], spacingRight = _b[1], spacingBottom = _b[2], spacingLeft = _b[3];\n    var _c = __read(parseSeriesAttr(inset), 4), insetTop = _c[0], insetRight = _c[1], insetBottom = _c[2], insetLeft = _c[3];\n    var _d = __read([spacingLeft + spacingRight, spacingTop + spacingBottom], 2), spacingWidth = _d[0], spacingHeight = _d[1];\n    var _e = __read([insetLeft + insetRight, insetTop + insetBottom], 2), insetWidth = _e[0], insetHeight = _e[1];\n    //  pos \n    // \n    if (pos[0] === 'l') {\n        return new BBox(titleBBox.x, titleBBox.y, contentBBox.width + titleBBox.width + spacingWidth + insetWidth, Math.max(contentBBox.height + insetHeight, titleBBox.height));\n    }\n    if (pos[0] === 't') {\n        return new BBox(titleBBox.x, titleBBox.y, Math.max(contentBBox.width + insetWidth, titleBBox.width), contentBBox.height + titleBBox.height + spacingHeight + insetHeight);\n    }\n    //  content.width, content.height \n    var _f = __read([\n        content.attributes.width || contentBBox.width,\n        content.attributes.height || contentBBox.height,\n    ], 2), contentWidth = _f[0], contentHeight = _f[1];\n    return new BBox(contentBBox.x, contentBBox.y, contentWidth + titleBBox.width + spacingWidth + insetWidth, contentHeight + titleBBox.height + spacingHeight + insetHeight);\n}\nfunction mayApplyStyle(el, style) {\n    var finalStyle = Object.entries(style).reduce(function (acc, _a) {\n        var _b = __read(_a, 2), key = _b[0], value = _b[1];\n        var currAttr = el.node().attr(key);\n        if (!currAttr)\n            acc[key] = value;\n        return acc;\n    }, {});\n    el.styles(finalStyle);\n}\nfunction getTitleLayout(cfg) {\n    var _a, _b, _c, _d;\n    var _e = cfg, width = _e.width, height = _e.height, position = _e.position;\n    var _f = __read([+width / 2, +height / 2], 2), hW = _f[0], hH = _f[1];\n    var _g = __read([+hW, +hH, 'center', 'middle'], 4), x = _g[0], y = _g[1], textAlign = _g[2], textBaseline = _g[3];\n    var pos = parsePosition(position);\n    if (pos.includes('l'))\n        _a = __read([0, 'start'], 2), x = _a[0], textAlign = _a[1];\n    if (pos.includes('r'))\n        _b = __read([+width, 'end'], 2), x = _b[0], textAlign = _b[1];\n    if (pos.includes('t'))\n        _c = __read([0, 'top'], 2), y = _c[0], textBaseline = _c[1];\n    if (pos.includes('b'))\n        _d = __read([+height, 'bottom'], 2), y = _d[0], textBaseline = _d[1];\n    return { x: x, y: y, textAlign: textAlign, textBaseline: textBaseline };\n}\nvar Title = /** @class */ (function (_super) {\n    __extends(Title, _super);\n    function Title(options) {\n        return _super.call(this, options, {\n            text: '',\n            width: 0,\n            height: 0,\n            fill: '#4a505a',\n            fontWeight: 'bold',\n            fontSize: 12,\n            fontFamily: 'sans-serif',\n            inset: 0,\n            spacing: 0,\n            position: 'top-left',\n        }) || this;\n    }\n    Title.prototype.getAvailableSpace = function () {\n        var container = this;\n        var _a = this.attributes, containerWidth = _a.width, containerHeight = _a.height, position = _a.position, spacing = _a.spacing, inset = _a.inset;\n        var title = container.querySelector(CLASS_NAMES.text.class);\n        if (!title)\n            return new BBox(0, 0, +containerWidth, +containerHeight);\n        var _b = title.getBBox(), titleWidth = _b.width, titleHeight = _b.height;\n        var _c = __read(parseSeriesAttr(spacing), 4), spacingTop = _c[0], spacingRight = _c[1], spacingBottom = _c[2], spacingLeft = _c[3];\n        var _d = __read([0, 0, +containerWidth, +containerHeight], 4), x = _d[0], y = _d[1], width = _d[2], height = _d[3];\n        var pos = parsePosition(position);\n        if (pos.includes('i'))\n            return new BBox(x, y, width, height);\n        pos.forEach(function (p, i) {\n            var _a, _b, _c, _d;\n            if (p === 't')\n                _a = __read(i === 0\n                    ? [titleHeight + spacingBottom, +containerHeight - titleHeight - spacingBottom]\n                    : [0, +containerHeight], 2), y = _a[0], height = _a[1];\n            if (p === 'r')\n                _b = __read([+containerWidth - titleWidth - spacingLeft], 1), width = _b[0];\n            if (p === 'b')\n                _c = __read([+containerHeight - titleHeight - spacingTop], 1), height = _c[0];\n            if (p === 'l')\n                _d = __read(i === 0 ? [titleWidth + spacingRight, +containerWidth - titleWidth - spacingRight] : [0, +containerWidth], 2), x = _d[0], width = _d[1];\n        });\n        var _e = __read(parseSeriesAttr(inset), 4), insetTop = _e[0], insetRight = _e[1], insetBottom = _e[2], insetLeft = _e[3];\n        var _f = __read([insetLeft + insetRight, insetTop + insetBottom], 2), insetWidth = _f[0], insetHeight = _f[1];\n        return new BBox(x + insetLeft, y + insetTop, width - insetWidth, height - insetHeight);\n    };\n    Title.prototype.getBBox = function () {\n        if (this.title)\n            return this.title.getBBox();\n        return new BBox(0, 0, 0, 0);\n    };\n    Title.prototype.render = function (attributes, container) {\n        var _this = this;\n        var width = attributes.width, height = attributes.height, position = attributes.position, spacing = attributes.spacing, restStyle = __rest(attributes, [\"width\", \"height\", \"position\", \"spacing\"]);\n        var _a = __read(splitStyle(restStyle), 1), titleStyle = _a[0];\n        var _b = getTitleLayout(attributes), x = _b.x, y = _b.y, textAlign = _b.textAlign, textBaseline = _b.textBaseline;\n        ifShow(!!restStyle.text, select(container), function (group) {\n            _this.title = group\n                .maybeAppendByClassName(CLASS_NAMES.text, 'text')\n                .styles(titleStyle)\n                .call(mayApplyStyle, { x: x, y: y, textAlign: textAlign, textBaseline: textBaseline })\n                .node();\n        });\n    };\n    return Title;\n}(Component));\nexport { Title };\n//# sourceMappingURL=index.js.map","/**\n * Create DOM from a html string.\n * @param str\n * @returns\n */\nexport function createDOM(str) {\n    var container = document.createElement('div');\n    container.innerHTML = str;\n    var dom = container.childNodes[0];\n    if (dom && container.contains(dom)) {\n        container.removeChild(dom);\n    }\n    return dom;\n}\n//# sourceMappingURL=create-dom.js.map","function substitute(str, o) {\n    if (!str || !o) {\n        return str;\n    }\n    return str.replace(/\\\\?\\{([^{}]+)\\}/g, function (match, name) {\n        if (match.charAt(0) === '\\\\') {\n            return match.slice(1);\n        }\n        return o[name] === undefined ? '' : o[name];\n    });\n}\nexport default substitute;\n//# sourceMappingURL=substitute.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var replaceChildren = function (el, content) {\n    if (content == null) {\n        el.innerHTML = '';\n        return;\n    }\n    if (el.replaceChildren) {\n        if (Array.isArray(content)) {\n            el.replaceChildren.apply(el, __spreadArray([], __read(content), false));\n        }\n        else {\n            el.replaceChildren(content);\n        }\n    }\n    else {\n        el.innerHTML = '';\n        if (Array.isArray(content)) {\n            content.forEach(function (child) { return el.appendChild(child); });\n        }\n        else {\n            el.appendChild(content);\n        }\n    }\n};\n//# sourceMappingURL=replace-children.js.map","import { __assign } from \"tslib\";\nexport function getClassNames(prefixCls) {\n    if (prefixCls === void 0) { prefixCls = ''; }\n    return {\n        CONTAINER: \"\".concat(prefixCls, \"tooltip\"),\n        TITLE: \"\".concat(prefixCls, \"tooltip-title\"),\n        LIST: \"\".concat(prefixCls, \"tooltip-list\"),\n        LIST_ITEM: \"\".concat(prefixCls, \"tooltip-list-item\"),\n        NAME: \"\".concat(prefixCls, \"tooltip-list-item-name\"),\n        MARKER: \"\".concat(prefixCls, \"tooltip-list-item-marker\"),\n        NAME_LABEL: \"\".concat(prefixCls, \"tooltip-list-item-name-label\"),\n        VALUE: \"\".concat(prefixCls, \"tooltip-list-item-value\"),\n        CROSSHAIR_X: \"\".concat(prefixCls, \"tooltip-crosshair-x\"),\n        CROSSHAIR_Y: \"\".concat(prefixCls, \"tooltip-crosshair-y\"),\n    };\n}\nvar TEXT_OVERFLOW_STYLE = {\n    overflow: 'hidden',\n    'white-space': 'nowrap',\n    'text-overflow': 'ellipsis',\n};\nexport function getDefaultTooltipStyle(prefixCls) {\n    var _a;\n    if (prefixCls === void 0) { prefixCls = ''; }\n    var CLASS_NAME = getClassNames(prefixCls);\n    return _a = {},\n        _a[\".\".concat(CLASS_NAME.CONTAINER)] = {\n            position: 'absolute',\n            visibility: 'visible',\n            // 'white-space': 'nowrap',\n            'z-index': 8,\n            transition: 'visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), ' +\n                'left 0.4s cubic-bezier(0.23, 1, 0.32, 1), ' +\n                'top 0.4s cubic-bezier(0.23, 1, 0.32, 1)',\n            'background-color': 'rgba(255, 255, 255, 0.96)',\n            'box-shadow': '0 6px 12px 0 rgba(0, 0, 0, 0.12)',\n            'border-radius': '4px',\n            color: 'rgba(0, 0, 0, 0.65)',\n            'font-size': '12px',\n            // 'font-family': ,\n            'line-height': '20px',\n            padding: '12px',\n            'min-width': '120px',\n            'max-width': '360px',\n            'font-family': 'Roboto-Regular',\n        },\n        _a[\".\".concat(CLASS_NAME.TITLE)] = {\n            color: 'rgba(0, 0, 0, 0.45)',\n        },\n        _a[\".\".concat(CLASS_NAME.LIST)] = {\n            margin: '0px',\n            'list-style-type': 'none',\n            padding: '0px',\n        },\n        _a[\".\".concat(CLASS_NAME.LIST_ITEM)] = {\n            'list-style-type': 'none',\n            display: 'flex',\n            'line-height': '2em',\n            'align-items': 'center',\n            'justify-content': 'space-between',\n            'white-space': 'nowrap',\n        },\n        _a[\".\".concat(CLASS_NAME.MARKER)] = {\n            width: '8px',\n            height: '8px',\n            'border-radius': '50%',\n            display: 'inline-block',\n            'margin-right': '4px',\n        },\n        _a[\".\".concat(CLASS_NAME.NAME)] = {\n            display: 'flex',\n            'align-items': 'center',\n            'max-width': '216px',\n        },\n        _a[\".\".concat(CLASS_NAME.NAME_LABEL)] = __assign({ flex: 1 }, TEXT_OVERFLOW_STYLE),\n        _a[\".\".concat(CLASS_NAME.VALUE)] = __assign({ display: 'inline-block', float: 'right', flex: 1, 'text-align': 'right', 'min-width': '28px', 'margin-left': '30px', color: 'rgba(0, 0, 0, 0.85)' }, TEXT_OVERFLOW_STYLE),\n        _a[\".\".concat(CLASS_NAME.CROSSHAIR_X)] = {\n            position: 'absolute',\n            width: '1px',\n            'background-color': 'rgba(0, 0, 0, 0.25)',\n        },\n        _a[\".\".concat(CLASS_NAME.CROSSHAIR_Y)] = {\n            position: 'absolute',\n            height: '1px',\n            'background-color': 'rgba(0, 0, 0, 0.25)',\n        },\n        _a;\n}\n//# sourceMappingURL=constant.js.map","import { __assign, __extends, __read, __rest } from \"tslib\";\nimport { substitute, createDOM } from '@antv/util';\nimport { Component } from '../../core';\nimport { BBox, applyStyleSheet, replaceChildren } from '../../util';\nimport { getClassNames, getDefaultTooltipStyle } from './constant';\nvar Tooltip = /** @class */ (function (_super) {\n    __extends(Tooltip, _super);\n    function Tooltip(options) {\n        var _this = this;\n        var _a, _b;\n        var prefixCls = (_b = (_a = options.style) === null || _a === void 0 ? void 0 : _a.template) === null || _b === void 0 ? void 0 : _b.prefixCls;\n        var CLASS_NAME = getClassNames(prefixCls);\n        _this = _super.call(this, options, {\n            data: [],\n            x: 0,\n            y: 0,\n            visibility: 'visible',\n            title: '',\n            position: 'bottom-right',\n            offset: [5, 5],\n            enterable: false,\n            container: {\n                x: 0,\n                y: 0,\n            },\n            bounding: null,\n            template: {\n                prefixCls: '',\n                container: \"<div class=\\\"\".concat(CLASS_NAME.CONTAINER, \"\\\"></div>\"),\n                title: \"<div class=\\\"\".concat(CLASS_NAME.TITLE, \"\\\"></div>\"),\n                item: \"<li class=\\\"\".concat(CLASS_NAME.LIST_ITEM, \"\\\" data-index={index}>\\n        <span class=\\\"\").concat(CLASS_NAME.NAME, \"\\\">\\n          <span class=\\\"\").concat(CLASS_NAME.MARKER, \"\\\" style=\\\"background:{color}\\\"></span>\\n          <span class=\\\"\").concat(CLASS_NAME.NAME_LABEL, \"\\\" title=\\\"{name}\\\">{name}</span>\\n        </span>\\n        <span class=\\\"\").concat(CLASS_NAME.VALUE, \"\\\" title=\\\"{value}\\\">{value}</span>\\n      </li>\"),\n            },\n            style: getDefaultTooltipStyle(prefixCls),\n        }) || this;\n        _this.timestamp = -1;\n        _this.prevCustomContentKey = _this.attributes.contentKey;\n        _this.initShape();\n        _this.render(_this.attributes, _this);\n        return _this;\n    }\n    Object.defineProperty(Tooltip.prototype, \"HTMLTooltipElement\", {\n        get: function () {\n            return this.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Tooltip.prototype.getContainer = function () {\n        return this.element;\n    };\n    Object.defineProperty(Tooltip.prototype, \"elementSize\", {\n        get: function () {\n            var width = this.element.offsetWidth;\n            var height = this.element.offsetHeight;\n            return { width: width, height: height };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Tooltip.prototype, \"HTMLTooltipItemsElements\", {\n        get: function () {\n            var _a = this.attributes, data = _a.data, template = _a.template;\n            return data.map(function (_a, idx) {\n                var _b = _a.name, name = _b === void 0 ? '' : _b, _c = _a.color, color = _c === void 0 ? 'black' : _c, index = _a.index, rest = __rest(_a, [\"name\", \"color\", \"index\"]);\n                var datum = __assign({ name: name, color: color, index: index !== null && index !== void 0 ? index : idx }, rest);\n                return createDOM(substitute(template.item, datum));\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Tooltip.prototype.render = function (attributes, container) {\n        this.renderHTMLTooltipElement();\n        this.updatePosition();\n    };\n    Tooltip.prototype.destroy = function () {\n        var _a;\n        (_a = this.element) === null || _a === void 0 ? void 0 : _a.remove();\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * \n     */\n    Tooltip.prototype.show = function (x, y) {\n        var _this = this;\n        if (x !== undefined && y !== undefined) {\n            var isToggle = this.element.style.visibility === 'hidden';\n            var setPosition = function () {\n                _this.attributes.x = x !== null && x !== void 0 ? x : _this.attributes.x;\n                _this.attributes.y = y !== null && y !== void 0 ? y : _this.attributes.y;\n                _this.updatePosition();\n            };\n            //  hidden  visible \n            isToggle ? this.closeTransition(setPosition) : setPosition();\n        }\n        this.element.style.visibility = 'visible';\n    };\n    /**\n     *  hide  tooltip \n     *  enterable = true  x y x y\n     * @param x\n     * @param y\n     * @returns\n     */\n    Tooltip.prototype.hide = function (x, y) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        var enterable = this.attributes.enterable;\n        //  tooltip \n        if (enterable && this.isCursorEntered(x, y))\n            return;\n        this.element.style.visibility = 'hidden';\n    };\n    /**\n     * \n     */\n    Tooltip.prototype.initShape = function () {\n        var template = this.attributes.template;\n        this.element = createDOM(template.container);\n        if (this.id)\n            this.element.setAttribute('id', this.id);\n    };\n    Tooltip.prototype.renderCustomContent = function () {\n        if (this.prevCustomContentKey !== undefined && this.prevCustomContentKey === this.attributes.contentKey)\n            return;\n        this.prevCustomContentKey = this.attributes.contentKey;\n        var content = this.attributes.content;\n        if (!content)\n            return;\n        if (typeof content === 'string')\n            this.element.innerHTML = content;\n        else\n            replaceChildren(this.element, content);\n    };\n    /**\n     *  HTML \n     */\n    Tooltip.prototype.renderHTMLTooltipElement = function () {\n        var _a, _b;\n        var _c = this.attributes, template = _c.template, title = _c.title, enterable = _c.enterable, style = _c.style, content = _c.content;\n        var CLASS_NAME = getClassNames(template.prefixCls);\n        var container = this.element;\n        this.element.style.pointerEvents = enterable ? 'auto' : 'none';\n        if (content)\n            this.renderCustomContent();\n        else {\n            if (title) {\n                container.innerHTML = template.title;\n                container.getElementsByClassName(CLASS_NAME.TITLE)[0].innerHTML = title;\n            }\n            else\n                (_b = (_a = container.getElementsByClassName(CLASS_NAME.TITLE)) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.remove();\n            var itemsElements = this.HTMLTooltipItemsElements;\n            var ul = document.createElement('ul');\n            ul.className = CLASS_NAME.LIST;\n            replaceChildren(ul, itemsElements);\n            var list = this.element.querySelector(\".\".concat(CLASS_NAME.LIST));\n            if (list)\n                list.replaceWith(ul);\n            else\n                container.appendChild(ul);\n        }\n        applyStyleSheet(container, style);\n    };\n    /**\n     *  position  tooltip \n     * @param assignPosition {TooltipPosition} tooltip\n     */\n    Tooltip.prototype.getRelativeOffsetFromCursor = function (assignPosition) {\n        var _a = this.attributes, position = _a.position, offset = _a.offset;\n        var interPosition = assignPosition || position;\n        var finalPosition = interPosition.split('-');\n        var positionScore = { left: [-1, 0], right: [1, 0], top: [0, -1], bottom: [0, 1] };\n        var _b = this.elementSize, width = _b.width, height = _b.height;\n        var absolutelyOffset = [-width / 2, -height / 2];\n        finalPosition.forEach(function (pos) {\n            var _a = __read(absolutelyOffset, 2), abs1 = _a[0], abs2 = _a[1];\n            var _b = __read(positionScore[pos], 2), pos1 = _b[0], pos2 = _b[1];\n            absolutelyOffset = [abs1 + (width / 2 + offset[0]) * pos1, abs2 + (height / 2 + offset[1]) * pos2];\n        });\n        return absolutelyOffset;\n    };\n    /**\n     * dom\n     */\n    Tooltip.prototype.setOffsetPosition = function (_a) {\n        var _b = __read(_a, 2), offsetX = _b[0], offsetY = _b[1];\n        var _c = this.attributes, _d = _c.x, x = _d === void 0 ? 0 : _d, _e = _c.y, y = _e === void 0 ? 0 : _e, _f = _c.container, cx = _f.x, cy = _f.y;\n        this.element.style.left = \"\".concat(+x + cx + offsetX, \"px\");\n        this.element.style.top = \"\".concat(+y + cy + offsetY, \"px\");\n    };\n    /**\n     * tooltip\n     */\n    Tooltip.prototype.updatePosition = function () {\n        var _a = this.attributes.showDelay, showDelay = _a === void 0 ? 60 : _a;\n        var currentTimestamp = Date.now();\n        if (this.timestamp > 0 && currentTimestamp - this.timestamp < showDelay)\n            return;\n        this.timestamp = currentTimestamp;\n        //  position \n        //  position\n        /**\n         * \n         *    \n         * \n         *    \n         * \n         */\n        this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor()));\n    };\n    /**\n     * \n     * @param offsetX position\n     * @param offsetY position\n     */\n    Tooltip.prototype.autoPosition = function (_a) {\n        var _b = __read(_a, 2), offsetX = _b[0], offsetY = _b[1];\n        var _c = this.attributes, cursorX = _c.x, cursorY = _c.y, bounding = _c.bounding, position = _c.position;\n        //  bounds\n        if (!bounding)\n            return [offsetX, offsetY];\n        // \n        var _d = this.element, offsetWidth = _d.offsetWidth, offsetHeight = _d.offsetHeight;\n        // \n        var _e = __read([+cursorX + offsetX, +cursorY + offsetY], 2), expectLeft = _e[0], expectTop = _e[1];\n        // \n        var inversion = {\n            left: 'right',\n            right: 'left',\n            top: 'bottom',\n            bottom: 'top',\n        };\n        // \n        var boundingX = bounding.x, boundingY = bounding.y, boundingWidth = bounding.width, boundingHeight = bounding.height;\n        var edgeCompare = {\n            left: expectLeft < boundingX,\n            right: expectLeft + offsetWidth > boundingX + boundingWidth,\n            top: expectTop < boundingY,\n            bottom: expectTop + offsetHeight > boundingY + boundingHeight,\n        };\n        // \n        var correctivePosition = [];\n        // \n        position.split('-').forEach(function (pos) {\n            // \n            if (edgeCompare[pos])\n                correctivePosition.push(inversion[pos]);\n            else\n                correctivePosition.push(pos);\n        });\n        var correctedPositionString = correctivePosition.join('-');\n        return this.getRelativeOffsetFromCursor(correctedPositionString);\n    };\n    Tooltip.prototype.isCursorEntered = function (clientX, clientY) {\n        //  tooltip dom \n        if (this.element) {\n            var _a = this.element.getBoundingClientRect(), x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n            // const { container } = this.attributes;\n            // const { x: cx, y: cy } = container;\n            // console.log(1113, [clientX, clientY], [x, y, width, height], [cx, cy], new BBox(x - cx, y - cy, width, height).isPointIn(cursorX, cursorY));\n            return new BBox(x, y, width, height).isPointIn(clientX, clientY);\n        }\n        return false;\n    };\n    Tooltip.prototype.closeTransition = function (callback) {\n        var _this = this;\n        var transition = this.element.style.transition;\n        this.element.style.transition = 'none';\n        callback();\n        setTimeout(function () {\n            _this.element.style.transition = transition;\n        }, 10);\n    };\n    Tooltip.tag = 'tooltip';\n    return Tooltip;\n}(Component));\nexport { Tooltip };\n//# sourceMappingURL=index.js.map","import { __read } from \"tslib\";\nvar BBox = /** @class */ (function () {\n    function BBox(x, y, width, height) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        if (width === void 0) { width = 0; }\n        if (height === void 0) { height = 0; }\n        this.x = 0;\n        this.y = 0;\n        this.width = 0;\n        this.height = 0;\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    Object.defineProperty(BBox.prototype, \"bottom\", {\n        get: function () {\n            return this.y + this.height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"left\", {\n        get: function () {\n            return this.x;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"right\", {\n        get: function () {\n            return this.x + this.width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BBox.prototype, \"top\", {\n        get: function () {\n            return this.y;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BBox.fromRect = function (other) {\n        return new BBox(other.x, other.y, other.width, other.height);\n    };\n    BBox.prototype.toJSON = function () {\n        return {\n            x: this.x,\n            y: this.y,\n            width: this.width,\n            height: this.height,\n            top: this.top,\n            right: this.right,\n            bottom: this.bottom,\n            left: this.left,\n        };\n    };\n    /**\n     *  bbox \n     * @param p\n     */\n    BBox.prototype.isPointIn = function (x, y) {\n        return x >= this.left && x <= this.right && y >= this.top && y <= this.bottom;\n    };\n    return BBox;\n}());\nexport { BBox };\nexport function getRenderBBox(element) {\n    var _a = element.getRenderBounds(), _b = __read(_a.min, 2), minX = _b[0], minY = _b[1], _c = __read(_a.max, 2), maxX = _c[0], maxY = _c[1];\n    var width = maxX - minX;\n    var height = maxY - minY;\n    return new BBox(minX, minY, width, height);\n}\n//# sourceMappingURL=bbox.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { isFunction } from '@antv/util';\nexport function getCallbackValue(value, params) {\n    return isFunction(value) ? value.apply(void 0, __spreadArray([], __read(params), false)) : value;\n}\n//# sourceMappingURL=callback.js.map","import { __read } from \"tslib\";\nexport var classNames = function (cls, prefix) {\n    var PREFIX = function (str) { return \"\".concat(prefix, \"-\").concat(str); };\n    var obj = Object.fromEntries(Object.entries(cls).map(function (_a) {\n        var _b = __read(_a, 2), k = _b[0], v = _b[1];\n        var name = PREFIX(v);\n        return [\n            k,\n            {\n                name: name,\n                class: \".\".concat(name),\n                id: \"#\".concat(name),\n                toString: function () {\n                    return name;\n                },\n            },\n        ];\n    }));\n    Object.assign(obj, { prefix: PREFIX });\n    return obj;\n};\n//# sourceMappingURL=classnames.js.map","import { __read } from \"tslib\";\nimport { isPlainObject, isArray } from '@antv/util';\nvar MAX_MIX_LEVEL = 5;\nvar deep = function (dist, src, level, maxLevel) {\n    if (level === void 0) { level = 0; }\n    if (maxLevel === void 0) { maxLevel = MAX_MIX_LEVEL; }\n    Object.entries(src).forEach(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], value = _b[1];\n        var res = dist;\n        if (Object.prototype.hasOwnProperty.call(src, key)) {\n            if (!value) {\n                // null  undefined \n                res[key] = value;\n            }\n            else if (isPlainObject(value)) {\n                if (!isPlainObject(dist[key])) {\n                    res[key] = {};\n                }\n                if (level < maxLevel) {\n                    deep(dist[key], value, level + 1, maxLevel);\n                }\n                else {\n                    // \n                    res[key] = src[key];\n                }\n            }\n            else if (isArray(value)) {\n                res[key] = [];\n                res[key] = res[key].concat(value);\n            }\n            else {\n                res[key] = value;\n            }\n        }\n    });\n};\nexport var deepAssign = function (rst) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    for (var i = 0; i < args.length; i += 1) {\n        deep(rst, args[i]);\n    }\n    return rst;\n};\n//# sourceMappingURL=deep-assign.js.map","import { applyToText } from './text';\nexport function ellipsisIt(node, w, suffix) {\n    if (suffix === void 0) { suffix = '...'; }\n    applyToText(node, { wordWrap: true, wordWrapWidth: w, maxLines: 1, textOverflow: suffix });\n}\n//# sourceMappingURL=ellipsis.js.map","/**\n * \n */\nexport function getEventPos(e) {\n    var canvas = e.canvas, touches = e.touches, offsetX = e.offsetX, offsetY = e.offsetY;\n    if (canvas) {\n        var x = canvas.x, y = canvas.y;\n        return [x, y];\n    }\n    if (touches) {\n        var _a = touches[0], clientX = _a.clientX, clientY = _a.clientY;\n        return [clientX, clientY];\n    }\n    if (offsetX && offsetY)\n        return [offsetX, offsetY];\n    return [0, 0];\n}\n//# sourceMappingURL=event.js.map","import { isNumber, isString } from '@antv/util';\nimport { Text } from '../shapes';\nexport function renderExtDo(el) {\n    if (typeof el === 'function')\n        return el();\n    return isString(el) || isNumber(el) ? new Text({ style: { text: String(el) } }) : el;\n}\n//# sourceMappingURL=extend-display-object.js.map","export function ifShow(show, container, creator, removeChildren, removeHandler) {\n    if (removeChildren === void 0) { removeChildren = true; }\n    if (removeHandler === void 0) { removeHandler = function (g) {\n        g.node().removeChildren();\n    }; }\n    if (show) {\n        return creator(container);\n    }\n    if (removeChildren)\n        removeHandler(container);\n    return null;\n}\n//# sourceMappingURL=if-show.js.map","import { __read } from \"tslib\";\n/**\n * @param vec\n * @param s\n */\nexport function scale(vec, s) {\n    return [vec[0] * s, vec[1] * s];\n}\nexport function add(vec1, vec2) {\n    return [vec1[0] + vec2[0], vec1[1] + vec2[1]];\n}\nexport function sub(vec1, vec2) {\n    return [vec1[0] - vec2[0], vec1[1] - vec2[1]];\n}\nexport function min(vec1, vec2) {\n    return [Math.min(vec1[0], vec2[0]), Math.min(vec1[1], vec2[1])];\n}\nexport function max(vec1, vec2) {\n    return [Math.max(vec1[0], vec2[0]), Math.max(vec1[1], vec2[1])];\n}\nexport function distance(vec1, vec2) {\n    return Math.sqrt(Math.pow((vec1[0] - vec2[0]), 2) + Math.pow((vec1[1] - vec2[1]), 2));\n}\nexport function normalize(vec) {\n    if (vec[0] === 0 && vec[1] === 0)\n        return [0, 0];\n    var len = Math.sqrt(Math.pow(vec[0], 2) + Math.pow(vec[1], 2));\n    return [vec[0] / len, vec[1] / len];\n}\n/**\n * \n * @param vec\n * @param origin \n * @param angle \n */\nexport function rotate(vec, origin, angle) {\n    var _a = __read(vec, 2), x = _a[0], y = _a[1];\n    var _b = __read(origin, 2), ox = _b[0], oy = _b[1];\n    var dx = x - ox;\n    var dy = y - oy;\n    var sin = Math.sin(angle);\n    var cos = Math.cos(angle);\n    return [dx * cos - dy * sin + ox, dx * sin + dy * cos + oy];\n}\nexport function vertical(vec, flag) {\n    return flag ? [vec[1], -vec[0]] : [-vec[1], vec[0]];\n}\n//# sourceMappingURL=matrix.js.map","/**\n * x\n */\nexport function toPrecision(num, precision) {\n    return +num.toPrecision(precision);\n}\n/**\n * \n * 100000 -> 10,000\n */\nexport function toThousands(num) {\n    return num.toLocaleString();\n}\n/**\n * \n * 1000000 = 1e6\n */\nexport function toScientificNotation(num) {\n    return num.toExponential();\n}\n/**\n * k\n * 1234 -> 1K\n * 12345 -> 12K\n */\nexport function toKNotation(num, precision) {\n    if (precision === void 0) { precision = 0; }\n    if (Math.abs(num) < 1000)\n        return String(num);\n    return \"\".concat(toPrecision(num / 1000, precision).toLocaleString(), \"K\");\n}\n// Condition if x is smaller than zero.\nexport var ifNegative = function (x, a, b) { return (x < 0 && Number.isFinite(x) ? a : b); };\n// Condition if x is greater than zero.\nexport var ifPositive = function (x, a, b) { return (x > 0 && Number.isFinite(x) ? a : b); };\n// Calculate the result of  a * b.\nexport var multi = function (a, b) { return a * b; };\n// Calculate the result of  (a + b) / 2.\nexport var mid = function (a, b) { return a / 2 + (b || 0) / 2; };\n//# sourceMappingURL=number.js.map","import { __extends, __read, __spreadArray } from \"tslib\";\nimport { ElementEvent } from '@antv/g';\nimport { Group } from '../shapes/Group';\nimport { hide } from './visibility';\nvar OffscreenGroup = /** @class */ (function (_super) {\n    __extends(OffscreenGroup, _super);\n    function OffscreenGroup() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var _this = _super.apply(this, __spreadArray([], __read(args), false)) || this;\n        _this.isMutationObserved = true;\n        _this.addEventListener(ElementEvent.INSERTED, function () {\n            hide(_this);\n        });\n        return _this;\n    }\n    return OffscreenGroup;\n}(Group));\nexport function createOffscreenGroup(container) {\n    var group = container.appendChild(new OffscreenGroup({\n        class: 'offscreen',\n    }));\n    hide(group);\n    return group;\n}\nexport function isInOffscreenGroup(group) {\n    var ancestor = group;\n    while (ancestor) {\n        if (ancestor.className === 'offscreen') {\n            return true;\n        }\n        ancestor = ancestor.parent;\n    }\n    return false;\n}\n//# sourceMappingURL=offscreen.js.map","/**\n * scale a shape to a given size\n */\nexport function scaleToPixel(el, size, applyScale) {\n    if (applyScale === void 0) { applyScale = false; }\n    var _a = el.getBBox(), width = _a.width, height = _a.height;\n    var scale = size / Math.max(width, height);\n    if (applyScale) {\n        el.style.transform = \"scale(\".concat(scale, \")\");\n    }\n    return scale;\n}\n//# sourceMappingURL=scale-to-pixel.js.map","import { __classPrivateFieldGet, __read, __spreadArray, __values } from \"tslib\";\nimport { Circle, Ellipse, Group, HTML, Image, Line, Path, Polygon, Polyline, Rect, Text } from '../shapes';\nimport { group } from './group';\nfunction error(msg) {\n    throw new Error(msg);\n}\n/**\n * A simple implementation of d3-selection for @antv/g.\n * It has the core features of d3-selection and extended ability.\n * Every methods of selection returns new selection if elements\n * are mutated(e.g. append, remove), otherwise return the selection itself(e.g. attr, style).\n * @see https://github.com/d3/d3-selection\n * @see https://github.com/antvis/g\n * @todo Nested selections.\n * @todo More useful functor.\n */\nvar Selection = /** @class */ (function () {\n    function Selection(elements, data, parent, document, selections, transitions, updateElements) {\n        if (elements === void 0) { elements = null; }\n        if (data === void 0) { data = null; }\n        if (parent === void 0) { parent = null; }\n        if (document === void 0) { document = null; }\n        if (selections === void 0) { selections = [null, null, null, null, null]; }\n        if (transitions === void 0) { transitions = []; }\n        if (updateElements === void 0) { updateElements = []; }\n        _Selection_instances.add(this);\n        this._elements = Array.from(elements);\n        this._data = data;\n        this._parent = parent;\n        this._document = document;\n        this._enter = selections[0];\n        this._update = selections[1];\n        this._exit = selections[2];\n        this._merge = selections[3];\n        this._split = selections[4];\n        this._transitions = transitions;\n        this._facetElements = updateElements;\n    }\n    Selection.prototype.selectAll = function (selector) {\n        var elements = typeof selector === 'string' ? this._parent.querySelectorAll(selector) : selector;\n        return new _a(elements, null, this._elements[0], this._document);\n    };\n    Selection.prototype.selectFacetAll = function (selector) {\n        var elements = typeof selector === 'string' ? this._parent.querySelectorAll(selector) : selector;\n        return new _a(this._elements, null, this._parent, this._document, undefined, undefined, elements);\n    };\n    /**\n     * @todo Replace with querySelector which has bug now.\n     */\n    Selection.prototype.select = function (selector) {\n        var element = typeof selector === 'string' ? this._parent.querySelectorAll(selector)[0] || null : selector;\n        return new _a([element], null, element, this._document);\n    };\n    Selection.prototype.append = function (node) {\n        var _this = this;\n        var callback = typeof node === 'function' ? node : function () { return _this.createElement(node); };\n        var elements = [];\n        if (this._data !== null) {\n            // For empty selection, append new element to parent.\n            // Each element is bind with datum.\n            for (var i = 0; i < this._data.length; i++) {\n                var d = this._data[i];\n                var _b = __read(Array.isArray(d) ? d : [d, null], 2), datum = _b[0], from = _b[1];\n                var newElement = callback(datum, i);\n                newElement.__data__ = datum;\n                if (from !== null)\n                    newElement.__fromElements__ = from;\n                this._parent.appendChild(newElement);\n                elements.push(newElement);\n            }\n            return new _a(elements, null, this._parent, this._document);\n        }\n        // For non-empty selection, append new element to\n        // selected element and return new selection.\n        for (var i = 0; i < this._elements.length; i++) {\n            var element = this._elements[i];\n            var datum = element.__data__;\n            var newElement = callback(datum, i);\n            element.appendChild(newElement);\n            elements.push(newElement);\n        }\n        return new _a(elements, null, elements[0], this._document);\n    };\n    Selection.prototype.maybeAppend = function (id, node) {\n        var element = __classPrivateFieldGet(this, _Selection_instances, \"m\", _Selection_maybeAppend).call(this, id[0] === '#' ? id : \"#\".concat(id), node);\n        element.attr('id', id);\n        return element;\n    };\n    Selection.prototype.maybeAppendByClassName = function (className, node) {\n        var cls = className.toString();\n        var element = __classPrivateFieldGet(this, _Selection_instances, \"m\", _Selection_maybeAppend).call(this, cls[0] === '.' ? cls : \".\".concat(cls), node);\n        element.attr('className', cls);\n        return element;\n    };\n    Selection.prototype.maybeAppendByName = function (name, node) {\n        var element = __classPrivateFieldGet(this, _Selection_instances, \"m\", _Selection_maybeAppend).call(this, \"[name=\\\"\".concat(name, \"\\\"]\"), node);\n        element.attr('name', name);\n        return element;\n    };\n    /**\n     * Bind data to elements, and produce three selection:\n     * Enter: Selection with empty elements and data to be bind to elements.\n     * Update: Selection with elements to be updated.\n     * Exit: Selection with elements to be removed.\n     */\n    Selection.prototype.data = function (data, id, groupId) {\n        var e_1, _b;\n        if (id === void 0) { id = function (d) { return d; }; }\n        if (groupId === void 0) { groupId = function () { return null; }; }\n        // An Array of new data.\n        var enter = [];\n        // An Array of elements to be updated.\n        var update = [];\n        // A Set of elements to be removed.\n        var exit = new Set(this._elements);\n        // An Array of data to be merged into one element.\n        var merge = [];\n        // A Set of elements to be split into multiple datum.\n        var split = new Set();\n        // A Map from key to each element.\n        var keyElement = new Map(this._elements.map(function (d, i) { return [id(d.__data__, i), d]; }));\n        // A Map from key to exist element. The Update Selection\n        // can get element from this map, this is for diff among\n        // facets.\n        var keyUpdateElement = new Map(this._facetElements.map(function (d, i) { return [id(d.__data__, i), d]; }));\n        // A Map from groupKey to a group of elements.\n        var groupKeyElements = group(this._elements, function (d) { return groupId(d.__data__); });\n        // Diff data with selection(elements with data).\n        // !!! Note\n        // The switch is strictly ordered, not not change the order of them.\n        for (var i = 0; i < data.length; i++) {\n            var datum = data[i];\n            var key = id(datum, i);\n            var groupKey = groupId(datum, i);\n            // Append element to update selection if incoming data has\n            // exactly the same key with elements.\n            if (keyElement.has(key)) {\n                var element = keyElement.get(key);\n                element.__data__ = datum;\n                element.__facet__ = false;\n                update.push(element);\n                exit.delete(element);\n                keyElement.delete(key);\n                // Append element to update selection if incoming data has\n                // exactly the same key with updateElements.\n            }\n            else if (keyUpdateElement.has(key)) {\n                var element = keyUpdateElement.get(key);\n                element.__data__ = datum;\n                // Flag this element should update its parentNode.\n                element.__facet__ = true;\n                update.push(element);\n                keyUpdateElement.delete(key);\n                // Append datum to merge selection if existed elements has\n                // its key as groupKey.\n            }\n            else if (groupKeyElements.has(key)) {\n                var group_2 = groupKeyElements.get(key);\n                merge.push([datum, group_2]);\n                try {\n                    for (var group_1 = (e_1 = void 0, __values(group_2)), group_1_1 = group_1.next(); !group_1_1.done; group_1_1 = group_1.next()) {\n                        var element = group_1_1.value;\n                        exit.delete(element);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (group_1_1 && !group_1_1.done && (_b = group_1.return)) _b.call(group_1);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n                groupKeyElements.delete(key);\n                // Append element to split selection if incoming data has\n                // groupKey as its key, and bind to datum for it.\n            }\n            else if (keyElement.has(groupKey)) {\n                var element = keyElement.get(groupKey);\n                if (element.__toData__)\n                    element.__toData__.push(datum);\n                else\n                    element.__toData__ = [datum];\n                split.add(element);\n                exit.delete(element);\n            }\n            else {\n                enter.push(datum);\n            }\n        }\n        // Create new selection with enter, update and exit.\n        var S = [\n            new _a([], enter, this._parent, this._document),\n            new _a(update, null, this._parent, this._document),\n            new _a(exit, null, this._parent, this._document),\n            new _a([], merge, this._parent, this._document),\n            new _a(split, null, this._parent, this._document),\n        ];\n        return new _a(this._elements, null, this._parent, this._document, S);\n    };\n    Selection.prototype.merge = function (other) {\n        var elements = __spreadArray(__spreadArray([], __read(this._elements), false), __read(other._elements), false);\n        var transitions = __spreadArray(__spreadArray([], __read(this._transitions), false), __read(other._transitions), false);\n        return new _a(elements, null, this._parent, this._document, undefined, transitions);\n    };\n    Selection.prototype.createElement = function (type) {\n        if (this._document) {\n            return this._document.createElement(type, {});\n        }\n        var Ctor = _a.registry[type];\n        if (Ctor)\n            return new Ctor();\n        return error(\"Unknown node type: \".concat(type));\n    };\n    /**\n     * Apply callback for each selection(enter, update, exit)\n     * and merge them into one selection.\n     */\n    Selection.prototype.join = function (enter, update, exit, merge, split) {\n        if (enter === void 0) { enter = function (d) { return d; }; }\n        if (update === void 0) { update = function (d) { return d; }; }\n        if (exit === void 0) { exit = function (d) { return d.remove(); }; }\n        if (merge === void 0) { merge = function (d) { return d; }; }\n        if (split === void 0) { split = function (d) { return d.remove(); }; }\n        var newEnter = enter(this._enter);\n        var newUpdate = update(this._update);\n        var newExit = exit(this._exit);\n        var newMerge = merge(this._merge);\n        var newSplit = split(this._split);\n        return newUpdate.merge(newEnter).merge(newExit).merge(newMerge).merge(newSplit);\n    };\n    Selection.prototype.remove = function () {\n        var _loop_1 = function (i) {\n            var element = this_1._elements[i];\n            var transition = this_1._transitions[i];\n            if (transition) {\n                transition.then(function () { return element.remove(); });\n            }\n            else {\n                element.remove();\n            }\n        };\n        var this_1 = this;\n        // Remove node immediately if there is no transition,\n        // otherwise wait until transition finished.\n        for (var i = 0; i < this._elements.length; i++) {\n            _loop_1(i);\n        }\n        return new _a([], null, this._parent, this._document, undefined, this._transitions);\n    };\n    Selection.prototype.each = function (callback) {\n        for (var i = 0; i < this._elements.length; i++) {\n            var element = this._elements[i];\n            var datum = element.__data__;\n            callback.call(element, datum, i);\n        }\n        return this;\n    };\n    Selection.prototype.attr = function (key, value) {\n        var callback = typeof value !== 'function' ? function () { return value; } : value;\n        return this.each(function (d, i) {\n            if (value !== undefined)\n                this[key] = callback.call(this, d, i);\n        });\n    };\n    Selection.prototype.style = function (key, value, callable) {\n        if (callable === void 0) { callable = true; }\n        var callback = typeof value !== 'function' || !callable ? function () { return value; } : value;\n        return this.each(function (d, i) {\n            if (value !== undefined)\n                this.style[key] = callback.call(this, d, i);\n        });\n    };\n    Selection.prototype.styles = function (style, callable) {\n        if (style === void 0) { style = {}; }\n        if (callable === void 0) { callable = true; }\n        return this.each(function (d, i) {\n            var _this = this;\n            Object.entries(style).forEach(function (_b) {\n                var _c = __read(_b, 2), key = _c[0], value = _c[1];\n                var callback = typeof value !== 'function' || !callable ? function () { return value; } : value;\n                if (value !== undefined)\n                    _this.attr(key, callback.call(_this, d, i));\n            });\n        });\n    };\n    Selection.prototype.update = function (option, callable) {\n        if (callable === void 0) { callable = true; }\n        var callback = typeof option !== 'function' || !callable ? function () { return option; } : option;\n        return this.each(function (d, i) {\n            if (option && this.update)\n                this.update(callback.call(this, d, i));\n        });\n    };\n    /** if current stage is maybeAppend, skip update stage */\n    Selection.prototype.maybeUpdate = function (option, callable) {\n        if (callable === void 0) { callable = true; }\n        var callback = typeof option !== 'function' || !callable ? function () { return option; } : option;\n        return this.each(function (d, i) {\n            if (option && this.update)\n                this.update(callback.call(this, d, i));\n        });\n    };\n    Selection.prototype.transition = function (callback) {\n        var T = this._transitions;\n        return this.each(function (d, i) {\n            T[i] = callback.call(this, d, i);\n        });\n    };\n    Selection.prototype.on = function (event, handler) {\n        this.each(function () {\n            this.addEventListener(event, handler);\n        });\n        return this;\n    };\n    Selection.prototype.call = function (callback) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        callback.call.apply(callback, __spreadArray([this._parent, this], __read(args), false));\n        return this;\n    };\n    Selection.prototype.node = function () {\n        return this._elements[0];\n    };\n    Selection.prototype.nodes = function () {\n        return this._elements;\n    };\n    Selection.prototype.transitions = function () {\n        return this._transitions.filter(function (t) { return !!t; });\n    };\n    Selection.prototype.parent = function () {\n        return this._parent;\n    };\n    var _Selection_instances, _a, _Selection_maybeAppend;\n    _a = Selection, _Selection_instances = new WeakSet(), _Selection_maybeAppend = function _Selection_maybeAppend(selector, node) {\n        var element = this._elements[0];\n        var child = element.querySelector(selector);\n        if (child)\n            return new _a([child], null, this._parent, this._document);\n        var newChild = typeof node === 'string' ? this.createElement(node) : node();\n        element.appendChild(newChild);\n        return new _a([newChild], null, this._parent, this._document);\n    };\n    Selection.registry = {\n        g: Group,\n        rect: Rect,\n        circle: Circle,\n        path: Path,\n        text: Text,\n        ellipse: Ellipse,\n        image: Image,\n        line: Line,\n        polygon: Polygon,\n        polyline: Polyline,\n        html: HTML,\n    };\n    return Selection;\n}());\nexport { Selection };\nexport function select(node) {\n    return new Selection([node], null, node, node.ownerDocument);\n}\nexport function maybeAppend(parent, selector, node) {\n    if (!parent.querySelector(selector)) {\n        return select(parent).append(node);\n    }\n    return select(parent).select(selector);\n}\n//# sourceMappingURL=selection.js.map","export function group(array, keyFunc) {\n    var grouped = new Map();\n    array.forEach(function (item) {\n        var key = keyFunc(item);\n        if (!grouped.has(key)) {\n            grouped.set(key, []);\n        }\n        grouped.get(key).push(item);\n    });\n    return grouped;\n}\n//# sourceMappingURL=group.js.map","import { isNumber, isArray } from '@antv/util';\n/**\n * padding\n */\nexport function parseSeriesAttr(series) {\n    if (isNumber(series)) {\n        return [series, series, series, series];\n    }\n    if (isArray(series)) {\n        var len = series.length;\n        if (len === 1) {\n            return [series[0], series[0], series[0], series[0]];\n        }\n        if (len === 2) {\n            return [series[0], series[1], series[0], series[1]];\n        }\n        if (len === 3) {\n            return [series[0], series[1], series[2], series[1]];\n        }\n        if (len === 4) {\n            return series;\n        }\n    }\n    return [0, 0, 0, 0];\n}\n//# sourceMappingURL=series.js.map","import { __assign, __read, __values } from \"tslib\";\nimport { select } from './selection';\n/**\n * xywidthheight\n */\nexport function getShapeSpace(shape) {\n    var bounds = shape && shape.getRenderBounds();\n    if (!bounds)\n        return {\n            width: 0,\n            height: 0,\n        };\n    var max = bounds.getMax();\n    var min = bounds.getMin();\n    return {\n        width: max[0] - min[0],\n        height: max[1] - min[1],\n    };\n}\nexport function getLocalBBox(shape) {\n    var _a = shape.getLocalBounds(), min = _a.min, max = _a.max;\n    var _b = __read([min, max], 2), _c = __read(_b[0], 2), x1 = _c[0], y1 = _c[1], _d = __read(_b[1], 2), x2 = _d[0], y2 = _d[1];\n    return { x: x1, y: y1, width: x2 - x1, height: y2 - y1, left: x1, bottom: y2, top: y1, right: x2 };\n}\nexport function createTempText(group, attrs) {\n    var textNode = select(group).append('text').node();\n    textNode.attr(__assign(__assign({}, attrs), { visibility: 'hidden' }));\n    return textNode;\n}\nexport function isHorizontal(p1, p2) {\n    var _a = __read(p1, 2), x1 = _a[0], y1 = _a[1];\n    var _b = __read(p2, 2), x2 = _b[0], y2 = _b[1];\n    return x1 !== x2 && y1 === y2;\n}\nexport function isVertical(p1, p2) {\n    var _a = __read(p1, 2), x1 = _a[0], y1 = _a[1];\n    var _b = __read(p2, 2), x2 = _b[0], y2 = _b[1];\n    return x1 === x2 && y1 !== y2;\n}\nexport function copyAttributes(target, source) {\n    var e_1, _a;\n    var attributes = source.attributes;\n    try {\n        for (var _b = __values(Object.entries(attributes)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var _d = __read(_c.value, 2), key = _d[0], value = _d[1];\n            if (key !== 'id' && key !== 'className')\n                target.attr(key, value);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n}\n//# sourceMappingURL=shape.js.map","export function toUppercaseFirstLetter(string) {\n    return string.toString().charAt(0).toUpperCase() + string.toString().slice(1);\n}\nexport function toLowercaseFirstLetter(string) {\n    return string.toString().charAt(0).toLowerCase() + string.toString().slice(1);\n}\nexport function addPrefix(string, prefix) {\n    return \"\".concat(prefix).concat(toUppercaseFirstLetter(string));\n}\nexport function removePrefix(string, prefix, lowercaseFirstLetter) {\n    var _a;\n    if (lowercaseFirstLetter === void 0) { lowercaseFirstLetter = true; }\n    var inferPrefix = prefix || ((_a = string.match(/^([a-z][a-z0-9]+)/)) === null || _a === void 0 ? void 0 : _a[0]) || '';\n    var withoutPrefix = string.replace(new RegExp(\"^(\".concat(inferPrefix, \")\")), '');\n    return lowercaseFirstLetter ? toLowercaseFirstLetter(withoutPrefix) : withoutPrefix;\n}\n//# sourceMappingURL=string.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { addPrefix, removePrefix, toUppercaseFirstLetter } from './string';\n/**\n * HTML\n * @param style {[key: string]: Object}\n * \n * {\n *  '.selector': {\n *   'attrName': 'attr',\n *   'padding': '0 0 0 0',\n *   'background-color': 'red'\n *  }\n * }\n */\nexport function applyStyleSheet(element, style) {\n    Object.entries(style).forEach(function (_a) {\n        var _b = __read(_a, 2), selector = _b[0], styleString = _b[1];\n        // apply styles to element and children\n        __spreadArray([element], __read(element.querySelectorAll(selector)), false).filter(function (el) { return el.matches(selector); })\n            .forEach(function (target) {\n            if (!target)\n                return;\n            var temp = target;\n            temp.style.cssText += Object.entries(styleString).reduce(function (total, currVal) {\n                return \"\".concat(total).concat(currVal.join(':'), \";\");\n            }, '');\n        });\n    });\n}\nvar startsWith = function (text, prefix) {\n    if (!(text === null || text === void 0 ? void 0 : text.startsWith(prefix)))\n        return false;\n    var nextChart = text[prefix.length];\n    return nextChart >= 'A' && nextChart <= 'Z';\n};\nexport function subStyleProps(style, prefix, invert) {\n    if (invert === void 0) { invert = false; }\n    var result = {};\n    Object.entries(style).forEach(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], value = _b[1];\n        // never transfer class property\n        if (key === 'className' || key === 'class') {\n            // do nothing\n        }\n        // @example showHandle -> showHandle, showHandleLabel -> showLabel\n        else if (startsWith(key, 'show') && startsWith(removePrefix(key, 'show'), prefix) !== invert) {\n            if (key === addPrefix(prefix, 'show'))\n                result[key] = value;\n            else\n                result[key.replace(new RegExp(toUppercaseFirstLetter(prefix)), '')] = value;\n        }\n        // @example navFormatter -> formatter\n        else if (!startsWith(key, 'show') && startsWith(key, prefix) !== invert) {\n            var name_1 = removePrefix(key, prefix);\n            // don't transfer filter if it represents \n            if (name_1 === 'filter' && typeof value === 'function') {\n                // do nothing\n            }\n            else\n                result[name_1] = value;\n        }\n    });\n    return result;\n}\nexport function superStyleProps(style, prefix) {\n    return Object.entries(style).reduce(function (acc, _a) {\n        var _b = __read(_a, 2), key = _b[0], value = _b[1];\n        if (key.startsWith('show'))\n            acc[\"show\".concat(prefix).concat(key.slice(4))] = value;\n        else\n            acc[\"\".concat(prefix).concat(toUppercaseFirstLetter(key))] = value;\n        return acc;\n    }, {});\n}\n/**\n * extract group style from mixin style\n * @param style\n * @param ignoreStyleDict style will be ignore from style\n * @returns shape style and rest style\n */\nexport function splitStyle(style, ignoreStyleDict) {\n    if (ignoreStyleDict === void 0) { ignoreStyleDict = ['x', 'y', 'class', 'className']; }\n    var groupStyleDict = [\n        'transform',\n        'transformOrigin',\n        'anchor',\n        'visibility',\n        'pointerEvents',\n        'zIndex',\n        'cursor',\n        'clipPath',\n        'clipPathTargets',\n        'offsetPath',\n        'offsetPathTargets',\n        'offsetDistance',\n        'draggable',\n        'droppable',\n    ];\n    var output = {};\n    var groupStyle = {};\n    Object.entries(style).forEach(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], val = _b[1];\n        if (ignoreStyleDict.includes(key)) {\n            // do nothing\n        }\n        else if (groupStyleDict.indexOf(key) !== -1)\n            groupStyle[key] = val;\n        else\n            output[key] = val;\n    });\n    return [output, groupStyle];\n}\n//# sourceMappingURL=style.js.map","function flru(max) {\n    var num, curr, prev;\n    var limit = max || 1;\n    function keep(key, value) {\n        if (++num > limit) {\n            prev = curr;\n            reset(1);\n            ++num;\n        }\n        curr[key] = value;\n    }\n    function reset(isPartial) {\n        num = 0;\n        curr = Object.create(null);\n        isPartial || (prev = Object.create(null));\n    }\n    reset();\n    return {\n        clear: reset,\n        has: function (key) {\n            return curr[key] !== void 0 || prev[key] !== void 0;\n        },\n        get: function (key) {\n            var val = curr[key];\n            if (val !== void 0)\n                return val;\n            if ((val = prev[key]) !== void 0) {\n                keep(key, val);\n                return val;\n            }\n        },\n        set: function (key, value) {\n            if (curr[key] !== void 0) {\n                curr[key] = value;\n            }\n            else {\n                keep(key, value);\n            }\n        },\n    };\n}\nvar CacheMap = new Map();\n/**\n * \n * @example\n * _.memoize(calColor);\n * _.memoize(calColor, (...args) => args[0]);\n * @param fn \n * @param resolver  key \n * @param maxSize lru \n */\nexport default function memoize(fn, resolver, maxSize) {\n    if (maxSize === void 0) { maxSize = 128; }\n    var memoized = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        //  key resolver key\n        var key = resolver ? resolver.apply(this, args) : args[0];\n        if (!CacheMap.has(fn))\n            CacheMap.set(fn, flru(maxSize));\n        var cache = CacheMap.get(fn);\n        if (cache.has(key))\n            return cache.get(key);\n        var result = fn.apply(this, args);\n        cache.set(key, result);\n        return result;\n    };\n    return memoized;\n}\n//# sourceMappingURL=memoize.js.map","import { runtime } from '@antv/g';\nimport { memoize } from '@antv/util';\nvar ctx;\nvar mockMeasureTextWidth;\nexport function setMockMeasureTextWidth(mock) {\n    mockMeasureTextWidth = mock;\n}\n/**\n * \n */\nexport var measureTextWidth = memoize(function (text, font) {\n    var fontSize = font.fontSize, fontFamily = font.fontFamily, fontWeight = font.fontWeight, fontStyle = font.fontStyle, fontVariant = font.fontVariant;\n    if (mockMeasureTextWidth) {\n        return mockMeasureTextWidth(text, fontSize);\n    }\n    if (!ctx) {\n        // @ts-ignore\n        ctx = runtime.offscreenCanvasCreator.getOrCreateContext(undefined);\n    }\n    ctx.font = [fontStyle, fontVariant, fontWeight, \"\".concat(fontSize, \"px\"), fontFamily].join(' ');\n    return ctx.measureText(text).width;\n}, function (text, font) { return [text, Object.values(font || getFont(text)).join()].join(''); }, 4096);\nexport var getFont = function (textShape) {\n    var fontFamily = textShape.style.fontFamily || 'sans-serif';\n    var fontWeight = textShape.style.fontWeight || 'normal';\n    var fontStyle = textShape.style.fontStyle || 'normal';\n    var fontVariant = textShape.style.fontVariant;\n    var fontSize = textShape.style.fontSize;\n    fontSize = typeof fontSize === 'object' ? fontSize.value : fontSize;\n    return { fontSize: fontSize, fontFamily: fontFamily, fontWeight: fontWeight, fontStyle: fontStyle, fontVariant: fontVariant };\n};\nexport function textOf(node) {\n    if (node.nodeName === 'text') {\n        return node;\n    }\n    if (node.nodeName === 'g' && node.children.length === 1 && node.children[0].nodeName === 'text') {\n        return node.children[0];\n    }\n    return null;\n}\nexport function applyToText(node, style) {\n    var text = textOf(node);\n    if (text)\n        text.attr(style);\n}\n//# sourceMappingURL=text.js.map","export function traverse(element, callback) {\n    callback(element);\n    if (element.children) {\n        element.children.forEach(function (child) {\n            if (child)\n                traverse(child, callback);\n        });\n    }\n}\n//# sourceMappingURL=traverse.js.map","import { traverse } from './traverse';\nexport function show(element) {\n    visibility(element, true);\n}\nexport function hide(element) {\n    visibility(element, false);\n}\nexport function visibility(element, visible) {\n    var value = visible ? 'visible' : 'hidden';\n    traverse(element, function (node) {\n        node.attr('visibility', value);\n    });\n}\n//# sourceMappingURL=visibility.js.map","var clamp = function (a, min, max) {\n    if (a < min) {\n        return min;\n    }\n    else if (a > max) {\n        return max;\n    }\n    return a;\n};\nexport default clamp;\n//# sourceMappingURL=clamp.js.map","import isArray from './is-array';\nimport isPlainObject from './is-plain-object';\nvar MAX_MIX_LEVEL = 5;\nfunction hasOwn(object, property) {\n    if (Object.hasOwn) {\n        return Object.hasOwn(object, property);\n    }\n    if (object == null) {\n        throw new TypeError('Cannot convert undefined or null to object');\n    }\n    return Object.prototype.hasOwnProperty.call(Object(object), property);\n}\nfunction _deepMix(dist, src, level, maxLevel) {\n    level = level || 0;\n    maxLevel = maxLevel || MAX_MIX_LEVEL;\n    for (var key in src) {\n        if (hasOwn(src, key)) {\n            var value = src[key];\n            if (value !== null && isPlainObject(value)) {\n                if (!isPlainObject(dist[key])) {\n                    dist[key] = {};\n                }\n                if (level < maxLevel) {\n                    _deepMix(dist[key], value, level + 1, maxLevel);\n                }\n                else {\n                    dist[key] = src[key];\n                }\n            }\n            else if (isArray(value)) {\n                dist[key] = [];\n                dist[key] = dist[key].concat(value);\n            }\n            else if (value !== undefined) {\n                dist[key] = value;\n            }\n        }\n    }\n}\n// todo \nvar deepMix = function (rst) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    for (var i = 0; i < args.length; i += 1) {\n        _deepMix(rst, args[i]);\n    }\n    return rst;\n};\nexport default deepMix;\n//# sourceMappingURL=deep-mix.js.map","/**\n * \n * @return \n */\nexport default function isArray(value) {\n    return Array.isArray(value);\n}\n//# sourceMappingURL=is-array.js.map","/**\n * \n * @return \n */\nexport default function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=is-function.js.map","/**\n *  null  undefined\n * @return  null  undefined\n */\nexport default function isNil(value) {\n    return value === null || value === undefined;\n}\n//# sourceMappingURL=is-nil.js.map","/**\n * \n * @return \n */\nexport default function isNumber(value) {\n    return typeof value === 'number';\n}\n//# sourceMappingURL=is-number.js.map","var isObjectLike = function (value) {\n    /**\n     * isObjectLike({}) => true\n     * isObjectLike([1, 2, 3]) => true\n     * isObjectLike(Function) => false\n     * isObjectLike(null) => false\n     */\n    return typeof value === 'object' && value !== null;\n};\nexport default isObjectLike;\n//# sourceMappingURL=is-object-like.js.map","export default (function (value) {\n    /**\n     * isObject({}) => true\n     * isObject([1, 2, 3]) => true\n     * isObject(Function) => true\n     * isObject(null) => false\n     */\n    var type = typeof value;\n    return (value !== null && type === 'object') || type === 'function';\n});\n//# sourceMappingURL=is-object.js.map","var toString = {}.toString;\nvar isType = function (value, type) { return toString.call(value) === '[object ' + type + ']'; };\nexport default isType;\n//# sourceMappingURL=is-type.js.map","import isObjectLike from './is-object-like';\nimport isType from './is-type';\nvar isPlainObject = function (value) {\n    /**\n     * isObjectLike(new Foo) => false\n     * isObjectLike([1, 2, 3]) => false\n     * isObjectLike({ x: 0, y: 0 }) => true\n     * isObjectLike(Object.create(null)) => true\n     */\n    if (!isObjectLike(value) || !isType(value, 'Object')) {\n        return false;\n    }\n    if (Object.getPrototypeOf(value) === null) {\n        return true;\n    }\n    var proto = value;\n    while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(value) === proto;\n};\nexport default isPlainObject;\n//# sourceMappingURL=is-plain-object.js.map","/**\n * \n * @return \n */\nexport default function isString(value) {\n    return typeof value === 'string';\n}\n//# sourceMappingURL=is-string.js.map","var WILDCARD = '*';\n/* event-emitter */\nvar EventEmitter = /** @class */ (function () {\n    function EventEmitter() {\n        this._events = {};\n    }\n    /**\n     * \n     * @param evt\n     * @param callback\n     * @param once\n     */\n    EventEmitter.prototype.on = function (evt, callback, once) {\n        if (!this._events[evt]) {\n            this._events[evt] = [];\n        }\n        this._events[evt].push({\n            callback: callback,\n            once: !!once,\n        });\n        return this;\n    };\n    /**\n     * \n     * @param evt\n     * @param callback\n     */\n    EventEmitter.prototype.once = function (evt, callback) {\n        return this.on(evt, callback, true);\n    };\n    /**\n     * \n     * @param evt\n     * @param args\n     */\n    EventEmitter.prototype.emit = function (evt) {\n        var _this = this;\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var events = this._events[evt] || [];\n        var wildcardEvents = this._events[WILDCARD] || [];\n        //  emit \n        var doEmit = function (es) {\n            var length = es.length;\n            for (var i = 0; i < length; i++) {\n                if (!es[i]) {\n                    continue;\n                }\n                var _a = es[i], callback = _a.callback, once = _a.once;\n                if (once) {\n                    es.splice(i, 1);\n                    if (es.length === 0) {\n                        delete _this._events[evt];\n                    }\n                    length--;\n                    i--;\n                }\n                callback.apply(_this, args);\n            }\n        };\n        doEmit(events);\n        doEmit(wildcardEvents);\n    };\n    /**\n     * channel\n     * @param evt\n     * @param callback\n     */\n    EventEmitter.prototype.off = function (evt, callback) {\n        if (!evt) {\n            // evt \n            this._events = {};\n        }\n        else {\n            if (!callback) {\n                // evt callback \n                delete this._events[evt];\n            }\n            else {\n                // evt callback \n                var events = this._events[evt] || [];\n                var length_1 = events.length;\n                for (var i = 0; i < length_1; i++) {\n                    if (events[i].callback === callback) {\n                        events.splice(i, 1);\n                        length_1--;\n                        i--;\n                    }\n                }\n                if (events.length === 0) {\n                    delete this._events[evt];\n                }\n            }\n        }\n        return this;\n    };\n    /*  */\n    EventEmitter.prototype.getEvents = function () {\n        return this._events;\n    };\n    return EventEmitter;\n}());\nexport default EventEmitter;\n//# sourceMappingURL=index.js.map","/*!\n * @antv/g-plugin-canvas-path-generator\n * @description A G plugin of path generator with Canvas2D API\n * @version 2.1.14\n * @date 1/2/2025, 2:55:27 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { isDisplayObject, Shape, AbstractRendererPlugin } from '@antv/g-lite';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport { clamp } from '@antv/util';\n\nfunction generatePath$6(context, parsedStyle) {\n  var _parsedStyle$cx = parsedStyle.cx,\n    cx = _parsedStyle$cx === void 0 ? 0 : _parsedStyle$cx,\n    _parsedStyle$cy = parsedStyle.cy,\n    cy = _parsedStyle$cy === void 0 ? 0 : _parsedStyle$cy,\n    r = parsedStyle.r;\n  context.arc(cx, cy, r, 0, Math.PI * 2, false);\n}\n\nfunction generatePath$5(context, parsedStyle) {\n  var _parsedStyle$cx = parsedStyle.cx,\n    cx = _parsedStyle$cx === void 0 ? 0 : _parsedStyle$cx,\n    _parsedStyle$cy = parsedStyle.cy,\n    cy = _parsedStyle$cy === void 0 ? 0 : _parsedStyle$cy,\n    rx = parsedStyle.rx,\n    ry = parsedStyle.ry;\n\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/ellipse\n  if (context.ellipse) {\n    context.ellipse(cx, cy, rx, ry, 0, 0, Math.PI * 2, false);\n  } else {\n    // \n    var r = rx > ry ? rx : ry;\n    var scaleX = rx > ry ? 1 : rx / ry;\n    var scaleY = rx > ry ? ry / rx : 1;\n    context.save();\n    context.scale(scaleX, scaleY);\n    context.arc(cx, cy, r, 0, Math.PI * 2);\n  }\n}\n\nfunction generatePath$4(context, parsedStyle) {\n  var x1 = parsedStyle.x1,\n    y1 = parsedStyle.y1,\n    x2 = parsedStyle.x2,\n    y2 = parsedStyle.y2,\n    markerStart = parsedStyle.markerStart,\n    markerEnd = parsedStyle.markerEnd,\n    markerStartOffset = parsedStyle.markerStartOffset,\n    markerEndOffset = parsedStyle.markerEndOffset;\n  var startOffsetX = 0;\n  var startOffsetY = 0;\n  var endOffsetX = 0;\n  var endOffsetY = 0;\n  var rad = 0;\n  var x;\n  var y;\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = x2 - x1;\n    y = y2 - y1;\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = x1 - x2;\n    y = y1 - y2;\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n  context.moveTo(x1 + startOffsetX, y1 + startOffsetY);\n  context.lineTo(x2 + endOffsetX, y2 + endOffsetY);\n}\n\nfunction generatePath$3(context, parsedStyle) {\n  var markerStart = parsedStyle.markerStart,\n    markerEnd = parsedStyle.markerEnd,\n    markerStartOffset = parsedStyle.markerStartOffset,\n    markerEndOffset = parsedStyle.markerEndOffset;\n  var _parsedStyle$d = parsedStyle.d,\n    absolutePath = _parsedStyle$d.absolutePath,\n    segments = _parsedStyle$d.segments;\n  var startOffsetX = 0;\n  var startOffsetY = 0;\n  var endOffsetX = 0;\n  var endOffsetY = 0;\n  var rad = 0;\n  var x;\n  var y;\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    var _getStartTangent = markerStart.parentNode.getStartTangent(),\n      _getStartTangent2 = _slicedToArray(_getStartTangent, 2),\n      p1 = _getStartTangent2[0],\n      p2 = _getStartTangent2[1];\n    x = p1[0] - p2[0];\n    y = p1[1] - p2[1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    var _getEndTangent = markerEnd.parentNode.getEndTangent(),\n      _getEndTangent2 = _slicedToArray(_getEndTangent, 2),\n      _p = _getEndTangent2[0],\n      _p2 = _getEndTangent2[1];\n    x = _p[0] - _p2[0];\n    y = _p[1] - _p2[1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n  for (var i = 0; i < absolutePath.length; i++) {\n    var params = absolutePath[i];\n    var command = params[0];\n    var nextSegment = absolutePath[i + 1];\n    var useStartOffset = i === 0 && (startOffsetX !== 0 || startOffsetY !== 0);\n    var useEndOffset = (i === absolutePath.length - 1 || nextSegment && (nextSegment[0] === 'M' || nextSegment[0] === 'Z')) && endOffsetX !== 0 && endOffsetY !== 0;\n    var _ref = useStartOffset ? [startOffsetX, startOffsetY] : [0, 0],\n      _ref2 = _slicedToArray(_ref, 2),\n      startOffsetXTemp = _ref2[0],\n      startOffsetYTemp = _ref2[1];\n    var _ref3 = useEndOffset ? [endOffsetX, endOffsetY] : [0, 0],\n      _ref4 = _slicedToArray(_ref3, 2),\n      endOffsetXTemp = _ref4[0],\n      endOffsetYTemp = _ref4[1];\n    switch (command) {\n      case 'M':\n        // Use start marker offset\n        context.moveTo(params[1] + startOffsetXTemp, params[2] + startOffsetYTemp);\n        break;\n      case 'L':\n        context.lineTo(params[1] + endOffsetXTemp, params[2] + endOffsetYTemp);\n        break;\n      case 'Q':\n        context.quadraticCurveTo(params[1], params[2], params[3] + endOffsetXTemp, params[4] + endOffsetYTemp);\n        break;\n      case 'C':\n        context.bezierCurveTo(params[1], params[2], params[3], params[4], params[5] + endOffsetXTemp, params[6] + endOffsetYTemp);\n        break;\n      case 'A':\n        {\n          // FIXME startOffset / endOffset\n          var arcParams = segments[i].arcParams;\n          var cx = arcParams.cx,\n            cy = arcParams.cy,\n            rx = arcParams.rx,\n            ry = arcParams.ry,\n            startAngle = arcParams.startAngle,\n            endAngle = arcParams.endAngle,\n            xRotation = arcParams.xRotation,\n            sweepFlag = arcParams.sweepFlag;\n          // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/ellipse\n          if (context.ellipse) {\n            context.ellipse(cx, cy, rx, ry, xRotation, startAngle, endAngle, !!(1 - sweepFlag));\n          } else {\n            // @see https://stackoverflow.com/a/47494351\n            var r = rx > ry ? rx : ry;\n            var scaleX = rx > ry ? 1 : rx / ry;\n            var scaleY = rx > ry ? ry / rx : 1;\n            context.translate(cx, cy);\n            context.rotate(xRotation);\n            context.scale(scaleX, scaleY);\n            context.arc(0, 0, r, startAngle, endAngle, !!(1 - sweepFlag));\n            context.scale(1 / scaleX, 1 / scaleY);\n            context.rotate(-xRotation);\n            context.translate(-cx, -cy);\n          }\n          if (useEndOffset) {\n            context.lineTo(params[6] + endOffsetX, params[7] + endOffsetY);\n          }\n          break;\n        }\n      case 'Z':\n        context.closePath();\n        break;\n    }\n  }\n}\n\nfunction generatePath$2(context, parsedStyle) {\n  var markerStart = parsedStyle.markerStart,\n    markerEnd = parsedStyle.markerEnd,\n    markerStartOffset = parsedStyle.markerStartOffset,\n    markerEndOffset = parsedStyle.markerEndOffset;\n  var points = parsedStyle.points.points;\n  var length = points.length;\n  var x1 = points[0][0];\n  var y1 = points[0][1];\n  var x2 = points[length - 1][0];\n  var y2 = points[length - 1][1];\n  var startOffsetX = 0;\n  var startOffsetY = 0;\n  var endOffsetX = 0;\n  var endOffsetY = 0;\n  var rad = 0;\n  var x;\n  var y;\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = points[1][0] - points[0][0];\n    y = points[1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = points[length - 1][0] - points[0][0];\n    y = points[length - 1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n  context.moveTo(x1 + (startOffsetX || endOffsetX), y1 + (startOffsetY || endOffsetY));\n  for (var i = 1; i < length - 1; i++) {\n    var point = points[i];\n    context.lineTo(point[0], point[1]);\n  }\n  context.lineTo(x2, y2);\n}\n\nfunction generatePath$1(context, parsedStyle) {\n  var markerStart = parsedStyle.markerStart,\n    markerEnd = parsedStyle.markerEnd,\n    markerStartOffset = parsedStyle.markerStartOffset,\n    markerEndOffset = parsedStyle.markerEndOffset;\n  var points = parsedStyle.points.points;\n  var length = points.length;\n  var x1 = points[0][0];\n  var y1 = points[0][1];\n  var x2 = points[length - 1][0];\n  var y2 = points[length - 1][1];\n  var startOffsetX = 0;\n  var startOffsetY = 0;\n  var endOffsetX = 0;\n  var endOffsetY = 0;\n  var rad = 0;\n  var x;\n  var y;\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = points[1][0] - points[0][0];\n    y = points[1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = points[length - 2][0] - points[length - 1][0];\n    y = points[length - 2][1] - points[length - 1][1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n  context.moveTo(x1 + startOffsetX, y1 + startOffsetY);\n  for (var i = 1; i < length - 1; i++) {\n    var point = points[i];\n    context.lineTo(point[0], point[1]);\n  }\n  context.lineTo(x2 + endOffsetX, y2 + endOffsetY);\n}\n\nfunction generatePath(context, parsedStyle) {\n  var _parsedStyle$x = parsedStyle.x,\n    x = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n    _parsedStyle$y = parsedStyle.y,\n    y = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y,\n    radius = parsedStyle.radius,\n    width = parsedStyle.width,\n    height = parsedStyle.height;\n  var w = width;\n  var h = height;\n  var hasRadius = radius && radius.some(function (r) {\n    return r !== 0;\n  });\n  if (!hasRadius) {\n    // Canvas support negative width/height of rect\n    context.rect(x, y, w, h);\n  } else {\n    var signX = width > 0 ? 1 : -1;\n    var signY = height > 0 ? 1 : -1;\n    var sweepFlag = signX + signY === 0;\n    var _radius$map = radius.map(function (r) {\n        return clamp(r, 0, Math.min(Math.abs(w) / 2, Math.abs(h) / 2));\n      }),\n      _radius$map2 = _slicedToArray(_radius$map, 4),\n      tlr = _radius$map2[0],\n      trr = _radius$map2[1],\n      brr = _radius$map2[2],\n      blr = _radius$map2[3];\n    context.moveTo(signX * tlr + x, y);\n    context.lineTo(w - signX * trr + x, y);\n    if (trr !== 0) {\n      context.arc(w - signX * trr + x, signY * trr + y, trr, -signY * Math.PI / 2, signX > 0 ? 0 : Math.PI, sweepFlag);\n    }\n    context.lineTo(w + x, h - signY * brr + y);\n    if (brr !== 0) {\n      context.arc(w - signX * brr + x, h - signY * brr + y, brr, signX > 0 ? 0 : Math.PI, signY > 0 ? Math.PI / 2 : 1.5 * Math.PI, sweepFlag);\n    }\n    context.lineTo(signX * blr + x, h + y);\n    if (blr !== 0) {\n      context.arc(signX * blr + x, h - signY * blr + y, blr, signY > 0 ? Math.PI / 2 : -Math.PI / 2, signX > 0 ? Math.PI : 0, sweepFlag);\n    }\n    context.lineTo(x, signY * tlr + y);\n    if (tlr !== 0) {\n      context.arc(signX * tlr + x, signY * tlr + y, tlr, signX > 0 ? Math.PI : 0, signY > 0 ? Math.PI * 1.5 : Math.PI / 2, sweepFlag);\n    }\n  }\n}\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    _classCallCheck(this, Plugin);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Plugin, [].concat(args));\n    _this.name = 'canvas-path-generator';\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init() {\n      var _pathGeneratorFactory;\n      var pathGeneratorFactory = (_pathGeneratorFactory = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_pathGeneratorFactory, Shape.CIRCLE, generatePath$6), Shape.ELLIPSE, generatePath$5), Shape.RECT, generatePath), Shape.LINE, generatePath$4), Shape.POLYLINE, generatePath$1), Shape.POLYGON, generatePath$2), Shape.PATH, generatePath$3), Shape.TEXT, undefined), Shape.GROUP, undefined), Shape.IMAGE, undefined), _defineProperty(_defineProperty(_defineProperty(_pathGeneratorFactory, Shape.HTML, undefined), Shape.MESH, undefined), Shape.FRAGMENT, undefined));\n\n      // @ts-ignore\n      this.context.pathGeneratorFactory = pathGeneratorFactory;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      // @ts-ignore\n      delete this.context.pathGeneratorFactory;\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { Plugin };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-plugin-canvas-picker\n * @description A G plugin for picking in canvas\n * @version 2.1.16\n * @date 1/2/2025, 2:57:34 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { findClosestClipPathTarget, Point, isFillOrStrokeAffected, getOrCalculatePathTotalLength, Shape, AbstractRendererPlugin } from '@antv/g-lite';\nimport _createForOfIteratorHelper from '@babel/runtime/helpers/createForOfIteratorHelper';\nimport _regeneratorRuntime from '@babel/runtime/helpers/regeneratorRuntime';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport { vec3, mat4 } from 'gl-matrix';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport { distance, linePointToLine, cubicPointDistance, quadPointDistance } from '@antv/g-math';\nimport { arcToCubic, clamp } from '@antv/util';\nimport _objectSpread from '@babel/runtime/helpers/objectSpread2';\n\nvar tmpVec3a = vec3.create();\nvar tmpVec3b = vec3.create();\nvar tmpVec3c = vec3.create();\nvar tmpMat4 = mat4.create();\n/**\n * pick shape(s) with Mouse/Touch event\n *\n * 1. find AABB with r-tree\n * 2. do math calculation with geometry in an accurate way\n */\nvar CanvasPickerPlugin = /*#__PURE__*/function () {\n  function CanvasPickerPlugin() {\n    var _this = this;\n    _classCallCheck(this, CanvasPickerPlugin);\n    this.isHit = function (displayObject, position, worldTransform, isClipPath) {\n      // use picker for current shape's type\n      var pick = _this.context.pointInPathPickerFactory[displayObject.nodeName];\n      if (pick) {\n        // invert with world matrix\n        var invertWorldMat = mat4.invert(tmpMat4, worldTransform);\n\n        // transform client position to local space, do picking in local space\n        var localPosition = vec3.transformMat4(tmpVec3b, vec3.set(tmpVec3c, position[0], position[1], 0), invertWorldMat);\n        if (pick(displayObject, new Point(localPosition[0], localPosition[1]), isClipPath, _this.isPointInPath, _this.context, _this.runtime)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    /**\n     * use native picking method\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/isPointInPath\n     */\n    this.isPointInPath = function (displayObject, position) {\n      var context = _this.runtime.offscreenCanvasCreator.getOrCreateContext(_this.context.config.offscreenCanvas);\n      var generatePath = _this.context.pathGeneratorFactory[displayObject.nodeName];\n      if (generatePath) {\n        context.beginPath();\n        generatePath(context, displayObject.parsedStyle);\n        context.closePath();\n      }\n      return context.isPointInPath(position.x, position.y);\n    };\n  }\n  return _createClass(CanvasPickerPlugin, [{\n    key: \"apply\",\n    value: function apply(context, runtime) {\n      var _renderingContext$roo,\n        _this2 = this;\n      var renderingService = context.renderingService,\n        renderingContext = context.renderingContext;\n      this.context = context;\n      this.runtime = runtime;\n      var document = (_renderingContext$roo = renderingContext.root) === null || _renderingContext$roo === void 0 ? void 0 : _renderingContext$roo.ownerDocument;\n      renderingService.hooks.pick.tapPromise(CanvasPickerPlugin.tag, /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(result) {\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", _this2.pick(document, result));\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee);\n        }));\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n      renderingService.hooks.pickSync.tap(CanvasPickerPlugin.tag, function (result) {\n        return _this2.pick(document, result);\n      });\n    }\n  }, {\n    key: \"pick\",\n    value: function pick(document, result) {\n      var topmost = result.topmost,\n        _result$position = result.position,\n        x = _result$position.x,\n        y = _result$position.y;\n\n      // position in world space\n      var position = vec3.set(tmpVec3a, x, y, 0);\n\n      // query by AABB first with spatial index(r-tree)\n      var hitTestList = document.elementsFromBBox(position[0], position[1], position[0], position[1]);\n\n      // test with clip path & origin shape\n      // @see https://github.com/antvis/g/issues/1064\n      var pickedDisplayObjects = [];\n      var _iterator = _createForOfIteratorHelper(hitTestList),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _displayObject = _step.value;\n          var worldTransform = _displayObject.getWorldTransform();\n          var isHitOriginShape = this.isHit(_displayObject, position, worldTransform, false);\n          if (isHitOriginShape) {\n            // should look up in the ancestor node\n            var clipped = findClosestClipPathTarget(_displayObject);\n            if (clipped) {\n              var clipPath = clipped.parsedStyle.clipPath;\n              var isHitClipPath = this.isHit(clipPath, position, clipPath.getWorldTransform(), true);\n              if (isHitClipPath) {\n                if (topmost) {\n                  result.picked = [_displayObject];\n                  return result;\n                }\n                pickedDisplayObjects.push(_displayObject);\n              }\n            } else {\n              if (topmost) {\n                result.picked = [_displayObject];\n                return result;\n              }\n              pickedDisplayObjects.push(_displayObject);\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      result.picked = pickedDisplayObjects;\n      return result;\n    }\n  }]);\n}();\nCanvasPickerPlugin.tag = 'CanvasPicker';\n\nfunction isPointInPath$8(displayObject, position, isClipPath) {\n  var _ref = displayObject.parsedStyle,\n    _ref$cx = _ref.cx,\n    cx = _ref$cx === void 0 ? 0 : _ref$cx,\n    _ref$cy = _ref.cy,\n    cy = _ref$cy === void 0 ? 0 : _ref$cy,\n    r = _ref.r,\n    fill = _ref.fill,\n    stroke = _ref.stroke,\n    _ref$lineWidth = _ref.lineWidth,\n    lineWidth = _ref$lineWidth === void 0 ? 1 : _ref$lineWidth,\n    _ref$increasedLineWid = _ref.increasedLineWidthForHitTesting,\n    increasedLineWidthForHitTesting = _ref$increasedLineWid === void 0 ? 0 : _ref$increasedLineWid,\n    _ref$pointerEvents = _ref.pointerEvents,\n    pointerEvents = _ref$pointerEvents === void 0 ? 'auto' : _ref$pointerEvents;\n  var halfLineWidth = (lineWidth + increasedLineWidthForHitTesting) / 2;\n  var absDistance = distance(cx, cy, position.x, position.y);\n  var _isFillOrStrokeAffect = isFillOrStrokeAffected(pointerEvents, fill, stroke),\n    _isFillOrStrokeAffect2 = _slicedToArray(_isFillOrStrokeAffect, 2),\n    hasFill = _isFillOrStrokeAffect2[0],\n    hasStroke = _isFillOrStrokeAffect2[1];\n  if (hasFill && hasStroke || isClipPath) {\n    return absDistance <= r + halfLineWidth;\n  }\n  if (hasFill) {\n    return absDistance <= r;\n  }\n  if (hasStroke) {\n    return absDistance >= r - halfLineWidth && absDistance <= r + halfLineWidth;\n  }\n  return false;\n}\n\nfunction ellipseDistance(squareX, squareY, rx, ry) {\n  return squareX / (rx * rx) + squareY / (ry * ry);\n}\nfunction isPointInPath$7(displayObject, position, isClipPath) {\n  var _ref = displayObject.parsedStyle,\n    _ref$cx = _ref.cx,\n    cx = _ref$cx === void 0 ? 0 : _ref$cx,\n    _ref$cy = _ref.cy,\n    cy = _ref$cy === void 0 ? 0 : _ref$cy,\n    rx = _ref.rx,\n    ry = _ref.ry,\n    fill = _ref.fill,\n    stroke = _ref.stroke,\n    _ref$lineWidth = _ref.lineWidth,\n    lineWidth = _ref$lineWidth === void 0 ? 1 : _ref$lineWidth,\n    _ref$increasedLineWid = _ref.increasedLineWidthForHitTesting,\n    increasedLineWidthForHitTesting = _ref$increasedLineWid === void 0 ? 0 : _ref$increasedLineWid,\n    _ref$pointerEvents = _ref.pointerEvents,\n    pointerEvents = _ref$pointerEvents === void 0 ? 'auto' : _ref$pointerEvents;\n  var x = position.x,\n    y = position.y;\n  var _isFillOrStrokeAffect = isFillOrStrokeAffected(pointerEvents, fill, stroke),\n    _isFillOrStrokeAffect2 = _slicedToArray(_isFillOrStrokeAffect, 2),\n    hasFill = _isFillOrStrokeAffect2[0],\n    hasStroke = _isFillOrStrokeAffect2[1];\n  var halfLineWith = (lineWidth + increasedLineWidthForHitTesting) / 2;\n  var squareX = (x - cx) * (x - cx);\n  var squareY = (y - cy) * (y - cy);\n  //  x*x/rx*rx + y*y/ry*ry = 1;\n  if (hasFill && hasStroke || isClipPath) {\n    return ellipseDistance(squareX, squareY, rx + halfLineWith, ry + halfLineWith) <= 1;\n  }\n  if (hasFill) {\n    return ellipseDistance(squareX, squareY, rx, ry) <= 1;\n  }\n  if (hasStroke) {\n    return ellipseDistance(squareX, squareY, rx - halfLineWith, ry - halfLineWith) >= 1 && ellipseDistance(squareX, squareY, rx + halfLineWith, ry + halfLineWith) <= 1;\n  }\n  return false;\n}\n\nfunction inBox(minX, minY, width, height, x, y) {\n  return x >= minX && x <= minX + width && y >= minY && y <= minY + height;\n}\nfunction inRect(minX, minY, width, height, lineWidth, x, y) {\n  var halfWidth = lineWidth / 2;\n  // \n  return inBox(minX - halfWidth, minY - halfWidth, width, lineWidth, x, y) ||\n  // \n  inBox(minX + width - halfWidth, minY - halfWidth, lineWidth, height, x, y) ||\n  // \n  inBox(minX + halfWidth, minY + height - halfWidth, width, lineWidth, x, y) ||\n  // \n  inBox(minX - halfWidth, minY + halfWidth, lineWidth, height, x, y); // \n}\nfunction inArc(cx, cy, r, startAngle, endAngle, lineWidth, x, y) {\n  var angle = (Math.atan2(y - cy, x - cx) + Math.PI * 2) % (Math.PI * 2); //  0 - 2 * Math.PI \n  // if (angle < startAngle || angle > endAngle) {\n  //   return false;\n  // }\n  var point = {\n    x: cx + r * Math.cos(angle),\n    y: cy + r * Math.sin(angle)\n  };\n  return distance(point.x, point.y, x, y) <= lineWidth / 2;\n}\nfunction inLine(x1, y1, x2, y2, lineWidth, x, y) {\n  var minX = Math.min(x1, x2);\n  var maxX = Math.max(x1, x2);\n  var minY = Math.min(y1, y2);\n  var maxY = Math.max(y1, y2);\n  var halfWidth = lineWidth / 2;\n  // \n  //  lineWidth \n  if (!(x >= minX - halfWidth && x <= maxX + halfWidth && y >= minY - halfWidth && y <= maxY + halfWidth)) {\n    return false;\n  }\n  // \n  return linePointToLine(x1, y1, x2, y2, x, y) <= lineWidth / 2;\n}\nfunction inPolyline(points, lineWidth, x, y, isClose) {\n  var count = points.length;\n  if (count < 2) {\n    return false;\n  }\n  for (var i = 0; i < count - 1; i++) {\n    var x1 = points[i][0];\n    var y1 = points[i][1];\n    var x2 = points[i + 1][0];\n    var y2 = points[i + 1][1];\n    if (inLine(x1, y1, x2, y2, lineWidth, x, y)) {\n      return true;\n    }\n  }\n\n  // \n  if (isClose) {\n    var first = points[0];\n    var last = points[count - 1];\n    if (inLine(first[0], first[1], last[0], last[1], lineWidth, x, y)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n// https://blog.csdn.net/WilliamSun0122/article/details/77994526\nvar tolerance = 1e-6;\n// doubleeps\nfunction dcmp(x) {\n  if (Math.abs(x) < tolerance) {\n    return 0;\n  }\n  return x < 0 ? -1 : 1;\n}\n\n// Qp1p2\nfunction onSegment(p1, p2, q) {\n  if ((q[0] - p1[0]) * (p2[1] - p1[1]) === (p2[0] - p1[0]) * (q[1] - p1[1]) && Math.min(p1[0], p2[0]) <= q[0] && q[0] <= Math.max(p1[0], p2[0]) && Math.min(p1[1], p2[1]) <= q[1] && q[1] <= Math.max(p1[1], p2[1])) {\n    return true;\n  }\n  return false;\n}\n\n// P-\nfunction inPolygon(points, x, y) {\n  var isHit = false;\n  var n = points.length;\n  if (n <= 2) {\n    // svg  3 \n    return false;\n  }\n  for (var i = 0; i < n; i++) {\n    var p1 = points[i];\n    var p2 = points[(i + 1) % n];\n    if (onSegment(p1, p2, [x, y])) {\n      // \n      return true;\n    }\n    // min(p1[1],p2[1])<P.y<=max(p1[1],p2[1])\n    //    \n    if (dcmp(p1[1] - y) > 0 !== dcmp(p2[1] - y) > 0 && dcmp(x - (y - p1[1]) * (p1[0] - p2[0]) / (p1[1] - p2[1]) - p1[0]) < 0) {\n      isHit = !isHit;\n    }\n  }\n  return isHit;\n}\nfunction inPolygons(polygons, x, y) {\n  var isHit = false;\n  for (var i = 0; i < polygons.length; i++) {\n    var points = polygons[i];\n    isHit = inPolygon(points, x, y);\n    if (isHit) {\n      break;\n    }\n  }\n  return isHit;\n}\n\nfunction isPointInPath$6(displayObject, position, isClipPath) {\n  var _ref = displayObject.parsedStyle,\n    x1 = _ref.x1,\n    y1 = _ref.y1,\n    x2 = _ref.x2,\n    y2 = _ref.y2,\n    _ref$lineWidth = _ref.lineWidth,\n    lineWidth = _ref$lineWidth === void 0 ? 1 : _ref$lineWidth,\n    _ref$increasedLineWid = _ref.increasedLineWidthForHitTesting,\n    increasedLineWidthForHitTesting = _ref$increasedLineWid === void 0 ? 0 : _ref$increasedLineWid,\n    _ref$pointerEvents = _ref.pointerEvents,\n    pointerEvents = _ref$pointerEvents === void 0 ? 'auto' : _ref$pointerEvents,\n    fill = _ref.fill,\n    stroke = _ref.stroke;\n  var _isFillOrStrokeAffect = isFillOrStrokeAffected(pointerEvents, fill, stroke),\n    _isFillOrStrokeAffect2 = _slicedToArray(_isFillOrStrokeAffect, 2),\n    hasStroke = _isFillOrStrokeAffect2[1];\n  if (!hasStroke && !isClipPath || !lineWidth) {\n    return false;\n  }\n  return inLine(x1, y1, x2, y2, lineWidth + increasedLineWidthForHitTesting, position.x, position.y);\n}\n\n// TODO: replace it with method in @antv/util\nfunction isPointInStroke(segments, lineWidth, px, py, length) {\n  var isHit = false;\n  var halfWidth = lineWidth / 2;\n  for (var i = 0; i < segments.length; i++) {\n    var segment = segments[i];\n    var currentPoint = segment.currentPoint,\n      params = segment.params,\n      prePoint = segment.prePoint,\n      box = segment.box;\n    // \n    if (box && !inBox(box.x - halfWidth, box.y - halfWidth, box.width + lineWidth, box.height + lineWidth, px, py)) {\n      continue;\n    }\n    switch (segment.command) {\n      // L  Z  M \n      case 'L':\n      case 'Z':\n        isHit = inLine(prePoint[0], prePoint[1], currentPoint[0], currentPoint[1], lineWidth, px, py);\n        if (isHit) {\n          return true;\n        }\n        break;\n      case 'Q':\n        var qDistance = quadPointDistance(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4], px, py);\n        isHit = qDistance <= lineWidth / 2;\n        if (isHit) {\n          return true;\n        }\n        break;\n      case 'C':\n        var cDistance = cubicPointDistance(prePoint[0],\n        // ,  C \n        prePoint[1], params[1],\n        // 'C' 12 34 56 \n        params[2], params[3], params[4], params[5], params[6], px, py, length);\n        isHit = cDistance <= lineWidth / 2;\n        if (isHit) {\n          return true;\n        }\n        break;\n      case 'A':\n        // cache conversion result\n        if (!segment.cubicParams) {\n          segment.cubicParams = arcToCubic(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4], params[5], params[6], params[7], undefined);\n        }\n        var args = segment.cubicParams;\n\n        // fixArc\n        var prePointInCubic = prePoint;\n        for (var _i = 0; _i < args.length; _i += 6) {\n          var _cDistance = cubicPointDistance(prePointInCubic[0],\n          // ,  C \n          prePointInCubic[1], args[_i], args[_i + 1], args[_i + 2], args[_i + 3], args[_i + 4], args[_i + 5], px, py, length);\n          prePointInCubic = [args[_i + 4], args[_i + 5]];\n          isHit = _cDistance <= lineWidth / 2;\n          if (isHit) {\n            return true;\n          }\n        }\n        break;\n    }\n  }\n  return isHit;\n}\nfunction isPointInPath$5(displayObject, position, isClipPath, isPointInPath, renderingPluginContext, runtime) {\n  var _ref = displayObject.parsedStyle,\n    _ref$lineWidth = _ref.lineWidth,\n    lineWidth = _ref$lineWidth === void 0 ? 1 : _ref$lineWidth,\n    _ref$increasedLineWid = _ref.increasedLineWidthForHitTesting,\n    increasedLineWidthForHitTesting = _ref$increasedLineWid === void 0 ? 0 : _ref$increasedLineWid,\n    stroke = _ref.stroke,\n    fill = _ref.fill,\n    d = _ref.d,\n    _ref$pointerEvents = _ref.pointerEvents,\n    pointerEvents = _ref$pointerEvents === void 0 ? 'auto' : _ref$pointerEvents;\n  var segments = d.segments,\n    hasArc = d.hasArc,\n    polylines = d.polylines,\n    polygons = d.polygons;\n  var _isFillOrStrokeAffect = isFillOrStrokeAffected(pointerEvents,\n    // Only a closed path can be filled.\n    (polygons === null || polygons === void 0 ? void 0 : polygons.length) && fill, stroke),\n    _isFillOrStrokeAffect2 = _slicedToArray(_isFillOrStrokeAffect, 2),\n    hasFill = _isFillOrStrokeAffect2[0],\n    hasStroke = _isFillOrStrokeAffect2[1];\n  var totalLength = getOrCalculatePathTotalLength(displayObject);\n  var isHit = false;\n  if (hasFill || isClipPath) {\n    if (hasArc) {\n      //  canvas  api \n      isHit = isPointInPath(displayObject, position);\n    } else {\n      // \n      isHit = inPolygons(polygons, position.x, position.y) || inPolygons(polylines, position.x, position.y);\n    }\n    return isHit;\n  }\n  if (hasStroke || isClipPath) {\n    isHit = isPointInStroke(segments, lineWidth + increasedLineWidthForHitTesting, position.x, position.y, totalLength);\n  }\n  return isHit;\n}\n\nfunction isPointInPath$4(displayObject, position, isClipPath) {\n  var _ref = displayObject.parsedStyle,\n    stroke = _ref.stroke,\n    fill = _ref.fill,\n    _ref$lineWidth = _ref.lineWidth,\n    lineWidth = _ref$lineWidth === void 0 ? 1 : _ref$lineWidth,\n    _ref$increasedLineWid = _ref.increasedLineWidthForHitTesting,\n    increasedLineWidthForHitTesting = _ref$increasedLineWid === void 0 ? 0 : _ref$increasedLineWid,\n    points = _ref.points,\n    _ref$pointerEvents = _ref.pointerEvents,\n    pointerEvents = _ref$pointerEvents === void 0 ? 'auto' : _ref$pointerEvents;\n  var _isFillOrStrokeAffect = isFillOrStrokeAffected(pointerEvents, fill, stroke),\n    _isFillOrStrokeAffect2 = _slicedToArray(_isFillOrStrokeAffect, 2),\n    hasFill = _isFillOrStrokeAffect2[0],\n    hasStroke = _isFillOrStrokeAffect2[1];\n  var isHit = false;\n  if (hasStroke || isClipPath) {\n    isHit = inPolyline(points.points, lineWidth + increasedLineWidthForHitTesting, position.x, position.y, true);\n  }\n  if (!isHit && (hasFill || isClipPath)) {\n    isHit = inPolygon(points.points, position.x, position.y);\n  }\n  return isHit;\n}\n\nfunction isPointInPath$3(displayObject, position, isClipPath) {\n  var _ref = displayObject.parsedStyle,\n    _ref$lineWidth = _ref.lineWidth,\n    lineWidth = _ref$lineWidth === void 0 ? 1 : _ref$lineWidth,\n    _ref$increasedLineWid = _ref.increasedLineWidthForHitTesting,\n    increasedLineWidthForHitTesting = _ref$increasedLineWid === void 0 ? 0 : _ref$increasedLineWid,\n    points = _ref.points,\n    _ref$pointerEvents = _ref.pointerEvents,\n    pointerEvents = _ref$pointerEvents === void 0 ? 'auto' : _ref$pointerEvents,\n    fill = _ref.fill,\n    stroke = _ref.stroke;\n  var _isFillOrStrokeAffect = isFillOrStrokeAffected(pointerEvents, fill, stroke),\n    _isFillOrStrokeAffect2 = _slicedToArray(_isFillOrStrokeAffect, 2),\n    hasStroke = _isFillOrStrokeAffect2[1];\n  if (!hasStroke && !isClipPath || !lineWidth) {\n    return false;\n  }\n  return inPolyline(points.points, lineWidth + increasedLineWidthForHitTesting, position.x, position.y, false);\n}\n\nfunction isPointInPath$2(displayObject, position, isClipPath, isPointInPath, runtime) {\n  var _ref = displayObject.parsedStyle,\n    radius = _ref.radius,\n    fill = _ref.fill,\n    stroke = _ref.stroke,\n    _ref$lineWidth = _ref.lineWidth,\n    lineWidth = _ref$lineWidth === void 0 ? 1 : _ref$lineWidth,\n    _ref$increasedLineWid = _ref.increasedLineWidthForHitTesting,\n    increasedLineWidthForHitTesting = _ref$increasedLineWid === void 0 ? 0 : _ref$increasedLineWid,\n    _ref$x = _ref.x,\n    x = _ref$x === void 0 ? 0 : _ref$x,\n    _ref$y = _ref.y,\n    y = _ref$y === void 0 ? 0 : _ref$y,\n    width = _ref.width,\n    height = _ref.height,\n    _ref$pointerEvents = _ref.pointerEvents,\n    pointerEvents = _ref$pointerEvents === void 0 ? 'auto' : _ref$pointerEvents;\n  var _isFillOrStrokeAffect = isFillOrStrokeAffected(pointerEvents, fill, stroke),\n    _isFillOrStrokeAffect2 = _slicedToArray(_isFillOrStrokeAffect, 2),\n    hasFill = _isFillOrStrokeAffect2[0],\n    hasStroke = _isFillOrStrokeAffect2[1];\n  var hasRadius = radius && radius.some(function (r) {\n    return r !== 0;\n  });\n  var lineWidthForHitTesting = lineWidth + increasedLineWidthForHitTesting;\n\n  // \n  if (!hasRadius) {\n    var halfWidth = lineWidthForHitTesting / 2;\n    // \n    if (hasFill && hasStroke || isClipPath) {\n      return inBox(x - halfWidth, y - halfWidth, width + halfWidth, height + halfWidth, position.x, position.y);\n    }\n    // \n    if (hasFill) {\n      return inBox(x, y, width, height, position.x, position.y);\n    }\n    if (hasStroke) {\n      return inRect(x, y, width, height, lineWidthForHitTesting, position.x, position.y);\n    }\n  } else {\n    var isHit = false;\n    if (hasStroke || isClipPath) {\n      isHit = inRectWithRadius(x, y, width, height, radius.map(function (r) {\n        return clamp(r, 0, Math.min(Math.abs(width) / 2, Math.abs(height) / 2));\n      }), lineWidthForHitTesting, position.x, position.y);\n    }\n    // \n    // \n    if (!isHit && (hasFill || isClipPath)) {\n      isHit = isPointInPath(displayObject, position);\n    }\n    return isHit;\n  }\n  return false;\n}\nfunction inRectWithRadius(minX, minY, width, height, radiusArray, lineWidth, x, y) {\n  var _radiusArray = _slicedToArray(radiusArray, 4),\n    tlr = _radiusArray[0],\n    trr = _radiusArray[1],\n    brr = _radiusArray[2],\n    blr = _radiusArray[3];\n  return inLine(minX + tlr, minY, minX + width - trr, minY, lineWidth, x, y) || inLine(minX + width, minY + trr, minX + width, minY + height - brr, lineWidth, x, y) || inLine(minX + width - brr, minY + height, minX + blr, minY + height, lineWidth, x, y) || inLine(minX, minY + height - blr, minX, minY + tlr, lineWidth, x, y) || inArc(minX + width - trr, minY + trr, trr, 1.5 * Math.PI, 2 * Math.PI, lineWidth, x, y) || inArc(minX + width - brr, minY + height - brr, brr, 0, 0.5 * Math.PI, lineWidth, x, y) || inArc(minX + blr, minY + height - blr, blr, 0.5 * Math.PI, Math.PI, lineWidth, x, y) || inArc(minX + tlr, minY + tlr, tlr, Math.PI, 1.5 * Math.PI, lineWidth, x, y);\n}\n\nfunction isPointInPath$1(displayObject, position, isClipPath, isPointInPath, renderingPluginContext, runtime) {\n  var _ref = displayObject.parsedStyle,\n    _ref$pointerEvents = _ref.pointerEvents,\n    pointerEvents = _ref$pointerEvents === void 0 ? 'auto' : _ref$pointerEvents,\n    _ref$x = _ref.x,\n    x = _ref$x === void 0 ? 0 : _ref$x,\n    _ref$y = _ref.y,\n    y = _ref$y === void 0 ? 0 : _ref$y,\n    width = _ref.width,\n    height = _ref.height;\n  if (pointerEvents === 'non-transparent-pixel') {\n    var offscreenCanvas = renderingPluginContext.config.offscreenCanvas;\n    var canvas = runtime.offscreenCanvasCreator.getOrCreateCanvas(offscreenCanvas);\n    var context = runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas, {\n      willReadFrequently: true\n    });\n    canvas.width = width;\n    canvas.height = height;\n    renderingPluginContext.defaultStyleRendererFactory[Shape.IMAGE].render(context, _objectSpread(_objectSpread({}, displayObject.parsedStyle), {}, {\n      x: 0,\n      y: 0\n    }), displayObject, undefined, undefined, undefined);\n    var imagedata = context.getImageData(position.x - x, position.y - y, 1, 1).data;\n    return imagedata.every(function (component) {\n      return component !== 0;\n    });\n  }\n  return true;\n}\n\nfunction isPointInPath(displayObject, position, isClipPath, isPointInPath) {\n  var bounds = displayObject.getGeometryBounds();\n\n  // @see https://stackoverflow.com/questions/28706989/how-do-i-check-if-a-mouse-click-is-inside-a-rotated-text-on-the-html5-canvas-in\n  return position.x >= bounds.min[0] && position.y >= bounds.min[1] && position.x <= bounds.max[0] && position.y <= bounds.max[1];\n}\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    _classCallCheck(this, Plugin);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Plugin, [].concat(args));\n    _this.name = 'canvas-picker';\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init() {\n      var _pointInPathPickerFac;\n      var pointInPathPickerFactory = (_pointInPathPickerFac = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_pointInPathPickerFac, Shape.CIRCLE, isPointInPath$8), Shape.ELLIPSE, isPointInPath$7), Shape.RECT, isPointInPath$2), Shape.LINE, isPointInPath$6), Shape.POLYLINE, isPointInPath$3), Shape.POLYGON, isPointInPath$4), Shape.PATH, isPointInPath$5), Shape.TEXT, isPointInPath), Shape.GROUP, null), Shape.IMAGE, isPointInPath$1), _defineProperty(_defineProperty(_pointInPathPickerFac, Shape.HTML, null), Shape.MESH, null));\n\n      // @ts-ignore\n      this.context.pointInPathPickerFactory = pointInPathPickerFactory;\n      this.addRenderingPlugin(new CanvasPickerPlugin());\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      // @ts-ignore\n      delete this.context.pointInPathPickerFactory;\n      this.removeAllRenderingPlugins();\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { Plugin };\n//# sourceMappingURL=index.esm.js.map\n","function _classPrivateFieldBase(e, t) {\n  if (!{}.hasOwnProperty.call(e, t)) throw new TypeError(\"attempted to use private field on non-instance\");\n  return e;\n}\nexport { _classPrivateFieldBase as default };","var id = 0;\nfunction _classPrivateFieldKey(e) {\n  return \"__private_\" + id++ + \"_\" + e;\n}\nexport { _classPrivateFieldKey as default };","/*!\n * @antv/g-plugin-image-loader\n * @description A G plugin for loading image\n * @version 2.1.16\n * @date 1/2/2025, 2:55:54 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { ElementEvent, OffscreenCanvasCreator, parsedTransformToMat4, parseTransform, DisplayObject, GradientType, computeLinearGradient, computeRadialGradient, UnitType, Shape, AbstractRendererPlugin } from '@antv/g-lite';\nimport _regeneratorRuntime from '@babel/runtime/helpers/regeneratorRuntime';\nimport _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport { isString } from '@antv/util';\nimport { mat4 } from 'gl-matrix';\n\nvar RefCountCache = /*#__PURE__*/function () {\n  function RefCountCache() {\n    _classCallCheck(this, RefCountCache);\n    this.cacheStore = new Map();\n  }\n  return _createClass(RefCountCache, [{\n    key: \"onRefAdded\",\n    value: function onRefAdded(ref) {}\n  }, {\n    key: \"has\",\n    value: function has(key) {\n      return this.cacheStore.has(key);\n    }\n  }, {\n    key: \"put\",\n    value: function put(key, item, ref) {\n      if (this.cacheStore.has(key)) {\n        return false;\n      }\n      this.cacheStore.set(key, {\n        value: item,\n        counter: new Set([ref])\n      });\n      this.onRefAdded(ref);\n      return true;\n    }\n  }, {\n    key: \"get\",\n    value: function get(key, ref) {\n      var cacheItem = this.cacheStore.get(key);\n      if (!cacheItem) {\n        return null;\n      }\n      if (!cacheItem.counter.has(ref)) {\n        cacheItem.counter.add(ref);\n        this.onRefAdded(ref);\n      }\n      return cacheItem.value;\n    }\n  }, {\n    key: \"update\",\n    value: function update(key, value, ref) {\n      var cacheItem = this.cacheStore.get(key);\n      if (!cacheItem) {\n        return false;\n      }\n      cacheItem.value = _objectSpread(_objectSpread({}, cacheItem.value), value);\n      if (!cacheItem.counter.has(ref)) {\n        cacheItem.counter.add(ref);\n        this.onRefAdded(ref);\n      }\n      return true;\n    }\n  }, {\n    key: \"release\",\n    value: function release(key, ref) {\n      var cacheItem = this.cacheStore.get(key);\n      if (!cacheItem) {\n        return false;\n      }\n      cacheItem.counter[\"delete\"](ref);\n      if (cacheItem.counter.size <= 0) {\n        this.cacheStore[\"delete\"](key);\n      }\n      return true;\n    }\n  }, {\n    key: \"releaseRef\",\n    value: function releaseRef(ref) {\n      var _this = this;\n      Array.from(this.cacheStore.keys()).forEach(function (key) {\n        _this.release(key, ref);\n      });\n    }\n  }, {\n    key: \"getSize\",\n    value: function getSize() {\n      return this.cacheStore.size;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.cacheStore.clear();\n    }\n  }]);\n}();\n\nvar tasks = [];\nvar nextFrameTasks = [];\nvar ImageSlicer = /*#__PURE__*/function () {\n  function ImageSlicer() {\n    _classCallCheck(this, ImageSlicer);\n  }\n  return _createClass(ImageSlicer, null, [{\n    key: \"stop\",\n    value: function stop() {\n      var api = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ImageSlicer.api;\n      if (ImageSlicer.rafId) {\n        api.cancelAnimationFrame(ImageSlicer.rafId);\n        ImageSlicer.rafId = null;\n      }\n    }\n  }, {\n    key: \"executeTask\",\n    value: function executeTask() {\n      var api = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ImageSlicer.api;\n      if (tasks.length <= 0 && nextFrameTasks.length <= 0) {\n        return;\n      }\n      nextFrameTasks.forEach(function (task) {\n        return task();\n      });\n      nextFrameTasks = tasks.splice(0, ImageSlicer.TASK_NUM_PER_FRAME);\n      ImageSlicer.rafId = api.requestAnimationFrame(function () {\n        ImageSlicer.executeTask(api);\n      });\n    }\n  }, {\n    key: \"sliceImage\",\n    value: function sliceImage(image, sliceWidth, sliceHeight, rerender) {\n      var overlap = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n      var api = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : ImageSlicer.api;\n      var imageWidth = image.naturalWidth || image.width;\n      var imageHeight = image.naturalHeight || image.height;\n\n      // ()\n      var strideW = sliceWidth - overlap;\n      var strideH = sliceHeight - overlap;\n\n      // \n      var gridCols = Math.ceil(imageWidth / strideW);\n      var gridRows = Math.ceil(imageHeight / strideH);\n      var result = {\n        tileSize: [sliceWidth, sliceHeight],\n        gridSize: [gridRows, gridCols],\n        tiles: Array(gridRows).fill(null).map(function () {\n          return Array(gridCols).fill(null);\n        })\n      };\n\n      // \n      var _loop = function _loop(row) {\n        var _loop2 = function _loop2(col) {\n          tasks.push(function () {\n            // \n            var startX = col * strideW;\n            var startY = row * strideH;\n\n            // /\n            var _ref = [Math.min(sliceWidth, imageWidth - startX), Math.min(sliceHeight, imageHeight - startY)],\n              tempSliceWidth = _ref[0],\n              tempSliceHeight = _ref[1];\n\n            // canvas\n            var sliceCanvas = api.createCanvas();\n            sliceCanvas.width = sliceWidth;\n            sliceCanvas.height = sliceHeight;\n            var sliceCtx = sliceCanvas.getContext('2d');\n\n            // canvas\n            sliceCtx.drawImage(image, startX, startY, tempSliceWidth, tempSliceHeight, 0, 0, tempSliceWidth, tempSliceHeight);\n\n            // \n            result.tiles[row][col] = {\n              x: startX,\n              y: startY,\n              tileX: col,\n              tileY: row,\n              data: sliceCanvas\n            };\n            rerender();\n          });\n        };\n        for (var col = 0; col < gridCols; col++) {\n          _loop2(col);\n        }\n      };\n      for (var row = 0; row < gridRows; row++) {\n        _loop(row);\n      }\n      ImageSlicer.stop();\n      ImageSlicer.executeTask();\n      return result;\n    }\n  }]);\n}();\nImageSlicer.TASK_NUM_PER_FRAME = 10;\n\nvar IMAGE_CACHE = new RefCountCache();\nIMAGE_CACHE.onRefAdded = function onRefAdded(ref) {\n  var _this = this;\n  ref.addEventListener(ElementEvent.DESTROY, function () {\n    _this.releaseRef(ref);\n  }, {\n    once: true\n  });\n};\nvar ImagePool = /*#__PURE__*/function () {\n  function ImagePool(context, runtime) {\n    _classCallCheck(this, ImagePool);\n    this.gradientCache = {};\n    this.patternCache = {};\n    this.context = context;\n    this.runtime = runtime;\n  }\n  return _createClass(ImagePool, [{\n    key: \"getImageSync\",\n    value: function getImageSync(src, ref, callback) {\n      var imageSource = isString(src) ? src : src.src;\n      if (IMAGE_CACHE.has(imageSource)) {\n        var imageCache = IMAGE_CACHE.get(imageSource, ref);\n        if (imageCache.img.complete) {\n          callback === null || callback === void 0 || callback(imageCache);\n          return imageCache;\n        }\n      }\n      this.getOrCreateImage(src, ref).then(function (cache) {\n        callback === null || callback === void 0 || callback(cache);\n      })[\"catch\"](function () {\n        //\n      });\n      return null;\n    }\n  }, {\n    key: \"getOrCreateImage\",\n    value: function getOrCreateImage(src, ref) {\n      var _this2 = this;\n      var imageSource = isString(src) ? src : src.src;\n      if (!isString(src) && !IMAGE_CACHE.has(imageSource)) {\n        var imageCache = {\n          img: src,\n          size: [src.naturalWidth || src.width, src.naturalHeight || src.height],\n          tileSize: calculateImageTileSize(src)\n        };\n        IMAGE_CACHE.put(imageSource, imageCache, ref);\n      }\n      if (IMAGE_CACHE.has(imageSource)) {\n        var _imageCache = IMAGE_CACHE.get(imageSource, ref);\n        if (_imageCache.img.complete) {\n          return Promise.resolve(_imageCache);\n        }\n        return new Promise(function (resolve, reject) {\n          _imageCache.img.addEventListener('load', function () {\n            _imageCache.size = [_imageCache.img.naturalWidth || _imageCache.img.width, _imageCache.img.naturalHeight || _imageCache.img.height];\n            _imageCache.tileSize = calculateImageTileSize(_imageCache.img);\n            resolve(_imageCache);\n          });\n          _imageCache.img.addEventListener('error', function (ev) {\n            reject(ev);\n          });\n        });\n      }\n      return new Promise(function (resolve, reject) {\n        // @see https://github.com/antvis/g/issues/938\n        var image = _this2.context.config.createImage();\n        if (image) {\n          var _imageCache2 = {\n            img: image,\n            size: [0, 0],\n            tileSize: calculateImageTileSize(image)\n          };\n          IMAGE_CACHE.put(imageSource, _imageCache2, ref);\n          image.onload = function () {\n            _imageCache2.size = [image.naturalWidth || image.width, image.naturalHeight || image.height];\n            _imageCache2.tileSize = calculateImageTileSize(_imageCache2.img);\n            resolve(_imageCache2);\n          };\n          image.onerror = function (ev) {\n            reject(ev);\n          };\n          image.crossOrigin = 'Anonymous';\n          image.src = imageSource;\n        }\n      });\n    }\n  }, {\n    key: \"createDownSampledImage\",\n    value: function () {\n      var _createDownSampledImage = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(src, ref) {\n        var imageCache, enableLargeImageOptimization, _ref, _ref$maxDownSampledIm, maxDownSampledImageSize, _ref$downSamplingRate, downSamplingRateThreshold, createImageBitmapFunc, _imageCache$size, originWidth, originHeight, resizedImage, downSamplingRate, updateCache;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.getOrCreateImage(src, ref);\n            case 2:\n              imageCache = _context.sent;\n              if (!(typeof imageCache.downSamplingRate !== 'undefined')) {\n                _context.next = 5;\n                break;\n              }\n              return _context.abrupt(\"return\", imageCache);\n            case 5:\n              enableLargeImageOptimization = this.context.config.enableLargeImageOptimization;\n              _ref = typeof enableLargeImageOptimization === 'boolean' ? {} : enableLargeImageOptimization, _ref$maxDownSampledIm = _ref.maxDownSampledImageSize, maxDownSampledImageSize = _ref$maxDownSampledIm === void 0 ? 2048 : _ref$maxDownSampledIm, _ref$downSamplingRate = _ref.downSamplingRateThreshold, downSamplingRateThreshold = _ref$downSamplingRate === void 0 ? 0.5 : _ref$downSamplingRate;\n              createImageBitmapFunc = this.runtime.globalThis.createImageBitmap;\n              _imageCache$size = _slicedToArray(imageCache.size, 2), originWidth = _imageCache$size[0], originHeight = _imageCache$size[1];\n              resizedImage = imageCache.img;\n              downSamplingRate = Math.min((maxDownSampledImageSize + maxDownSampledImageSize) / (originWidth + originHeight), Math.max(0.01, Math.min(downSamplingRateThreshold, 0.5)));\n              updateCache = _objectSpread(_objectSpread({}, imageCache), {}, {\n                downSamplingRate: downSamplingRate\n              });\n              IMAGE_CACHE.update(imageCache.img.src, updateCache, ref);\n              if (!createImageBitmapFunc) {\n                _context.next = 25;\n                break;\n              }\n              _context.prev = 14;\n              _context.next = 17;\n              return createImageBitmapFunc(imageCache.img, {\n                resizeWidth: originWidth * downSamplingRate,\n                resizeHeight: originHeight * downSamplingRate\n              });\n            case 17:\n              resizedImage = _context.sent;\n              _context.next = 23;\n              break;\n            case 20:\n              _context.prev = 20;\n              _context.t0 = _context[\"catch\"](14);\n              downSamplingRate = 1;\n            case 23:\n              _context.next = 26;\n              break;\n            case 25:\n              downSamplingRate = 1;\n            case 26:\n              updateCache = _objectSpread(_objectSpread({}, this.getImageSync(src, ref)), {}, {\n                downSampled: resizedImage,\n                downSamplingRate: downSamplingRate\n              });\n              IMAGE_CACHE.update(imageCache.img.src, updateCache, ref);\n              return _context.abrupt(\"return\", updateCache);\n            case 29:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this, [[14, 20]]);\n      }));\n      function createDownSampledImage(_x, _x2) {\n        return _createDownSampledImage.apply(this, arguments);\n      }\n      return createDownSampledImage;\n    }()\n  }, {\n    key: \"createImageTiles\",\n    value: function () {\n      var _createImageTiles = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(src, tiles, rerender, ref) {\n        var imageCache, _ref$ownerDocument$de, requestAnimationFrame, cancelAnimationFrame, updateCache;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return this.getOrCreateImage(src, ref);\n            case 2:\n              imageCache = _context2.sent;\n              _ref$ownerDocument$de = ref.ownerDocument.defaultView, requestAnimationFrame = _ref$ownerDocument$de.requestAnimationFrame, cancelAnimationFrame = _ref$ownerDocument$de.cancelAnimationFrame;\n              ImageSlicer.api = {\n                requestAnimationFrame: requestAnimationFrame,\n                cancelAnimationFrame: cancelAnimationFrame,\n                createCanvas: function createCanvas() {\n                  return OffscreenCanvasCreator.createCanvas();\n                }\n              };\n              updateCache = _objectSpread(_objectSpread({}, imageCache), ImageSlicer.sliceImage(imageCache.img, imageCache.tileSize[0], imageCache.tileSize[0], rerender));\n              IMAGE_CACHE.update(imageCache.img.src, updateCache, ref);\n              return _context2.abrupt(\"return\", updateCache);\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function createImageTiles(_x3, _x4, _x5, _x6) {\n        return _createImageTiles.apply(this, arguments);\n      }\n      return createImageTiles;\n    }()\n  }, {\n    key: \"releaseImage\",\n    value: function releaseImage(src, ref) {\n      IMAGE_CACHE.release(isString(src) ? src : src.src, ref);\n    }\n  }, {\n    key: \"releaseImageRef\",\n    value: function releaseImageRef(ref) {\n      IMAGE_CACHE.releaseRef(ref);\n    }\n  }, {\n    key: \"getOrCreatePatternSync\",\n    value: function getOrCreatePatternSync(object, pattern, context, $offscreenCanvas, dpr, min, callback) {\n      var patternKey = this.generatePatternKey(pattern);\n      if (patternKey && this.patternCache[patternKey]) {\n        return this.patternCache[patternKey];\n      }\n      var image = pattern.image,\n        repetition = pattern.repetition,\n        transform = pattern.transform;\n      var src;\n      var needScaleWithDPR = false;\n      // Image URL\n      if (isString(image)) {\n        var imageCache = this.getImageSync(image, object, callback);\n        src = imageCache === null || imageCache === void 0 ? void 0 : imageCache.img;\n      } else if ($offscreenCanvas) {\n        src = $offscreenCanvas;\n        needScaleWithDPR = true;\n      } else {\n        src = image;\n      }\n\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createPattern\n      var canvasPattern = src && context.createPattern(src, repetition);\n      if (canvasPattern) {\n        var mat;\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasPattern/setTransform\n        if (transform) {\n          mat = parsedTransformToMat4(parseTransform(transform), new DisplayObject({}));\n        } else {\n          mat = mat4.identity(mat4.create());\n        }\n        if (needScaleWithDPR) {\n          mat4.scale(mat, mat, [1 / dpr, 1 / dpr, 1]);\n        }\n        canvasPattern.setTransform({\n          a: mat[0],\n          b: mat[1],\n          c: mat[4],\n          d: mat[5],\n          e: mat[12] + min[0],\n          f: mat[13] + min[1]\n        });\n      }\n      if (patternKey && canvasPattern) {\n        this.patternCache[patternKey] = canvasPattern;\n      }\n      return canvasPattern;\n    }\n  }, {\n    key: \"getOrCreateGradient\",\n    value: function getOrCreateGradient(params, context) {\n      var key = this.generateGradientKey(params);\n      var type = params.type,\n        steps = params.steps,\n        min = params.min,\n        width = params.width,\n        height = params.height,\n        angle = params.angle,\n        cx = params.cx,\n        cy = params.cy,\n        size = params.size;\n      if (this.gradientCache[key]) {\n        return this.gradientCache[key];\n      }\n      var gradient = null;\n      if (type === GradientType.LinearGradient) {\n        var _computeLinearGradien = computeLinearGradient(min, width, height, angle),\n          x1 = _computeLinearGradien.x1,\n          y1 = _computeLinearGradien.y1,\n          x2 = _computeLinearGradien.x2,\n          y2 = _computeLinearGradien.y2;\n        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createLinearGradient\n        gradient = context.createLinearGradient(x1, y1, x2, y2);\n      } else if (type === GradientType.RadialGradient) {\n        var _computeRadialGradien = computeRadialGradient(min, width, height, cx, cy, size),\n          x = _computeRadialGradien.x,\n          y = _computeRadialGradien.y,\n          r = _computeRadialGradien.r;\n        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createRadialGradient\n        gradient = context.createRadialGradient(x, y, 0, x, y, r);\n      }\n      if (gradient) {\n        steps.forEach(function (_ref2) {\n          var offset = _ref2.offset,\n            color = _ref2.color;\n          if (offset.unit === UnitType.kPercentage) {\n            var _gradient;\n            (_gradient = gradient) === null || _gradient === void 0 || _gradient.addColorStop(offset.value / 100, color.toString());\n          }\n        });\n        this.gradientCache[key] = gradient;\n      }\n      return this.gradientCache[key];\n    }\n  }, {\n    key: \"generateGradientKey\",\n    value: function generateGradientKey(params) {\n      var type = params.type,\n        min = params.min,\n        width = params.width,\n        height = params.height,\n        steps = params.steps,\n        angle = params.angle,\n        cx = params.cx,\n        cy = params.cy,\n        size = params.size;\n      return \"gradient-\".concat(type, \"-\").concat((angle === null || angle === void 0 ? void 0 : angle.toString()) || 0, \"-\").concat((cx === null || cx === void 0 ? void 0 : cx.toString()) || 0, \"-\").concat((cy === null || cy === void 0 ? void 0 : cy.toString()) || 0, \"-\").concat((size === null || size === void 0 ? void 0 : size.toString()) || 0, \"-\").concat(min[0], \"-\").concat(min[1], \"-\").concat(width, \"-\").concat(height, \"-\").concat(steps.map(function (_ref3) {\n        var offset = _ref3.offset,\n          color = _ref3.color;\n        return \"\".concat(offset).concat(color);\n      }).join('-'));\n    }\n  }, {\n    key: \"generatePatternKey\",\n    value: function generatePatternKey(pattern) {\n      var image = pattern.image,\n        repetition = pattern.repetition;\n      // only generate cache for Image\n      if (isString(image)) {\n        return \"pattern-\".concat(image, \"-\").concat(repetition);\n      }\n      if (image.nodeName === 'rect') {\n        return \"pattern-\".concat(image.entity, \"-\").concat(repetition);\n      }\n    }\n  }]);\n}();\nImagePool.isSupportTile = !!OffscreenCanvasCreator.createCanvas();\nfunction calculateImageTileSize(img) {\n  if (!img.complete) {\n    return [0, 0];\n  }\n  var width = img.naturalWidth || img.width,\n    height = img.naturalHeight || img.height;\n  var tileSize = 256;\n  [256, 512].forEach(function (size) {\n    var rows = Math.ceil(height / size);\n    var cols = Math.ceil(width / size);\n    if (rows * cols < 1e3) {\n      tileSize = size;\n    }\n  });\n  return [tileSize, tileSize];\n}\n\nvar LoadImagePlugin = /*#__PURE__*/function () {\n  function LoadImagePlugin() {\n    _classCallCheck(this, LoadImagePlugin);\n  }\n  return _createClass(LoadImagePlugin, [{\n    key: \"apply\",\n    value: function apply(context) {\n      var renderingService = context.renderingService,\n        renderingContext = context.renderingContext,\n        imagePool = context.imagePool;\n      var canvas = renderingContext.root.ownerDocument.defaultView;\n      var calculateWithAspectRatio = function calculateWithAspectRatio(object, imageWidth, imageHeight) {\n        var _object$parsedStyle = object.parsedStyle,\n          width = _object$parsedStyle.width,\n          height = _object$parsedStyle.height;\n        if (width && !height) {\n          object.setAttribute('height', imageHeight / imageWidth * width);\n        } else if (!width && height) {\n          object.setAttribute('width', imageWidth / imageHeight * height);\n        }\n      };\n      var handleMounted = function handleMounted(e) {\n        var object = e.target;\n        var nodeName = object.nodeName,\n          attributes = object.attributes;\n        if (nodeName === Shape.IMAGE) {\n          var src = attributes.src,\n            keepAspectRatio = attributes.keepAspectRatio;\n          imagePool.getImageSync(src, object, function (_ref) {\n            var _ref$img = _ref.img,\n              width = _ref$img.width,\n              height = _ref$img.height;\n            if (keepAspectRatio) {\n              calculateWithAspectRatio(object, width, height);\n            }\n\n            // set dirty rectangle flag\n            object.renderable.dirty = true;\n            renderingService.dirtify();\n          });\n        }\n      };\n      var handleAttributeChanged = function handleAttributeChanged(e) {\n        var object = e.target;\n        var attrName = e.attrName,\n          prevValue = e.prevValue,\n          newValue = e.newValue;\n        if (object.nodeName !== Shape.IMAGE || attrName !== 'src') {\n          return;\n        }\n        if (prevValue !== newValue) {\n          imagePool.releaseImage(prevValue, object);\n        }\n        if (isString(newValue)) {\n          imagePool.getOrCreateImage(newValue, object).then(function (_ref2) {\n            var _ref2$img = _ref2.img,\n              width = _ref2$img.width,\n              height = _ref2$img.height;\n            if (object.attributes.keepAspectRatio) {\n              calculateWithAspectRatio(object, width, height);\n            }\n\n            // set dirty rectangle flag\n            object.renderable.dirty = true;\n            renderingService.dirtify();\n          })[\"catch\"](function () {\n            //\n          });\n        }\n      };\n      renderingService.hooks.init.tap(LoadImagePlugin.tag, function () {\n        canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n        canvas.addEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n      });\n      renderingService.hooks.destroy.tap(LoadImagePlugin.tag, function () {\n        canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n        canvas.removeEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n      });\n    }\n  }]);\n}();\nLoadImagePlugin.tag = 'LoadImage';\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    _classCallCheck(this, Plugin);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Plugin, [].concat(args));\n    _this.name = 'image-loader';\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init(runtime) {\n      // @ts-ignore\n      this.context.imagePool = new ImagePool(this.context, runtime);\n      this.addRenderingPlugin(new LoadImagePlugin());\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeAllRenderingPlugins();\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { ImagePool, Plugin };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-plugin-canvas-renderer\n * @description A G plugin of renderer implementation with Canvas2D API\n * @version 2.2.16\n * @date 1/2/2025, 2:56:41 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { ElementEvent, AABB, CustomEvent, CanvasEvent, Shape, Node, GradientType, isPattern, AbstractRendererPlugin } from '@antv/g-lite';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _classPrivateFieldLooseBase from '@babel/runtime/helpers/classPrivateFieldLooseBase';\nimport _classPrivateFieldLooseKey from '@babel/runtime/helpers/classPrivateFieldLooseKey';\nimport { mat4, vec3 } from 'gl-matrix';\nimport { isNil } from '@antv/util';\nimport { ImagePool } from '@antv/g-plugin-image-loader';\n\nvar _renderState = /*#__PURE__*/_classPrivateFieldLooseKey(\"renderState\");\n/**\n * support 2 modes in rendering:\n * * immediate\n * * delayed: render at the end of frame with dirty-rectangle\n */\nvar CanvasRendererPlugin = /*#__PURE__*/function () {\n  /**\n   * RBush used in dirty rectangle rendering\n   */\n\n  function CanvasRendererPlugin(canvasRendererPluginOptions // private styleRendererFactory: Record<Shape, StyleRenderer>,\n  ) {\n    _classCallCheck(this, CanvasRendererPlugin);\n    this.removedRBushNodeAABBs = [];\n    this.renderQueue = [];\n    Object.defineProperty(this, _renderState, {\n      writable: true,\n      value: {\n        restoreStack: [],\n        prevObject: null,\n        currentContext: new Map()\n      }\n    });\n    this.clearFullScreenLastFrame = false;\n    this.clearFullScreen = false;\n    /**\n     * view projection matrix\n     */\n    this.vpMatrix = mat4.create();\n    this.dprMatrix = mat4.create();\n    this.tmpMat4 = mat4.create();\n    this.vec3a = vec3.create();\n    this.vec3b = vec3.create();\n    this.vec3c = vec3.create();\n    this.vec3d = vec3.create();\n    this.canvasRendererPluginOptions = canvasRendererPluginOptions;\n  }\n  return _createClass(CanvasRendererPlugin, [{\n    key: \"apply\",\n    value: function apply(context, runtime) {\n      var _this = this;\n      this.context = context;\n      var _this$context = this.context,\n        config = _this$context.config,\n        camera = _this$context.camera,\n        renderingService = _this$context.renderingService,\n        renderingContext = _this$context.renderingContext,\n        rBushRoot = _this$context.rBushRoot,\n        pathGeneratorFactory = _this$context.pathGeneratorFactory;\n      var enableRenderingOptimization = config.renderer.getConfig().enableRenderingOptimization;\n      config.renderer.getConfig().enableDirtyCheck = false;\n      config.renderer.getConfig().enableDirtyRectangleRendering = false;\n      this.rBush = rBushRoot;\n      this.pathGeneratorFactory = pathGeneratorFactory;\n      var contextService = context.contextService;\n      var canvas = renderingContext.root.ownerDocument.defaultView;\n      var handleUnmounted = function handleUnmounted(e) {\n        var object = e.target;\n\n        // remove r-bush node\n        // @ts-ignore\n        var rBushNode = object.rBushNode;\n        if (rBushNode.aabb) {\n          // save removed aabbs for dirty-rectangle rendering later\n          _this.removedRBushNodeAABBs.push(rBushNode.aabb);\n        }\n      };\n      var handleCulled = function handleCulled(e) {\n        var object = e.target;\n        // @ts-ignore\n        var rBushNode = object.rBushNode;\n        if (rBushNode.aabb) {\n          // save removed aabbs for dirty-rectangle rendering later\n          _this.removedRBushNodeAABBs.push(rBushNode.aabb);\n        }\n      };\n      renderingService.hooks.init.tap(CanvasRendererPlugin.tag, function () {\n        canvas.addEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n        canvas.addEventListener(ElementEvent.CULLED, handleCulled);\n\n        // clear fullscreen\n        var dpr = contextService.getDPR();\n        var width = config.width,\n          height = config.height;\n        var context = contextService.getContext();\n        _this.clearRect(context, 0, 0, width * dpr, height * dpr, config.background);\n      });\n      renderingService.hooks.destroy.tap(CanvasRendererPlugin.tag, function () {\n        canvas.removeEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n        canvas.removeEventListener(ElementEvent.CULLED, handleCulled);\n        _this.renderQueue = [];\n        _this.removedRBushNodeAABBs = [];\n        _classPrivateFieldLooseBase(_this, _renderState)[_renderState] = {\n          restoreStack: [],\n          prevObject: null,\n          currentContext: null\n        };\n      });\n      renderingService.hooks.beginFrame.tap(CanvasRendererPlugin.tag, function () {\n        var _canvas$context$rende;\n        var context = contextService.getContext();\n        var dpr = contextService.getDPR();\n        var width = config.width,\n          height = config.height;\n        var _this$canvasRendererP = _this.canvasRendererPluginOptions,\n          dirtyObjectNumThreshold = _this$canvasRendererP.dirtyObjectNumThreshold,\n          dirtyObjectRatioThreshold = _this$canvasRendererP.dirtyObjectRatioThreshold;\n\n        // some heuristic conditions such as 80% object changed\n        var _renderingService$get = renderingService.getStats(),\n          total = _renderingService$get.total,\n          rendered = _renderingService$get.rendered;\n        var ratio = rendered / total;\n        _this.clearFullScreen = _this.clearFullScreenLastFrame ||\n        // @ts-ignore\n        !((_canvas$context$rende = canvas.context.renderingPlugins[1]) !== null && _canvas$context$rende !== void 0 && _canvas$context$rende.isFirstTimeRenderingFinished) || renderingService.disableDirtyRectangleRendering() || rendered > dirtyObjectNumThreshold && ratio > dirtyObjectRatioThreshold;\n        if (context) {\n          if (typeof context.resetTransform === 'function') {\n            context.resetTransform();\n          } else {\n            context.setTransform(1, 0, 0, 1, 0, 0);\n          }\n          if (_this.clearFullScreen) {\n            _this.clearRect(context, 0, 0, width * dpr, height * dpr, config.background);\n          }\n        }\n      });\n\n      /**\n       * render objects by z-index\n       *\n       * - The level of the child node will be affected by the level of the parent node\n       */\n      var renderByZIndex = function renderByZIndex(object, context) {\n        var stack = [object];\n        while (stack.length > 0) {\n          var currentObject = stack.pop();\n          if (currentObject.isVisible() && !currentObject.isCulled()) {\n            if (enableRenderingOptimization) {\n              _this.renderDisplayObjectOptimized(currentObject, context, _this.context, _classPrivateFieldLooseBase(_this, _renderState)[_renderState], runtime);\n            } else {\n              _this.renderDisplayObject(currentObject, context, _this.context, _classPrivateFieldLooseBase(_this, _renderState)[_renderState], runtime);\n            }\n          }\n          var objects = currentObject.sortable.sorted || currentObject.childNodes;\n          // should account for z-index\n          for (var i = objects.length - 1; i >= 0; i--) {\n            stack.push(objects[i]);\n          }\n        }\n      };\n\n      // render at the end of frame\n      renderingService.hooks.endFrame.tap(CanvasRendererPlugin.tag, function () {\n        // Skip rendering.\n        if (renderingContext.root.childNodes.length === 0) {\n          _this.clearFullScreenLastFrame = true;\n          return;\n        }\n        enableRenderingOptimization = config.renderer.getConfig().enableRenderingOptimization;\n\n        // init\n        _classPrivateFieldLooseBase(_this, _renderState)[_renderState] = {\n          restoreStack: [],\n          prevObject: null,\n          currentContext: _classPrivateFieldLooseBase(_this, _renderState)[_renderState].currentContext\n        };\n        _classPrivateFieldLooseBase(_this, _renderState)[_renderState].currentContext.clear();\n        _this.clearFullScreenLastFrame = false;\n        var context = contextService.getContext();\n        // clear & clip dirty rectangle\n        var dpr = contextService.getDPR();\n        mat4.fromScaling(_this.dprMatrix, [dpr, dpr, 1]);\n        mat4.multiply(_this.vpMatrix, _this.dprMatrix, camera.getOrthoMatrix());\n        if (_this.clearFullScreen) {\n          // console.time('renderByZIndex');\n          if (enableRenderingOptimization) {\n            context.save();\n            renderByZIndex(renderingContext.root, context);\n            context.restore();\n          } else {\n            renderByZIndex(renderingContext.root, context);\n          }\n          // console.timeEnd('renderByZIndex');\n\n          _this.removedRBushNodeAABBs = [];\n        } else {\n          // console.log('canvas renderer next...', this.renderQueue);\n          // merge removed AABB\n          var dirtyRenderBounds = _this.safeMergeAABB.apply(_this, [_this.mergeDirtyAABBs(_this.renderQueue)].concat(_toConsumableArray(_this.removedRBushNodeAABBs.map(function (_ref) {\n            var minX = _ref.minX,\n              minY = _ref.minY,\n              maxX = _ref.maxX,\n              maxY = _ref.maxY;\n            var aabb = new AABB();\n            aabb.setMinMax(\n            // vec3.fromValues(minX, minY, 0),\n            // vec3.fromValues(maxX, maxY, 0),\n            [minX, minY, 0], [maxX, maxY, 0]);\n            return aabb;\n          }))));\n          _this.removedRBushNodeAABBs = [];\n          if (AABB.isEmpty(dirtyRenderBounds)) {\n            _this.renderQueue = [];\n            return;\n          }\n          var dirtyRect = _this.convertAABB2Rect(dirtyRenderBounds);\n          var x = dirtyRect.x,\n            y = dirtyRect.y,\n            width = dirtyRect.width,\n            height = dirtyRect.height;\n          var tl = vec3.transformMat4(_this.vec3a, [x, y, 0], _this.vpMatrix);\n          var tr = vec3.transformMat4(_this.vec3b, [x + width, y, 0], _this.vpMatrix);\n          var bl = vec3.transformMat4(_this.vec3c, [x, y + height, 0], _this.vpMatrix);\n          var br = vec3.transformMat4(_this.vec3d, [x + width, y + height, 0], _this.vpMatrix);\n          var minx = Math.min(tl[0], tr[0], br[0], bl[0]);\n          var miny = Math.min(tl[1], tr[1], br[1], bl[1]);\n          var maxx = Math.max(tl[0], tr[0], br[0], bl[0]);\n          var maxy = Math.max(tl[1], tr[1], br[1], bl[1]);\n          var ix = Math.floor(minx);\n          var iy = Math.floor(miny);\n          var iwidth = Math.ceil(maxx - minx);\n          var iheight = Math.ceil(maxy - miny);\n          context.save();\n          _this.clearRect(context, ix, iy, iwidth, iheight, config.background);\n          context.beginPath();\n          context.rect(ix, iy, iwidth, iheight);\n          context.clip();\n\n          // @see https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Transformations\n          context.setTransform(_this.vpMatrix[0], _this.vpMatrix[1], _this.vpMatrix[4], _this.vpMatrix[5], _this.vpMatrix[12], _this.vpMatrix[13]);\n\n          // draw dirty rectangle\n          var _config$renderer$getC = config.renderer.getConfig(),\n            enableDirtyRectangleRenderingDebug = _config$renderer$getC.enableDirtyRectangleRenderingDebug;\n          if (enableDirtyRectangleRenderingDebug) {\n            canvas.dispatchEvent(new CustomEvent(CanvasEvent.DIRTY_RECTANGLE, {\n              dirtyRect: {\n                x: ix,\n                y: iy,\n                width: iwidth,\n                height: iheight\n              }\n            }));\n          }\n\n          // search objects intersect with dirty rectangle\n          var dirtyObjects = _this.searchDirtyObjects(dirtyRenderBounds);\n\n          // do rendering\n          dirtyObjects\n          // sort by z-index\n          .sort(function (a, b) {\n            return a.sortable.renderOrder - b.sortable.renderOrder;\n          }).forEach(function (object) {\n            // culled object should not be rendered\n            if (object && object.isVisible() && !object.isCulled()) {\n              _this.renderDisplayObject(object, context, _this.context, _classPrivateFieldLooseBase(_this, _renderState)[_renderState], runtime);\n            }\n          });\n          context.restore();\n\n          // save dirty AABBs in last frame\n          _this.renderQueue.forEach(function (object) {\n            _this.saveDirtyAABB(object);\n          });\n\n          // clear queue\n          _this.renderQueue = [];\n        }\n\n        // pop restore stack, eg. root -> parent -> child\n        _classPrivateFieldLooseBase(_this, _renderState)[_renderState].restoreStack.forEach(function () {\n          context.restore();\n        });\n        // clear restore stack\n        _classPrivateFieldLooseBase(_this, _renderState)[_renderState].restoreStack = [];\n      });\n      renderingService.hooks.render.tap(CanvasRendererPlugin.tag, function (object) {\n        if (!_this.clearFullScreen) {\n          // render at the end of frame\n          _this.renderQueue.push(object);\n        }\n      });\n    }\n  }, {\n    key: \"clearRect\",\n    value: function clearRect(context, x, y, width, height, background) {\n      // clearRect is faster than fillRect @see https://stackoverflow.com/a/30830253\n      context.clearRect(x, y, width, height);\n      if (background) {\n        context.fillStyle = background;\n        context.fillRect(x, y, width, height);\n      }\n    }\n  }, {\n    key: \"renderDisplayObjectOptimized\",\n    value: function renderDisplayObjectOptimized(object, context, canvasContext, renderState, runtime) {\n      var nodeName = object.nodeName;\n      var updateTransform = false;\n      var clipDraw = false;\n\n      // @ts-ignore\n      var styleRenderer = this.context.styleRendererFactory[nodeName];\n      var generatePath = this.pathGeneratorFactory[nodeName];\n\n      // clip path\n      var clipPath = object.parsedStyle.clipPath;\n      if (clipPath) {\n        updateTransform = !renderState.prevObject || !mat4.exactEquals(clipPath.getWorldTransform(), renderState.prevObject.getWorldTransform());\n        if (updateTransform) {\n          this.applyWorldTransform(context, clipPath);\n          renderState.prevObject = null;\n        }\n\n        // generate path in local space\n        var _generatePath = this.pathGeneratorFactory[clipPath.nodeName];\n        if (_generatePath) {\n          context.save();\n          clipDraw = true;\n          context.beginPath();\n          _generatePath(context, clipPath.parsedStyle);\n          context.closePath();\n          context.clip();\n        }\n      }\n\n      // fill & stroke\n\n      if (styleRenderer) {\n        updateTransform = !renderState.prevObject || !mat4.exactEquals(object.getWorldTransform(), renderState.prevObject.getWorldTransform());\n        if (updateTransform) {\n          this.applyWorldTransform(context, object);\n        }\n        var forceUpdateStyle = !renderState.prevObject;\n        if (!forceUpdateStyle) {\n          var prevNodeName = renderState.prevObject.nodeName;\n          if (nodeName === Shape.TEXT) {\n            forceUpdateStyle = prevNodeName !== Shape.TEXT;\n          } else if (nodeName === Shape.IMAGE) {\n            forceUpdateStyle = prevNodeName !== Shape.IMAGE;\n          } else {\n            forceUpdateStyle = prevNodeName === Shape.TEXT || prevNodeName === Shape.IMAGE;\n          }\n        }\n        styleRenderer.applyStyleToContext(context, object, forceUpdateStyle, renderState);\n        renderState.prevObject = object;\n      }\n      if (generatePath) {\n        context.beginPath();\n        generatePath(context, object.parsedStyle);\n        if (nodeName !== Shape.LINE && nodeName !== Shape.PATH && nodeName !== Shape.POLYLINE) {\n          context.closePath();\n        }\n      }\n\n      // fill & stroke\n      if (styleRenderer) {\n        styleRenderer.drawToContext(context, object, _classPrivateFieldLooseBase(this, _renderState)[_renderState], this, runtime);\n      }\n      if (clipDraw) {\n        context.restore();\n      }\n\n      // finish rendering, clear dirty flag\n      object.renderable.dirty = false;\n    }\n  }, {\n    key: \"renderDisplayObject\",\n    value: function renderDisplayObject(object, context, canvasContext, renderState, runtime) {\n      var nodeName = object.nodeName;\n\n      // restore to its ancestor\n\n      var parent = renderState.restoreStack[renderState.restoreStack.length - 1];\n      if (parent && !(object.compareDocumentPosition(parent) & Node.DOCUMENT_POSITION_CONTAINS)) {\n        context.restore();\n        renderState.restoreStack.pop();\n      }\n\n      // @ts-ignore\n      var styleRenderer = this.context.styleRendererFactory[nodeName];\n      var generatePath = this.pathGeneratorFactory[nodeName];\n\n      // clip path\n      var clipPath = object.parsedStyle.clipPath;\n      if (clipPath) {\n        this.applyWorldTransform(context, clipPath);\n\n        // generate path in local space\n        var _generatePath2 = this.pathGeneratorFactory[clipPath.nodeName];\n        if (_generatePath2) {\n          context.save();\n\n          // save clip\n          renderState.restoreStack.push(object);\n          context.beginPath();\n          _generatePath2(context, clipPath.parsedStyle);\n          context.closePath();\n          context.clip();\n        }\n      }\n\n      // fill & stroke\n\n      if (styleRenderer) {\n        this.applyWorldTransform(context, object);\n        context.save();\n\n        // apply attributes to context\n        this.applyAttributesToContext(context, object);\n      }\n      if (generatePath) {\n        context.beginPath();\n        generatePath(context, object.parsedStyle);\n        if (nodeName !== Shape.LINE && nodeName !== Shape.PATH && nodeName !== Shape.POLYLINE) {\n          context.closePath();\n        }\n      }\n\n      // fill & stroke\n      if (styleRenderer) {\n        styleRenderer.render(context, object.parsedStyle, object, canvasContext, this, runtime);\n\n        // restore applied attributes, eg. shadowBlur shadowColor...\n        context.restore();\n      }\n\n      // finish rendering, clear dirty flag\n      object.renderable.dirty = false;\n    }\n  }, {\n    key: \"applyAttributesToContext\",\n    value: function applyAttributesToContext(context, object) {\n      var _ref2 = object.parsedStyle,\n        stroke = _ref2.stroke,\n        fill = _ref2.fill,\n        opacity = _ref2.opacity,\n        lineDash = _ref2.lineDash,\n        lineDashOffset = _ref2.lineDashOffset;\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/setLineDash\n      if (lineDash) {\n        context.setLineDash(lineDash);\n      }\n\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/lineDashOffset\n      if (!isNil(lineDashOffset)) {\n        context.lineDashOffset = lineDashOffset;\n      }\n      if (!isNil(opacity)) {\n        context.globalAlpha *= opacity;\n      }\n      if (!isNil(stroke) && !Array.isArray(stroke) && !stroke.isNone) {\n        context.strokeStyle = object.attributes.stroke;\n      }\n      if (!isNil(fill) && !Array.isArray(fill) && !fill.isNone) {\n        context.fillStyle = object.attributes.fill;\n      }\n    }\n  }, {\n    key: \"convertAABB2Rect\",\n    value: function convertAABB2Rect(aabb) {\n      var min = aabb.getMin();\n      var max = aabb.getMax();\n      // expand the rectangle a bit to avoid artifacts\n      // @see https://www.yuque.com/antv/ou292n/bi8nix#ExvCu\n      var minX = Math.floor(min[0]);\n      var minY = Math.floor(min[1]);\n      var maxX = Math.ceil(max[0]);\n      var maxY = Math.ceil(max[1]);\n      var width = maxX - minX;\n      var height = maxY - minY;\n      return {\n        x: minX,\n        y: minY,\n        width: width,\n        height: height\n      };\n    }\n\n    /**\n     * TODO: merge dirty rectangles with some strategies.\n     * For now, we just simply merge all the rectangles into one.\n     * @see https://idom.me/articles/841.html\n     */\n  }, {\n    key: \"mergeDirtyAABBs\",\n    value: function mergeDirtyAABBs(dirtyObjects) {\n      // merge into a big AABB\n      // TODO: skip descendant if ancestor is caculated, but compareNodePosition is really slow\n      var aabb = new AABB();\n      dirtyObjects.forEach(function (object) {\n        var renderBounds = object.getRenderBounds();\n        aabb.add(renderBounds);\n        var dirtyRenderBounds = object.renderable.dirtyRenderBounds;\n        if (dirtyRenderBounds) {\n          aabb.add(dirtyRenderBounds);\n        }\n      });\n      return aabb;\n    }\n  }, {\n    key: \"searchDirtyObjects\",\n    value: function searchDirtyObjects(dirtyRectangle) {\n      // search in r-tree, get all affected nodes\n      var _dirtyRectangle$getMi = dirtyRectangle.getMin(),\n        _dirtyRectangle$getMi2 = _slicedToArray(_dirtyRectangle$getMi, 2),\n        minX = _dirtyRectangle$getMi2[0],\n        minY = _dirtyRectangle$getMi2[1];\n      var _dirtyRectangle$getMa = dirtyRectangle.getMax(),\n        _dirtyRectangle$getMa2 = _slicedToArray(_dirtyRectangle$getMa, 2),\n        maxX = _dirtyRectangle$getMa2[0],\n        maxY = _dirtyRectangle$getMa2[1];\n      var rBushNodes = this.rBush.search({\n        minX: minX,\n        minY: minY,\n        maxX: maxX,\n        maxY: maxY\n      });\n      return rBushNodes.map(function (_ref3) {\n        var displayObject = _ref3.displayObject;\n        return displayObject;\n      });\n    }\n  }, {\n    key: \"saveDirtyAABB\",\n    value: function saveDirtyAABB(object) {\n      var renderable = object.renderable;\n      if (!renderable.dirtyRenderBounds) {\n        renderable.dirtyRenderBounds = new AABB();\n      }\n      var renderBounds = object.getRenderBounds();\n      if (renderBounds) {\n        // save last dirty aabb\n        renderable.dirtyRenderBounds.update(renderBounds.center, renderBounds.halfExtents);\n      }\n    }\n  }, {\n    key: \"applyWorldTransform\",\n    value: function applyWorldTransform(context, object, matrix) {\n      // apply clip shape's RTS\n      if (matrix) {\n        mat4.copy(this.tmpMat4, object.getLocalTransform());\n        mat4.multiply(this.tmpMat4, matrix, this.tmpMat4);\n        mat4.multiply(this.tmpMat4, this.vpMatrix, this.tmpMat4);\n      } else {\n        // apply RTS transformation in world space\n        mat4.copy(this.tmpMat4, object.getWorldTransform());\n        mat4.multiply(this.tmpMat4, this.vpMatrix, this.tmpMat4);\n      }\n\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Transformations\n      context.setTransform(this.tmpMat4[0], this.tmpMat4[1], this.tmpMat4[4], this.tmpMat4[5], this.tmpMat4[12], this.tmpMat4[13]);\n    }\n  }, {\n    key: \"safeMergeAABB\",\n    value: function safeMergeAABB() {\n      var merged = new AABB();\n      for (var _len = arguments.length, aabbs = new Array(_len), _key = 0; _key < _len; _key++) {\n        aabbs[_key] = arguments[_key];\n      }\n      aabbs.forEach(function (aabb) {\n        merged.add(aabb);\n      });\n      return merged;\n    }\n  }]);\n}();\nCanvasRendererPlugin.tag = 'CanvasRenderer';\n\nfunction getPattern(pattern, object, context, canvasContext, plugin, runtime, imagePool) {\n  var $offscreenCanvas;\n  var dpr;\n  if (pattern.image.nodeName === 'rect') {\n    var _parsedStyle = pattern.image.parsedStyle,\n      width = _parsedStyle.width,\n      height = _parsedStyle.height;\n    dpr = canvasContext.contextService.getDPR();\n    var offscreenCanvas = canvasContext.config.offscreenCanvas;\n    $offscreenCanvas = runtime.offscreenCanvasCreator.getOrCreateCanvas(offscreenCanvas);\n    $offscreenCanvas.width = width * dpr;\n    $offscreenCanvas.height = height * dpr;\n    var offscreenCanvasContext = runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas);\n    var renderState = {\n      restoreStack: [],\n      prevObject: null,\n      currentContext: new Map()\n    };\n\n    // offscreenCanvasContext.scale(1 / dpr, 1 / dpr);\n\n    pattern.image.forEach(function (object) {\n      plugin.renderDisplayObject(object, offscreenCanvasContext, canvasContext, renderState, runtime);\n    });\n    renderState.restoreStack.forEach(function () {\n      offscreenCanvasContext.restore();\n    });\n  }\n  var canvasPattern = imagePool.getOrCreatePatternSync(object, pattern, context, $offscreenCanvas, dpr, object.getGeometryBounds().min, function () {\n    // set dirty rectangle flag\n    object.renderable.dirty = true;\n    canvasContext.renderingService.dirtify();\n  });\n  return canvasPattern;\n}\nfunction getColor(parsedColor, object, context, imagePool) {\n  var color;\n  if (parsedColor.type === GradientType.LinearGradient || parsedColor.type === GradientType.RadialGradient) {\n    var bounds = object.getGeometryBounds();\n    var width = bounds && bounds.halfExtents[0] * 2 || 1;\n    var height = bounds && bounds.halfExtents[1] * 2 || 1;\n    var min = bounds && bounds.min || [0, 0];\n    color = imagePool.getOrCreateGradient(_objectSpread(_objectSpread({\n      type: parsedColor.type\n    }, parsedColor.value), {}, {\n      min: min,\n      width: width,\n      height: height\n    }), context);\n  }\n  return color;\n}\n\nvar SHADOW_NUMBER_STYLE = ['shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\nvar STROKE_STYLE = ['lineCap', 'lineJoin', 'miterLimit'];\nvar DEFAULT_STYLE = {\n  // common\n  globalAlpha: 1,\n  shadowBlur: 0,\n  shadowOffsetX: 0,\n  shadowOffsetY: 0,\n  shadowColor: '#000',\n  filter: 'none',\n  globalCompositeOperation: 'source-over',\n  // stroke/fill\n  strokeStyle: '#000',\n  strokeOpacity: 1,\n  lineWidth: 1,\n  lineDash: [],\n  lineDashOffset: 0,\n  lineCap: 'butt',\n  lineJoin: 'miter',\n  miterLimit: 10,\n  fillStyle: '#000',\n  fillOpacity: 1\n\n  // image\n};\nvar defaultParsedStyle = {};\n\n/**\n * Updating the canvas context is an expensive operation. The state of the context is cached and the actual update operation is performed only when the cache is not hit.\n *\n * In any case, the previous value is returned, which is convenient for temporarily updating the context and restoring it later.\n */\nfunction updateContextIfNotHitCache(context, key, value, cache) {\n  var prevValue = cache.has(key) ? cache.get(key) : DEFAULT_STYLE[key];\n  if (prevValue !== value) {\n    // console.log('not hit cache', key, value, prevValue, cache);\n    if (key === 'lineDash') {\n      context.setLineDash(value);\n    } else {\n      // @ts-ignore\n      context[key] = value;\n    }\n    cache.set(key, value);\n  }\n  return prevValue;\n}\nvar OptimizedDefaultRenderer = /*#__PURE__*/function () {\n  function OptimizedDefaultRenderer(imagePool) {\n    _classCallCheck(this, OptimizedDefaultRenderer);\n    this.imagePool = imagePool;\n  }\n  return _createClass(OptimizedDefaultRenderer, [{\n    key: \"applyAttributesToContext\",\n    value: function applyAttributesToContext(context, object) {}\n  }, {\n    key: \"render\",\n    value: function render(context, parsedStyle, object, canvasContext, plugin, runtime) {}\n\n    // #region common style\n  }, {\n    key: \"applyCommonStyleToContext\",\n    value: function applyCommonStyleToContext(context, object, forceUpdate, renderState) {\n      // const dpr = object.ownerDocument.defaultView.getContextService().getDPR();\n      var prevStyle = forceUpdate ? defaultParsedStyle : renderState.prevObject.parsedStyle;\n      var style = object.parsedStyle;\n      if (forceUpdate || style.opacity !== prevStyle.opacity) {\n        updateContextIfNotHitCache(context, 'globalAlpha', !isNil(style.opacity) ? style.opacity : DEFAULT_STYLE.globalAlpha, renderState.currentContext);\n      }\n\n      // TODO blend prop\n      // @ts-ignore\n      if (forceUpdate || style.blend !== prevStyle.blend) {\n        updateContextIfNotHitCache(context, 'globalCompositeOperation',\n        // @ts-ignore\n        !isNil(style.blend) ?\n        // @ts-ignore\n        style.blend : DEFAULT_STYLE.globalCompositeOperation, renderState.currentContext);\n      }\n    }\n    // #endregion common style\n\n    // #region stroke/fill style\n  }, {\n    key: \"applyStrokeFillStyleToContext\",\n    value: function applyStrokeFillStyleToContext(context, object, forceUpdate, renderState) {\n      var prevStyle = forceUpdate ? defaultParsedStyle : renderState.prevObject.parsedStyle;\n      var style = object.parsedStyle;\n      var _style$lineWidth = style.lineWidth,\n        lineWidth = _style$lineWidth === void 0 ? DEFAULT_STYLE.lineWidth : _style$lineWidth;\n      var hasFill = style.fill && !style.fill.isNone;\n      var hasStroke = style.stroke && !style.stroke.isNone && lineWidth > 0;\n      if (hasStroke) {\n        if (forceUpdate || object.attributes.stroke !== renderState.prevObject.attributes.stroke) {\n          var value = !isNil(style.stroke) && !Array.isArray(style.stroke) && !style.stroke.isNone ? object.attributes.stroke : DEFAULT_STYLE.strokeStyle;\n          updateContextIfNotHitCache(context, 'strokeStyle', value, renderState.currentContext);\n        }\n        if (forceUpdate || style.lineWidth !== prevStyle.lineWidth) {\n          updateContextIfNotHitCache(context, 'lineWidth', !isNil(style.lineWidth) ? style.lineWidth : DEFAULT_STYLE.lineWidth, renderState.currentContext);\n        }\n        if (forceUpdate || style.lineDash !== prevStyle.lineDash) {\n          updateContextIfNotHitCache(context, 'lineDash', style.lineDash || DEFAULT_STYLE.lineDash, renderState.currentContext);\n        }\n        if (forceUpdate || style.lineDashOffset !== prevStyle.lineDashOffset) {\n          updateContextIfNotHitCache(context, 'lineDashOffset', !isNil(style.lineDashOffset) ? style.lineDashOffset : DEFAULT_STYLE.lineDashOffset, renderState.currentContext);\n        }\n        for (var i = 0; i < STROKE_STYLE.length; i++) {\n          var styleName = STROKE_STYLE[i];\n          if (forceUpdate || style[styleName] !== prevStyle[styleName]) {\n            updateContextIfNotHitCache(context, styleName, !isNil(style[styleName]) ? style[styleName] : DEFAULT_STYLE[styleName], renderState.currentContext);\n          }\n        }\n      }\n      if (hasFill && (forceUpdate || object.attributes.fill !== renderState.prevObject.attributes.fill)) {\n        var _value = !isNil(style.fill) && !Array.isArray(style.fill) && !style.fill.isNone ? object.attributes.fill : DEFAULT_STYLE.fillStyle;\n        updateContextIfNotHitCache(context, 'fillStyle', _value, renderState.currentContext);\n      }\n    }\n    // #endregion stroke/fill style\n  }, {\n    key: \"applyStyleToContext\",\n    value: function applyStyleToContext(context, object, forceUpdate, renderState) {\n      var nodeName = object.nodeName;\n      this.applyCommonStyleToContext(context, object, forceUpdate, renderState);\n      if (nodeName === Shape.IMAGE) ; else {\n        this.applyStrokeFillStyleToContext(context, object, forceUpdate, renderState);\n      }\n    }\n  }, {\n    key: \"applyShadowAndFilterStyleToContext\",\n    value: function applyShadowAndFilterStyleToContext(context, object, hasShadow, renderState) {\n      var style = object.parsedStyle;\n      if (hasShadow) {\n        updateContextIfNotHitCache(context, 'shadowColor', style.shadowColor.toString(), renderState.currentContext);\n        for (var i = 0; i < SHADOW_NUMBER_STYLE.length; i++) {\n          var styleName = SHADOW_NUMBER_STYLE[i];\n          updateContextIfNotHitCache(context, styleName, style[styleName] || DEFAULT_STYLE[styleName], renderState.currentContext);\n        }\n      }\n      if (style.filter && style.filter.length) {\n        updateContextIfNotHitCache(context, 'filter',\n        // use raw filter string\n        object.attributes.filter, renderState.currentContext);\n      }\n    }\n  }, {\n    key: \"clearShadowAndFilterStyleForContext\",\n    value: function clearShadowAndFilterStyleForContext(context, hasShadow, hasFilter, renderState) {\n      var onlyClearShadowFilter = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n      if (hasShadow) {\n        updateContextIfNotHitCache(context, 'shadowColor', DEFAULT_STYLE.shadowColor, renderState.currentContext);\n        for (var i = 0; i < SHADOW_NUMBER_STYLE.length; i++) {\n          var styleName = SHADOW_NUMBER_STYLE[i];\n          updateContextIfNotHitCache(context, styleName, DEFAULT_STYLE[styleName], renderState.currentContext);\n        }\n      }\n      if (hasFilter) {\n        if (hasShadow && onlyClearShadowFilter) {\n          // save drop-shadow filter\n          var oldFilter = context.filter;\n          if (!isNil(oldFilter) && oldFilter.indexOf('drop-shadow') > -1) {\n            updateContextIfNotHitCache(context, 'filter', oldFilter.replace(/drop-shadow\\([^)]*\\)/, '').trim() || DEFAULT_STYLE.filter, renderState.currentContext);\n          }\n        } else {\n          updateContextIfNotHitCache(context, 'filter', DEFAULT_STYLE.filter, renderState.currentContext);\n        }\n      }\n    }\n  }, {\n    key: \"fillToContext\",\n    value: function fillToContext(context, object, renderState, plugin, runtime) {\n      var _this = this;\n      var _object$parsedStyle = object.parsedStyle,\n        fill = _object$parsedStyle.fill,\n        fillRule = _object$parsedStyle.fillRule;\n      var resetStyle = null;\n      if (Array.isArray(fill) && fill.length > 0) {\n        fill.forEach(function (gradient) {\n          var _resetStyle;\n          var prevStyle = updateContextIfNotHitCache(context, 'fillStyle', getColor(gradient, object, context, _this.imagePool), renderState.currentContext);\n          resetStyle = (_resetStyle = resetStyle) !== null && _resetStyle !== void 0 ? _resetStyle : prevStyle;\n          if (fillRule) {\n            context.fill(fillRule);\n          } else {\n            context.fill();\n          }\n        });\n      } else {\n        if (isPattern(fill)) {\n          var pattern = getPattern(fill, object, context, object.ownerDocument.defaultView.context, plugin, runtime, this.imagePool);\n          if (pattern) {\n            context.fillStyle = pattern;\n            resetStyle = true;\n          }\n        }\n        if (fillRule) {\n          context.fill(fillRule);\n        } else {\n          context.fill();\n        }\n      }\n      if (resetStyle !== null) {\n        updateContextIfNotHitCache(context, 'fillStyle', resetStyle, renderState.currentContext);\n      }\n    }\n  }, {\n    key: \"strokeToContext\",\n    value: function strokeToContext(context, object, renderState, plugin, runtime) {\n      var _this2 = this;\n      var stroke = object.parsedStyle.stroke;\n      var resetStyle = null;\n      if (Array.isArray(stroke) && stroke.length > 0) {\n        stroke.forEach(function (gradient) {\n          var _resetStyle2;\n          var prevStyle = updateContextIfNotHitCache(context, 'strokeStyle', getColor(gradient, object, context, _this2.imagePool), renderState.currentContext);\n          resetStyle = (_resetStyle2 = resetStyle) !== null && _resetStyle2 !== void 0 ? _resetStyle2 : prevStyle;\n          context.stroke();\n        });\n      } else {\n        if (isPattern(stroke)) {\n          var pattern = getPattern(stroke, object, context, object.ownerDocument.defaultView.context, plugin, runtime, this.imagePool);\n          if (pattern) {\n            var _resetStyle3;\n            var prevStyle = updateContextIfNotHitCache(context, 'strokeStyle', pattern, renderState.currentContext);\n            resetStyle = (_resetStyle3 = resetStyle) !== null && _resetStyle3 !== void 0 ? _resetStyle3 : prevStyle;\n          }\n        }\n        context.stroke();\n      }\n      if (resetStyle !== null) {\n        updateContextIfNotHitCache(context, 'strokeStyle', resetStyle, renderState.currentContext);\n      }\n    }\n  }, {\n    key: \"drawToContext\",\n    value: function drawToContext(context, object, renderState, plugin, runtime) {\n      var _style$fill;\n      var nodeName = object.nodeName;\n      var style = object.parsedStyle;\n      var _style$opacity = style.opacity,\n        opacity = _style$opacity === void 0 ? DEFAULT_STYLE.globalAlpha : _style$opacity,\n        _style$fillOpacity = style.fillOpacity,\n        fillOpacity = _style$fillOpacity === void 0 ? DEFAULT_STYLE.fillOpacity : _style$fillOpacity,\n        _style$strokeOpacity = style.strokeOpacity,\n        strokeOpacity = _style$strokeOpacity === void 0 ? DEFAULT_STYLE.strokeOpacity : _style$strokeOpacity,\n        _style$lineWidth2 = style.lineWidth,\n        lineWidth = _style$lineWidth2 === void 0 ? DEFAULT_STYLE.lineWidth : _style$lineWidth2;\n      var hasFill = style.fill && !style.fill.isNone;\n      var hasStroke = style.stroke && !style.stroke.isNone && lineWidth > 0;\n      if (!hasFill && !hasStroke) {\n        return;\n      }\n      var hasShadow = !isNil(style.shadowColor) && style.shadowBlur > 0;\n      var isInnerShadow = style.shadowType === 'inner';\n      var isFillTransparent = ((_style$fill = style.fill) === null || _style$fill === void 0 ? void 0 : _style$fill.alpha) === 0;\n      var hasFilter = !!(style.filter && style.filter.length);\n      // Shadows can only be applied to fill() or stroke(), the default is fill()\n      var shouldDrawShadowWithStroke = hasShadow && hasStroke && (nodeName === Shape.PATH || nodeName === Shape.LINE || nodeName === Shape.POLYLINE || isFillTransparent || isInnerShadow);\n\n      // TODO https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/paint-order\n\n      var originGlobalAlpha = null;\n      if (hasFill) {\n        if (!shouldDrawShadowWithStroke) {\n          this.applyShadowAndFilterStyleToContext(context, object, hasShadow, renderState);\n        }\n        var updateOpacity = opacity * fillOpacity;\n        originGlobalAlpha = updateContextIfNotHitCache(context, 'globalAlpha', updateOpacity, renderState.currentContext);\n        this.fillToContext(context, object, renderState, plugin, runtime);\n        if (!shouldDrawShadowWithStroke) {\n          this.clearShadowAndFilterStyleForContext(context, hasShadow, hasFilter, renderState);\n        }\n      }\n      if (hasStroke) {\n        var clearShadowAndFilter = false;\n        var _updateOpacity = opacity * strokeOpacity;\n        var prevOpacity = updateContextIfNotHitCache(context, 'globalAlpha', _updateOpacity, renderState.currentContext);\n        originGlobalAlpha = hasFill ? originGlobalAlpha : prevOpacity;\n        if (shouldDrawShadowWithStroke) {\n          this.applyShadowAndFilterStyleToContext(context, object, hasShadow, renderState);\n          clearShadowAndFilter = true;\n          if (isInnerShadow) {\n            var originBlend = context.globalCompositeOperation;\n            context.globalCompositeOperation = 'source-atop';\n            this.strokeToContext(context, object, renderState, plugin, runtime);\n            context.globalCompositeOperation = originBlend;\n            this.clearShadowAndFilterStyleForContext(context, hasShadow, hasFilter, renderState, true);\n          }\n        }\n        this.strokeToContext(context, object, renderState, plugin, runtime);\n        if (clearShadowAndFilter) {\n          this.clearShadowAndFilterStyleForContext(context, hasShadow, hasFilter, renderState);\n        }\n      }\n\n      // clear\n      if (originGlobalAlpha !== null) {\n        updateContextIfNotHitCache(context, 'globalAlpha', originGlobalAlpha, renderState.currentContext);\n      }\n    }\n  }]);\n}();\n\nvar DefaultRenderer = /*#__PURE__*/function (_OptimizedDefaultRend) {\n  function DefaultRenderer() {\n    _classCallCheck(this, DefaultRenderer);\n    return _callSuper(this, DefaultRenderer, arguments);\n  }\n  _inherits(DefaultRenderer, _OptimizedDefaultRend);\n  return _createClass(DefaultRenderer, [{\n    key: \"render\",\n    value: function render(context, parsedStyle, object, canvasContext, plugin, runtime) {\n      var fill = parsedStyle.fill,\n        fillRule = parsedStyle.fillRule,\n        _parsedStyle$opacity = parsedStyle.opacity,\n        opacity = _parsedStyle$opacity === void 0 ? 1 : _parsedStyle$opacity,\n        _parsedStyle$fillOpac = parsedStyle.fillOpacity,\n        fillOpacity = _parsedStyle$fillOpac === void 0 ? 1 : _parsedStyle$fillOpac,\n        stroke = parsedStyle.stroke,\n        _parsedStyle$strokeOp = parsedStyle.strokeOpacity,\n        strokeOpacity = _parsedStyle$strokeOp === void 0 ? 1 : _parsedStyle$strokeOp,\n        _parsedStyle$lineWidt = parsedStyle.lineWidth,\n        lineWidth = _parsedStyle$lineWidt === void 0 ? 1 : _parsedStyle$lineWidt,\n        lineCap = parsedStyle.lineCap,\n        lineJoin = parsedStyle.lineJoin,\n        shadowType = parsedStyle.shadowType,\n        shadowColor = parsedStyle.shadowColor,\n        shadowBlur = parsedStyle.shadowBlur,\n        filter = parsedStyle.filter,\n        miterLimit = parsedStyle.miterLimit;\n      var hasFill = fill && !fill.isNone;\n      var hasStroke = stroke && !stroke.isNone && lineWidth > 0;\n      var isFillTransparent = (fill === null || fill === void 0 ? void 0 : fill.alpha) === 0;\n      var hasFilter = !!(filter && filter.length);\n      var hasShadow = !isNil(shadowColor) && shadowBlur > 0;\n      var nodeName = object.nodeName;\n      var isInnerShadow = shadowType === 'inner';\n      var shouldDrawShadowWithStroke = hasStroke && hasShadow && (nodeName === Shape.PATH || nodeName === Shape.LINE || nodeName === Shape.POLYLINE || isFillTransparent || isInnerShadow);\n      if (hasFill) {\n        context.globalAlpha = opacity * fillOpacity;\n        if (!shouldDrawShadowWithStroke) {\n          setShadowAndFilter(object, context, hasShadow);\n        }\n        applyFill(context, object, fill, fillRule, canvasContext, plugin, runtime, this.imagePool);\n        if (!shouldDrawShadowWithStroke) {\n          this.clearShadowAndFilter(context, hasFilter, hasShadow);\n        }\n      }\n      if (hasStroke) {\n        context.globalAlpha = opacity * strokeOpacity;\n        context.lineWidth = lineWidth;\n        if (!isNil(miterLimit)) {\n          context.miterLimit = miterLimit;\n        }\n        if (!isNil(lineCap)) {\n          context.lineCap = lineCap;\n        }\n        if (!isNil(lineJoin)) {\n          context.lineJoin = lineJoin;\n        }\n        if (shouldDrawShadowWithStroke) {\n          if (isInnerShadow) {\n            context.globalCompositeOperation = 'source-atop';\n          }\n          setShadowAndFilter(object, context, true);\n          if (isInnerShadow) {\n            applyStroke(context, object, stroke, canvasContext, plugin, runtime, this.imagePool);\n            context.globalCompositeOperation = DEFAULT_STYLE.globalCompositeOperation;\n            this.clearShadowAndFilter(context, hasFilter, true);\n          }\n        }\n        applyStroke(context, object, stroke, canvasContext, plugin, runtime, this.imagePool);\n      }\n    }\n  }, {\n    key: \"clearShadowAndFilter\",\n    value: function clearShadowAndFilter(context, hasFilter, hasShadow) {\n      if (hasShadow) {\n        context.shadowColor = 'transparent';\n        context.shadowBlur = 0;\n      }\n      if (hasFilter) {\n        // save drop-shadow filter\n        var oldFilter = context.filter;\n        if (!isNil(oldFilter) && oldFilter.indexOf('drop-shadow') > -1) {\n          context.filter = oldFilter.replace(/drop-shadow\\([^)]*\\)/, '').trim() || 'none';\n        }\n      }\n    }\n  }]);\n}(OptimizedDefaultRenderer);\n\n/**\n * apply before fill and stroke but only once\n */\nfunction setShadowAndFilter(object, context, hasShadow) {\n  var _object$parsedStyle = object.parsedStyle,\n    filter = _object$parsedStyle.filter,\n    shadowColor = _object$parsedStyle.shadowColor,\n    shadowBlur = _object$parsedStyle.shadowBlur,\n    shadowOffsetX = _object$parsedStyle.shadowOffsetX,\n    shadowOffsetY = _object$parsedStyle.shadowOffsetY;\n  if (filter && filter.length) {\n    // use raw filter string\n    context.filter = object.style.filter;\n  }\n  if (hasShadow) {\n    context.shadowColor = shadowColor.toString();\n    context.shadowBlur = shadowBlur || 0;\n    context.shadowOffsetX = shadowOffsetX || 0;\n    context.shadowOffsetY = shadowOffsetY || 0;\n  }\n}\nfunction applyFill(context, object, fill, fillRule, canvasContext, plugin, runtime, imagePool) {\n  var skipFill = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : false;\n  if (Array.isArray(fill)) {\n    fill.forEach(function (gradient) {\n      context.fillStyle = getColor(gradient, object, context, imagePool);\n      if (!skipFill) {\n        fillRule ? context.fill(fillRule) : context.fill();\n      }\n    });\n  } else {\n    if (isPattern(fill)) {\n      context.fillStyle = getPattern(fill, object, context, canvasContext, plugin, runtime, imagePool);\n    }\n    if (!skipFill) {\n      fillRule ? context.fill(fillRule) : context.fill();\n    }\n  }\n}\nfunction applyStroke(context, object, stroke, canvasContext, plugin, runtime, imagePool) {\n  var skipStroke = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : false;\n  if (Array.isArray(stroke)) {\n    stroke.forEach(function (gradient) {\n      context.strokeStyle = getColor(gradient, object, context, imagePool);\n      if (!skipStroke) {\n        context.stroke();\n      }\n    });\n  } else {\n    if (isPattern(stroke)) {\n      context.strokeStyle = getPattern(stroke, object, context, canvasContext, plugin, runtime, imagePool);\n    }\n    if (!skipStroke) {\n      context.stroke();\n    }\n  }\n}\n\nfunction calculateOverlapRect(rect1, rect2) {\n  var _rect = _slicedToArray(rect1, 4),\n    x1 = _rect[0],\n    y1 = _rect[1],\n    w1 = _rect[2],\n    h1 = _rect[3];\n  var _rect2 = _slicedToArray(rect2, 4),\n    x2 = _rect2[0],\n    y2 = _rect2[1],\n    w2 = _rect2[2],\n    h2 = _rect2[3];\n\n  // \n  var overlapLeft = Math.max(x1, x2);\n  var overlapTop = Math.max(y1, y2);\n  var overlapRight = Math.min(x1 + w1, x2 + w2);\n  var overlapBottom = Math.min(y1 + h1, y2 + h2);\n  if (overlapRight <= overlapLeft || overlapBottom <= overlapTop) {\n    return null;\n  }\n  return [overlapLeft, overlapTop, overlapRight - overlapLeft, overlapBottom - overlapTop];\n}\nfunction transformRect(rect, matrix) {\n  var tl = vec3.transformMat4(vec3.create(), [rect[0], rect[1], 0], matrix);\n  var tr = vec3.transformMat4(vec3.create(), [rect[0] + rect[2], rect[1], 0], matrix);\n  var bl = vec3.transformMat4(vec3.create(), [rect[0], rect[1] + rect[3], 0], matrix);\n  var br = vec3.transformMat4(vec3.create(), [rect[0] + rect[2], rect[1] + rect[3], 0], matrix);\n  return [Math.min(tl[0], tr[0], bl[0], br[0]), Math.min(tl[1], tr[1], bl[1], br[1]), Math.max(tl[0], tr[0], bl[0], br[0]) - Math.min(tl[0], tr[0], bl[0], br[0]), Math.max(tl[1], tr[1], bl[1], br[1]) - Math.min(tl[1], tr[1], bl[1], br[1])];\n}\n\nvar ImageRenderer = /*#__PURE__*/function (_DefaultRenderer) {\n  function ImageRenderer() {\n    _classCallCheck(this, ImageRenderer);\n    return _callSuper(this, ImageRenderer, arguments);\n  }\n  _inherits(ImageRenderer, _DefaultRenderer);\n  return _createClass(ImageRenderer, [{\n    key: \"renderDownSampled\",\n    value: function renderDownSampled(context, parsedStyle, object, data) {\n      var src = data.src,\n        imageCache = data.imageCache;\n      if (!imageCache.downSampled) {\n        this.imagePool.createDownSampledImage(src, object).then(function (res) {\n          // rerender\n          // object.dirty();\n          object.renderable.dirty = true;\n          object.ownerDocument.defaultView.context.renderingService.dirtify();\n        })[\"catch\"](function () {\n          //\n        });\n        return;\n      }\n      context.drawImage(imageCache.downSampled, Math.floor(data.drawRect[0]), Math.floor(data.drawRect[1]), Math.ceil(data.drawRect[2]), Math.ceil(data.drawRect[3]));\n    }\n  }, {\n    key: \"renderTile\",\n    value: function renderTile(context, parsedStyle, object, data) {\n      var src = data.src,\n        imageCache = data.imageCache,\n        imageRect = data.imageRect,\n        drawRect = data.drawRect;\n      var originalSize = imageCache.size;\n      var _context$getTransform = context.getTransform(),\n        a = _context$getTransform.a,\n        b = _context$getTransform.b,\n        c = _context$getTransform.c,\n        d = _context$getTransform.d,\n        e = _context$getTransform.e,\n        f = _context$getTransform.f;\n      context.resetTransform();\n      if (!(imageCache !== null && imageCache !== void 0 && imageCache.gridSize)) {\n        this.imagePool.createImageTiles(src, [], function () {\n          // rerender\n          // object.dirty();\n          object.renderable.dirty = true;\n          object.ownerDocument.defaultView.context.renderingService.dirtify();\n        }, object)[\"catch\"](function () {\n          //\n        });\n        return;\n      }\n      var scaleToOrigin = [originalSize[0] / imageRect[2], originalSize[1] / imageRect[3]];\n      var scaledTileSize = [imageCache.tileSize[0] / scaleToOrigin[0], imageCache.tileSize[1] / scaleToOrigin[1]];\n      var _ref = [Math.floor((drawRect[0] - imageRect[0]) / scaledTileSize[0]), Math.ceil((drawRect[0] + drawRect[2] - imageRect[0]) / scaledTileSize[0])],\n        startTileX = _ref[0],\n        endTileX = _ref[1];\n      var _ref2 = [Math.floor((drawRect[1] - imageRect[1]) / scaledTileSize[1]), Math.ceil((drawRect[1] + drawRect[3] - imageRect[1]) / scaledTileSize[1])],\n        startTileY = _ref2[0],\n        endTileY = _ref2[1];\n      for (var tileY = startTileY; tileY <= endTileY; tileY++) {\n        for (var tileX = startTileX; tileX <= endTileX; tileX++) {\n          var item = imageCache.tiles[tileY][tileX];\n          if (item) {\n            var tileRect = [Math.floor(imageRect[0] + item.tileX * scaledTileSize[0]), Math.floor(imageRect[1] + item.tileY * scaledTileSize[1]), Math.ceil(scaledTileSize[0]), Math.ceil(scaledTileSize[1])];\n            context.drawImage(item.data, tileRect[0], tileRect[1], tileRect[2], tileRect[3]);\n          }\n        }\n      }\n      context.setTransform(a, b, c, d, e, f);\n    }\n  }, {\n    key: \"render\",\n    value: function render(context, parsedStyle, object) {\n      var _parsedStyle$x = parsedStyle.x,\n        x = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n        _parsedStyle$y = parsedStyle.y,\n        y = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y,\n        width = parsedStyle.width,\n        height = parsedStyle.height,\n        src = parsedStyle.src,\n        shadowColor = parsedStyle.shadowColor,\n        shadowBlur = parsedStyle.shadowBlur;\n      var imageCache = this.imagePool.getImageSync(src, object);\n      var image = imageCache === null || imageCache === void 0 ? void 0 : imageCache.img;\n      var iw = width;\n      var ih = height;\n      if (!image) {\n        return;\n      }\n      iw || (iw = image.width);\n      ih || (ih = image.height);\n      var hasShadow = !isNil(shadowColor) && shadowBlur > 0;\n      setShadowAndFilter(object, context, hasShadow);\n\n      // node-canvas will throw the following err:\n      // Error: Image given has not completed loading\n      try {\n        var _object$ownerDocument = object.ownerDocument.defaultView.getContextService().getDomElement(),\n          viewWidth = _object$ownerDocument.width,\n          viewHeight = _object$ownerDocument.height;\n        var currentTransform = context.getTransform();\n        var a = currentTransform.a,\n          b = currentTransform.b,\n          c = currentTransform.c,\n          d = currentTransform.d,\n          e = currentTransform.e,\n          f = currentTransform.f;\n        //  mat4 \n        // prettier-ignore\n        var transformMatrix = mat4.fromValues(a, c, 0, 0, b, d, 0, 0, 0, 0, 1, 0, e, f, 0, 1);\n        var imageRect = transformRect([x, y, iw, ih], transformMatrix);\n        var drawRect = calculateOverlapRect([0, 0, viewWidth, viewHeight], imageRect);\n        if (!drawRect) {\n          return;\n        }\n        if (!object.ownerDocument.defaultView.getConfig().enableLargeImageOptimization) {\n          ImageRenderer.renderFull(context, parsedStyle, object, {\n            image: image,\n            drawRect: [x, y, iw, ih]\n          });\n          return;\n        }\n        var sizeOfOrigin = imageRect[2] / imageCache.size[0];\n        if (sizeOfOrigin < (imageCache.downSamplingRate || 0.5)) {\n          this.renderDownSampled(context, parsedStyle, object, {\n            src: src,\n            imageCache: imageCache,\n            drawRect: [x, y, iw, ih]\n          });\n          return;\n        }\n        if (!ImagePool.isSupportTile) {\n          ImageRenderer.renderFull(context, parsedStyle, object, {\n            image: image,\n            drawRect: [x, y, iw, ih]\n          });\n          return;\n        }\n        this.renderTile(context, parsedStyle, object, {\n          src: src,\n          imageCache: imageCache,\n          imageRect: imageRect,\n          drawRect: drawRect\n        });\n      } catch (_unused) {}\n    }\n\n    // ---\n  }, {\n    key: \"drawToContext\",\n    value: function drawToContext(context, object, renderState, plugin, runtime) {\n      this.render(context, object.parsedStyle, object);\n    }\n  }], [{\n    key: \"renderFull\",\n    value: function renderFull(context, parsedStyle, object, data) {\n      context.drawImage(data.image, Math.floor(data.drawRect[0]), Math.floor(data.drawRect[1]), Math.ceil(data.drawRect[2]), Math.ceil(data.drawRect[3]));\n    }\n  }]);\n}(DefaultRenderer);\n\nvar TextRenderer = /*#__PURE__*/function (_DefaultRenderer) {\n  function TextRenderer() {\n    _classCallCheck(this, TextRenderer);\n    return _callSuper(this, TextRenderer, arguments);\n  }\n  _inherits(TextRenderer, _DefaultRenderer);\n  return _createClass(TextRenderer, [{\n    key: \"render\",\n    value: function render(context, parsedStyle, object, canvasContext, plugin, runtime) {\n      // Trigger text geometry calculation.\n      object.getBounds();\n      var _parsedStyle$lineWidt = parsedStyle.lineWidth,\n        lineWidth = _parsedStyle$lineWidt === void 0 ? 1 : _parsedStyle$lineWidt,\n        _parsedStyle$textAlig = parsedStyle.textAlign,\n        textAlign = _parsedStyle$textAlig === void 0 ? 'start' : _parsedStyle$textAlig,\n        _parsedStyle$textBase = parsedStyle.textBaseline,\n        textBaseline = _parsedStyle$textBase === void 0 ? 'alphabetic' : _parsedStyle$textBase,\n        _parsedStyle$lineJoin = parsedStyle.lineJoin,\n        lineJoin = _parsedStyle$lineJoin === void 0 ? 'miter' : _parsedStyle$lineJoin,\n        _parsedStyle$miterLim = parsedStyle.miterLimit,\n        miterLimit = _parsedStyle$miterLim === void 0 ? 10 : _parsedStyle$miterLim,\n        _parsedStyle$letterSp = parsedStyle.letterSpacing,\n        letterSpacing = _parsedStyle$letterSp === void 0 ? 0 : _parsedStyle$letterSp,\n        stroke = parsedStyle.stroke,\n        fill = parsedStyle.fill,\n        fillRule = parsedStyle.fillRule,\n        _parsedStyle$fillOpac = parsedStyle.fillOpacity,\n        fillOpacity = _parsedStyle$fillOpac === void 0 ? 1 : _parsedStyle$fillOpac,\n        _parsedStyle$strokeOp = parsedStyle.strokeOpacity,\n        strokeOpacity = _parsedStyle$strokeOp === void 0 ? 1 : _parsedStyle$strokeOp,\n        _parsedStyle$opacity = parsedStyle.opacity,\n        opacity = _parsedStyle$opacity === void 0 ? 1 : _parsedStyle$opacity,\n        metrics = parsedStyle.metrics,\n        _parsedStyle$x = parsedStyle.x,\n        x = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n        _parsedStyle$y = parsedStyle.y,\n        y = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y,\n        dx = parsedStyle.dx,\n        dy = parsedStyle.dy,\n        shadowColor = parsedStyle.shadowColor,\n        shadowBlur = parsedStyle.shadowBlur;\n      var font = metrics.font,\n        lines = metrics.lines,\n        height = metrics.height,\n        lineHeight = metrics.lineHeight,\n        lineMetrics = metrics.lineMetrics;\n      context.font = font;\n      context.lineWidth = lineWidth;\n      context.textAlign = textAlign === 'middle' ? 'center' : textAlign;\n      var formattedTextBaseline = textBaseline;\n      if (formattedTextBaseline === 'alphabetic') {\n        formattedTextBaseline = 'bottom';\n      }\n      context.lineJoin = lineJoin;\n      if (!isNil(miterLimit)) {\n        context.miterLimit = miterLimit;\n      }\n      var linePositionY = y;\n      // handle vertical text baseline\n      if (textBaseline === 'middle') {\n        linePositionY += -height / 2 - lineHeight / 2;\n      } else if (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\n        linePositionY += -height;\n      } else if (textBaseline === 'top' || textBaseline === 'hanging') {\n        linePositionY += -lineHeight;\n      }\n\n      // account for dx & dy\n      var offsetX = x + (dx || 0);\n      linePositionY += dy || 0;\n      if (lines.length === 1) {\n        if (formattedTextBaseline === 'bottom') {\n          formattedTextBaseline = 'middle';\n          linePositionY -= 0.5 * height;\n        } else if (formattedTextBaseline === 'top') {\n          formattedTextBaseline = 'middle';\n          linePositionY += 0.5 * height;\n        }\n      }\n      context.textBaseline = formattedTextBaseline;\n      var hasShadow = !isNil(shadowColor) && shadowBlur > 0;\n      setShadowAndFilter(object, context, hasShadow);\n\n      // draw lines line by line\n      for (var i = 0; i < lines.length; i++) {\n        var linePositionX = lineWidth / 2 + offsetX;\n        linePositionY += lineHeight;\n\n        // no need to re-position X, cause we already set text align\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/textAlign\n        if (!isNil(stroke) && !stroke.isNone && lineWidth) {\n          this.drawLetterSpacing(context, object, lines[i], lineMetrics[i], textAlign, linePositionX, linePositionY, letterSpacing, fill, fillRule, fillOpacity, stroke, strokeOpacity, opacity, true, canvasContext, plugin, runtime);\n        }\n        if (!isNil(fill)) {\n          this.drawLetterSpacing(context, object, lines[i], lineMetrics[i], textAlign, linePositionX, linePositionY, letterSpacing, fill, fillRule, fillOpacity, stroke, strokeOpacity, opacity, false, canvasContext, plugin, runtime);\n        }\n      }\n    }\n  }, {\n    key: \"drawLetterSpacing\",\n    value: function drawLetterSpacing(context, object, text, lineMetrics, textAlign, x, y, letterSpacing, fill, fillRule, fillOpacity, stroke, strokeOpacity, opacity, isStroke, canvasContext, plugin, runtime) {\n      // letterSpacing of 0 means normal, render all texts directly\n      if (letterSpacing === 0) {\n        if (isStroke) {\n          this.strokeText(context, object, text, x, y, stroke, strokeOpacity, canvasContext, plugin, runtime);\n        } else {\n          this.fillText(context, object, text, x, y, fill, fillRule, fillOpacity, opacity, canvasContext, plugin, runtime);\n        }\n        return;\n      }\n\n      // draw text using left align\n      var currentTextAlign = context.textAlign;\n      context.textAlign = 'left';\n      var currentPosition = x;\n      if (textAlign === 'center' || textAlign === 'middle') {\n        currentPosition = x - lineMetrics.width / 2;\n      } else if (textAlign === 'right' || textAlign === 'end') {\n        currentPosition = x - lineMetrics.width;\n      }\n      var stringArray = Array.from(text);\n      var previousWidth = context.measureText(text).width;\n      var currentWidth = 0;\n      for (var i = 0; i < stringArray.length; ++i) {\n        var currentChar = stringArray[i];\n        if (isStroke) {\n          this.strokeText(context, object, currentChar, currentPosition, y, stroke, strokeOpacity, canvasContext, plugin, runtime);\n        } else {\n          this.fillText(context, object, currentChar, currentPosition, y, fill, fillRule, fillOpacity, opacity, canvasContext, plugin, runtime);\n        }\n        currentWidth = context.measureText(text.substring(i + 1)).width;\n        currentPosition += previousWidth - currentWidth + letterSpacing;\n        previousWidth = currentWidth;\n      }\n      context.textAlign = currentTextAlign;\n    }\n  }, {\n    key: \"fillText\",\n    value: function fillText(context, object, text, x, y, fill, fillRule, fillOpacity, opacity, canvasContext, plugin, runtime) {\n      applyFill(context, object, fill, fillRule, canvasContext, plugin, runtime, this.imagePool, true);\n      var currentGlobalAlpha;\n      var applyOpacity = !isNil(fillOpacity) && fillOpacity !== 1;\n      if (applyOpacity) {\n        currentGlobalAlpha = context.globalAlpha;\n        context.globalAlpha = fillOpacity * opacity;\n      }\n      context.fillText(text, x, y);\n      if (applyOpacity) {\n        context.globalAlpha = currentGlobalAlpha;\n      }\n    }\n  }, {\n    key: \"strokeText\",\n    value: function strokeText(context, object, text, x, y, stroke, strokeOpacity, canvasContext, plugin, runtime) {\n      applyStroke(context, object, stroke, canvasContext, plugin, runtime, this.imagePool, true);\n      var currentGlobalAlpha;\n      var applyOpacity = !isNil(strokeOpacity) && strokeOpacity !== 1;\n      if (applyOpacity) {\n        currentGlobalAlpha = context.globalAlpha;\n        context.globalAlpha = strokeOpacity;\n      }\n      context.strokeText(text, x, y);\n      if (applyOpacity) {\n        context.globalAlpha = currentGlobalAlpha;\n      }\n    }\n\n    // ---\n  }, {\n    key: \"drawToContext\",\n    value: function drawToContext(context, object, renderState, plugin, runtime) {\n      this.render(context, object.parsedStyle, object, object.ownerDocument.defaultView.context, plugin, runtime);\n    }\n  }]);\n}(DefaultRenderer);\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Plugin);\n    _this = _callSuper(this, Plugin);\n    _this.name = 'canvas-renderer';\n    _this.options = options;\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init() {\n      var _defaultStyleRenderer;\n      var canvasRendererPluginOptions = _objectSpread({\n        dirtyObjectNumThreshold: 500,\n        dirtyObjectRatioThreshold: 0.8\n      }, this.options);\n\n      // @ts-ignore\n      var imagePool = this.context.imagePool;\n      var defaultRenderer = new DefaultRenderer(imagePool);\n      var defaultStyleRendererFactory = (_defaultStyleRenderer = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defaultStyleRenderer, Shape.CIRCLE, defaultRenderer), Shape.ELLIPSE, defaultRenderer), Shape.RECT, defaultRenderer), Shape.IMAGE, new ImageRenderer(imagePool)), Shape.TEXT, new TextRenderer(imagePool)), Shape.LINE, defaultRenderer), Shape.POLYLINE, defaultRenderer), Shape.POLYGON, defaultRenderer), Shape.PATH, defaultRenderer), Shape.GROUP, undefined), _defineProperty(_defineProperty(_defineProperty(_defaultStyleRenderer, Shape.HTML, undefined), Shape.MESH, undefined), Shape.FRAGMENT, undefined));\n      this.context.defaultStyleRendererFactory = defaultStyleRendererFactory;\n      this.context.styleRendererFactory = defaultStyleRendererFactory;\n      this.addRenderingPlugin(new CanvasRendererPlugin(canvasRendererPluginOptions));\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeAllRenderingPlugins();\n      delete this.context.defaultStyleRendererFactory;\n      delete this.context.styleRendererFactory;\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { DefaultRenderer as CircleRenderer, DefaultRenderer, DefaultRenderer as EllipseRenderer, ImageRenderer, DefaultRenderer as LineRenderer, DefaultRenderer as PathRenderer, Plugin, DefaultRenderer as PolygonRenderer, DefaultRenderer as PolylineRenderer, DefaultRenderer as RectRenderer, TextRenderer };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-plugin-dom-interaction\n * @description A G plugin\n * @version 2.1.19\n * @date 1/2/2025, 2:55:40 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { AbstractRendererPlugin } from '@antv/g-lite';\n\n// const MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\n/**\n * listen to mouse/touch/pointer events on DOM wrapper, trigger pointer events\n */\nvar DOMInteractionPlugin = /*#__PURE__*/function () {\n  function DOMInteractionPlugin() {\n    _classCallCheck(this, DOMInteractionPlugin);\n  }\n  return _createClass(DOMInteractionPlugin, [{\n    key: \"apply\",\n    value: function apply(context, runtime) {\n      var _this = this;\n      var renderingService = context.renderingService,\n        renderingContext = context.renderingContext,\n        config = context.config;\n      this.context = context;\n      var canvas = renderingContext.root.ownerDocument.defaultView;\n      // const SUPPORT_ONLY_TOUCH = canvas.supportsTouchEvents && MOBILE_REGEX.test(navigator.userAgent);\n\n      var onPointerMove = function onPointerMove(ev) {\n        renderingService.hooks.pointerMove.call(ev);\n      };\n      var onPointerUp = function onPointerUp(ev) {\n        renderingService.hooks.pointerUp.call(ev);\n      };\n      var onPointerDown = function onPointerDown(ev) {\n        renderingService.hooks.pointerDown.call(ev);\n      };\n      var onPointerOver = function onPointerOver(ev) {\n        renderingService.hooks.pointerOver.call(ev);\n      };\n      var onPointerOut = function onPointerOut(ev) {\n        renderingService.hooks.pointerOut.call(ev);\n      };\n      var onPointerCancel = function onPointerCancel(ev) {\n        renderingService.hooks.pointerCancel.call(ev);\n      };\n      var onPointerWheel = function onPointerWheel(ev) {\n        renderingService.hooks.pointerWheel.call(ev);\n      };\n      var onClick = function onClick(ev) {\n        renderingService.hooks.click.call(ev);\n      };\n      var addPointerEventListener = function addPointerEventListener($el) {\n        runtime.globalThis.document.addEventListener('pointermove', onPointerMove, true);\n        $el.addEventListener('pointerdown', onPointerDown, true);\n        $el.addEventListener('pointerleave', onPointerOut, true);\n        $el.addEventListener('pointerover', onPointerOver, true);\n        runtime.globalThis.addEventListener('pointerup', onPointerUp, true);\n        runtime.globalThis.addEventListener('pointercancel', onPointerCancel, true);\n      };\n      var addTouchEventListener = function addTouchEventListener($el) {\n        $el.addEventListener('touchstart', onPointerDown, true);\n        $el.addEventListener('touchend', onPointerUp, true);\n        $el.addEventListener('touchmove', onPointerMove, true);\n        $el.addEventListener('touchcancel', onPointerCancel, true);\n      };\n      var addMouseEventListener = function addMouseEventListener($el) {\n        runtime.globalThis.document.addEventListener('mousemove', onPointerMove, true);\n        $el.addEventListener('mousedown', onPointerDown, true);\n        $el.addEventListener('mouseout', onPointerOut, true);\n        $el.addEventListener('mouseover', onPointerOver, true);\n        runtime.globalThis.addEventListener('mouseup', onPointerUp, true);\n      };\n      var removePointerEventListener = function removePointerEventListener($el) {\n        runtime.globalThis.document.removeEventListener('pointermove', onPointerMove, true);\n        $el.removeEventListener('pointerdown', onPointerDown, true);\n        $el.removeEventListener('pointerleave', onPointerOut, true);\n        $el.removeEventListener('pointerover', onPointerOver, true);\n        runtime.globalThis.removeEventListener('pointerup', onPointerUp, true);\n        runtime.globalThis.removeEventListener('pointercancel', onPointerCancel, true);\n      };\n      var removeTouchEventListener = function removeTouchEventListener($el) {\n        $el.removeEventListener('touchstart', onPointerDown, true);\n        $el.removeEventListener('touchend', onPointerUp, true);\n        $el.removeEventListener('touchmove', onPointerMove, true);\n        $el.removeEventListener('touchcancel', onPointerCancel, true);\n      };\n      var removeMouseEventListener = function removeMouseEventListener($el) {\n        runtime.globalThis.document.removeEventListener('mousemove', onPointerMove, true);\n        $el.removeEventListener('mousedown', onPointerDown, true);\n        $el.removeEventListener('mouseout', onPointerOut, true);\n        $el.removeEventListener('mouseover', onPointerOver, true);\n        runtime.globalThis.removeEventListener('mouseup', onPointerUp, true);\n      };\n      renderingService.hooks.init.tap(DOMInteractionPlugin.tag, function () {\n        var $el = _this.context.contextService.getDomElement();\n\n        // @ts-ignore\n        if (runtime.globalThis.navigator.msPointerEnabled) {\n          // @ts-ignore\n          $el.style.msContentZooming = 'none';\n          // @ts-ignore\n          $el.style.msTouchAction = 'none';\n        } else if (canvas.supportsPointerEvents) {\n          $el.style.touchAction = 'none';\n        }\n        if (canvas.supportsPointerEvents) {\n          addPointerEventListener($el);\n        } else {\n          addMouseEventListener($el);\n        }\n        if (canvas.supportsTouchEvents) {\n          addTouchEventListener($el);\n        }\n        if (config.useNativeClickEvent) {\n          $el.addEventListener('click', onClick, true);\n        }\n\n        // use passive event listeners\n        // @see https://zhuanlan.zhihu.com/p/24555031\n        $el.addEventListener('wheel', onPointerWheel, {\n          passive: true,\n          capture: true\n        });\n      });\n      renderingService.hooks.destroy.tap(DOMInteractionPlugin.tag, function () {\n        var $el = _this.context.contextService.getDomElement();\n\n        // @ts-ignore\n        if (runtime.globalThis.navigator.msPointerEnabled) {\n          // @ts-ignore\n          $el.style.msContentZooming = '';\n          // @ts-ignore\n          $el.style.msTouchAction = '';\n        } else if (canvas.supportsPointerEvents) {\n          $el.style.touchAction = '';\n        }\n        if (canvas.supportsPointerEvents) {\n          removePointerEventListener($el);\n        } else {\n          removeMouseEventListener($el);\n        }\n        if (canvas.supportsTouchEvents) {\n          removeTouchEventListener($el);\n        }\n        if (config.useNativeClickEvent) {\n          $el.removeEventListener('click', onClick, true);\n        }\n        $el.removeEventListener('wheel', onPointerWheel, true);\n      });\n    }\n  }]);\n}();\nDOMInteractionPlugin.tag = 'DOMInteraction';\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    _classCallCheck(this, Plugin);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Plugin, [].concat(args));\n    _this.name = 'dom-interaction';\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init() {\n      this.addRenderingPlugin(new DOMInteractionPlugin());\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeAllRenderingPlugins();\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { Plugin };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-plugin-html-renderer\n * @description A G plugin for rendering HTML\n * @version 2.1.19\n * @date 1/2/2025, 2:55:50 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { CanvasEvent, ElementEvent, RenderReason, isCSSRGB, isPattern, Shape, AbstractRendererPlugin } from '@antv/g-lite';\nimport { isNil, isNumber, isString } from '@antv/util';\n\nvar CANVAS_CAMERA_ID = 'g-canvas-camera';\nvar HTMLRenderingPlugin = /*#__PURE__*/function () {\n  function HTMLRenderingPlugin() {\n    _classCallCheck(this, HTMLRenderingPlugin);\n    this.displayObjectHTMLElementMap = new WeakMap();\n  }\n  return _createClass(HTMLRenderingPlugin, [{\n    key: \"joinTransformMatrix\",\n    value:\n    /**\n     * ! The reason for adding `offset` is that the `transform-origin` coordinate system of DOM is the local coordinate system of the element, while the `transform-origin` coordinate system of canvas drawing is the local coordinate system of the element's parent element. At the same time, the `transform` attribute value of the DOM element does not include `transform-origin`.\n     */\n    function joinTransformMatrix(matrix) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      return \"matrix(\".concat([matrix[0], matrix[1], matrix[4], matrix[5], matrix[12] + offset[0], matrix[13] + offset[1]].join(','), \")\");\n    }\n  }, {\n    key: \"apply\",\n    value: function apply(context, runtime) {\n      var _this = this;\n      var camera = context.camera,\n        renderingContext = context.renderingContext,\n        renderingService = context.renderingService;\n      this.context = context;\n      var canvas = renderingContext.root.ownerDocument.defaultView;\n      var nativeHTMLMap = canvas.context.eventService.nativeHTMLMap;\n      var setTransform = function setTransform(object, $el) {\n        $el.style.transform = _this.joinTransformMatrix(object.getWorldTransform(), object.getOrigin());\n      };\n      var handleMounted = function handleMounted(e) {\n        var object = e.target;\n        if (object.nodeName === Shape.HTML) {\n          if (!_this.$camera) {\n            _this.$camera = _this.createCamera(camera);\n          }\n\n          // create DOM element\n          var $el = _this.getOrCreateEl(object);\n          _this.$camera.appendChild($el);\n          Object.keys(object.attributes).forEach(function (name) {\n            _this.updateAttribute(name, object);\n          });\n          setTransform(object, $el);\n          nativeHTMLMap.set($el, object);\n        }\n      };\n      var handleUnmounted = function handleUnmounted(e) {\n        var object = e.target;\n        if (object.nodeName === Shape.HTML && _this.$camera) {\n          var $el = _this.getOrCreateEl(object);\n          if ($el) {\n            $el.remove();\n            nativeHTMLMap[\"delete\"]($el);\n          }\n        }\n      };\n      var handleAttributeChanged = function handleAttributeChanged(e) {\n        var object = e.target;\n        if (object.nodeName === Shape.HTML) {\n          var attrName = e.attrName;\n          _this.updateAttribute(attrName, object);\n        }\n      };\n      var handleBoundsChanged = function handleBoundsChanged(e) {\n        var object = e.target;\n        var nodes = object.nodeName === Shape.FRAGMENT ? object.childNodes : [object];\n        nodes.forEach(function (node) {\n          if (node.nodeName === Shape.HTML) {\n            var $el = _this.getOrCreateEl(node);\n            setTransform(node, $el);\n          }\n        });\n      };\n      var handleCanvasResize = function handleCanvasResize() {\n        if (_this.$camera) {\n          var _this$context$config = _this.context.config,\n            width = _this$context$config.width,\n            height = _this$context$config.height;\n          _this.$camera.parentElement.style.width = \"\".concat(width || 0, \"px\");\n          _this.$camera.parentElement.style.height = \"\".concat(height || 0, \"px\");\n        }\n      };\n      renderingService.hooks.init.tap(HTMLRenderingPlugin.tag, function () {\n        canvas.addEventListener(CanvasEvent.RESIZE, handleCanvasResize);\n        canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n        canvas.addEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n        canvas.addEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n        canvas.addEventListener(ElementEvent.BOUNDS_CHANGED, handleBoundsChanged);\n      });\n      renderingService.hooks.endFrame.tap(HTMLRenderingPlugin.tag, function () {\n        if (_this.$camera && renderingContext.renderReasons.has(RenderReason.CAMERA_CHANGED)) {\n          _this.$camera.style.transform = _this.joinTransformMatrix(camera.getOrthoMatrix());\n        }\n      });\n      renderingService.hooks.destroy.tap(HTMLRenderingPlugin.tag, function () {\n        // remove camera\n        if (_this.$camera) {\n          _this.$camera.remove();\n        }\n        canvas.removeEventListener(CanvasEvent.RESIZE, handleCanvasResize);\n        canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n        canvas.removeEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n        canvas.removeEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n        canvas.removeEventListener(ElementEvent.BOUNDS_CHANGED, handleBoundsChanged);\n      });\n    }\n  }, {\n    key: \"createCamera\",\n    value: function createCamera(camera) {\n      var _this$context$config2 = this.context.config,\n        doc = _this$context$config2.document,\n        width = _this$context$config2.width,\n        height = _this$context$config2.height;\n      var $canvas = this.context.contextService.getDomElement();\n      var $container = $canvas.parentNode;\n      if ($container) {\n        var cameraId = CANVAS_CAMERA_ID;\n        var $existedCamera = $container.querySelector(\"#\".concat(cameraId));\n        if (!$existedCamera) {\n          // fix @see https://github.com/antvis/G/issues/1702\n          var $cameraContainer = (doc || document).createElement('div');\n          // HTML elements should not overflow with canvas @see https://github.com/antvis/G/issues/1163\n          $cameraContainer.style.overflow = 'hidden';\n          $cameraContainer.style.pointerEvents = 'none';\n          $cameraContainer.style.position = 'absolute';\n          $cameraContainer.style.left = \"0px\";\n          $cameraContainer.style.top = \"0px\";\n          $cameraContainer.style.width = \"\".concat(width || 0, \"px\");\n          $cameraContainer.style.height = \"\".concat(height || 0, \"px\");\n          var $camera = (doc || document).createElement('div');\n          $existedCamera = $camera;\n          $camera.id = cameraId;\n          // use absolute position\n          $camera.style.position = 'absolute';\n          // account for DOM element's offset @see https://github.com/antvis/G/issues/1150\n          $camera.style.left = \"\".concat($canvas.offsetLeft || 0, \"px\");\n          $camera.style.top = \"\".concat($canvas.offsetTop || 0, \"px\");\n          $camera.style.transformOrigin = 'left top';\n          $camera.style.transform = this.joinTransformMatrix(camera.getOrthoMatrix());\n          $camera.style.pointerEvents = 'none';\n          $camera.style.width = \"100%\";\n          $camera.style.height = \"100%\";\n          $cameraContainer.appendChild($camera);\n          $container.appendChild($cameraContainer);\n        }\n        return $existedCamera;\n      }\n      return null;\n    }\n  }, {\n    key: \"getOrCreateEl\",\n    value: function getOrCreateEl(object) {\n      var doc = this.context.config.document;\n      var $existedElement = this.displayObjectHTMLElementMap.get(object);\n      if (!$existedElement) {\n        $existedElement = (doc || document).createElement('div');\n        object.parsedStyle.$el = $existedElement;\n        this.displayObjectHTMLElementMap.set(object, $existedElement);\n        if (object.id) {\n          $existedElement.id = object.id;\n        }\n        if (object.name) {\n          $existedElement.setAttribute('name', object.name);\n        }\n        if (object.className) {\n          $existedElement.className = object.className;\n        }\n\n        // use absolute position\n        $existedElement.style.position = 'absolute';\n        // @see https://github.com/antvis/G/issues/1150\n        $existedElement.style['will-change'] = 'transform';\n        $existedElement.style.transform = this.joinTransformMatrix(object.getWorldTransform(), object.getOrigin());\n      }\n      return $existedElement;\n    }\n  }, {\n    key: \"updateAttribute\",\n    value: function updateAttribute(name, object) {\n      var $el = this.getOrCreateEl(object);\n      switch (name) {\n        case 'innerHTML':\n          var innerHTML = object.parsedStyle.innerHTML;\n          if (isString(innerHTML)) {\n            $el.innerHTML = innerHTML;\n          } else {\n            $el.innerHTML = '';\n            $el.appendChild(innerHTML);\n          }\n          break;\n        case 'x':\n          $el.style.left = \"\".concat(object.parsedStyle.x, \"px\");\n          break;\n        case 'y':\n          $el.style.top = \"\".concat(object.parsedStyle.y, \"px\");\n          break;\n        case 'transformOrigin':\n          var transformOrigin = object.parsedStyle.transformOrigin;\n          $el.style['transform-origin'] = \"\".concat(transformOrigin[0].buildCSSText(null, null, ''), \" \").concat(transformOrigin[1].buildCSSText(null, null, ''));\n          break;\n        case 'width':\n          var width = object.parsedStyle.width;\n          $el.style.width = isNumber(width) ? \"\".concat(width, \"px\") : width.toString();\n          break;\n        case 'height':\n          var height = object.parsedStyle.height;\n          $el.style.height = isNumber(height) ? \"\".concat(height, \"px\") : height.toString();\n          break;\n        case 'zIndex':\n          var zIndex = object.parsedStyle.zIndex;\n          $el.style['z-index'] = \"\".concat(zIndex);\n          break;\n        case 'visibility':\n          var visibility = object.parsedStyle.visibility;\n          $el.style.visibility = visibility;\n          break;\n        case 'pointerEvents':\n          var _object$parsedStyle$p = object.parsedStyle.pointerEvents,\n            pointerEvents = _object$parsedStyle$p === void 0 ? 'auto' : _object$parsedStyle$p;\n          $el.style.pointerEvents = pointerEvents;\n          break;\n        case 'opacity':\n          var opacity = object.parsedStyle.opacity;\n          $el.style.opacity = \"\".concat(opacity);\n          break;\n        case 'fill':\n          var fill = object.parsedStyle.fill;\n          var color = '';\n          if (isCSSRGB(fill)) {\n            if (fill.isNone) {\n              color = 'transparent';\n            } else {\n              color = object.getAttribute('fill');\n            }\n          } else if (Array.isArray(fill)) {\n            color = object.getAttribute('fill');\n          } else if (isPattern(fill)) ;\n          $el.style.background = color;\n          break;\n        case 'stroke':\n          var stroke = object.parsedStyle.stroke;\n          var borderColor = '';\n          if (isCSSRGB(stroke)) {\n            if (stroke.isNone) {\n              borderColor = 'transparent';\n            } else {\n              borderColor = object.getAttribute('stroke');\n            }\n          } else if (Array.isArray(stroke)) {\n            borderColor = object.getAttribute('stroke');\n          } else if (isPattern(stroke)) ;\n          $el.style['border-color'] = borderColor;\n          $el.style['border-style'] = 'solid';\n          break;\n        case 'lineWidth':\n          var lineWidth = object.parsedStyle.lineWidth;\n          $el.style['border-width'] = \"\".concat(lineWidth || 0, \"px\");\n          break;\n        case 'lineDash':\n          $el.style['border-style'] = 'dashed';\n          break;\n        case 'filter':\n          var filter = object.style.filter;\n          $el.style.filter = filter;\n          break;\n        default:\n          if (!isNil(object.style[name]) && object.style[name] !== '') {\n            $el.style[name] = object.style[name];\n          }\n      }\n    }\n  }]);\n}();\nHTMLRenderingPlugin.tag = 'HTMLRendering';\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    _classCallCheck(this, Plugin);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Plugin, [].concat(args));\n    _this.name = 'html-renderer';\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init() {\n      this.addRenderingPlugin(new HTMLRenderingPlugin());\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeAllRenderingPlugins();\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { Plugin };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-canvas\n * @description A renderer implemented by Canvas 2D API\n * @version 2.0.37\n * @date 1/2/2025, 2:58:21 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { setDOMSize, RenderReason, AbstractRendererPlugin, AbstractRenderer } from '@antv/g-lite';\nimport * as CanvasPathGenerator from '@antv/g-plugin-canvas-path-generator';\nexport { CanvasPathGenerator };\nimport * as CanvasPicker from '@antv/g-plugin-canvas-picker';\nexport { CanvasPicker };\nimport * as CanvasRenderer from '@antv/g-plugin-canvas-renderer';\nexport { CanvasRenderer };\nimport * as DomInteraction from '@antv/g-plugin-dom-interaction';\nexport { DomInteraction };\nimport * as HTMLRenderer from '@antv/g-plugin-html-renderer';\nexport { HTMLRenderer };\nimport * as ImageLoader from '@antv/g-plugin-image-loader';\nexport { ImageLoader };\nimport _regeneratorRuntime from '@babel/runtime/helpers/regeneratorRuntime';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport { isString } from '@antv/util';\n\nvar Canvas2DContextService = /*#__PURE__*/function () {\n  function Canvas2DContextService(context) {\n    _classCallCheck(this, Canvas2DContextService);\n    this.renderingContext = context.renderingContext;\n    this.canvasConfig = context.config;\n  }\n  return _createClass(Canvas2DContextService, [{\n    key: \"init\",\n    value: function init() {\n      var _this$canvasConfig = this.canvasConfig,\n        container = _this$canvasConfig.container,\n        canvas = _this$canvasConfig.canvas;\n      if (canvas) {\n        this.$canvas = canvas;\n        if (container && canvas.parentElement !== container) {\n          container.appendChild(canvas);\n        }\n        this.$container = canvas.parentElement;\n        this.canvasConfig.container = this.$container;\n      } else if (container) {\n        // create container\n        this.$container = isString(container) ? document.getElementById(container) : container;\n        if (this.$container) {\n          // create canvas\n          var $canvas = document.createElement('canvas');\n          this.$container.appendChild($canvas);\n          if (!this.$container.style.position) {\n            this.$container.style.position = 'relative';\n          }\n          this.$canvas = $canvas;\n        }\n      }\n      this.context = this.$canvas.getContext('2d');\n      this.resize(this.canvasConfig.width, this.canvasConfig.height);\n    }\n  }, {\n    key: \"getContext\",\n    value: function getContext() {\n      return this.context;\n    }\n  }, {\n    key: \"getDomElement\",\n    value: function getDomElement() {\n      return this.$canvas;\n    }\n  }, {\n    key: \"getDPR\",\n    value: function getDPR() {\n      return this.dpr;\n    }\n  }, {\n    key: \"getBoundingClientRect\",\n    value: function getBoundingClientRect() {\n      if (this.$canvas.getBoundingClientRect) {\n        return this.$canvas.getBoundingClientRect();\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      // @ts-ignore\n      if (this.$container && this.$canvas && this.$canvas.parentNode) {\n        // destroy context\n        // @ts-ignore\n        this.$container.removeChild(this.$canvas);\n      }\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(width, height) {\n      var dpr = this.canvasConfig.devicePixelRatio;\n      this.dpr = dpr;\n      if (this.$canvas) {\n        // set canvas width & height\n        this.$canvas.width = this.dpr * width;\n        this.$canvas.height = this.dpr * height;\n\n        // set CSS style width & height\n        setDOMSize(this.$canvas, width, height);\n\n        // const dpr = this.getDPR();\n        // scale all drawing operations by the dpr\n        // @see https://www.html5rocks.com/en/tutorials/canvas/hidpi/\n        // this.context.scale(dpr, dpr);\n      }\n      this.renderingContext.renderReasons.add(RenderReason.CAMERA_CHANGED);\n    }\n  }, {\n    key: \"applyCursorStyle\",\n    value: function applyCursorStyle(cursor) {\n      if (this.$container && this.$container.style) {\n        this.$container.style.cursor = cursor;\n      }\n    }\n  }, {\n    key: \"toDataURL\",\n    value: function () {\n      var _toDataURL = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var options,\n          type,\n          encoderOptions,\n          _args = arguments;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              options = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n              type = options.type, encoderOptions = options.encoderOptions;\n              return _context.abrupt(\"return\", this.context.canvas.toDataURL(type, encoderOptions));\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function toDataURL() {\n        return _toDataURL.apply(this, arguments);\n      }\n      return toDataURL;\n    }()\n  }]);\n}();\n\nvar ContextRegisterPlugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function ContextRegisterPlugin() {\n    var _this;\n    _classCallCheck(this, ContextRegisterPlugin);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, ContextRegisterPlugin, [].concat(args));\n    _this.name = 'canvas-context-register';\n    return _this;\n  }\n  _inherits(ContextRegisterPlugin, _AbstractRendererPlug);\n  return _createClass(ContextRegisterPlugin, [{\n    key: \"init\",\n    value: function init() {\n      this.context.ContextService = Canvas2DContextService;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      delete this.context.ContextService;\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nvar Renderer = /*#__PURE__*/function (_AbstractRenderer) {\n  function Renderer(config) {\n    var _this;\n    _classCallCheck(this, Renderer);\n    _this = _callSuper(this, Renderer, [config]);\n\n    // register Canvas2DContext\n    _this.registerPlugin(new ContextRegisterPlugin());\n    _this.registerPlugin(new ImageLoader.Plugin());\n    _this.registerPlugin(new CanvasPathGenerator.Plugin());\n    // enable rendering with Canvas2D API\n    _this.registerPlugin(new CanvasRenderer.Plugin());\n    _this.registerPlugin(new DomInteraction.Plugin());\n    // enable picking with Canvas2D API\n    _this.registerPlugin(new CanvasPicker.Plugin());\n\n    // render HTML component\n    _this.registerPlugin(new HTMLRenderer.Plugin());\n    return _this;\n  }\n  _inherits(Renderer, _AbstractRenderer);\n  return _createClass(Renderer);\n}(AbstractRenderer);\n\nexport { Renderer };\n//# sourceMappingURL=index.esm.js.map\n","import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n","export var paramsCount = {\n    a: 7,\n    c: 6,\n    h: 1,\n    l: 2,\n    m: 2,\n    r: 4,\n    q: 4,\n    s: 4,\n    t: 2,\n    v: 1,\n    z: 0,\n};\n//# sourceMappingURL=params-count.js.map","import { paramsCount } from '../parser/params-count';\n/**\n * Iterates an array to check if it's an actual `PathArray`.\n */\nexport function isPathArray(path) {\n    return (Array.isArray(path) &&\n        path.every(function (seg) {\n            var lk = seg[0].toLowerCase();\n            return paramsCount[lk] === seg.length - 1 && 'achlmqstvz'.includes(lk);\n        }));\n}\n//# sourceMappingURL=is-path-array.js.map","import { isPathArray } from './is-path-array';\n/**\n * Iterates an array to check if it's a `PathArray`\n * with all absolute values.\n */\nexport function isAbsoluteArray(path) {\n    return (isPathArray(path) &&\n        // @ts-ignore -- `isPathArray` also checks if it's `Array`\n        path.every(function (_a) {\n            var x = _a[0];\n            return x === x.toUpperCase();\n        }));\n}\n//# sourceMappingURL=is-absolute-array.js.map","import { isAbsoluteArray } from './is-absolute-array';\n/**\n * Iterates an array to check if it's a `PathArray`\n * with all segments are in non-shorthand notation\n * with absolute values.\n */\nexport function isNormalizedArray(path) {\n    return isAbsoluteArray(path) && path.every(function (_a) {\n        var pc = _a[0];\n        return 'ACLMQZ'.includes(pc);\n    });\n}\n//# sourceMappingURL=is-normalized-array.js.map","export var paramsParser = {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    x: 0,\n    y: 0,\n    qx: null,\n    qy: null,\n};\n//# sourceMappingURL=params-parser.js.map","import { paramsCount } from './params-count';\n/**\n * Breaks the parsing of a pathString once a segment is finalized.\n */\nexport function finalizeSegment(path) {\n    var pathCommand = path.pathValue[path.segmentStart];\n    var LK = pathCommand.toLowerCase();\n    var data = path.data;\n    while (data.length >= paramsCount[LK]) {\n        // overloaded `moveTo`\n        // https://github.com/rveciana/svg-path-properties/blob/master/src/parse.ts\n        if (LK === 'm' && data.length > 2) {\n            // @ts-ignore\n            path.segments.push([pathCommand].concat(data.splice(0, 2)));\n            LK = 'l';\n            pathCommand = pathCommand === 'm' ? 'l' : 'L';\n        }\n        else {\n            // @ts-ignore\n            path.segments.push([pathCommand].concat(data.splice(0, paramsCount[LK])));\n        }\n        if (!paramsCount[LK]) {\n            break;\n        }\n    }\n}\n//# sourceMappingURL=finalize-segment.js.map","/**\n * Validates an A (arc-to) specific path command value.\n * Usually a `large-arc-flag` or `sweep-flag`.\n */\nexport function scanFlag(path) {\n    var index = path.index, pathValue = path.pathValue;\n    var code = pathValue.charCodeAt(index);\n    if (code === 0x30 /* 0 */) {\n        path.param = 0;\n        path.index += 1;\n        return;\n    }\n    if (code === 0x31 /* 1 */) {\n        path.param = 1;\n        path.index += 1;\n        return;\n    }\n    path.err = \"[path-util]: invalid Arc flag \\\"\" + pathValue[index] + \"\\\", expecting 0 or 1 at index \" + index;\n}\n//# sourceMappingURL=scan-flag.js.map","/**\n * Checks if the character is or belongs to a number.\n * [0-9]|+|-|.\n */\nexport function isDigitStart(code) {\n    return ((code >= 48 && code <= 57) /* 0..9 */ || code === 0x2b /* + */ || code === 0x2d /* - */ || code === 0x2e); /* . */\n}\nexport function isDigit(code) {\n    return code >= 48 && code <= 57; // 0..9\n}\n//# sourceMappingURL=is-digit-start.js.map","import { isDigit } from './is-digit-start';\n/**\n * Validates every character of the path string,\n * every path command, negative numbers or floating point numbers.\n */\nexport function scanParam(path) {\n    var max = path.max, pathValue = path.pathValue, start = path.index;\n    var index = start;\n    var zeroFirst = false;\n    var hasCeiling = false;\n    var hasDecimal = false;\n    var hasDot = false;\n    var ch;\n    if (index >= max) {\n        // path.err = 'SvgPath: missed param (at pos ' + index + ')';\n        path.err = \"[path-util]: Invalid path value at index \" + index + \", \\\"pathValue\\\" is missing param\";\n        return;\n    }\n    ch = pathValue.charCodeAt(index);\n    if (ch === 0x2b /* + */ || ch === 0x2d /* - */) {\n        index += 1;\n        // ch = (index < max) ? pathValue.charCodeAt(index) : 0;\n        ch = pathValue.charCodeAt(index);\n    }\n    // This logic is shamelessly borrowed from Esprima\n    // https://github.com/ariya/esprimas\n    if (!isDigit(ch) && ch !== 0x2e /* . */) {\n        // path.err = 'SvgPath: param should start with 0..9 or `.` (at pos ' + index + ')';\n        path.err = \"[path-util]: Invalid path value at index \" + index + \", \\\"\" + pathValue[index] + \"\\\" is not a number\";\n        return;\n    }\n    if (ch !== 0x2e /* . */) {\n        zeroFirst = ch === 0x30 /* 0 */;\n        index += 1;\n        ch = pathValue.charCodeAt(index);\n        if (zeroFirst && index < max) {\n            // decimal number starts with '0' such as '09' is illegal.\n            if (ch && isDigit(ch)) {\n                // path.err = 'SvgPath: numbers started with `0` such as `09`\n                // are illegal (at pos ' + start + ')';\n                path.err = \"[path-util]: Invalid path value at index \" + start + \", \\\"\" + pathValue[start] + \"\\\" illegal number\";\n                return;\n            }\n        }\n        while (index < max && isDigit(pathValue.charCodeAt(index))) {\n            index += 1;\n            hasCeiling = true;\n        }\n        ch = pathValue.charCodeAt(index);\n    }\n    if (ch === 0x2e /* . */) {\n        hasDot = true;\n        index += 1;\n        while (isDigit(pathValue.charCodeAt(index))) {\n            index += 1;\n            hasDecimal = true;\n        }\n        ch = pathValue.charCodeAt(index);\n    }\n    if (ch === 0x65 /* e */ || ch === 0x45 /* E */) {\n        if (hasDot && !hasCeiling && !hasDecimal) {\n            path.err = \"[path-util]: Invalid path value at index \" + index + \", \\\"\" + pathValue[index] + \"\\\" invalid float exponent\";\n            return;\n        }\n        index += 1;\n        ch = pathValue.charCodeAt(index);\n        if (ch === 0x2b /* + */ || ch === 0x2d /* - */) {\n            index += 1;\n        }\n        if (index < max && isDigit(pathValue.charCodeAt(index))) {\n            while (index < max && isDigit(pathValue.charCodeAt(index))) {\n                index += 1;\n            }\n        }\n        else {\n            path.err = \"[path-util]: Invalid path value at index \" + index + \", \\\"\" + pathValue[index] + \"\\\" invalid integer exponent\";\n            return;\n        }\n    }\n    path.index = index;\n    path.param = +path.pathValue.slice(start, index);\n}\n//# sourceMappingURL=scan-param.js.map","import { isSpace } from './is-space';\n/**\n * Points the parser to the next character in the\n * path string every time it encounters any kind of\n * space character.\n */\nexport function skipSpaces(path) {\n    var pathValue = path.pathValue, max = path.max;\n    while (path.index < max && isSpace(pathValue.charCodeAt(path.index))) {\n        path.index += 1;\n    }\n}\n//# sourceMappingURL=skip-spaces.js.map","/**\n * Checks if the character is a space.\n */\nexport function isSpace(ch) {\n    var specialSpaces = [\n        0x1680, 0x180e, 0x2000, 0x2001, 0x2002, 0x2003, 0x2004, 0x2005, 0x2006, 0x2007, 0x2008, 0x2009, 0x200a, 0x202f,\n        0x205f, 0x3000, 0xfeff,\n    ];\n    /* istanbul ignore next */\n    return (ch === 0x0a ||\n        ch === 0x0d ||\n        ch === 0x2028 ||\n        ch === 0x2029 || // Line terminators\n        // White spaces\n        ch === 0x20 ||\n        ch === 0x09 ||\n        ch === 0x0b ||\n        ch === 0x0c ||\n        ch === 0xa0 ||\n        (ch >= 0x1680 && specialSpaces.includes(ch)));\n}\n//# sourceMappingURL=is-space.js.map","import { finalizeSegment } from './finalize-segment';\nimport { paramsCount } from './params-count';\nimport { scanFlag } from './scan-flag';\nimport { scanParam } from './scan-param';\nimport { skipSpaces } from './skip-spaces';\nimport { isPathCommand } from './is-path-command';\nimport { isDigitStart } from './is-digit-start';\nimport { isArcCommand } from './is-arc-command';\n/**\n * Scans every character in the path string to determine\n * where a segment starts and where it ends.\n */\nexport function scanSegment(path) {\n    var max = path.max, pathValue = path.pathValue, index = path.index;\n    var cmdCode = pathValue.charCodeAt(index);\n    var reqParams = paramsCount[pathValue[index].toLowerCase()];\n    path.segmentStart = index;\n    if (!isPathCommand(cmdCode)) {\n        path.err = \"[path-util]: Invalid path value \\\"\" + pathValue[index] + \"\\\" is not a path command\";\n        return;\n    }\n    path.index += 1;\n    skipSpaces(path);\n    path.data = [];\n    if (!reqParams) {\n        // Z\n        finalizeSegment(path);\n        return;\n    }\n    for (;;) {\n        for (var i = reqParams; i > 0; i -= 1) {\n            if (isArcCommand(cmdCode) && (i === 3 || i === 4))\n                scanFlag(path);\n            else\n                scanParam(path);\n            if (path.err.length) {\n                return;\n            }\n            path.data.push(path.param);\n            skipSpaces(path);\n            // after ',' param is mandatory\n            if (path.index < max && pathValue.charCodeAt(path.index) === 0x2c /* , */) {\n                path.index += 1;\n                skipSpaces(path);\n            }\n        }\n        if (path.index >= path.max) {\n            break;\n        }\n        // Stop on next segment\n        if (!isDigitStart(pathValue.charCodeAt(path.index))) {\n            break;\n        }\n    }\n    finalizeSegment(path);\n}\n//# sourceMappingURL=scan-segment.js.map","/**\n * Checks if the character is a path command.\n */\nexport function isPathCommand(code) {\n    // eslint-disable-next-line no-bitwise -- Impossible to satisfy\n    switch (code | 0x20) {\n        case 0x6d /* m */:\n        case 0x7a /* z */:\n        case 0x6c /* l */:\n        case 0x68 /* h */:\n        case 0x76 /* v */:\n        case 0x63 /* c */:\n        case 0x73 /* s */:\n        case 0x71 /* q */:\n        case 0x74 /* t */:\n        case 0x61 /* a */:\n            // case 0x72/* r */:\n            return true;\n        default:\n            return false;\n    }\n}\n//# sourceMappingURL=is-path-command.js.map","/**\n * Checks if the character is an A (arc-to) path command.\n */\nexport function isArcCommand(code) {\n    return (code | 0x20) === 0x61;\n}\n//# sourceMappingURL=is-arc-command.js.map","/**\n * The `PathParser` is used by the `parsePathString` static method\n * to generate a `pathArray`.\n */\nvar PathParser = /** @class */ (function () {\n    function PathParser(pathString) {\n        this.pathValue = pathString;\n        // @ts-ignore\n        this.segments = [];\n        this.max = pathString.length;\n        this.index = 0;\n        this.param = 0.0;\n        this.segmentStart = 0;\n        this.data = [];\n        this.err = '';\n    }\n    return PathParser;\n}());\nexport { PathParser };\n//# sourceMappingURL=path-parser.js.map","import { isAbsoluteArray } from '../util/is-absolute-array';\nimport { parsePathString } from '../parser/parse-path-string';\nexport function path2Absolute(pathInput) {\n    if (isAbsoluteArray(pathInput)) {\n        return [].concat(pathInput);\n    }\n    var path = parsePathString(pathInput);\n    // if (!path || !path.length) {\n    //   return [['M', 0, 0]];\n    // }\n    var x = 0;\n    var y = 0;\n    var mx = 0;\n    var my = 0;\n    // @ts-ignore\n    return path.map(function (segment) {\n        var values = segment.slice(1).map(Number);\n        var pathCommand = segment[0];\n        var absCommand = pathCommand.toUpperCase();\n        if (pathCommand === 'M') {\n            x = values[0], y = values[1];\n            mx = x;\n            my = y;\n            return ['M', x, y];\n        }\n        var absoluteSegment;\n        if (pathCommand !== absCommand) {\n            switch (absCommand) {\n                case 'A':\n                    absoluteSegment = [\n                        absCommand,\n                        values[0],\n                        values[1],\n                        values[2],\n                        values[3],\n                        values[4],\n                        values[5] + x,\n                        values[6] + y,\n                    ];\n                    break;\n                case 'V':\n                    absoluteSegment = [absCommand, values[0] + y];\n                    break;\n                case 'H':\n                    absoluteSegment = [absCommand, values[0] + x];\n                    break;\n                default: {\n                    // use brakets for `eslint: no-case-declaration`\n                    // https://stackoverflow.com/a/50753272/803358\n                    var absValues = values.map(function (n, j) { return n + (j % 2 ? y : x); });\n                    // for n, l, c, s, q, t\n                    // @ts-ignore\n                    absoluteSegment = [absCommand].concat(absValues);\n                }\n            }\n        }\n        else {\n            // @ts-ignore\n            absoluteSegment = [absCommand].concat(values);\n        }\n        var segLength = absoluteSegment.length;\n        switch (absCommand) {\n            case 'Z':\n                x = mx;\n                y = my;\n                break;\n            case 'H':\n                x = absoluteSegment[1];\n                break;\n            case 'V':\n                y = absoluteSegment[1];\n                break;\n            default:\n                x = absoluteSegment[segLength - 2];\n                y = absoluteSegment[segLength - 1];\n                if (absCommand === 'M') {\n                    mx = x;\n                    my = y;\n                }\n        }\n        return absoluteSegment;\n    });\n}\n//# sourceMappingURL=path-2-absolute.js.map","import { isPathArray } from '../util/is-path-array';\nimport { scanSegment } from './scan-segment';\nimport { skipSpaces } from './skip-spaces';\nimport { PathParser } from './path-parser';\n/**\n * Parses a path string value and returns an array\n * of segments we like to call `pathArray`.\n */\nexport function parsePathString(pathInput) {\n    if (isPathArray(pathInput)) {\n        return [].concat(pathInput);\n    }\n    var path = new PathParser(pathInput);\n    skipSpaces(path);\n    while (path.index < path.max && !path.err.length) {\n        scanSegment(path);\n    }\n    return path.err ? path.err : path.segments;\n}\n//# sourceMappingURL=parse-path-string.js.map","/**\n * Normalizes a single segment of a `PathArray` object.\n * eg. H/V -> L, T -> Q\n */\nexport function normalizeSegment(segment, params) {\n    var pathCommand = segment[0];\n    var px1 = params.x1, py1 = params.y1, px2 = params.x2, py2 = params.y2;\n    var values = segment.slice(1).map(Number);\n    var result = segment;\n    if (!'TQ'.includes(pathCommand)) {\n        // optional but good to be cautious\n        params.qx = null;\n        params.qy = null;\n    }\n    if (pathCommand === 'H') {\n        result = ['L', segment[1], py1];\n    }\n    else if (pathCommand === 'V') {\n        result = ['L', px1, segment[1]];\n    }\n    else if (pathCommand === 'S') {\n        var x1 = px1 * 2 - px2;\n        var y1 = py1 * 2 - py2;\n        params.x1 = x1;\n        params.y1 = y1;\n        result = ['C', x1, y1].concat(values);\n    }\n    else if (pathCommand === 'T') {\n        var qx = px1 * 2 - params.qx;\n        var qy = py1 * 2 - params.qy;\n        params.qx = qx;\n        params.qy = qy;\n        result = ['Q', qx, qy].concat(values);\n    }\n    else if (pathCommand === 'Q') {\n        var nqx = values[0], nqy = values[1];\n        params.qx = nqx;\n        params.qy = nqy;\n    }\n    return result;\n}\n//# sourceMappingURL=normalize-segment.js.map","import { __assign } from \"tslib\";\nimport { isNormalizedArray } from '../util/is-normalized-array';\nimport { paramsParser } from '../parser/params-parser';\nimport { path2Absolute } from '../convert/path-2-absolute';\nimport { normalizeSegment } from './normalize-segment';\n/**\n * @example\n * const path = 'M0 0 H50';\n * const normalizedPath = SVGPathCommander.normalizePath(path);\n * // result => [['M', 0, 0], ['L', 50, 0]]\n */\nexport function normalizePath(pathInput) {\n    if (isNormalizedArray(pathInput)) {\n        return [].concat(pathInput);\n    }\n    var path = path2Absolute(pathInput);\n    var params = __assign({}, paramsParser);\n    for (var i = 0; i < path.length; i += 1) {\n        // Save current path command\n        path[i] = normalizeSegment(path[i], params);\n        var segment = path[i];\n        var seglen = segment.length;\n        params.x1 = +segment[seglen - 2];\n        params.y1 = +segment[seglen - 1];\n        params.x2 = +segment[seglen - 4] || params.x1;\n        params.y2 = +segment[seglen - 3] || params.y1;\n    }\n    return path;\n}\n//# sourceMappingURL=normalize-path.js.map","export function midPoint(a, b, t) {\n    var ax = a[0];\n    var ay = a[1];\n    var bx = b[0];\n    var by = b[1];\n    return [ax + (bx - ax) * t, ay + (by - ay) * t];\n}\n//# sourceMappingURL=mid-point.js.map","import { midPoint } from './mid-point';\nimport { distanceSquareRoot } from './distance-square-root';\n/**\n * Returns a {x,y} point at a given length, the total length and\n * the minimum and maximum {x,y} coordinates of a line (L,V,H,Z) segment.\n */\nexport function segmentLineFactory(x1, y1, x2, y2, distance) {\n    var length = distanceSquareRoot([x1, y1], [x2, y2]);\n    var point = { x: 0, y: 0 };\n    if (typeof distance === 'number') {\n        if (distance <= 0) {\n            point = { x: x1, y: y1 };\n        }\n        else if (distance >= length) {\n            point = { x: x2, y: y2 };\n        }\n        else {\n            var _a = midPoint([x1, y1], [x2, y2], distance / length), x = _a[0], y = _a[1];\n            point = { x: x, y: y };\n        }\n    }\n    return {\n        length: length,\n        point: point,\n        min: {\n            x: Math.min(x1, x2),\n            y: Math.min(y1, y2),\n        },\n        max: {\n            x: Math.max(x1, x2),\n            y: Math.max(y1, y2),\n        },\n    };\n}\n//# sourceMappingURL=segment-line-factory.js.map","import { segmentLineFactory } from './segment-line-factory';\nimport { distanceSquareRoot } from './distance-square-root';\nfunction angleBetween(v0, v1) {\n    var v0x = v0.x, v0y = v0.y;\n    var v1x = v1.x, v1y = v1.y;\n    var p = v0x * v1x + v0y * v1y;\n    var n = Math.sqrt((Math.pow(v0x, 2) + Math.pow(v0y, 2)) * (Math.pow(v1x, 2) + Math.pow(v1y, 2)));\n    var sign = v0x * v1y - v0y * v1x < 0 ? -1 : 1;\n    var angle = sign * Math.acos(p / n);\n    return angle;\n}\n/**\n * Returns a {x,y} point at a given length, the total length and\n * the minimum and maximum {x,y} coordinates of a C (cubic-bezier) segment.\n * @see https://github.com/MadLittleMods/svg-curve-lib/blob/master/src/js/svg-curve-lib.js\n */\nfunction getPointAtArcSegmentLength(x1, y1, RX, RY, angle, LAF, SF, x, y, t) {\n    var abs = Math.abs, sin = Math.sin, cos = Math.cos, sqrt = Math.sqrt, PI = Math.PI;\n    var rx = abs(RX);\n    var ry = abs(RY);\n    var xRot = ((angle % 360) + 360) % 360;\n    var xRotRad = xRot * (PI / 180);\n    if (x1 === x && y1 === y) {\n        return { x: x1, y: y1 };\n    }\n    if (rx === 0 || ry === 0) {\n        return segmentLineFactory(x1, y1, x, y, t).point;\n    }\n    var dx = (x1 - x) / 2;\n    var dy = (y1 - y) / 2;\n    var transformedPoint = {\n        x: cos(xRotRad) * dx + sin(xRotRad) * dy,\n        y: -sin(xRotRad) * dx + cos(xRotRad) * dy,\n    };\n    var radiiCheck = Math.pow(transformedPoint.x, 2) / Math.pow(rx, 2) + Math.pow(transformedPoint.y, 2) / Math.pow(ry, 2);\n    if (radiiCheck > 1) {\n        rx *= sqrt(radiiCheck);\n        ry *= sqrt(radiiCheck);\n    }\n    var cSquareNumerator = Math.pow(rx, 2) * Math.pow(ry, 2) - Math.pow(rx, 2) * Math.pow(transformedPoint.y, 2) - Math.pow(ry, 2) * Math.pow(transformedPoint.x, 2);\n    var cSquareRootDenom = Math.pow(rx, 2) * Math.pow(transformedPoint.y, 2) + Math.pow(ry, 2) * Math.pow(transformedPoint.x, 2);\n    var cRadicand = cSquareNumerator / cSquareRootDenom;\n    cRadicand = cRadicand < 0 ? 0 : cRadicand;\n    var cCoef = (LAF !== SF ? 1 : -1) * sqrt(cRadicand);\n    var transformedCenter = {\n        x: cCoef * ((rx * transformedPoint.y) / ry),\n        y: cCoef * (-(ry * transformedPoint.x) / rx),\n    };\n    var center = {\n        x: cos(xRotRad) * transformedCenter.x - sin(xRotRad) * transformedCenter.y + (x1 + x) / 2,\n        y: sin(xRotRad) * transformedCenter.x + cos(xRotRad) * transformedCenter.y + (y1 + y) / 2,\n    };\n    var startVector = {\n        x: (transformedPoint.x - transformedCenter.x) / rx,\n        y: (transformedPoint.y - transformedCenter.y) / ry,\n    };\n    var startAngle = angleBetween({ x: 1, y: 0 }, startVector);\n    var endVector = {\n        x: (-transformedPoint.x - transformedCenter.x) / rx,\n        y: (-transformedPoint.y - transformedCenter.y) / ry,\n    };\n    var sweepAngle = angleBetween(startVector, endVector);\n    if (!SF && sweepAngle > 0) {\n        sweepAngle -= 2 * PI;\n    }\n    else if (SF && sweepAngle < 0) {\n        sweepAngle += 2 * PI;\n    }\n    sweepAngle %= 2 * PI;\n    var alpha = startAngle + sweepAngle * t;\n    var ellipseComponentX = rx * cos(alpha);\n    var ellipseComponentY = ry * sin(alpha);\n    var point = {\n        x: cos(xRotRad) * ellipseComponentX - sin(xRotRad) * ellipseComponentY + center.x,\n        y: sin(xRotRad) * ellipseComponentX + cos(xRotRad) * ellipseComponentY + center.y,\n    };\n    // to be used later\n    // point.ellipticalArcStartAngle = startAngle;\n    // point.ellipticalArcEndAngle = startAngle + sweepAngle;\n    // point.ellipticalArcAngle = alpha;\n    // point.ellipticalArcCenter = center;\n    // point.resultantRx = rx;\n    // point.resultantRy = ry;\n    return point;\n}\n/**\n * Returns a {x,y} point at a given length, the total length and\n * the shape minimum and maximum {x,y} coordinates of an A (arc-to) segment.\n *\n * For better performance, it can skip calculate bbox or length in some scenario.\n */\nexport function segmentArcFactory(X1, Y1, RX, RY, angle, LAF, SF, X2, Y2, distance, options) {\n    var _a;\n    var _b = options.bbox, bbox = _b === void 0 ? true : _b, _c = options.length, length = _c === void 0 ? true : _c, _d = options.sampleSize, sampleSize = _d === void 0 ? 30 : _d;\n    var distanceIsNumber = typeof distance === 'number';\n    var x = X1;\n    var y = Y1;\n    var LENGTH = 0;\n    var prev = [x, y, LENGTH];\n    var cur = [x, y];\n    var t = 0;\n    var POINT = { x: 0, y: 0 };\n    var POINTS = [{ x: x, y: y }];\n    if (distanceIsNumber && distance <= 0) {\n        POINT = { x: x, y: y };\n    }\n    // bad perf when size > 100\n    for (var j = 0; j <= sampleSize; j += 1) {\n        t = j / sampleSize;\n        (_a = getPointAtArcSegmentLength(X1, Y1, RX, RY, angle, LAF, SF, X2, Y2, t), x = _a.x, y = _a.y);\n        if (bbox) {\n            POINTS.push({ x: x, y: y });\n        }\n        if (length) {\n            LENGTH += distanceSquareRoot(cur, [x, y]);\n        }\n        cur = [x, y];\n        if (distanceIsNumber && LENGTH >= distance && distance > prev[2]) {\n            var dv = (LENGTH - distance) / (LENGTH - prev[2]);\n            POINT = {\n                x: cur[0] * (1 - dv) + prev[0] * dv,\n                y: cur[1] * (1 - dv) + prev[1] * dv,\n            };\n        }\n        prev = [x, y, LENGTH];\n    }\n    if (distanceIsNumber && distance >= LENGTH) {\n        POINT = { x: X2, y: Y2 };\n    }\n    return {\n        length: LENGTH,\n        point: POINT,\n        min: {\n            x: Math.min.apply(null, POINTS.map(function (n) { return n.x; })),\n            y: Math.min.apply(null, POINTS.map(function (n) { return n.y; })),\n        },\n        max: {\n            x: Math.max.apply(null, POINTS.map(function (n) { return n.x; })),\n            y: Math.max.apply(null, POINTS.map(function (n) { return n.y; })),\n        },\n    };\n}\n//# sourceMappingURL=segment-arc-factory.js.map","import { distanceSquareRoot } from './distance-square-root';\n/**\n * Returns a {x,y} point at a given length, the total length and\n * the minimum and maximum {x,y} coordinates of a C (cubic-bezier) segment.\n */\nfunction getPointAtCubicSegmentLength(x1, y1, c1x, c1y, c2x, c2y, x2, y2, t) {\n    var t1 = 1 - t;\n    return {\n        x: Math.pow(t1, 3) * x1 + 3 * Math.pow(t1, 2) * t * c1x + 3 * t1 * Math.pow(t, 2) * c2x + Math.pow(t, 3) * x2,\n        y: Math.pow(t1, 3) * y1 + 3 * Math.pow(t1, 2) * t * c1y + 3 * t1 * Math.pow(t, 2) * c2y + Math.pow(t, 3) * y2,\n    };\n}\n/**\n * Returns the length of a C (cubic-bezier) segment\n * or an {x,y} point at a given length.\n */\nexport function segmentCubicFactory(x1, y1, c1x, c1y, c2x, c2y, x2, y2, distance, options) {\n    var _a;\n    var _b = options.bbox, bbox = _b === void 0 ? true : _b, _c = options.length, length = _c === void 0 ? true : _c, _d = options.sampleSize, sampleSize = _d === void 0 ? 10 : _d;\n    var distanceIsNumber = typeof distance === 'number';\n    var x = x1;\n    var y = y1;\n    var LENGTH = 0;\n    var prev = [x, y, LENGTH];\n    var cur = [x, y];\n    var t = 0;\n    var POINT = { x: 0, y: 0 };\n    var POINTS = [{ x: x, y: y }];\n    if (distanceIsNumber && distance <= 0) {\n        POINT = { x: x, y: y };\n    }\n    // bad perf when size = 300\n    for (var j = 0; j <= sampleSize; j += 1) {\n        t = j / sampleSize;\n        (_a = getPointAtCubicSegmentLength(x1, y1, c1x, c1y, c2x, c2y, x2, y2, t), x = _a.x, y = _a.y);\n        if (bbox) {\n            POINTS.push({ x: x, y: y });\n        }\n        if (length) {\n            LENGTH += distanceSquareRoot(cur, [x, y]);\n        }\n        cur = [x, y];\n        if (distanceIsNumber && LENGTH >= distance && distance > prev[2]) {\n            var dv = (LENGTH - distance) / (LENGTH - prev[2]);\n            POINT = {\n                x: cur[0] * (1 - dv) + prev[0] * dv,\n                y: cur[1] * (1 - dv) + prev[1] * dv,\n            };\n        }\n        prev = [x, y, LENGTH];\n    }\n    if (distanceIsNumber && distance >= LENGTH) {\n        POINT = { x: x2, y: y2 };\n    }\n    return {\n        length: LENGTH,\n        point: POINT,\n        min: {\n            x: Math.min.apply(null, POINTS.map(function (n) { return n.x; })),\n            y: Math.min.apply(null, POINTS.map(function (n) { return n.y; })),\n        },\n        max: {\n            x: Math.max.apply(null, POINTS.map(function (n) { return n.x; })),\n            y: Math.max.apply(null, POINTS.map(function (n) { return n.y; })),\n        },\n    };\n}\n//# sourceMappingURL=segment-cubic-factory.js.map","import { distanceSquareRoot } from './distance-square-root';\n/**\n * Returns the {x,y} coordinates of a point at a\n * given length of a quadratic-bezier segment.\n *\n * @see https://github.com/substack/point-at-length\n */\nfunction getPointAtQuadSegmentLength(x1, y1, cx, cy, x2, y2, t) {\n    var t1 = 1 - t;\n    return {\n        x: Math.pow(t1, 2) * x1 + 2 * t1 * t * cx + Math.pow(t, 2) * x2,\n        y: Math.pow(t1, 2) * y1 + 2 * t1 * t * cy + Math.pow(t, 2) * y2,\n    };\n}\n/**\n * Returns a {x,y} point at a given length, the total length and\n * the minimum and maximum {x,y} coordinates of a Q (quadratic-bezier) segment.\n */\nexport function segmentQuadFactory(x1, y1, qx, qy, x2, y2, distance, options) {\n    var _a;\n    var _b = options.bbox, bbox = _b === void 0 ? true : _b, _c = options.length, length = _c === void 0 ? true : _c, _d = options.sampleSize, sampleSize = _d === void 0 ? 10 : _d;\n    var distanceIsNumber = typeof distance === 'number';\n    var x = x1;\n    var y = y1;\n    var LENGTH = 0;\n    var prev = [x, y, LENGTH];\n    var cur = [x, y];\n    var t = 0;\n    var POINT = { x: 0, y: 0 };\n    var POINTS = [{ x: x, y: y }];\n    if (distanceIsNumber && distance <= 0) {\n        POINT = { x: x, y: y };\n    }\n    for (var j = 0; j <= sampleSize; j += 1) {\n        t = j / sampleSize;\n        (_a = getPointAtQuadSegmentLength(x1, y1, qx, qy, x2, y2, t), x = _a.x, y = _a.y);\n        if (bbox) {\n            POINTS.push({ x: x, y: y });\n        }\n        if (length) {\n            LENGTH += distanceSquareRoot(cur, [x, y]);\n        }\n        cur = [x, y];\n        if (distanceIsNumber && LENGTH >= distance && distance > prev[2]) {\n            var dv = (LENGTH - distance) / (LENGTH - prev[2]);\n            POINT = {\n                x: cur[0] * (1 - dv) + prev[0] * dv,\n                y: cur[1] * (1 - dv) + prev[1] * dv,\n            };\n        }\n        prev = [x, y, LENGTH];\n    }\n    /* istanbul ignore else */\n    if (distanceIsNumber && distance >= LENGTH) {\n        POINT = { x: x2, y: y2 };\n    }\n    return {\n        length: LENGTH,\n        point: POINT,\n        min: {\n            x: Math.min.apply(null, POINTS.map(function (n) { return n.x; })),\n            y: Math.min.apply(null, POINTS.map(function (n) { return n.y; })),\n        },\n        max: {\n            x: Math.max.apply(null, POINTS.map(function (n) { return n.x; })),\n            y: Math.max.apply(null, POINTS.map(function (n) { return n.y; })),\n        },\n    };\n}\n//# sourceMappingURL=segment-quad-factory.js.map","import { normalizePath } from '../process/normalize-path';\nimport { segmentLineFactory } from './segment-line-factory';\nimport { segmentArcFactory } from './segment-arc-factory';\nimport { segmentCubicFactory } from './segment-cubic-factory';\nimport { segmentQuadFactory } from './segment-quad-factory';\n/**\n * Returns a {x,y} point at a given length\n * of a shape, the shape total length and\n * the shape minimum and maximum {x,y} coordinates.\n */\nexport function pathLengthFactory(pathInput, distance, options) {\n    var _a, _b, _c, _d, _e, _f;\n    var path = normalizePath(pathInput);\n    var distanceIsNumber = typeof distance === 'number';\n    var isM;\n    var data = [];\n    var pathCommand;\n    var x = 0;\n    var y = 0;\n    var mx = 0;\n    var my = 0;\n    var seg;\n    var MIN = [];\n    var MAX = [];\n    var length = 0;\n    var min = { x: 0, y: 0 };\n    var max = min;\n    var point = min;\n    var POINT = min;\n    var LENGTH = 0;\n    for (var i = 0, ll = path.length; i < ll; i += 1) {\n        seg = path[i];\n        pathCommand = seg[0];\n        isM = pathCommand === 'M';\n        data = !isM ? [x, y].concat(seg.slice(1)) : data;\n        // this segment is always ZERO\n        /* istanbul ignore else */\n        if (isM) {\n            // remember mx, my for Z\n            mx = seg[1], my = seg[2];\n            min = { x: mx, y: my };\n            max = min;\n            length = 0;\n            if (distanceIsNumber && distance < 0.001) {\n                POINT = min;\n            }\n        }\n        else if (pathCommand === 'L') {\n            (_a = segmentLineFactory(data[0], data[1], data[2], data[3], (distance || 0) - LENGTH), length = _a.length, min = _a.min, max = _a.max, point = _a.point);\n        }\n        else if (pathCommand === 'A') {\n            (_b = segmentArcFactory(data[0], data[1], data[2], data[3], data[4], data[5], data[6], data[7], data[8], (distance || 0) - LENGTH, options || {}), length = _b.length, min = _b.min, max = _b.max, point = _b.point);\n        }\n        else if (pathCommand === 'C') {\n            (_c = segmentCubicFactory(data[0], data[1], data[2], data[3], data[4], data[5], data[6], data[7], (distance || 0) - LENGTH, options || {}), length = _c.length, min = _c.min, max = _c.max, point = _c.point);\n        }\n        else if (pathCommand === 'Q') {\n            (_d = segmentQuadFactory(data[0], data[1], data[2], data[3], data[4], data[5], (distance || 0) - LENGTH, options || {}), length = _d.length, min = _d.min, max = _d.max, point = _d.point);\n        }\n        else if (pathCommand === 'Z') {\n            data = [x, y, mx, my];\n            (_e = segmentLineFactory(data[0], data[1], data[2], data[3], (distance || 0) - LENGTH), length = _e.length, min = _e.min, max = _e.max, point = _e.point);\n        }\n        if (distanceIsNumber && LENGTH < distance && LENGTH + length >= distance) {\n            POINT = point;\n        }\n        MAX.push(max);\n        MIN.push(min);\n        LENGTH += length;\n        _f = pathCommand !== 'Z' ? seg.slice(-2) : [mx, my], x = _f[0], y = _f[1];\n    }\n    // native `getPointAtLength` behavior when the given distance\n    // is higher than total length\n    if (distanceIsNumber && distance >= LENGTH) {\n        POINT = { x: x, y: y };\n    }\n    return {\n        length: LENGTH,\n        point: POINT,\n        min: {\n            x: Math.min.apply(null, MIN.map(function (n) { return n.x; })),\n            y: Math.min.apply(null, MIN.map(function (n) { return n.y; })),\n        },\n        max: {\n            x: Math.max.apply(null, MAX.map(function (n) { return n.x; })),\n            y: Math.max.apply(null, MAX.map(function (n) { return n.y; })),\n        },\n    };\n}\n//# sourceMappingURL=path-length-factory.js.map","import isArray from './is-array';\n/**\n * @param {Array} arr The array to iterate over.\n * @return {*} Returns the minimum value.\n * @example\n *\n * min([1, 2]);\n * // => 1\n *\n * min([]);\n * // => undefined\n *\n * const data = new Array(1250010).fill(1).map((d,idx) => idx);\n *\n * min(data);\n * // => 1250010\n * // Math.min(...data) will encounter \"Maximum call stack size exceeded\" error\n */\nexport default (function (arr) {\n    if (!isArray(arr)) {\n        return undefined;\n    }\n    return arr.reduce(function (prev, curr) {\n        return Math.min(prev, curr);\n    }, arr[0]);\n});\n//# sourceMappingURL=min.js.map","import isArray from './is-array';\n/**\n * @param {Array} arr The array to iterate over.\n * @return {*} Returns the maximum value.\n * @example\n *\n * max([1, 2]);\n * // => 2\n *\n * max([]);\n * // => undefined\n *\n * const data = new Array(1250010).fill(1).map((d,idx) => idx);\n *\n * max(data);\n * // => 1250010\n * // Math.max(...data) will encounter \"Maximum call stack size exceeded\" error\n */\nexport default (function (arr) {\n    if (!isArray(arr)) {\n        return undefined;\n    }\n    return arr.reduce(function (prev, curr) {\n        return Math.max(prev, curr);\n    }, arr[0]);\n});\n//# sourceMappingURL=max.js.map","var mod = function (n, m) {\n    return ((n % m) + m) % m;\n};\nexport default mod;\n//# sourceMappingURL=mod.js.map","export function fixArc(pathArray, allPathCommands, i) {\n    if (pathArray[i].length > 7) {\n        pathArray[i].shift();\n        var pi = pathArray[i];\n        // const ni = i + 1;\n        var ni = i;\n        while (pi.length) {\n            // if created multiple C:s, their original seg is saved\n            allPathCommands[i] = 'A';\n            // @ts-ignore\n            pathArray.splice((ni += 1), 0, ['C'].concat(pi.splice(0, 6)));\n        }\n        pathArray.splice(i, 1);\n    }\n}\n//# sourceMappingURL=fix-arc.js.map","import { __spreadArray } from \"tslib\";\nimport { midPoint } from '../util/mid-point';\nexport var lineToCubic = function (x1, y1, x2, y2) {\n    var t = 0.5;\n    var mid = midPoint([x1, y1], [x2, y2], t);\n    return __spreadArray(__spreadArray([], mid, true), [x2, y2, x2, y2], false);\n};\n//# sourceMappingURL=line-2-cubic.js.map","import { arcToCubic } from './arc-2-cubic';\nimport { quadToCubic } from './quad-2-cubic';\nimport { lineToCubic } from './line-2-cubic';\nexport function segmentToCubic(segment, params) {\n    var pathCommand = segment[0];\n    var values = segment.slice(1).map(Number);\n    var x = values[0], y = values[1];\n    var args;\n    var px1 = params.x1, py1 = params.y1, px = params.x, py = params.y;\n    if (!'TQ'.includes(pathCommand)) {\n        params.qx = null;\n        params.qy = null;\n    }\n    switch (pathCommand) {\n        case 'M':\n            params.x = x;\n            params.y = y;\n            return segment;\n        case 'A':\n            args = [px1, py1].concat(values);\n            // @ts-ignore\n            return ['C'].concat(arcToCubic(args[0], args[1], args[2], args[3], args[4], args[5], args[6], args[7], args[8], args[9]));\n        case 'Q':\n            params.qx = x;\n            params.qy = y;\n            args = [px1, py1].concat(values);\n            // @ts-ignore\n            return ['C'].concat(quadToCubic(args[0], args[1], args[2], args[3], args[4], args[5]));\n        case 'L':\n            // @ts-ignore\n            return ['C'].concat(lineToCubic(px1, py1, x, y));\n        case 'Z':\n            // prevent NaN from divide 0\n            if (px1 === px && py1 === py) {\n                return ['C', px1, py1, px, py, px, py];\n            }\n            // @ts-ignore\n            return ['C'].concat(lineToCubic(px1, py1, px, py));\n        default:\n    }\n    return segment;\n}\n//# sourceMappingURL=segment-2-cubic.js.map","export function quadToCubic(x1, y1, qx, qy, x2, y2) {\n    var r13 = 1 / 3;\n    var r23 = 2 / 3;\n    return [\n        r13 * x1 + r23 * qx,\n        r13 * y1 + r23 * qy,\n        r13 * x2 + r23 * qx,\n        r13 * y2 + r23 * qy,\n        x2,\n        y2, // x,y\n    ];\n}\n//# sourceMappingURL=quad-2-cubic.js.map","import { __assign } from \"tslib\";\nimport { paramsParser } from '../parser/params-parser';\nimport { fixArc } from '../process/fix-arc';\nimport { normalizePath } from '../process/normalize-path';\nimport { isCurveArray } from '../util/is-curve-array';\nimport { segmentToCubic } from '../process/segment-2-cubic';\n// import { fixPath } from '../process/fix-path';\nexport function path2Curve(pathInput, needZCommandIndexes) {\n    if (needZCommandIndexes === void 0) { needZCommandIndexes = false; }\n    if (isCurveArray(pathInput)) {\n        var cloned = [].concat(pathInput);\n        if (needZCommandIndexes) {\n            return [cloned, []];\n        }\n        else {\n            return cloned;\n        }\n    }\n    // fixPath will remove 'Z' command\n    // const path = fixPath(normalizePath(pathInput));\n    var path = normalizePath(pathInput);\n    var params = __assign({}, paramsParser);\n    var allPathCommands = [];\n    var pathCommand = '';\n    var ii = path.length;\n    var segment;\n    var seglen;\n    var zCommandIndexes = [];\n    for (var i = 0; i < ii; i += 1) {\n        if (path[i])\n            pathCommand = path[i][0];\n        allPathCommands[i] = pathCommand;\n        var curveSegment = segmentToCubic(path[i], params);\n        path[i] = curveSegment;\n        fixArc(path, allPathCommands, i);\n        ii = path.length; // solves curveArrays ending in Z\n        // keep Z command account for lineJoin\n        // @see https://github.com/antvis/util/issues/68\n        if (pathCommand === 'Z') {\n            zCommandIndexes.push(i);\n        }\n        segment = path[i];\n        seglen = segment.length;\n        params.x1 = +segment[seglen - 2];\n        params.y1 = +segment[seglen - 1];\n        params.x2 = +segment[seglen - 4] || params.x1;\n        params.y2 = +segment[seglen - 3] || params.y1;\n    }\n    // validate\n    if (needZCommandIndexes) {\n        return [path, zCommandIndexes];\n    }\n    else {\n        return path;\n    }\n}\n//# sourceMappingURL=path-2-curve.js.map","import { isNormalizedArray } from './is-normalized-array';\n/**\n * Iterates an array to check if it's a `PathArray`\n * with all C (cubic bezier) segments.\n *\n * @param {string | PathArray} path the `Array` to be checked\n * @returns {boolean} iteration result\n */\nexport function isCurveArray(path) {\n    return isNormalizedArray(path) && path.every(function (_a) {\n        var pc = _a[0];\n        return 'MC'.includes(pc);\n    });\n}\n//# sourceMappingURL=is-curve-array.js.map","import { midPoint } from './mid-point';\nimport { segmentCubicFactory } from './segment-cubic-factory';\nfunction splitCubic(pts, t) {\n    if (t === void 0) { t = 0.5; }\n    var p0 = pts.slice(0, 2);\n    var p1 = pts.slice(2, 4);\n    var p2 = pts.slice(4, 6);\n    var p3 = pts.slice(6, 8);\n    var p4 = midPoint(p0, p1, t);\n    var p5 = midPoint(p1, p2, t);\n    var p6 = midPoint(p2, p3, t);\n    var p7 = midPoint(p4, p5, t);\n    var p8 = midPoint(p5, p6, t);\n    var p9 = midPoint(p7, p8, t);\n    return [\n        // @ts-ignore\n        ['C'].concat(p4, p7, p9),\n        // @ts-ignore\n        ['C'].concat(p8, p6, p3),\n    ];\n}\nfunction getCurveArray(segments) {\n    return segments.map(function (segment, i, pathArray) {\n        // @ts-ignore\n        var segmentData = i && pathArray[i - 1].slice(-2).concat(segment.slice(1));\n        // @ts-ignore\n        var curveLength = i\n            ? segmentCubicFactory(segmentData[0], segmentData[1], segmentData[2], segmentData[3], segmentData[4], segmentData[5], segmentData[6], segmentData[7], segmentData[8], { bbox: false }).length\n            : 0;\n        var subsegs;\n        if (i) {\n            // must be [segment,segment]\n            subsegs = curveLength ? splitCubic(segmentData) : [segment, segment];\n        }\n        else {\n            subsegs = [segment];\n        }\n        return {\n            s: segment,\n            ss: subsegs,\n            l: curveLength,\n        };\n    });\n}\nexport function equalizeSegments(path1, path2, TL) {\n    var c1 = getCurveArray(path1);\n    var c2 = getCurveArray(path2);\n    var L1 = c1.length;\n    var L2 = c2.length;\n    var l1 = c1.filter(function (x) { return x.l; }).length;\n    var l2 = c2.filter(function (x) { return x.l; }).length;\n    var m1 = c1.filter(function (x) { return x.l; }).reduce(function (a, _a) {\n        var l = _a.l;\n        return a + l;\n    }, 0) / l1 || 0;\n    var m2 = c2.filter(function (x) { return x.l; }).reduce(function (a, _a) {\n        var l = _a.l;\n        return a + l;\n    }, 0) / l2 || 0;\n    var tl = TL || Math.max(L1, L2);\n    var mm = [m1, m2];\n    var dif = [tl - L1, tl - L2];\n    var canSplit = 0;\n    var result = [c1, c2].map(function (x, i) {\n        // @ts-ignore\n        return x.l === tl\n            ? x.map(function (y) { return y.s; })\n            : x\n                .map(function (y, j) {\n                canSplit = j && dif[i] && y.l >= mm[i];\n                dif[i] -= canSplit ? 1 : 0;\n                return canSplit ? y.ss : [y.s];\n            })\n                .flat();\n    });\n    return result[0].length === result[1].length ? result : equalizeSegments(result[0], result[1], tl);\n}\n//# sourceMappingURL=equalize-segments.js.map","import { getPathArea } from './get-path-area';\nexport function getDrawDirection(pathArray) {\n    return getPathArea(pathArray) >= 0;\n}\n//# sourceMappingURL=get-draw-direction.js.map","import { path2Curve } from '../convert/path-2-curve';\n/**\n * Returns the area of a single cubic-bezier segment.\n *\n * http://objectmix.com/graphics/133553-area-closed-bezier-curve.html\n */\nfunction getCubicSegArea(x1, y1, c1x, c1y, c2x, c2y, x2, y2) {\n    // https://stackoverflow.com/a/15845996\n    return ((3 *\n        ((y2 - y1) * (c1x + c2x) -\n            (x2 - x1) * (c1y + c2y) +\n            c1y * (x1 - c2x) -\n            c1x * (y1 - c2y) +\n            y2 * (c2x + x1 / 3) -\n            x2 * (c2y + y1 / 3))) /\n        20);\n}\n/**\n * Returns the area of a shape.\n * @author Jrg Lehni & Jonathan Puckey\n *\n * @see https://github.com/paperjs/paper.js/blob/develop/src/path/Path.js\n */\nexport function getPathArea(path) {\n    var x = 0;\n    var y = 0;\n    var len = 0;\n    return path2Curve(path)\n        .map(function (seg) {\n        var _a;\n        switch (seg[0]) {\n            case 'M':\n                x = seg[1], y = seg[2];\n                return 0;\n            default:\n                // @ts-ignore\n                var _b = seg.slice(1), c1x = _b[0], c1y = _b[1], c2x = _b[2], c2y = _b[3], x2 = _b[4], y2 = _b[5];\n                len = getCubicSegArea(x, y, c1x, c1y, c2x, c2y, x2, y2);\n                _a = seg.slice(-2), x = _a[0], y = _a[1];\n                return len;\n        }\n    })\n        .reduce(function (a, b) { return a + b; }, 0);\n}\n// export function getPathArea(pathArray: AbsoluteArray) {\n//   let x = 0;\n//   let y = 0;\n//   let mx = 0;\n//   let my = 0;\n//   let len = 0;\n//   return pathArray\n//     .map((seg) => {\n//       switch (seg[0]) {\n//         case 'M':\n//         case 'Z':\n//           mx = seg[0] === 'M' ? seg[1] : mx;\n//           my = seg[0] === 'M' ? seg[2] : my;\n//           x = mx;\n//           y = my;\n//           return 0;\n//         default:\n//           // @ts-ignore\n//           len = getCubicSegArea.apply(0, [x, y].concat(seg.slice(1)));\n//           [x, y] = seg.slice(-2) as [number, number];\n//           return len;\n//       }\n//     })\n//     .reduce((a, b) => a + b, 0);\n// }\n//# sourceMappingURL=get-path-area.js.map","import { __assign } from \"tslib\";\nimport { pathLengthFactory } from './path-length-factory';\n/**\n * Returns [x,y] coordinates of a point at a given length of a shape.\n */\nexport function getPointAtLength(pathInput, distance, options) {\n    return pathLengthFactory(pathInput, distance, __assign(__assign({}, options), { bbox: false, length: true })).point;\n}\n//# sourceMappingURL=get-point-at-length.js.map","import getPrototypeOf from \"./getPrototypeOf.js\";\nfunction _superPropBase(t, o) {\n  for (; !{}.hasOwnProperty.call(t, o) && null !== (t = getPrototypeOf(t)););\n  return t;\n}\nexport { _superPropBase as default };","import superPropBase from \"./superPropBase.js\";\nfunction _get() {\n  return _get = \"undefined\" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) {\n    var p = superPropBase(e, t);\n    if (p) {\n      var n = Object.getOwnPropertyDescriptor(p, t);\n      return n.get ? n.get.call(arguments.length < 3 ? e : r) : n.value;\n    }\n  }, _get.apply(null, arguments);\n}\nexport { _get as default };","import get from \"./get.js\";\nimport getPrototypeOf from \"./getPrototypeOf.js\";\nfunction _superPropGet(t, o, e, r) {\n  var p = get(getPrototypeOf(1 & r ? t.prototype : t), o, e);\n  return 2 & r && \"function\" == typeof p ? function (t) {\n    return p.apply(e, t);\n  } : p;\n}\nexport { _superPropGet as default };","/*!\n * @antv/g-lite\n * @description A core module for rendering engine implements DOM API.\n * @version 2.2.14\n * @date 1/2/2025, 2:54:20 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport EventEmitter from 'eventemitter3';\nimport { vec3, vec4, mat4, mat3, quat as quat$1, vec2 } from 'gl-matrix';\nimport '@babel/runtime/helpers/readOnlyError';\nimport { isNumber, distanceSquareRoot, isString, isNil, clamp, getTotalLength, min, max, isNumberEqual, mod, normalizePath, path2Curve, equalizeSegments, getDrawDirection, reverseCurve, clonePath, getRotatedCurve, isUndefined, isArray, isBoolean, isFunction, isObject, getPointAtLength } from '@antv/util';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _superPropGet from '@babel/runtime/helpers/superPropGet';\nimport * as d3 from 'd3-color';\nimport { polylineLength, arcBox, cubicBox, quadBox, linePointAt, lineLength } from '@antv/g-math';\nimport _regeneratorRuntime from '@babel/runtime/helpers/regeneratorRuntime';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _createForOfIteratorHelper from '@babel/runtime/helpers/createForOfIteratorHelper';\nimport _objectWithoutProperties from '@babel/runtime/helpers/objectWithoutProperties';\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nvar rbush = {exports: {}};\n\n(function (module, exports) {\n(function (global, factory) {\nmodule.exports = factory() ;\n}(commonjsGlobal, function () {\nfunction quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) { swap(arr, left, right); }\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) { i++; }\n            while (compare(arr[j], t) > 0) { j--; }\n        }\n\n        if (compare(arr[left], t) === 0) { swap(arr, left, j); }\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) { left = j + 1; }\n        if (k <= j) { right = j - 1; }\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nvar RBush = function RBush(maxEntries) {\n    if ( maxEntries === void 0 ) maxEntries = 9;\n\n    // max entries in a node is 9 by default; min node fill is 40% for best performance\n    this._maxEntries = Math.max(4, maxEntries);\n    this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n    this.clear();\n};\n\nRBush.prototype.all = function all () {\n    return this._all(this.data, []);\n};\n\nRBush.prototype.search = function search (bbox) {\n    var node = this.data;\n    var result = [];\n\n    if (!intersects(bbox, node)) { return result; }\n\n    var toBBox = this.toBBox;\n    var nodesToSearch = [];\n\n    while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var childBBox = node.leaf ? toBBox(child) : child;\n\n            if (intersects(bbox, childBBox)) {\n                if (node.leaf) { result.push(child); }\n                else if (contains(bbox, childBBox)) { this._all(child, result); }\n                else { nodesToSearch.push(child); }\n            }\n        }\n        node = nodesToSearch.pop();\n    }\n\n    return result;\n};\n\nRBush.prototype.collides = function collides (bbox) {\n    var node = this.data;\n\n    if (!intersects(bbox, node)) { return false; }\n\n    var nodesToSearch = [];\n    while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var childBBox = node.leaf ? this.toBBox(child) : child;\n\n            if (intersects(bbox, childBBox)) {\n                if (node.leaf || contains(bbox, childBBox)) { return true; }\n                nodesToSearch.push(child);\n            }\n        }\n        node = nodesToSearch.pop();\n    }\n\n    return false;\n};\n\nRBush.prototype.load = function load (data) {\n    if (!(data && data.length)) { return this; }\n\n    if (data.length < this._minEntries) {\n        for (var i = 0; i < data.length; i++) {\n            this.insert(data[i]);\n        }\n        return this;\n    }\n\n    // recursively build the tree with the given data from scratch using OMT algorithm\n    var node = this._build(data.slice(), 0, data.length - 1, 0);\n\n    if (!this.data.children.length) {\n        // save as is if tree is empty\n        this.data = node;\n\n    } else if (this.data.height === node.height) {\n        // split root if trees have the same height\n        this._splitRoot(this.data, node);\n\n    } else {\n        if (this.data.height < node.height) {\n            // swap trees if inserted one is bigger\n            var tmpNode = this.data;\n            this.data = node;\n            node = tmpNode;\n        }\n\n        // insert the small tree into the large tree at appropriate level\n        this._insert(node, this.data.height - node.height - 1, true);\n    }\n\n    return this;\n};\n\nRBush.prototype.insert = function insert (item) {\n    if (item) { this._insert(item, this.data.height - 1); }\n    return this;\n};\n\nRBush.prototype.clear = function clear () {\n    this.data = createNode([]);\n    return this;\n};\n\nRBush.prototype.remove = function remove (item, equalsFn) {\n    if (!item) { return this; }\n\n    var node = this.data;\n    var bbox = this.toBBox(item);\n    var path = [];\n    var indexes = [];\n    var i, parent, goingUp;\n\n    // depth-first iterative tree traversal\n    while (node || path.length) {\n\n        if (!node) { // go up\n            node = path.pop();\n            parent = path[path.length - 1];\n            i = indexes.pop();\n            goingUp = true;\n        }\n\n        if (node.leaf) { // check current node\n            var index = findItem(item, node.children, equalsFn);\n\n            if (index !== -1) {\n                // item found, remove the item and condense tree upwards\n                node.children.splice(index, 1);\n                path.push(node);\n                this._condense(path);\n                return this;\n            }\n        }\n\n        if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n            path.push(node);\n            indexes.push(i);\n            i = 0;\n            parent = node;\n            node = node.children[0];\n\n        } else if (parent) { // go right\n            i++;\n            node = parent.children[i];\n            goingUp = false;\n\n        } else { node = null; } // nothing found\n    }\n\n    return this;\n};\n\nRBush.prototype.toBBox = function toBBox (item) { return item; };\n\nRBush.prototype.compareMinX = function compareMinX (a, b) { return a.minX - b.minX; };\nRBush.prototype.compareMinY = function compareMinY (a, b) { return a.minY - b.minY; };\n\nRBush.prototype.toJSON = function toJSON () { return this.data; };\n\nRBush.prototype.fromJSON = function fromJSON (data) {\n    this.data = data;\n    return this;\n};\n\nRBush.prototype._all = function _all (node, result) {\n    var nodesToSearch = [];\n    while (node) {\n        if (node.leaf) { result.push.apply(result, node.children); }\n        else { nodesToSearch.push.apply(nodesToSearch, node.children); }\n\n        node = nodesToSearch.pop();\n    }\n    return result;\n};\n\nRBush.prototype._build = function _build (items, left, right, height) {\n\n    var N = right - left + 1;\n    var M = this._maxEntries;\n    var node;\n\n    if (N <= M) {\n        // reached leaf level; return leaf\n        node = createNode(items.slice(left, right + 1));\n        calcBBox(node, this.toBBox);\n        return node;\n    }\n\n    if (!height) {\n        // target height of the bulk-loaded tree\n        height = Math.ceil(Math.log(N) / Math.log(M));\n\n        // target number of root entries to maximize storage utilization\n        M = Math.ceil(N / Math.pow(M, height - 1));\n    }\n\n    node = createNode([]);\n    node.leaf = false;\n    node.height = height;\n\n    // split the items into M mostly square tiles\n\n    var N2 = Math.ceil(N / M);\n    var N1 = N2 * Math.ceil(Math.sqrt(M));\n\n    multiSelect(items, left, right, N1, this.compareMinX);\n\n    for (var i = left; i <= right; i += N1) {\n\n        var right2 = Math.min(i + N1 - 1, right);\n\n        multiSelect(items, i, right2, N2, this.compareMinY);\n\n        for (var j = i; j <= right2; j += N2) {\n\n            var right3 = Math.min(j + N2 - 1, right2);\n\n            // pack each entry recursively\n            node.children.push(this._build(items, j, right3, height - 1));\n        }\n    }\n\n    calcBBox(node, this.toBBox);\n\n    return node;\n};\n\nRBush.prototype._chooseSubtree = function _chooseSubtree (bbox, node, level, path) {\n    while (true) {\n        path.push(node);\n\n        if (node.leaf || path.length - 1 === level) { break; }\n\n        var minArea = Infinity;\n        var minEnlargement = Infinity;\n        var targetNode = (void 0);\n\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var area = bboxArea(child);\n            var enlargement = enlargedArea(bbox, child) - area;\n\n            // choose entry with the least area enlargement\n            if (enlargement < minEnlargement) {\n                minEnlargement = enlargement;\n                minArea = area < minArea ? area : minArea;\n                targetNode = child;\n\n            } else if (enlargement === minEnlargement) {\n                // otherwise choose one with the smallest area\n                if (area < minArea) {\n                    minArea = area;\n                    targetNode = child;\n                }\n            }\n        }\n\n        node = targetNode || node.children[0];\n    }\n\n    return node;\n};\n\nRBush.prototype._insert = function _insert (item, level, isNode) {\n    var bbox = isNode ? item : this.toBBox(item);\n    var insertPath = [];\n\n    // find the best node for accommodating the item, saving all nodes along the path too\n    var node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n    // put the item into the node\n    node.children.push(item);\n    extend(node, bbox);\n\n    // split on node overflow; propagate upwards if necessary\n    while (level >= 0) {\n        if (insertPath[level].children.length > this._maxEntries) {\n            this._split(insertPath, level);\n            level--;\n        } else { break; }\n    }\n\n    // adjust bboxes along the insertion path\n    this._adjustParentBBoxes(bbox, insertPath, level);\n};\n\n// split overflowed node into two\nRBush.prototype._split = function _split (insertPath, level) {\n    var node = insertPath[level];\n    var M = node.children.length;\n    var m = this._minEntries;\n\n    this._chooseSplitAxis(node, m, M);\n\n    var splitIndex = this._chooseSplitIndex(node, m, M);\n\n    var newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n    newNode.height = node.height;\n    newNode.leaf = node.leaf;\n\n    calcBBox(node, this.toBBox);\n    calcBBox(newNode, this.toBBox);\n\n    if (level) { insertPath[level - 1].children.push(newNode); }\n    else { this._splitRoot(node, newNode); }\n};\n\nRBush.prototype._splitRoot = function _splitRoot (node, newNode) {\n    // split root node\n    this.data = createNode([node, newNode]);\n    this.data.height = node.height + 1;\n    this.data.leaf = false;\n    calcBBox(this.data, this.toBBox);\n};\n\nRBush.prototype._chooseSplitIndex = function _chooseSplitIndex (node, m, M) {\n    var index;\n    var minOverlap = Infinity;\n    var minArea = Infinity;\n\n    for (var i = m; i <= M - m; i++) {\n        var bbox1 = distBBox(node, 0, i, this.toBBox);\n        var bbox2 = distBBox(node, i, M, this.toBBox);\n\n        var overlap = intersectionArea(bbox1, bbox2);\n        var area = bboxArea(bbox1) + bboxArea(bbox2);\n\n        // choose distribution with minimum overlap\n        if (overlap < minOverlap) {\n            minOverlap = overlap;\n            index = i;\n\n            minArea = area < minArea ? area : minArea;\n\n        } else if (overlap === minOverlap) {\n            // otherwise choose distribution with minimum area\n            if (area < minArea) {\n                minArea = area;\n                index = i;\n            }\n        }\n    }\n\n    return index || M - m;\n};\n\n// sorts node children by the best axis for split\nRBush.prototype._chooseSplitAxis = function _chooseSplitAxis (node, m, M) {\n    var compareMinX = node.leaf ? this.compareMinX : compareNodeMinX;\n    var compareMinY = node.leaf ? this.compareMinY : compareNodeMinY;\n    var xMargin = this._allDistMargin(node, m, M, compareMinX);\n    var yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n    // if total distributions margin value is minimal for x, sort by minX,\n    // otherwise it's already sorted by minY\n    if (xMargin < yMargin) { node.children.sort(compareMinX); }\n};\n\n// total margin of all possible split distributions where each node is at least m full\nRBush.prototype._allDistMargin = function _allDistMargin (node, m, M, compare) {\n    node.children.sort(compare);\n\n    var toBBox = this.toBBox;\n    var leftBBox = distBBox(node, 0, m, toBBox);\n    var rightBBox = distBBox(node, M - m, M, toBBox);\n    var margin = bboxMargin(leftBBox) + bboxMargin(rightBBox);\n\n    for (var i = m; i < M - m; i++) {\n        var child = node.children[i];\n        extend(leftBBox, node.leaf ? toBBox(child) : child);\n        margin += bboxMargin(leftBBox);\n    }\n\n    for (var i$1 = M - m - 1; i$1 >= m; i$1--) {\n        var child$1 = node.children[i$1];\n        extend(rightBBox, node.leaf ? toBBox(child$1) : child$1);\n        margin += bboxMargin(rightBBox);\n    }\n\n    return margin;\n};\n\nRBush.prototype._adjustParentBBoxes = function _adjustParentBBoxes (bbox, path, level) {\n    // adjust bboxes along the given tree path\n    for (var i = level; i >= 0; i--) {\n        extend(path[i], bbox);\n    }\n};\n\nRBush.prototype._condense = function _condense (path) {\n    // go through the path, removing empty nodes and updating bboxes\n    for (var i = path.length - 1, siblings = (void 0); i >= 0; i--) {\n        if (path[i].children.length === 0) {\n            if (i > 0) {\n                siblings = path[i - 1].children;\n                siblings.splice(siblings.indexOf(path[i]), 1);\n\n            } else { this.clear(); }\n\n        } else { calcBBox(path[i], this.toBBox); }\n    }\n};\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) { return items.indexOf(item); }\n\n    for (var i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) { return i; }\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) { destNode = createNode(null); }\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (var i = k; i < p; i++) {\n        var child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    var minX = Math.max(a.minX, b.minX);\n    var minY = Math.max(a.minY, b.minY);\n    var maxX = Math.min(a.maxX, b.maxX);\n    var maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children: children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    var stack = [left, right];\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) { continue; }\n\n        var mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n\nreturn RBush;\n\n}));\n}(rbush));\n\nvar RBush = rbush.exports;\n\nvar Shape = /*#__PURE__*/function (Shape) {\n  Shape[\"GROUP\"] = \"g\";\n  Shape[\"FRAGMENT\"] = \"fragment\";\n  Shape[\"CIRCLE\"] = \"circle\";\n  Shape[\"ELLIPSE\"] = \"ellipse\";\n  Shape[\"IMAGE\"] = \"image\";\n  Shape[\"RECT\"] = \"rect\";\n  Shape[\"LINE\"] = \"line\";\n  Shape[\"POLYLINE\"] = \"polyline\";\n  Shape[\"POLYGON\"] = \"polygon\";\n  Shape[\"TEXT\"] = \"text\";\n  Shape[\"PATH\"] = \"path\";\n  Shape[\"HTML\"] = \"html\";\n  Shape[\"MESH\"] = \"mesh\";\n  return Shape;\n}({});\n\n// prettier-ignore\n\n// prettier-ignore\n\n// Cursor style\n// See: https://developer.mozilla.org/en-US/docs/Web/CSS/cursor\n\nvar ClipSpaceNearZ = /*#__PURE__*/function (ClipSpaceNearZ) {\n  ClipSpaceNearZ[ClipSpaceNearZ[\"ZERO\"] = 0] = \"ZERO\";\n  ClipSpaceNearZ[ClipSpaceNearZ[\"NEGATIVE_ONE\"] = 1] = \"NEGATIVE_ONE\";\n  return ClipSpaceNearZ;\n}({});\n\n/**\n * eg. NodeCanvas, OffscreenCanvas, HTMLCanvasElement\n */\n\n/**\n * The format to use when defining custom easing functions\n */\n\n// @see https://github.com/zhanba/pailye/blob/master/packages/flex/src/types.ts\n\nvar AbstractRendererPlugin = /*#__PURE__*/function () {\n  function AbstractRendererPlugin() {\n    _classCallCheck(this, AbstractRendererPlugin);\n    this.plugins = [];\n  }\n  return _createClass(AbstractRendererPlugin, [{\n    key: \"addRenderingPlugin\",\n    value: function addRenderingPlugin(plugin) {\n      this.plugins.push(plugin);\n      this.context.renderingPlugins.push(plugin);\n    }\n  }, {\n    key: \"removeAllRenderingPlugins\",\n    value: function removeAllRenderingPlugins() {\n      var _this = this;\n      this.plugins.forEach(function (plugin) {\n        var index = _this.context.renderingPlugins.indexOf(plugin);\n        if (index >= 0) {\n          _this.context.renderingPlugins.splice(index, 1);\n        }\n      });\n    }\n  }]);\n}();\nvar AbstractRenderer = /*#__PURE__*/function () {\n  function AbstractRenderer(config) {\n    _classCallCheck(this, AbstractRenderer);\n    this.clipSpaceNearZ = ClipSpaceNearZ.NEGATIVE_ONE;\n    this.plugins = [];\n    this.config = _objectSpread({\n      /**\n       * only dirty object will cause re-render\n       */\n      enableDirtyCheck: true,\n      enableCulling: false,\n      /**\n       * enable auto rendering by default\n       */\n      enableAutoRendering: true,\n      /**\n       * enable dirty rectangle rendering by default\n       */\n      enableDirtyRectangleRendering: true,\n      enableDirtyRectangleRenderingDebug: false,\n      enableSizeAttenuation: true,\n      enableRenderingOptimization: false\n    }, config);\n  }\n  return _createClass(AbstractRenderer, [{\n    key: \"registerPlugin\",\n    value: function registerPlugin(plugin) {\n      var index = this.plugins.findIndex(function (p) {\n        return p === plugin;\n      });\n      if (index === -1) {\n        this.plugins.push(plugin);\n      }\n    }\n  }, {\n    key: \"unregisterPlugin\",\n    value: function unregisterPlugin(plugin) {\n      var index = this.plugins.findIndex(function (p) {\n        return p === plugin;\n      });\n      if (index > -1) {\n        this.plugins.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"getPlugins\",\n    value: function getPlugins() {\n      return this.plugins;\n    }\n  }, {\n    key: \"getPlugin\",\n    value: function getPlugin(name) {\n      return this.plugins.find(function (plugin) {\n        return plugin.name === name;\n      });\n    }\n  }, {\n    key: \"getConfig\",\n    value: function getConfig() {\n      return this.config;\n    }\n  }, {\n    key: \"setConfig\",\n    value: function setConfig(config) {\n      Object.assign(this.config, config);\n    }\n  }]);\n}();\n\nvar addVec3 = vec3.add,\n  copyVec3 = vec3.copy,\n  maxVec3 = vec3.max,\n  minVec3 = vec3.min,\n  scaleVec3 = vec3.scale,\n  subVec3 = vec3.sub;\n\n/**\n * Axis-Aligned Bounding Box\n *  Frustum Culling p-vertex  n-vertex\n * @see https://github.com/antvis/GWebGPUEngine/issues/3\n */\nvar AABB = /*#__PURE__*/function () {\n  function AABB() {\n    _classCallCheck(this, AABB);\n    this.center = [0, 0, 0];\n    this.halfExtents = [0, 0, 0];\n    this.min = [0, 0, 0];\n    this.max = [0, 0, 0];\n  }\n  return _createClass(AABB, [{\n    key: \"update\",\n    value: function update(center, halfExtents) {\n      copyVec3(this.center, center);\n      copyVec3(this.halfExtents, halfExtents);\n      subVec3(this.min, this.center, this.halfExtents);\n      addVec3(this.max, this.center, this.halfExtents);\n    }\n  }, {\n    key: \"setMinMax\",\n    value: function setMinMax(min, max) {\n      addVec3(this.center, max, min);\n      scaleVec3(this.center, this.center, 0.5);\n      subVec3(this.halfExtents, max, min);\n      scaleVec3(this.halfExtents, this.halfExtents, 0.5);\n      copyVec3(this.min, min);\n      copyVec3(this.max, max);\n    }\n  }, {\n    key: \"getMin\",\n    value: function getMin() {\n      return this.min;\n    }\n  }, {\n    key: \"getMax\",\n    value: function getMax() {\n      return this.max;\n    }\n  }, {\n    key: \"add\",\n    value: function add(aabb) {\n      if (AABB.isEmpty(aabb)) {\n        return;\n      }\n      if (AABB.isEmpty(this)) {\n        this.setMinMax(aabb.getMin(), aabb.getMax());\n        return;\n      }\n      var tc = this.center;\n      var tcx = tc[0];\n      var tcy = tc[1];\n      var tcz = tc[2];\n      var th = this.halfExtents;\n      var thx = th[0];\n      var thy = th[1];\n      var thz = th[2];\n      var tminx = tcx - thx;\n      var tmaxx = tcx + thx;\n      var tminy = tcy - thy;\n      var tmaxy = tcy + thy;\n      var tminz = tcz - thz;\n      var tmaxz = tcz + thz;\n      var oc = aabb.center;\n      var ocx = oc[0];\n      var ocy = oc[1];\n      var ocz = oc[2];\n      var oh = aabb.halfExtents;\n      var ohx = oh[0];\n      var ohy = oh[1];\n      var ohz = oh[2];\n      var ominx = ocx - ohx;\n      var omaxx = ocx + ohx;\n      var ominy = ocy - ohy;\n      var omaxy = ocy + ohy;\n      var ominz = ocz - ohz;\n      var omaxz = ocz + ohz;\n      if (ominx < tminx) {\n        tminx = ominx;\n      }\n      if (omaxx > tmaxx) {\n        tmaxx = omaxx;\n      }\n      if (ominy < tminy) {\n        tminy = ominy;\n      }\n      if (omaxy > tmaxy) {\n        tmaxy = omaxy;\n      }\n      if (ominz < tminz) {\n        tminz = ominz;\n      }\n      if (omaxz > tmaxz) {\n        tmaxz = omaxz;\n      }\n      tc[0] = (tminx + tmaxx) * 0.5;\n      tc[1] = (tminy + tmaxy) * 0.5;\n      tc[2] = (tminz + tmaxz) * 0.5;\n      th[0] = (tmaxx - tminx) * 0.5;\n      th[1] = (tmaxy - tminy) * 0.5;\n      th[2] = (tmaxz - tminz) * 0.5;\n      this.min[0] = tminx;\n      this.min[1] = tminy;\n      this.min[2] = tminz;\n      this.max[0] = tmaxx;\n      this.max[1] = tmaxy;\n      this.max[2] = tmaxz;\n    }\n  }, {\n    key: \"setFromTransformedAABB\",\n    value: function setFromTransformedAABB(aabb, m) {\n      var bc = this.center;\n      var br = this.halfExtents;\n      var ac = aabb.center;\n      var ar = aabb.halfExtents;\n      var mx0 = m[0];\n      var mx1 = m[4];\n      var mx2 = m[8];\n      var my0 = m[1];\n      var my1 = m[5];\n      var my2 = m[9];\n      var mz0 = m[2];\n      var mz1 = m[6];\n      var mz2 = m[10];\n      var mx0a = Math.abs(mx0);\n      var mx1a = Math.abs(mx1);\n      var mx2a = Math.abs(mx2);\n      var my0a = Math.abs(my0);\n      var my1a = Math.abs(my1);\n      var my2a = Math.abs(my2);\n      var mz0a = Math.abs(mz0);\n      var mz1a = Math.abs(mz1);\n      var mz2a = Math.abs(mz2);\n      bc[0] = m[12] + mx0 * ac[0] + mx1 * ac[1] + mx2 * ac[2];\n      bc[1] = m[13] + my0 * ac[0] + my1 * ac[1] + my2 * ac[2];\n      bc[2] = m[14] + mz0 * ac[0] + mz1 * ac[1] + mz2 * ac[2];\n\n      // vec3.set(\n      //   bc,\n      //   m[12] + mx0 * ac[0] + mx1 * ac[1] + mx2 * ac[2],\n      //   m[13] + my0 * ac[0] + my1 * ac[1] + my2 * ac[2],\n      //   m[14] + mz0 * ac[0] + mz1 * ac[1] + mz2 * ac[2],\n      // );\n\n      br[0] = mx0a * ar[0] + mx1a * ar[1] + mx2a * ar[2];\n      br[1] = my0a * ar[0] + my1a * ar[1] + my2a * ar[2];\n      br[2] = mz0a * ar[0] + mz1a * ar[1] + mz2a * ar[2];\n\n      // vec3.set(\n      //   br,\n      //   mx0a * ar[0] + mx1a * ar[1] + mx2a * ar[2],\n      //   my0a * ar[0] + my1a * ar[1] + my2a * ar[2],\n      //   mz0a * ar[0] + mz1a * ar[1] + mz2a * ar[2],\n      // );\n\n      // this.min = vec3.sub(this.min, bc, br);\n      // this.max = vec3.add(this.max, bc, br);\n\n      subVec3(this.min, bc, br);\n      addVec3(this.max, bc, br);\n    }\n  }, {\n    key: \"intersects\",\n    value: function intersects(aabb) {\n      var aMax = this.getMax();\n      var aMin = this.getMin();\n      var bMax = aabb.getMax();\n      var bMin = aabb.getMin();\n      return aMin[0] <= bMax[0] && aMax[0] >= bMin[0] && aMin[1] <= bMax[1] && aMax[1] >= bMin[1] && aMin[2] <= bMax[2] && aMax[2] >= bMin[2];\n    }\n  }, {\n    key: \"intersection\",\n    value: function intersection(aabb) {\n      if (!this.intersects(aabb)) {\n        return null;\n      }\n      var intersection = new AABB();\n      var min = maxVec3([0, 0, 0], this.getMin(), aabb.getMin());\n      var max = minVec3([0, 0, 0], this.getMax(), aabb.getMax());\n      intersection.setMinMax(min, max);\n      return intersection;\n    }\n\n    /**\n     * get n-vertex\n     * @param plane plane of CullingVolume\n     */\n  }, {\n    key: \"getNegativeFarPoint\",\n    value: function getNegativeFarPoint(plane) {\n      if (plane.pnVertexFlag === 0x111) {\n        return copyVec3([0, 0, 0], this.min);\n        // return vec3.copy(vec3.create(), this.min);\n      }\n      if (plane.pnVertexFlag === 0x110) {\n        return [this.min[0], this.min[1], this.max[2]];\n        // return vec3.fromValues(this.min[0], this.min[1], this.max[2]);\n      }\n      if (plane.pnVertexFlag === 0x101) {\n        return [this.min[0], this.max[1], this.min[2]];\n        // return vec3.fromValues(this.min[0], this.max[1], this.min[2]);\n      }\n      if (plane.pnVertexFlag === 0x100) {\n        return [this.min[0], this.max[1], this.max[2]];\n        // return vec3.fromValues(this.min[0], this.max[1], this.max[2]);\n      }\n      if (plane.pnVertexFlag === 0x011) {\n        return [this.max[0], this.min[1], this.min[2]];\n        // return vec3.fromValues(this.max[0], this.min[1], this.min[2]);\n      }\n      if (plane.pnVertexFlag === 0x010) {\n        return [this.max[0], this.min[1], this.max[2]];\n        // return vec3.fromValues(this.max[0], this.min[1], this.max[2]);\n      }\n      if (plane.pnVertexFlag === 0x001) {\n        return [this.max[0], this.max[1], this.min[2]];\n        // return vec3.fromValues(this.max[0], this.max[1], this.min[2]);\n      }\n      return [this.max[0], this.max[1], this.max[2]];\n      // return vec3.fromValues(this.max[0], this.max[1], this.max[2]);\n    }\n\n    /**\n     * get p-vertex\n     * @param plane plane of CullingVolume\n     */\n  }, {\n    key: \"getPositiveFarPoint\",\n    value: function getPositiveFarPoint(plane) {\n      if (plane.pnVertexFlag === 0x111) {\n        return copyVec3([0, 0, 0], this.max);\n        // return vec3.copy(vec3.create(), this.max);\n      }\n      if (plane.pnVertexFlag === 0x110) {\n        return [this.max[0], this.max[1], this.min[2]];\n        // return vec3.fromValues(this.max[0], this.max[1], this.min[2]);\n      }\n      if (plane.pnVertexFlag === 0x101) {\n        return [this.max[0], this.min[1], this.max[2]];\n        // return vec3.fromValues(this.max[0], this.min[1], this.max[2]);\n      }\n      if (plane.pnVertexFlag === 0x100) {\n        return [this.max[0], this.min[1], this.min[2]];\n        // return vec3.fromValues(this.max[0], this.min[1], this.min[2]);\n      }\n      if (plane.pnVertexFlag === 0x011) {\n        return [this.min[0], this.max[1], this.max[2]];\n        // return vec3.fromValues(this.min[0], this.max[1], this.max[2]);\n      }\n      if (plane.pnVertexFlag === 0x010) {\n        return [this.min[0], this.max[1], this.min[2]];\n        // return vec3.fromValues(this.min[0], this.max[1], this.min[2]);\n      }\n      if (plane.pnVertexFlag === 0x001) {\n        return [this.min[0], this.min[1], this.max[2]];\n        // return vec3.fromValues(this.min[0], this.min[1], this.max[2]);\n      }\n      return [this.min[0], this.min[1], this.min[2]];\n      // return vec3.fromValues(this.min[0], this.min[1], this.min[2]);\n    }\n  }], [{\n    key: \"isEmpty\",\n    value: function isEmpty(aabb) {\n      return !aabb || aabb.halfExtents[0] === 0 && aabb.halfExtents[1] === 0 && aabb.halfExtents[2] === 0;\n    }\n  }]);\n}();\n\nvar Plane = /*#__PURE__*/function () {\n  /**\n   * lookup table for p-vertex & n-vertex when doing frustum culling\n   */\n\n  function Plane(distance, normal) {\n    _classCallCheck(this, Plane);\n    this.distance = distance || 0;\n    this.normal = normal || vec3.fromValues(0, 1, 0);\n    this.updatePNVertexFlag();\n  }\n  return _createClass(Plane, [{\n    key: \"updatePNVertexFlag\",\n    value: function updatePNVertexFlag() {\n      this.pnVertexFlag = (Number(this.normal[0] >= 0) << 8) + (Number(this.normal[1] >= 0) << 4) + Number(this.normal[2] >= 0);\n    }\n  }, {\n    key: \"distanceToPoint\",\n    value: function distanceToPoint(point) {\n      return vec3.dot(point, this.normal) - this.distance;\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var invLen = 1 / vec3.len(this.normal);\n      vec3.scale(this.normal, this.normal, invLen);\n      this.distance *= invLen;\n    }\n  }, {\n    key: \"intersectsLine\",\n    value: function intersectsLine(start, end, point) {\n      var d0 = this.distanceToPoint(start);\n      var d1 = this.distanceToPoint(end);\n      var t = d0 / (d0 - d1);\n      var intersects = t >= 0 && t <= 1;\n      if (intersects && point) {\n        vec3.lerp(point, start, end, t);\n      }\n      return intersects;\n    }\n  }]);\n}();\n\nvar Mask = /*#__PURE__*/function (Mask) {\n  Mask[Mask[\"OUTSIDE\"] = 4294967295] = \"OUTSIDE\";\n  Mask[Mask[\"INSIDE\"] = 0] = \"INSIDE\";\n  Mask[Mask[\"INDETERMINATE\"] = 2147483647] = \"INDETERMINATE\";\n  return Mask;\n}({});\nvar Frustum = /*#__PURE__*/function () {\n  function Frustum(planes) {\n    _classCallCheck(this, Frustum);\n    this.planes = [];\n    if (planes) {\n      this.planes = planes;\n    } else {\n      for (var i = 0; i < 6; i++) {\n        this.planes.push(new Plane());\n      }\n    }\n  }\n\n  /**\n   * extract 6 planes from projectionMatrix\n   * @see http://www8.cs.umu.se/kurser/5DV051/HT12/lab/plane_extraction.pdf\n   */\n  return _createClass(Frustum, [{\n    key: \"extractFromVPMatrix\",\n    value: function extractFromVPMatrix(projectionMatrix) {\n      // @ts-ignore\n      var _projectionMatrix = _slicedToArray(projectionMatrix, 16),\n        m0 = _projectionMatrix[0],\n        m1 = _projectionMatrix[1],\n        m2 = _projectionMatrix[2],\n        m3 = _projectionMatrix[3],\n        m4 = _projectionMatrix[4],\n        m5 = _projectionMatrix[5],\n        m6 = _projectionMatrix[6],\n        m7 = _projectionMatrix[7],\n        m8 = _projectionMatrix[8],\n        m9 = _projectionMatrix[9],\n        m10 = _projectionMatrix[10],\n        m11 = _projectionMatrix[11],\n        m12 = _projectionMatrix[12],\n        m13 = _projectionMatrix[13],\n        m14 = _projectionMatrix[14],\n        m15 = _projectionMatrix[15];\n\n      // right\n      vec3.set(this.planes[0].normal, m3 - m0, m7 - m4, m11 - m8);\n      this.planes[0].distance = m15 - m12;\n\n      // left\n      vec3.set(this.planes[1].normal, m3 + m0, m7 + m4, m11 + m8);\n      this.planes[1].distance = m15 + m12;\n\n      // bottom\n      vec3.set(this.planes[2].normal, m3 + m1, m7 + m5, m11 + m9);\n      this.planes[2].distance = m15 + m13;\n\n      // top\n      vec3.set(this.planes[3].normal, m3 - m1, m7 - m5, m11 - m9);\n      this.planes[3].distance = m15 - m13;\n\n      // far\n      vec3.set(this.planes[4].normal, m3 - m2, m7 - m6, m11 - m10);\n      this.planes[4].distance = m15 - m14;\n\n      // near\n      vec3.set(this.planes[5].normal, m3 + m2, m7 + m6, m11 + m10);\n      this.planes[5].distance = m15 + m14;\n      this.planes.forEach(function (plane) {\n        plane.normalize();\n        plane.updatePNVertexFlag();\n      });\n    }\n  }]);\n}();\n\nvar Point = /*#__PURE__*/function () {\n  function Point() {\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    _classCallCheck(this, Point);\n    this.x = 0;\n    this.y = 0;\n    this.x = x;\n    this.y = y;\n  }\n  return _createClass(Point, [{\n    key: \"clone\",\n    value: function clone() {\n      return new Point(this.x, this.y);\n    }\n  }, {\n    key: \"copyFrom\",\n    value: function copyFrom(p) {\n      this.x = p.x;\n      this.y = p.y;\n    }\n  }]);\n}();\n\nvar Rectangle = /*#__PURE__*/function () {\n  function Rectangle(x, y, width, height) {\n    _classCallCheck(this, Rectangle);\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.left = x;\n    this.right = x + width;\n    this.top = y;\n    this.bottom = y + height;\n  }\n  return _createClass(Rectangle, [{\n    key: \"toJSON\",\n    value: function toJSON() {}\n  }], [{\n    key: \"fromRect\",\n    value:\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMRect/fromRect_static\n     */\n    function fromRect(rect) {\n      return new Rectangle(rect.x, rect.y, rect.width, rect.height);\n    }\n\n    /**\n     * will return a new rect instance\n     */\n  }, {\n    key: \"applyTransform\",\n    value: function applyTransform(rect, matrix) {\n      var topLeft = vec4.fromValues(rect.x, rect.y, 0, 1);\n      var topRight = vec4.fromValues(rect.x + rect.width, rect.y, 0, 1);\n      var bottomLeft = vec4.fromValues(rect.x, rect.y + rect.height, 0, 1);\n      var bottomRight = vec4.fromValues(rect.x + rect.width, rect.y + rect.height, 0, 1);\n      var transformedTopLeft = vec4.create();\n      var transformedTopRight = vec4.create();\n      var transformedBottomLeft = vec4.create();\n      var transformedBottomRight = vec4.create();\n      vec4.transformMat4(transformedTopLeft, topLeft, matrix);\n      vec4.transformMat4(transformedTopRight, topRight, matrix);\n      vec4.transformMat4(transformedBottomLeft, bottomLeft, matrix);\n      vec4.transformMat4(transformedBottomRight, bottomRight, matrix);\n      var minX = Math.min(transformedTopLeft[0], transformedTopRight[0], transformedBottomLeft[0], transformedBottomRight[0]);\n      var minY = Math.min(transformedTopLeft[1], transformedTopRight[1], transformedBottomLeft[1], transformedBottomRight[1]);\n      var maxX = Math.max(transformedTopLeft[0], transformedTopRight[0], transformedBottomLeft[0], transformedBottomRight[0]);\n      var maxY = Math.max(transformedTopLeft[1], transformedTopRight[1], transformedBottomLeft[1], transformedBottomRight[1]);\n      return Rectangle.fromRect({\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY\n      });\n    }\n  }]);\n}();\n\nvar ERROR_MSG_METHOD_NOT_IMPLEMENTED = 'Method not implemented.';\nvar ERROR_MSG_USE_DOCUMENT_ELEMENT = 'Use document.documentElement instead.';\nvar ERROR_MSG_APPEND_DESTROYED_ELEMENT = 'Cannot append a destroyed element.';\n\nfunction getAngle(angle) {\n  if (angle === undefined) {\n    return 0;\n  }\n  if (angle > 360 || angle < -360) {\n    return angle % 360;\n  }\n  return angle;\n}\nvar $vec3$2 = vec3.create();\nfunction createVec3(x) {\n  var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var clone = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  if (Array.isArray(x) && x.length === 3) {\n    return clone ? vec3.clone(x) : vec3.copy($vec3$2, x);\n  }\n  if (isNumber(x)) {\n    return clone ? vec3.fromValues(x, y, z) : vec3.set($vec3$2, x, y, z);\n  }\n  return clone ? vec3.fromValues(x[0], x[1] || y, x[2] || z) : vec3.set($vec3$2, x[0], x[1] || y, x[2] || z);\n}\nvar DEG_RAD = Math.PI / 180;\nfunction deg2rad(deg) {\n  return deg * DEG_RAD;\n}\nvar RAD_DEG = 180 / Math.PI;\nfunction rad2deg(rad) {\n  return rad * RAD_DEG;\n}\nvar GRAD_DEG = 0.9; // 360 / 400;\nfunction grad2deg(grads) {\n  grads %= 400;\n  if (grads < 0) {\n    grads += 400;\n  }\n  return grads * GRAD_DEG;\n}\nfunction deg2turn(deg) {\n  return deg / 360;\n}\nfunction turn2deg(turn) {\n  return 360 * turn;\n}\nvar HALF_PI = Math.PI / 2;\nfunction getEulerFromQuat(out, quat) {\n  var x = quat[0];\n  var y = quat[1];\n  var z = quat[2];\n  var w = quat[3];\n  var x2 = x * x;\n  var y2 = y * y;\n  var z2 = z * z;\n  var w2 = w * w;\n  var unit = x2 + y2 + z2 + w2;\n  var test = x * w - y * z;\n  if (test > 0.499995 * unit) {\n    // TODO: Use glmatrix.EPSILON\n    // singularity at the north pole\n    out[0] = HALF_PI;\n    out[1] = 2 * Math.atan2(y, x);\n    out[2] = 0;\n  } else if (test < -0.499995 * unit) {\n    // TODO: Use glmatrix.EPSILON\n    // singularity at the south pole\n    out[0] = -HALF_PI;\n    out[1] = 2 * Math.atan2(y, x);\n    out[2] = 0;\n  } else {\n    out[0] = Math.asin(2 * (x * z - w * y));\n    out[1] = Math.atan2(2 * (x * w + y * z), 1 - 2 * (z2 + w2));\n    out[2] = Math.atan2(2 * (x * y + z * w), 1 - 2 * (y2 + z2));\n  }\n  // TODO: Return them as degrees and not as radians\n  return out;\n}\nfunction getEulerFromMat4(out, m) {\n  var x;\n  var z;\n  var _mat4$getScaling = mat4.getScaling(vec3.create(), m),\n    _mat4$getScaling2 = _slicedToArray(_mat4$getScaling, 3),\n    sx = _mat4$getScaling2[0],\n    sy = _mat4$getScaling2[1],\n    sz = _mat4$getScaling2[2];\n  var y = Math.asin(-m[2] / sx);\n  if (y < HALF_PI) {\n    if (y > -HALF_PI) {\n      x = Math.atan2(m[6] / sy, m[10] / sz);\n      z = Math.atan2(m[1] / sx, m[0] / sx);\n    } else {\n      // Not a unique solution\n      z = 0;\n      x = -Math.atan2(m[4] / sy, m[5] / sy);\n    }\n  } else {\n    // Not a unique solution\n    z = 0;\n    x = Math.atan2(m[4] / sy, m[5] / sy);\n  }\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n\n/**\n * @see https://github.com/toji/gl-matrix/issues/329\n * @see https://doc.babylonjs.com/divingDeeper/mesh/transforms/center_origin/rotation_conventions\n */\nfunction getEuler(out, quat) {\n  if (quat.length === 16) {\n    return getEulerFromMat4(out, quat);\n  }\n  return getEulerFromQuat(out, quat);\n}\nfunction fromRotationTranslationScale(rotation, x, y, scaleX, scaleY) {\n  var cos = Math.cos(rotation);\n  var sin = Math.sin(rotation);\n  return mat3.fromValues(scaleX * cos, scaleY * sin, 0, -scaleX * sin, scaleY * cos, 0, x, y, 1);\n}\nfunction makePerspective(out, left, right, top, bottom, near, far) {\n  var zero = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : false;\n  var twoNear = 2 * near;\n  var rightMinusLeft = right - left;\n  var topMinusBottom = top - bottom;\n  var x = twoNear / rightMinusLeft;\n  var y = twoNear / topMinusBottom;\n  var a = (right + left) / rightMinusLeft;\n  var b = (top + bottom) / topMinusBottom;\n  var c;\n  var d;\n  var farMinusNear = far - near;\n  var farMulNear = far * near;\n  if (zero) {\n    c = -far / farMinusNear;\n    d = -farMulNear / farMinusNear;\n  } else {\n    c = -(far + near) / farMinusNear;\n    d = -2 * farMulNear / farMinusNear;\n  }\n  out[0] = x;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = y;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = a;\n  out[9] = b;\n  out[10] = c;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = d;\n  out[15] = 0;\n  return out;\n}\nfunction decompose(mat) {\n  var row0x = mat[0];\n  var row0y = mat[1];\n  var row1x = mat[3];\n  var row1y = mat[4];\n  // decompose 3x3 matrix\n  // @see https://www.w3.org/TR/css-transforms-1/#decomposing-a-2d-matrix\n  var scalingX = Math.sqrt(row0x * row0x + row0y * row0y);\n  var scalingY = Math.sqrt(row1x * row1x + row1y * row1y);\n\n  // If determinant is negative, one axis was flipped.\n  var determinant = row0x * row1y - row0y * row1x;\n  if (determinant < 0) {\n    // Flip axis with minimum unit vector dot product.\n    if (row0x < row1y) {\n      scalingX = -scalingX;\n    } else {\n      scalingY = -scalingY;\n    }\n  }\n\n  // Renormalize matrix to remove scale.\n  if (scalingX) {\n    var invScalingX = 1 / scalingX;\n    row0x *= invScalingX;\n    row0y *= invScalingX;\n  }\n  if (scalingY) {\n    var invScalingY = 1 / scalingY;\n    row1x *= invScalingY;\n    row1y *= invScalingY;\n  }\n\n  // Compute rotation and renormalize matrix.\n  var rotation = Math.atan2(row0y, row0x);\n  var angle = rad2deg(rotation);\n  return [mat[6], mat[7], scalingX, scalingY, angle];\n}\nvar tmp = mat4.create();\nvar perspectiveMatrix = mat4.create();\nvar tmpVec4 = vec4.create();\nvar row = [vec3.create(), vec3.create(), vec3.create()];\nvar pdum3 = vec3.create();\n\n/*\nInput:  matrix      ; a 4x4 matrix\nOutput: translation ; a 3 component vector\n        scale       ; a 3 component vector\n        skew        ; skew factors XY,XZ,YZ represented as a 3 component vector\n        perspective ; a 4 component vector\n        quaternion  ; a 4 component vector\nReturns false if the matrix cannot be decomposed, true if it can\n\n\nReferences:\nhttps://github.com/kamicane/matrix3d/blob/master/lib/Matrix3d.js\nhttps://github.com/ChromiumWebApps/chromium/blob/master/ui/gfx/transform_util.cc\nhttp://www.w3.org/TR/css3-transforms/#decomposing-a-3d-matrix\n*/\nfunction decomposeMat4(matrix, translation, scale, skew, perspective, quaternion) {\n  // normalize, if not possible then bail out early\n  if (!normalize(tmp, matrix)) return false;\n\n  // perspectiveMatrix is used to solve for perspective, but it also provides\n  // an easy way to test for singularity of the upper 3x3 component.\n  mat4.copy(perspectiveMatrix, tmp);\n  perspectiveMatrix[3] = 0;\n  perspectiveMatrix[7] = 0;\n  perspectiveMatrix[11] = 0;\n  perspectiveMatrix[15] = 1;\n\n  // If the perspectiveMatrix is not invertible, we are also unable to\n  // decompose, so we'll bail early. Constant taken from SkMatrix44::invert.\n  if (Math.abs(mat4.determinant(perspectiveMatrix)) < 1e-8) return false;\n  var a03 = tmp[3];\n  var a13 = tmp[7];\n  var a23 = tmp[11];\n  var a30 = tmp[12];\n  var a31 = tmp[13];\n  var a32 = tmp[14];\n  var a33 = tmp[15];\n\n  // First, isolate perspective.\n  if (a03 !== 0 || a13 !== 0 || a23 !== 0) {\n    tmpVec4[0] = a03;\n    tmpVec4[1] = a13;\n    tmpVec4[2] = a23;\n    tmpVec4[3] = a33;\n\n    // Solve the equation by inverting perspectiveMatrix and multiplying\n    // rightHandSide by the inverse.\n    // resuing the perspectiveMatrix here since it's no longer needed\n    var ret = mat4.invert(perspectiveMatrix, perspectiveMatrix);\n    if (!ret) return false;\n    mat4.transpose(perspectiveMatrix, perspectiveMatrix);\n\n    // multiply by transposed inverse perspective matrix, into perspective vec4\n    vec4.transformMat4(perspective, tmpVec4, perspectiveMatrix);\n  } else {\n    // no perspective\n    perspective[0] = perspective[1] = perspective[2] = 0;\n    perspective[3] = 1;\n  }\n\n  // Next take care of translation\n  translation[0] = a30;\n  translation[1] = a31;\n  translation[2] = a32;\n\n  // Now get scale and shear. 'row' is a 3 element array of 3 component vectors\n  mat3from4(row, tmp);\n\n  // Compute X scale factor and normalize first row.\n  scale[0] = vec3.length(row[0]);\n  vec3.normalize(row[0], row[0]);\n\n  // Compute XY shear factor and make 2nd row orthogonal to 1st.\n  skew[0] = vec3.dot(row[0], row[1]);\n  combine(row[1], row[1], row[0], 1.0, -skew[0]);\n\n  // Now, compute Y scale and normalize 2nd row.\n  scale[1] = vec3.length(row[1]);\n  vec3.normalize(row[1], row[1]);\n  skew[0] /= scale[1];\n\n  // Compute XZ and YZ shears, orthogonalize 3rd row\n  skew[1] = vec3.dot(row[0], row[2]);\n  combine(row[2], row[2], row[0], 1.0, -skew[1]);\n  skew[2] = vec3.dot(row[1], row[2]);\n  combine(row[2], row[2], row[1], 1.0, -skew[2]);\n\n  // Next, get Z scale and normalize 3rd row.\n  scale[2] = vec3.length(row[2]);\n  vec3.normalize(row[2], row[2]);\n  skew[1] /= scale[2];\n  skew[2] /= scale[2];\n\n  // At this point, the matrix (in rows) is orthonormal.\n  // Check for a coordinate system flip.  If the determinant\n  // is -1, then negate the matrix and the scaling factors.\n  vec3.cross(pdum3, row[1], row[2]);\n  if (vec3.dot(row[0], pdum3) < 0) {\n    for (var i = 0; i < 3; i++) {\n      scale[i] *= -1;\n      row[i][0] *= -1;\n      row[i][1] *= -1;\n      row[i][2] *= -1;\n    }\n  }\n\n  // Now, get the rotations out\n  quaternion[0] = 0.5 * Math.sqrt(Math.max(1 + row[0][0] - row[1][1] - row[2][2], 0));\n  quaternion[1] = 0.5 * Math.sqrt(Math.max(1 - row[0][0] + row[1][1] - row[2][2], 0));\n  quaternion[2] = 0.5 * Math.sqrt(Math.max(1 - row[0][0] - row[1][1] + row[2][2], 0));\n  quaternion[3] = 0.5 * Math.sqrt(Math.max(1 + row[0][0] + row[1][1] + row[2][2], 0));\n  if (row[2][1] > row[1][2]) quaternion[0] = -quaternion[0];\n  if (row[0][2] > row[2][0]) quaternion[1] = -quaternion[1];\n  if (row[1][0] > row[0][1]) quaternion[2] = -quaternion[2];\n  return true;\n}\nfunction normalize(out, mat) {\n  var m44 = mat[15];\n  // Cannot normalize.\n  if (m44 === 0) return false;\n  var scale = 1 / m44;\n  for (var i = 0; i < 16; i++) out[i] = mat[i] * scale;\n  return true;\n}\n\n// gets upper-left of a 4x4 matrix into a 3x3 of vectors\nfunction mat3from4(out, mat4x4) {\n  out[0][0] = mat4x4[0];\n  out[0][1] = mat4x4[1];\n  out[0][2] = mat4x4[2];\n  out[1][0] = mat4x4[4];\n  out[1][1] = mat4x4[5];\n  out[1][2] = mat4x4[6];\n  out[2][0] = mat4x4[8];\n  out[2][1] = mat4x4[9];\n  out[2][2] = mat4x4[10];\n}\nfunction combine(out, a, b, scale1, scale2) {\n  out[0] = a[0] * scale1 + b[0] * scale2;\n  out[1] = a[1] * scale1 + b[1] * scale2;\n  out[2] = a[2] * scale1 + b[2] * scale2;\n}\n\n/**\n * Different type of cameras, eg. simple camera used in 2D scene or\n * advanced camera which can do actions & switch between landmarks.\n */\n\nvar CameraType = /*#__PURE__*/function (CameraType) {\n  CameraType[CameraType[\"ORBITING\"] = 0] = \"ORBITING\";\n  CameraType[CameraType[\"EXPLORING\"] = 1] = \"EXPLORING\";\n  CameraType[CameraType[\"TRACKING\"] = 2] = \"TRACKING\";\n  return CameraType;\n}({});\n\n/**\n * CameraType must be TRACKING\n */\nvar CameraTrackingMode = /*#__PURE__*/function (CameraTrackingMode) {\n  CameraTrackingMode[CameraTrackingMode[\"DEFAULT\"] = 0] = \"DEFAULT\";\n  CameraTrackingMode[CameraTrackingMode[\"ROTATIONAL\"] = 1] = \"ROTATIONAL\";\n  CameraTrackingMode[CameraTrackingMode[\"TRANSLATIONAL\"] = 2] = \"TRANSLATIONAL\";\n  CameraTrackingMode[CameraTrackingMode[\"CINEMATIC\"] = 3] = \"CINEMATIC\";\n  return CameraTrackingMode;\n}({});\nvar CameraProjectionMode = /*#__PURE__*/function (CameraProjectionMode) {\n  CameraProjectionMode[CameraProjectionMode[\"ORTHOGRAPHIC\"] = 0] = \"ORTHOGRAPHIC\";\n  CameraProjectionMode[CameraProjectionMode[\"PERSPECTIVE\"] = 1] = \"PERSPECTIVE\";\n  return CameraProjectionMode;\n}({});\nvar CameraEvent = {\n  UPDATED: 'updated'\n};\n\nvar MIN_DISTANCE = 0.0002;\n\n/**\n * WebGL Insights - 23.Designing Cameras for WebGL Applications Responsible Camera \n * @see https://github.com/d13g0/nucleo.js/blob/master/source/camera/Camera.js\n *\n * \n * 1. dolly  n \n * 2. pan  u v \n * 3. rotate \n * 4.  Landmark\n */\n\nvar Camera = /*#__PURE__*/function () {\n  function Camera() {\n    _classCallCheck(this, Camera);\n    /**\n     * Clip space near Z, default to range `[-1, 1]`\n     */\n    this.clipSpaceNearZ = ClipSpaceNearZ.NEGATIVE_ONE;\n    this.eventEmitter = new EventEmitter();\n    /**\n     * Matrix of camera\n     */\n    this.matrix = mat4.create();\n    /**\n     * u axis +X is right\n     * @see http://learnwebgl.brown37.net/07_cameras/camera_introduction.html#a-camera-definition\n     */\n    this.right = vec3.fromValues(1, 0, 0);\n    /**\n     * v axis +Y is up\n     */\n    this.up = vec3.fromValues(0, 1, 0);\n    /**\n     * n axis +Z is inside\n     */\n    this.forward = vec3.fromValues(0, 0, 1);\n    /**\n     * Position of camera.\n     */\n    this.position = vec3.fromValues(0, 0, 1);\n    /**\n     * Position of focal point.\n     */\n    this.focalPoint = vec3.fromValues(0, 0, 0);\n    /**\n     * vector from focalPoint to position\n     */\n    this.distanceVector = vec3.fromValues(0, 0, -1);\n    /**\n     * length(focalPoint - position)\n     */\n    this.distance = 1;\n    /**\n     * @see https://en.wikipedia.org/wiki/Azimuth\n     */\n    this.azimuth = 0;\n    this.elevation = 0;\n    this.roll = 0;\n    this.relAzimuth = 0;\n    this.relElevation = 0;\n    this.relRoll = 0;\n    /**\n     *  n \n     */\n    this.dollyingStep = 0;\n    this.maxDistance = Infinity;\n    this.minDistance = -Infinity;\n    /**\n     * zoom factor of the camera, default is 1\n     * eg. https://threejs.org/docs/#api/en/cameras/OrthographicCamera.zoom\n     */\n    this.zoom = 1;\n    /**\n     * invert the horizontal coordinate system HCS\n     */\n    this.rotateWorld = false;\n    /**\n     * \n     */\n    /**\n     * field of view [0-360]\n     * @see http://en.wikipedia.org/wiki/Angle_of_view\n     */\n    this.fov = 30;\n    this.near = 0.1;\n    this.far = 1000;\n    this.aspect = 1;\n    this.projectionMatrix = mat4.create();\n    this.projectionMatrixInverse = mat4.create();\n    this.jitteredProjectionMatrix = undefined;\n    this.enableUpdate = true;\n    // protected following = undefined;\n    this.type = CameraType.EXPLORING;\n    this.trackingMode = CameraTrackingMode.DEFAULT;\n    this.projectionMode = CameraProjectionMode.PERSPECTIVE;\n    /**\n     * for culling use\n     */\n    this.frustum = new Frustum();\n    /**\n     * ortho matrix for Canvas2D & SVG\n     */\n    this.orthoMatrix = mat4.create();\n  }\n  return _createClass(Camera, [{\n    key: \"isOrtho\",\n    value:\n    // constructor(type = CameraType.EXPLORING, trackingMode = CameraTrackingMode.DEFAULT) {\n    //   this.setType(type, trackingMode);\n    // }\n\n    function isOrtho() {\n      return this.projectionMode === CameraProjectionMode.ORTHOGRAPHIC;\n    }\n  }, {\n    key: \"getProjectionMode\",\n    value: function getProjectionMode() {\n      return this.projectionMode;\n    }\n  }, {\n    key: \"getPerspective\",\n    value: function getPerspective() {\n      // account for TAA\n      return this.jitteredProjectionMatrix || this.projectionMatrix;\n    }\n  }, {\n    key: \"getPerspectiveInverse\",\n    value: function getPerspectiveInverse() {\n      return this.projectionMatrixInverse;\n    }\n  }, {\n    key: \"getFrustum\",\n    value: function getFrustum() {\n      return this.frustum;\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition() {\n      return this.position;\n    }\n  }, {\n    key: \"getFocalPoint\",\n    value: function getFocalPoint() {\n      return this.focalPoint;\n    }\n  }, {\n    key: \"getDollyingStep\",\n    value: function getDollyingStep() {\n      return this.dollyingStep;\n    }\n  }, {\n    key: \"getNear\",\n    value: function getNear() {\n      return this.near;\n    }\n  }, {\n    key: \"getFar\",\n    value: function getFar() {\n      return this.far;\n    }\n  }, {\n    key: \"getZoom\",\n    value: function getZoom() {\n      return this.zoom;\n    }\n  }, {\n    key: \"getOrthoMatrix\",\n    value: function getOrthoMatrix() {\n      return this.orthoMatrix;\n    }\n  }, {\n    key: \"getView\",\n    value: function getView() {\n      return this.view;\n    }\n  }, {\n    key: \"setEnableUpdate\",\n    value: function setEnableUpdate(enabled) {\n      this.enableUpdate = enabled;\n    }\n  }, {\n    key: \"setType\",\n    value: function setType(type, trackingMode) {\n      this.type = type;\n      if (this.type === CameraType.EXPLORING) {\n        this.setWorldRotation(true);\n      } else {\n        this.setWorldRotation(false);\n      }\n      this._getAngles();\n      if (this.type === CameraType.TRACKING && trackingMode !== undefined) {\n        this.setTrackingMode(trackingMode);\n      }\n      return this;\n    }\n  }, {\n    key: \"setProjectionMode\",\n    value: function setProjectionMode(projectionMode) {\n      this.projectionMode = projectionMode;\n      return this;\n    }\n  }, {\n    key: \"setTrackingMode\",\n    value: function setTrackingMode(trackingMode) {\n      if (this.type !== CameraType.TRACKING) {\n        throw new Error('Impossible to set a tracking mode if the camera is not of tracking type');\n      }\n      this.trackingMode = trackingMode;\n      return this;\n    }\n\n    /**\n     * If flag is true, it reverses the azimuth and elevation angles.\n     * Subsequent calls to rotate, setAzimuth, setElevation,\n     * changeAzimuth or changeElevation will cause the inverted effect.\n     * setRoll or changeRoll is not affected by this method.\n     *\n     * This inversion is useful when one wants to simulate that the world\n     * is moving, instead of the camera.\n     *\n     * By default the camera angles are not reversed.\n     * @param {Boolean} flag the boolean flag to reverse the angles.\n     */\n  }, {\n    key: \"setWorldRotation\",\n    value: function setWorldRotation(flag) {\n      this.rotateWorld = flag;\n      this._getAngles();\n      return this;\n    }\n\n    /**\n     *  MV \n     */\n  }, {\n    key: \"getViewTransform\",\n    value: function getViewTransform() {\n      // mat4.scale(this.matrix, this.matrix, vec3.fromValues(1, -1, 1));\n\n      return mat4.invert(mat4.create(), this.matrix);\n    }\n  }, {\n    key: \"getWorldTransform\",\n    value: function getWorldTransform() {\n      return this.matrix;\n    }\n  }, {\n    key: \"jitterProjectionMatrix\",\n    value: function jitterProjectionMatrix(x, y) {\n      var translation = mat4.fromTranslation(mat4.create(), [x, y, 0]);\n      this.jitteredProjectionMatrix = mat4.multiply(mat4.create(), translation, this.projectionMatrix);\n    }\n  }, {\n    key: \"clearJitterProjectionMatrix\",\n    value: function clearJitterProjectionMatrix() {\n      this.jitteredProjectionMatrix = undefined;\n    }\n\n    /**\n     * \n     */\n  }, {\n    key: \"setMatrix\",\n    value: function setMatrix(matrix) {\n      this.matrix = matrix;\n      this._update();\n      return this;\n    }\n\n    /**\n     * Set projection matrix manually.\n     */\n  }, {\n    key: \"setProjectionMatrix\",\n    value: function setProjectionMatrix(matrix) {\n      this.projectionMatrix = matrix;\n    }\n  }, {\n    key: \"setFov\",\n    value: function setFov(fov) {\n      this.setPerspective(this.near, this.far, fov, this.aspect);\n      return this;\n    }\n  }, {\n    key: \"setAspect\",\n    value: function setAspect(aspect) {\n      this.setPerspective(this.near, this.far, this.fov, aspect);\n      return this;\n    }\n  }, {\n    key: \"setNear\",\n    value: function setNear(near) {\n      if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n        this.setPerspective(near, this.far, this.fov, this.aspect);\n      } else {\n        this.setOrthographic(this.left, this.rright, this.top, this.bottom, near, this.far);\n      }\n      return this;\n    }\n  }, {\n    key: \"setFar\",\n    value: function setFar(far) {\n      if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n        this.setPerspective(this.near, far, this.fov, this.aspect);\n      } else {\n        this.setOrthographic(this.left, this.rright, this.top, this.bottom, this.near, far);\n      }\n      return this;\n    }\n\n    /**\n     * Sets an offset in a larger frustum, used in PixelPicking\n     */\n  }, {\n    key: \"setViewOffset\",\n    value: function setViewOffset(fullWidth, fullHeight, x, y, width, height) {\n      this.aspect = fullWidth / fullHeight;\n      if (this.view === undefined) {\n        this.view = {\n          enabled: true,\n          fullWidth: 1,\n          fullHeight: 1,\n          offsetX: 0,\n          offsetY: 0,\n          width: 1,\n          height: 1\n        };\n      }\n      this.view.enabled = true;\n      this.view.fullWidth = fullWidth;\n      this.view.fullHeight = fullHeight;\n      this.view.offsetX = x;\n      this.view.offsetY = y;\n      this.view.width = width;\n      this.view.height = height;\n      if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n        this.setPerspective(this.near, this.far, this.fov, this.aspect);\n      } else {\n        this.setOrthographic(this.left, this.rright, this.top, this.bottom, this.near, this.far);\n      }\n      return this;\n    }\n  }, {\n    key: \"clearViewOffset\",\n    value: function clearViewOffset() {\n      if (this.view !== undefined) {\n        this.view.enabled = false;\n      }\n      if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n        this.setPerspective(this.near, this.far, this.fov, this.aspect);\n      } else {\n        this.setOrthographic(this.left, this.rright, this.top, this.bottom, this.near, this.far);\n      }\n      return this;\n    }\n  }, {\n    key: \"setZoom\",\n    value: function setZoom(zoom) {\n      this.zoom = zoom;\n      if (this.projectionMode === CameraProjectionMode.ORTHOGRAPHIC) {\n        this.setOrthographic(this.left, this.rright, this.top, this.bottom, this.near, this.far);\n      } else if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n        this.setPerspective(this.near, this.far, this.fov, this.aspect);\n      }\n      return this;\n    }\n\n    /**\n     * Zoom by specified point in viewport coordinates.\n     */\n  }, {\n    key: \"setZoomByViewportPoint\",\n    value: function setZoomByViewportPoint(zoom, viewportPoint) {\n      var _this$canvas$viewport = this.canvas.viewport2Canvas({\n          x: viewportPoint[0],\n          y: viewportPoint[1]\n        }),\n        ox = _this$canvas$viewport.x,\n        oy = _this$canvas$viewport.y;\n      var roll = this.roll;\n      this.rotate(0, 0, -roll);\n      this.setPosition(ox, oy);\n      this.setFocalPoint(ox, oy);\n      this.setZoom(zoom);\n      this.rotate(0, 0, roll);\n      var _this$canvas$viewport2 = this.canvas.viewport2Canvas({\n          x: viewportPoint[0],\n          y: viewportPoint[1]\n        }),\n        cx = _this$canvas$viewport2.x,\n        cy = _this$canvas$viewport2.y;\n\n      // project to rotated axis\n      var dvec = vec3.fromValues(cx - ox, cy - oy, 0);\n      var dx = vec3.dot(dvec, this.right) / vec3.length(this.right);\n      var dy = vec3.dot(dvec, this.up) / vec3.length(this.up);\n      var _this$getPosition = this.getPosition(),\n        _this$getPosition2 = _slicedToArray(_this$getPosition, 2),\n        px = _this$getPosition2[0],\n        py = _this$getPosition2[1];\n      var _this$getFocalPoint = this.getFocalPoint(),\n        _this$getFocalPoint2 = _slicedToArray(_this$getFocalPoint, 2),\n        fx = _this$getFocalPoint2[0],\n        fy = _this$getFocalPoint2[1];\n      this.setPosition(px - dx, py - dy);\n      this.setFocalPoint(fx - dx, fy - dy);\n      return this;\n    }\n  }, {\n    key: \"setPerspective\",\n    value: function setPerspective(near, far, fov, aspect) {\n      var _this$view;\n      this.projectionMode = CameraProjectionMode.PERSPECTIVE;\n      this.fov = fov;\n      this.near = near;\n      this.far = far;\n      this.aspect = aspect;\n      var top = this.near * Math.tan(deg2rad(0.5 * this.fov)) / this.zoom;\n      var height = 2 * top;\n      var width = this.aspect * height;\n      var left = -0.5 * width;\n      if ((_this$view = this.view) !== null && _this$view !== void 0 && _this$view.enabled) {\n        var fullWidth = this.view.fullWidth;\n        var fullHeight = this.view.fullHeight;\n        left += this.view.offsetX * width / fullWidth;\n        top -= this.view.offsetY * height / fullHeight;\n        width *= this.view.width / fullWidth;\n        height *= this.view.height / fullHeight;\n      }\n      makePerspective(this.projectionMatrix, left, left + width, top - height, top, near, this.far, this.clipSpaceNearZ === ClipSpaceNearZ.ZERO);\n      mat4.invert(this.projectionMatrixInverse, this.projectionMatrix);\n      this.triggerUpdate();\n      return this;\n    }\n  }, {\n    key: \"setOrthographic\",\n    value: function setOrthographic(l, r, t, b, near, far) {\n      var _this$view2;\n      this.projectionMode = CameraProjectionMode.ORTHOGRAPHIC;\n      this.rright = r;\n      this.left = l;\n      this.top = t;\n      this.bottom = b;\n      this.near = near;\n      this.far = far;\n      var dx = (this.rright - this.left) / (2 * this.zoom);\n      var dy = (this.top - this.bottom) / (2 * this.zoom);\n      var cx = (this.rright + this.left) / 2;\n      var cy = (this.top + this.bottom) / 2;\n      var left = cx - dx;\n      var right = cx + dx;\n      var top = cy + dy;\n      var bottom = cy - dy;\n      if ((_this$view2 = this.view) !== null && _this$view2 !== void 0 && _this$view2.enabled) {\n        var scaleW = (this.rright - this.left) / this.view.fullWidth / this.zoom;\n        var scaleH = (this.top - this.bottom) / this.view.fullHeight / this.zoom;\n        left += scaleW * this.view.offsetX;\n        right = left + scaleW * this.view.width;\n        top -= scaleH * this.view.offsetY;\n        bottom = top - scaleH * this.view.height;\n      }\n      if (this.clipSpaceNearZ === ClipSpaceNearZ.NEGATIVE_ONE) {\n        // FlipY with switching bottom & top.\n        // @see https://stackoverflow.com/a/4886656\n        mat4.ortho(this.projectionMatrix, left, right, top, bottom, near, far);\n      } else {\n        mat4.orthoZO(this.projectionMatrix, left, right, top, bottom, near, far);\n      }\n      mat4.invert(this.projectionMatrixInverse, this.projectionMatrix);\n      this._getOrthoMatrix();\n      this.triggerUpdate();\n      return this;\n    }\n\n    /**\n     * Move the camera in world coordinates.\n     * It will keep looking at the current focal point.\n     *\n     * support scalars or vectors.\n     * @example\n     * setPosition(1, 2, 3);\n     * setPosition([1, 2, 3]);\n     */\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.position[1];\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.position[2];\n      var position = createVec3(x, y, z);\n      this._setPosition(position);\n      this.setFocalPoint(this.focalPoint);\n      this.triggerUpdate();\n      return this;\n    }\n\n    /**\n     * Sets the focal point of this camera in world coordinates.\n     *\n     * support scalars or vectors.\n     * @example\n     * setFocalPoint(1, 2, 3);\n     * setFocalPoint([1, 2, 3]);\n     */\n  }, {\n    key: \"setFocalPoint\",\n    value: function setFocalPoint(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.focalPoint[1];\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.focalPoint[2];\n      var up = vec3.fromValues(0, 1, 0);\n      this.focalPoint = createVec3(x, y, z);\n      if (this.trackingMode === CameraTrackingMode.CINEMATIC) {\n        var d = vec3.subtract(vec3.create(), this.focalPoint, this.position);\n        x = d[0];\n        y = d[1];\n        z = d[2];\n        var r = vec3.length(d);\n        var el = rad2deg(Math.asin(y / r));\n        var az = 90 + rad2deg(Math.atan2(z, x));\n        var m = mat4.create();\n        mat4.rotateY(m, m, deg2rad(az));\n        mat4.rotateX(m, m, deg2rad(el));\n        up = vec3.transformMat4(vec3.create(), [0, 1, 0], m);\n      }\n      mat4.invert(this.matrix, mat4.lookAt(mat4.create(), this.position, this.focalPoint, up));\n      this._getAxes();\n      this._getDistance();\n      this._getAngles();\n      this.triggerUpdate();\n      return this;\n    }\n  }, {\n    key: \"getDistance\",\n    value: function getDistance() {\n      return this.distance;\n    }\n  }, {\n    key: \"getDistanceVector\",\n    value: function getDistanceVector() {\n      return this.distanceVector;\n    }\n\n    /**\n     * Moves the camera towards/from the focal point.\n     */\n  }, {\n    key: \"setDistance\",\n    value: function setDistance(d) {\n      if (this.distance === d || d < 0) {\n        return this;\n      }\n      this.distance = d;\n      if (this.distance < MIN_DISTANCE) {\n        this.distance = MIN_DISTANCE;\n      }\n      this.dollyingStep = this.distance / 100;\n      var pos = vec3.create();\n      d = this.distance;\n      var n = this.forward;\n      var f = this.focalPoint;\n      pos[0] = d * n[0] + f[0];\n      pos[1] = d * n[1] + f[1];\n      pos[2] = d * n[2] + f[2];\n      this._setPosition(pos);\n      this.triggerUpdate();\n      return this;\n    }\n  }, {\n    key: \"setMaxDistance\",\n    value: function setMaxDistance(d) {\n      this.maxDistance = d;\n      return this;\n    }\n  }, {\n    key: \"setMinDistance\",\n    value: function setMinDistance(d) {\n      this.minDistance = d;\n      return this;\n    }\n\n    /**\n     * \n     * the azimuth in degrees\n     */\n  }, {\n    key: \"setAzimuth\",\n    value: function setAzimuth(az) {\n      this.azimuth = getAngle(az);\n      this.computeMatrix();\n      this._getAxes();\n      if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n        this._getPosition();\n      } else if (this.type === CameraType.TRACKING) {\n        this._getFocalPoint();\n      }\n      this.triggerUpdate();\n      return this;\n    }\n  }, {\n    key: \"getAzimuth\",\n    value: function getAzimuth() {\n      return this.azimuth;\n    }\n\n    /**\n     * \n     */\n  }, {\n    key: \"setElevation\",\n    value: function setElevation(el) {\n      this.elevation = getAngle(el);\n      this.computeMatrix();\n      this._getAxes();\n      if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n        this._getPosition();\n      } else if (this.type === CameraType.TRACKING) {\n        this._getFocalPoint();\n      }\n      this.triggerUpdate();\n      return this;\n    }\n  }, {\n    key: \"getElevation\",\n    value: function getElevation() {\n      return this.elevation;\n    }\n\n    /**\n     * \n     */\n  }, {\n    key: \"setRoll\",\n    value: function setRoll(angle) {\n      this.roll = getAngle(angle);\n      this.computeMatrix();\n      this._getAxes();\n      if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n        this._getPosition();\n      } else if (this.type === CameraType.TRACKING) {\n        this._getFocalPoint();\n      }\n      this.triggerUpdate();\n      return this;\n    }\n  }, {\n    key: \"getRoll\",\n    value: function getRoll() {\n      return this.roll;\n    }\n\n    /**\n     * \n     */\n  }, {\n    key: \"_update\",\n    value: function _update() {\n      this._getAxes();\n      this._getPosition();\n      this._getDistance();\n      this._getAngles();\n      this._getOrthoMatrix();\n      this.triggerUpdate();\n    }\n\n    /**\n     * \n     */\n  }, {\n    key: \"computeMatrix\",\n    value: function computeMatrix() {\n      //  3D \n      // @see https://xiaoiver.github.io/coding/2018/12/28/Camera-%E8%AE%BE%E8%AE%A1-%E4%B8%80.html\n      var rotZ = quat$1.setAxisAngle(quat$1.create(), [0, 0, 1], deg2rad(this.roll));\n      mat4.identity(this.matrix);\n\n      // only consider HCS for EXPLORING and ORBITING cameras\n      var rotX = quat$1.setAxisAngle(quat$1.create(), [1, 0, 0], deg2rad((this.rotateWorld && this.type !== CameraType.TRACKING || this.type === CameraType.TRACKING ? 1 : -1) * this.elevation));\n      var rotY = quat$1.setAxisAngle(quat$1.create(), [0, 1, 0], deg2rad((this.rotateWorld && this.type !== CameraType.TRACKING || this.type === CameraType.TRACKING ? 1 : -1) * this.azimuth));\n      var rotQ = quat$1.multiply(quat$1.create(), rotY, rotX);\n      rotQ = quat$1.multiply(quat$1.create(), rotQ, rotZ);\n      var rotMatrix = mat4.fromQuat(mat4.create(), rotQ);\n      if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n        mat4.translate(this.matrix, this.matrix, this.focalPoint);\n        mat4.multiply(this.matrix, this.matrix, rotMatrix);\n        mat4.translate(this.matrix, this.matrix, [0, 0, this.distance]);\n      } else if (this.type === CameraType.TRACKING) {\n        mat4.translate(this.matrix, this.matrix, this.position);\n        mat4.multiply(this.matrix, this.matrix, rotMatrix);\n      }\n    }\n\n    /**\n     * Sets the camera position in the camera matrix\n     */\n  }, {\n    key: \"_setPosition\",\n    value: function _setPosition(x, y, z) {\n      this.position = createVec3(x, y, z);\n      var m = this.matrix;\n      m[12] = this.position[0];\n      m[13] = this.position[1];\n      m[14] = this.position[2];\n      m[15] = 1;\n      this._getOrthoMatrix();\n    }\n\n    /**\n     * Recalculates axes based on the current matrix\n     */\n  }, {\n    key: \"_getAxes\",\n    value: function _getAxes() {\n      vec3.copy(this.right, createVec3(vec4.transformMat4(vec4.create(), [1, 0, 0, 0], this.matrix)));\n      vec3.copy(this.up, createVec3(vec4.transformMat4(vec4.create(), [0, 1, 0, 0], this.matrix)));\n      vec3.copy(this.forward, createVec3(vec4.transformMat4(vec4.create(), [0, 0, 1, 0], this.matrix)));\n      vec3.normalize(this.right, this.right);\n      vec3.normalize(this.up, this.up);\n      vec3.normalize(this.forward, this.forward);\n    }\n\n    /**\n     * Recalculates euler angles based on the current state\n     */\n  }, {\n    key: \"_getAngles\",\n    value: function _getAngles() {\n      // Recalculates angles\n      var x = this.distanceVector[0];\n      var y = this.distanceVector[1];\n      var z = this.distanceVector[2];\n      var r = vec3.length(this.distanceVector);\n\n      // FAST FAIL: If there is no distance we cannot compute angles\n      if (r === 0) {\n        this.elevation = 0;\n        this.azimuth = 0;\n        return;\n      }\n      if (this.type === CameraType.TRACKING) {\n        this.elevation = rad2deg(Math.asin(y / r));\n        this.azimuth = rad2deg(Math.atan2(-x, -z));\n      } else if (this.rotateWorld) {\n        this.elevation = rad2deg(Math.asin(y / r));\n        this.azimuth = rad2deg(Math.atan2(-x, -z));\n      } else {\n        this.elevation = -rad2deg(Math.asin(y / r));\n        this.azimuth = -rad2deg(Math.atan2(-x, -z));\n      }\n    }\n\n    /**\n     *  ORBITING \n     */\n  }, {\n    key: \"_getPosition\",\n    value: function _getPosition() {\n      vec3.copy(this.position, createVec3(vec4.transformMat4(vec4.create(), [0, 0, 0, 1], this.matrix)));\n\n      // \n      this._getDistance();\n    }\n\n    /**\n     *  TRACKING \n     */\n  }, {\n    key: \"_getFocalPoint\",\n    value: function _getFocalPoint() {\n      vec3.transformMat3(this.distanceVector, [0, 0, -this.distance], mat3.fromMat4(mat3.create(), this.matrix));\n      vec3.add(this.focalPoint, this.position, this.distanceVector);\n\n      // \n      this._getDistance();\n    }\n\n    /**\n     * \n     */\n  }, {\n    key: \"_getDistance\",\n    value: function _getDistance() {\n      this.distanceVector = vec3.subtract(vec3.create(), this.focalPoint, this.position);\n      this.distance = vec3.length(this.distanceVector);\n      this.dollyingStep = this.distance / 100;\n    }\n  }, {\n    key: \"_getOrthoMatrix\",\n    value: function _getOrthoMatrix() {\n      if (this.projectionMode !== CameraProjectionMode.ORTHOGRAPHIC) {\n        return;\n      }\n      var position = this.position;\n      var rotZ = quat$1.setAxisAngle(quat$1.create(), [0, 0, 1], -this.roll * Math.PI / 180);\n      mat4.fromRotationTranslationScaleOrigin(this.orthoMatrix, rotZ, vec3.fromValues((this.rright - this.left) / 2 - position[0], (this.top - this.bottom) / 2 - position[1], 0), vec3.fromValues(this.zoom, this.zoom, 1), position);\n    }\n  }, {\n    key: \"triggerUpdate\",\n    value: function triggerUpdate() {\n      if (this.enableUpdate) {\n        // update frustum\n        var viewMatrix = this.getViewTransform();\n        var vpMatrix = mat4.multiply(mat4.create(), this.getPerspective(), viewMatrix);\n        this.getFrustum().extractFromVPMatrix(vpMatrix);\n        this.eventEmitter.emit(CameraEvent.UPDATED);\n      }\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(azimuth, elevation, roll) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"pan\",\n    value: function pan(tx, ty) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"dolly\",\n    value: function dolly(value) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"createLandmark\",\n    value: function createLandmark(name, params) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"gotoLandmark\",\n    value: function gotoLandmark(name, options) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"cancelLandmarkAnimation\",\n    value: function cancelLandmarkAnimation() {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }]);\n}();\n\n/**\n * @see https://doc.babylonjs.com/how_to/optimizing_your_scene#changing-mesh-culling-strategy\n */\nvar Strategy = /*#__PURE__*/function (Strategy) {\n  Strategy[Strategy[\"Standard\"] = 0] = \"Standard\";\n  return Strategy;\n}({});\n\nvar SortReason = /*#__PURE__*/function (SortReason) {\n  SortReason[SortReason[\"ADDED\"] = 0] = \"ADDED\";\n  SortReason[SortReason[\"REMOVED\"] = 1] = \"REMOVED\";\n  SortReason[SortReason[\"Z_INDEX_CHANGED\"] = 2] = \"Z_INDEX_CHANGED\";\n  return SortReason;\n}({});\n\nvar EMPTY_PARSED_PATH = {\n  absolutePath: [],\n  hasArc: false,\n  segments: [],\n  polygons: [],\n  polylines: [],\n  curve: null,\n  totalLength: 0,\n  rect: new Rectangle(0, 0, 0, 0)\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type\n */\nvar PropertySyntax = /*#__PURE__*/function (PropertySyntax) {\n  PropertySyntax[\"COORDINATE\"] = \"<coordinate>\";\n  PropertySyntax[\"COLOR\"] = \"<color>\";\n  PropertySyntax[\"PAINT\"] = \"<paint>\";\n  PropertySyntax[\"NUMBER\"] = \"<number>\";\n  PropertySyntax[\"ANGLE\"] = \"<angle>\";\n  PropertySyntax[\"OPACITY_VALUE\"] = \"<opacity-value>\";\n  PropertySyntax[\"SHADOW_BLUR\"] = \"<shadow-blur>\";\n  PropertySyntax[\"LENGTH\"] = \"<length>\";\n  PropertySyntax[\"PERCENTAGE\"] = \"<percentage>\";\n  PropertySyntax[\"LENGTH_PERCENTAGE\"] = \"<length> | <percentage>\";\n  PropertySyntax[\"LENGTH_PERCENTAGE_12\"] = \"[<length> | <percentage>]{1,2}\";\n  PropertySyntax[\"LENGTH_PERCENTAGE_14\"] = \"[<length> | <percentage>]{1,4}\";\n  PropertySyntax[\"LIST_OF_POINTS\"] = \"<list-of-points>\";\n  PropertySyntax[\"PATH\"] = \"<path>\";\n  PropertySyntax[\"FILTER\"] = \"<filter>\";\n  PropertySyntax[\"Z_INDEX\"] = \"<z-index>\";\n  PropertySyntax[\"OFFSET_DISTANCE\"] = \"<offset-distance>\";\n  PropertySyntax[\"DEFINED_PATH\"] = \"<defined-path>\";\n  PropertySyntax[\"MARKER\"] = \"<marker>\";\n  PropertySyntax[\"TRANSFORM\"] = \"<transform>\";\n  PropertySyntax[\"TRANSFORM_ORIGIN\"] = \"<transform-origin>\";\n  PropertySyntax[\"TEXT\"] = \"<text>\";\n  PropertySyntax[\"TEXT_TRANSFORM\"] = \"<text-transform>\";\n  return PropertySyntax;\n}({});\n\nfunction memoize(func, resolver) {\n  if (typeof func !== 'function' || resolver != null && typeof resolver !== 'function') {\n    throw new TypeError('Expected a function');\n  }\n  var _memoized = function memoized() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    var key = resolver ? resolver.apply(this, args) : args[0];\n    var cache = _memoized.cache;\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    _memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  _memoized.cache = new (memoize.Cache || Map)();\n  return _memoized;\n}\nmemoize.Cache = Map;\n\n// These units are iterated through, so be careful when adding or changing the\n// order.\nvar UnitType = /*#__PURE__*/function (UnitType) {\n  UnitType[UnitType[\"kUnknown\"] = 0] = \"kUnknown\";\n  UnitType[UnitType[\"kNumber\"] = 1] = \"kNumber\";\n  UnitType[UnitType[\"kPercentage\"] = 2] = \"kPercentage\";\n  UnitType[UnitType[\"kEms\"] = 3] = \"kEms\";\n  UnitType[UnitType[\"kPixels\"] = 4] = \"kPixels\";\n  UnitType[UnitType[\"kRems\"] = 5] = \"kRems\";\n  UnitType[UnitType[\"kDegrees\"] = 6] = \"kDegrees\";\n  UnitType[UnitType[\"kRadians\"] = 7] = \"kRadians\";\n  UnitType[UnitType[\"kGradians\"] = 8] = \"kGradians\";\n  UnitType[UnitType[\"kTurns\"] = 9] = \"kTurns\";\n  UnitType[UnitType[\"kMilliseconds\"] = 10] = \"kMilliseconds\";\n  UnitType[UnitType[\"kSeconds\"] = 11] = \"kSeconds\";\n  UnitType[UnitType[\"kInteger\"] = 12] = \"kInteger\";\n  return UnitType;\n}({}); // This value is used to handle quirky margins in reflow roots (body, td,\n// and th) like WinIE. The basic idea is that a stylesheet can use the value\n// __qem (for quirky em) instead of em. When the quirky value is used, if\n// you're in quirks mode, the margin will collapse away inside a table cell.\n// This quirk is specified in the HTML spec but our impl is different.\n// TODO: Remove this. crbug.com/443952\n// kQuirkyEms,\nvar UnitCategory = /*#__PURE__*/function (UnitCategory) {\n  UnitCategory[UnitCategory[\"kUNumber\"] = 0] = \"kUNumber\";\n  UnitCategory[UnitCategory[\"kUPercent\"] = 1] = \"kUPercent\";\n  UnitCategory[UnitCategory[\"kULength\"] = 2] = \"kULength\";\n  UnitCategory[UnitCategory[\"kUAngle\"] = 3] = \"kUAngle\";\n  UnitCategory[UnitCategory[\"kUTime\"] = 4] = \"kUTime\";\n  UnitCategory[UnitCategory[\"kUOther\"] = 5] = \"kUOther\";\n  return UnitCategory;\n}({});\nvar Nested = /*#__PURE__*/function (Nested) {\n  Nested[Nested[\"kYes\"] = 0] = \"kYes\";\n  Nested[Nested[\"kNo\"] = 1] = \"kNo\";\n  return Nested;\n}({});\nvar ParenLess = /*#__PURE__*/function (ParenLess) {\n  ParenLess[ParenLess[\"kYes\"] = 0] = \"kYes\";\n  ParenLess[ParenLess[\"kNo\"] = 1] = \"kNo\";\n  return ParenLess;\n}({});\n\n// This file specifies the unit strings used in CSSPrimitiveValues.\nvar data = [{\n  name: 'em',\n  unit_type: UnitType.kEms\n},\n// {\n//   name: 'ex',\n//   unit_type: UnitType.kExs,\n// },\n{\n  name: 'px',\n  unit_type: UnitType.kPixels\n},\n// {\n//   name: \"cm\",\n//   unit_type: UnitType.kCentimeters,\n// },\n// {\n//   name: \"mm\",\n//   unit_type: UnitType.kMillimeters,\n// },\n// {\n//   name: \"q\",\n//   unit_type: UnitType.kQuarterMillimeters,\n// },\n// {\n//   name: \"in\",\n//   unit_type: UnitType.kInches,\n// },\n// {\n//   name: \"pt\",\n//   unit_type: UnitType.kPoints,\n// },\n// {\n//   name: \"pc\",\n//   unit_type: UnitType.kPicas,\n// },\n{\n  name: 'deg',\n  unit_type: UnitType.kDegrees\n}, {\n  name: 'rad',\n  unit_type: UnitType.kRadians\n}, {\n  name: 'grad',\n  unit_type: UnitType.kGradians\n}, {\n  name: 'ms',\n  unit_type: UnitType.kMilliseconds\n}, {\n  name: 's',\n  unit_type: UnitType.kSeconds\n},\n// {\n//   name: \"hz\",\n//   unit_type: UnitType.kHertz,\n// },\n// {\n//   name: \"khz\",\n//   unit_type: UnitType.kKilohertz,\n// },\n// {\n//   name: \"dpi\",\n//   unit_type: \"kDotsPerInch\",\n// },\n// {\n//   name: \"dpcm\",\n//   unit_type: \"kDotsPerCentimeter\",\n// },\n// {\n//   name: \"dppx\",\n//   unit_type: \"kDotsPerPixel\",\n// },\n// {\n//   name: \"x\",\n//   unit_type: \"kDotsPerPixel\",\n// },\n// {\n//   name: \"vw\",\n//   unit_type: \"kViewportWidth\",\n// },\n// {\n//   name: \"vh\",\n//   unit_type: \"kViewportHeight\",\n// },\n// {\n//   name: \"vi\",\n//   unit_type: \"kViewportInlineSize\",\n// },\n// {\n//   name: \"vb\",\n//   unit_type: \"kViewportBlockSize\",\n// },\n// {\n//   name: \"vmin\",\n//   unit_type: UnitType.kViewportMin,\n// },\n// {\n//   name: \"vmax\",\n//   unit_type: UnitType.kViewportMax,\n// },\n// {\n//   name: \"svw\",\n//   unit_type: \"kSmallViewportWidth\",\n// },\n// {\n//   name: \"svh\",\n//   unit_type: \"kSmallViewportHeight\",\n// },\n// {\n//   name: \"svi\",\n//   unit_type: \"kSmallViewportInlineSize\",\n// },\n// {\n//   name: \"svb\",\n//   unit_type: \"kSmallViewportBlockSize\",\n// },\n// {\n//   name: \"svmin\",\n//   unit_type: \"kSmallViewportMin\",\n// },\n// {\n//   name: \"svmax\",\n//   unit_type: \"kSmallViewportMax\",\n// },\n// {\n//   name: \"lvw\",\n//   unit_type: \"kLargeViewportWidth\",\n// },\n// {\n//   name: \"lvh\",\n//   unit_type: \"kLargeViewportHeight\",\n// },\n// {\n//   name: \"lvi\",\n//   unit_type: \"kLargeViewportInlineSize\",\n// },\n// {\n//   name: \"lvb\",\n//   unit_type: \"kLargeViewportBlockSize\",\n// },\n// {\n//   name: \"lvmin\",\n//   unit_type: UnitType.kLargeViewportMin,\n// },\n// {\n//   name: \"lvmax\",\n//   unit_type: UnitType.kLargeViewportMax,\n// },\n// {\n//   name: \"dvw\",\n//   unit_type: UnitType.kDynamicViewportWidth,\n// },\n// {\n//   name: \"dvh\",\n//   unit_type: UnitType.kDynamicViewportHeight,\n// },\n// {\n//   name: \"dvi\",\n//   unit_type: UnitType.kDynamicViewportInlineSize,\n// },\n// {\n//   name: \"dvb\",\n//   unit_type: UnitType.kDynamicViewportBlockSize,\n// },\n// {\n//   name: \"dvmin\",\n//   unit_type: UnitType.kDynamicViewportMin,\n// },\n// {\n//   name: \"dvmax\",\n//   unit_type: UnitType.kDynamicViewportMax,\n// },\n// {\n//   name: \"cqw\",\n//   unit_type: UnitType.kContainerWidth,\n// },\n// {\n//   name: \"cqh\",\n//   unit_type: UnitType.kContainerHeight,\n// },\n// {\n//   name: \"cqi\",\n//   unit_type: UnitType.kContainerInlineSize,\n// },\n// {\n//   name: \"cqb\",\n//   unit_type: UnitType.kContainerBlockSize,\n// },\n// {\n//   name: \"cqmin\",\n//   unit_type: UnitType.kContainerMin,\n// },\n// {\n//   name: \"cqmax\",\n//   unit_type: UnitType.kContainerMax,\n// },\n{\n  name: 'rem',\n  unit_type: UnitType.kRems\n},\n// {\n//   name: 'fr',\n//   unit_type: UnitType.kFraction,\n// },\n{\n  name: 'turn',\n  unit_type: UnitType.kTurns\n}\n// {\n//   name: 'ch',\n//   unit_type: UnitType.kChs,\n// },\n// {\n//   name: '__qem',\n//   unit_type: UnitType.kQuirkyEms,\n// },\n];\nvar CSSStyleValueType = /*#__PURE__*/function (CSSStyleValueType) {\n  CSSStyleValueType[CSSStyleValueType[\"kUnknownType\"] = 0] = \"kUnknownType\";\n  CSSStyleValueType[CSSStyleValueType[\"kUnparsedType\"] = 1] = \"kUnparsedType\";\n  CSSStyleValueType[CSSStyleValueType[\"kKeywordType\"] = 2] = \"kKeywordType\";\n  CSSStyleValueType[CSSStyleValueType[\"kUnitType\"] = 3] = \"kUnitType\";\n  CSSStyleValueType[CSSStyleValueType[\"kSumType\"] = 4] = \"kSumType\";\n  CSSStyleValueType[CSSStyleValueType[\"kProductType\"] = 5] = \"kProductType\";\n  CSSStyleValueType[CSSStyleValueType[\"kNegateType\"] = 6] = \"kNegateType\";\n  CSSStyleValueType[CSSStyleValueType[\"kInvertType\"] = 7] = \"kInvertType\";\n  CSSStyleValueType[CSSStyleValueType[\"kMinType\"] = 8] = \"kMinType\";\n  CSSStyleValueType[CSSStyleValueType[\"kMaxType\"] = 9] = \"kMaxType\";\n  CSSStyleValueType[CSSStyleValueType[\"kClampType\"] = 10] = \"kClampType\";\n  CSSStyleValueType[CSSStyleValueType[\"kTransformType\"] = 11] = \"kTransformType\";\n  CSSStyleValueType[CSSStyleValueType[\"kPositionType\"] = 12] = \"kPositionType\";\n  CSSStyleValueType[CSSStyleValueType[\"kURLImageType\"] = 13] = \"kURLImageType\";\n  CSSStyleValueType[CSSStyleValueType[\"kColorType\"] = 14] = \"kColorType\";\n  CSSStyleValueType[CSSStyleValueType[\"kUnsupportedColorType\"] = 15] = \"kUnsupportedColorType\";\n  return CSSStyleValueType;\n}({});\n\n// function parseCSSStyleValue(propertyName: string, value: string): CSSStyleValue[] {\n//   // const propertyId = cssPropertyID(propertyName);\n\n//   // if (propertyId === CSSPropertyID.kInvalid) {\n//   //   return [];\n//   // }\n\n//   // const customPropertyName = propertyId === CSSPropertyID.kVariable ? propertyName : null;\n//   // return fromString(propertyId, customPropertyName, value);\n//   return [];\n// }\n\nvar stringToUnitType = function stringToUnitType(name) {\n  return data.find(function (item) {\n    return item.name === name;\n  }).unit_type;\n};\nvar unitFromName = function unitFromName(name) {\n  if (!name) {\n    return UnitType.kUnknown;\n  }\n  if (name === 'number') {\n    return UnitType.kNumber;\n  }\n  if (name === 'percent' || name === '%') {\n    return UnitType.kPercentage;\n  }\n  return stringToUnitType(name);\n};\nvar unitTypeToUnitCategory = function unitTypeToUnitCategory(type) {\n  switch (type) {\n    case UnitType.kNumber:\n    case UnitType.kInteger:\n      return UnitCategory.kUNumber;\n    case UnitType.kPercentage:\n      return UnitCategory.kUPercent;\n    case UnitType.kPixels:\n      // case UnitType.kCentimeters:\n      // case UnitType.kMillimeters:\n      // case UnitType.kQuarterMillimeters:\n      // case UnitType.kInches:\n      // case UnitType.kPoints:\n      // case UnitType.kPicas:\n      // case UnitType.kUserUnits:\n      return UnitCategory.kULength;\n    case UnitType.kMilliseconds:\n    case UnitType.kSeconds:\n      return UnitCategory.kUTime;\n    case UnitType.kDegrees:\n    case UnitType.kRadians:\n    case UnitType.kGradians:\n    case UnitType.kTurns:\n      return UnitCategory.kUAngle;\n    // case UnitType.kHertz:\n    // case UnitType.kKilohertz:\n    //   return UnitCategory.kUFrequency;\n    // case UnitType.kDotsPerPixel:\n    // case UnitType.kDotsPerInch:\n    // case UnitType.kDotsPerCentimeter:\n    //   return UnitCategory.kUResolution;\n    default:\n      return UnitCategory.kUOther;\n  }\n};\nvar canonicalUnitTypeForCategory = function canonicalUnitTypeForCategory(category) {\n  // The canonical unit type is chosen according to the way\n  // CSSPropertyParser.ValidUnit() chooses the default unit in each category\n  // (based on unitflags).\n  switch (category) {\n    case UnitCategory.kUNumber:\n      return UnitType.kNumber;\n    case UnitCategory.kULength:\n      return UnitType.kPixels;\n    case UnitCategory.kUPercent:\n      return UnitType.kPercentage;\n    // return UnitType.kUnknown; // Cannot convert between numbers and percent.\n    case UnitCategory.kUTime:\n      return UnitType.kSeconds;\n    case UnitCategory.kUAngle:\n      return UnitType.kDegrees;\n    // case UnitCategory.kUFrequency:\n    //   return UnitType.kHertz;\n    // case UnitCategory.kUResolution:\n    //   return UnitType.kDotsPerPixel;\n    default:\n      return UnitType.kUnknown;\n  }\n};\n\n/**\n * @see https://chromium.googlesource.com/chromium/src/+/refs/heads/main/third_party/blink/renderer/core/css/css_primitive_value.cc#353\n */\nvar conversionToCanonicalUnitsScaleFactor = function conversionToCanonicalUnitsScaleFactor(unit_type) {\n  var factor = 1.0;\n  // FIXME: the switch can be replaced by an array of scale factors.\n  switch (unit_type) {\n    // These are \"canonical\" units in their respective categories.\n    case UnitType.kPixels:\n    // case UnitType.kUserUnits:\n    case UnitType.kDegrees:\n    case UnitType.kSeconds:\n      // case UnitType.kHertz:\n      break;\n    case UnitType.kMilliseconds:\n      factor = 0.001;\n      break;\n    // case UnitType.kCentimeters:\n    //   // factor = kCssPixelsPerCentimeter;\n    //   break;\n    // case UnitType.kDotsPerCentimeter:\n    //   // factor = 1 / kCssPixelsPerCentimeter;\n    //   break;\n    // case UnitType.kMillimeters:\n    //   // factor = kCssPixelsPerMillimeter;\n    //   break;\n    // case UnitType.kQuarterMillimeters:\n    //   // factor = kCssPixelsPerQuarterMillimeter;\n    //   break;\n    // case UnitType.kInches:\n    //   // factor = kCssPixelsPerInch;\n    //   break;\n    // case UnitType.kDotsPerInch:\n    //   // factor = 1 / kCssPixelsPerInch;\n    //   break;\n    // case UnitType.kPoints:\n    //   // factor = kCssPixelsPerPoint;\n    //   break;\n    // case UnitType.kPicas:\n    //   // factor = kCssPixelsPerPica;\n    //   break;\n    case UnitType.kRadians:\n      factor = 180 / Math.PI;\n      break;\n    case UnitType.kGradians:\n      factor = 0.9;\n      break;\n    case UnitType.kTurns:\n      factor = 360;\n      break;\n  }\n  return factor;\n};\nvar unitTypeToString = function unitTypeToString(type) {\n  switch (type) {\n    case UnitType.kNumber:\n    case UnitType.kInteger:\n      // case UnitType.kUserUnits:\n      return '';\n    case UnitType.kPercentage:\n      return '%';\n    case UnitType.kEms:\n      // case UnitType.kQuirkyEms:\n      return 'em';\n    // case UnitType.kExs:\n    //   return 'ex';\n    case UnitType.kRems:\n      return 'rem';\n    // case UnitType.kChs:\n    //   return 'ch';\n    case UnitType.kPixels:\n      return 'px';\n    // case UnitType.kCentimeters:\n    //   return 'cm';\n    // case UnitType.kDotsPerPixel:\n    //   return 'dppx';\n    // case UnitType.kDotsPerInch:\n    //   return 'dpi';\n    // case UnitType.kDotsPerCentimeter:\n    //   return 'dpcm';\n    // case UnitType.kMillimeters:\n    //   return 'mm';\n    // case UnitType.kQuarterMillimeters:\n    //   return 'q';\n    // case UnitType.kInches:\n    //   return 'in';\n    // case UnitType.kPoints:\n    //   return 'pt';\n    // case UnitType.kPicas:\n    //   return 'pc';\n    case UnitType.kDegrees:\n      return 'deg';\n    case UnitType.kRadians:\n      return 'rad';\n    case UnitType.kGradians:\n      return 'grad';\n    case UnitType.kMilliseconds:\n      return 'ms';\n    case UnitType.kSeconds:\n      return 's';\n    // case UnitType.kHertz:\n    //   return 'hz';\n    // case UnitType.kKilohertz:\n    //   return 'khz';\n    case UnitType.kTurns:\n      return 'turn';\n  }\n  return '';\n};\n\n/**\n * CSSStyleValue is the base class for all CSS values accessible from Typed OM.\n * Values that are not yet supported as specific types are also returned as base CSSStyleValues.\n *\n * Spec @see https://drafts.css-houdini.org/css-typed-om/#stylevalue-objects\n * Docs @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleValue\n */\nvar CSSStyleValue = /*#__PURE__*/function () {\n  function CSSStyleValue() {\n    _classCallCheck(this, CSSStyleValue);\n  }\n  return _createClass(CSSStyleValue, [{\n    key: \"toString\",\n    value:\n    // protected abstract toCSSValue(): CSSValue;\n\n    function toString() {\n      return this.buildCSSText(Nested.kNo, ParenLess.kNo, '');\n    }\n  }, {\n    key: \"isNumericValue\",\n    value: function isNumericValue() {\n      return this.getType() >= CSSStyleValueType.kUnitType && this.getType() <= CSSStyleValueType.kClampType;\n    }\n  }], [{\n    key: \"isAngle\",\n    value:\n    // static parse(propertyName: string, value: string): CSSStyleValue {\n    //   return parseCSSStyleValue(propertyName, value)[0];\n    // }\n\n    // static parseAll(propertyName: string, value: string): CSSStyleValue[] {\n    //   return parseCSSStyleValue(propertyName, value);\n    // }\n\n    function isAngle(unit) {\n      return unit === UnitType.kDegrees || unit === UnitType.kRadians || unit === UnitType.kGradians || unit === UnitType.kTurns;\n    }\n\n    // static isViewportPercentageLength(type: UnitType) {\n    //   return type >= UnitType.kViewportWidth && type <= UnitType.kDynamicViewportMax;\n    // }\n\n    // static isContainerPercentageLength(type: UnitType) {\n    //   return type >= UnitType.kContainerWidth && type <= UnitType.kContainerMax;\n    // }\n  }, {\n    key: \"isLength\",\n    value: function isLength(type) {\n      // return (type >= UnitType.kEms && type <= UnitType.kUserUnits) || type == UnitType.kQuirkyEms;\n      return type >= UnitType.kEms && type < UnitType.kDegrees;\n    }\n  }, {\n    key: \"isRelativeUnit\",\n    value: function isRelativeUnit(type) {\n      return type === UnitType.kPercentage || type === UnitType.kEms ||\n      // type === UnitType.kExs ||\n      type === UnitType.kRems\n      // type === UnitType.kChs ||\n      // this.isViewportPercentageLength(type) ||\n      // this.isContainerPercentageLength(type)\n      ;\n    }\n  }, {\n    key: \"isTime\",\n    value: function isTime(unit) {\n      return unit === UnitType.kSeconds || unit === UnitType.kMilliseconds;\n    }\n\n    // static isFrequency(unit: UnitType) {\n    //   return unit == UnitType.kHertz || unit == UnitType.kKilohertz;\n    // }\n\n    // static isResolution(type: UnitType) {\n    //   return type >= UnitType.kDotsPerPixel && type <= UnitType.kDotsPerCentimeter;\n    // }\n\n    // static isFlex(unit: UnitType) {\n    //   return unit === UnitType.kFraction;\n    // }\n  }]);\n}();\n\n/**\n * @see https://drafts.css-houdini.org/css-typed-om-1/#dom-csscolorvalue-colorspace\n */\n\n/**\n * CSSColorValue is the base class used for the various CSS color interfaces.\n *\n * @see https://drafts.css-houdini.org/css-typed-om-1/#colorvalue-objects\n */\nvar CSSColorValue = /*#__PURE__*/function (_CSSStyleValue) {\n  function CSSColorValue(colorSpace) {\n    var _this;\n    _classCallCheck(this, CSSColorValue);\n    _this = _callSuper(this, CSSColorValue);\n    _this.colorSpace = colorSpace;\n    return _this;\n  }\n  _inherits(CSSColorValue, _CSSStyleValue);\n  return _createClass(CSSColorValue, [{\n    key: \"getType\",\n    value: function getType() {\n      return CSSStyleValueType.kColorType;\n    }\n\n    /**\n     * @see https://drafts.css-houdini.org/css-typed-om-1/#dom-csscolorvalue-to\n     */\n  }, {\n    key: \"to\",\n    value: function to(colorSpace) {\n      return this;\n    }\n  }]);\n}(CSSStyleValue);\n\nvar GradientType = /*#__PURE__*/function (GradientType) {\n  GradientType[GradientType[\"Constant\"] = 0] = \"Constant\";\n  GradientType[GradientType[\"LinearGradient\"] = 1] = \"LinearGradient\";\n  GradientType[GradientType[\"RadialGradient\"] = 2] = \"RadialGradient\";\n  return GradientType;\n}({});\nvar CSSGradientValue = /*#__PURE__*/function (_CSSStyleValue) {\n  function CSSGradientValue(type, value) {\n    var _this;\n    _classCallCheck(this, CSSGradientValue);\n    _this = _callSuper(this, CSSGradientValue);\n    _this.type = type;\n    _this.value = value;\n    return _this;\n  }\n  _inherits(CSSGradientValue, _CSSStyleValue);\n  return _createClass(CSSGradientValue, [{\n    key: \"clone\",\n    value: function clone() {\n      return new CSSGradientValue(this.type, this.value);\n    }\n  }, {\n    key: \"buildCSSText\",\n    value: function buildCSSText(n, p, result) {\n      return result;\n    }\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return CSSStyleValueType.kColorType;\n    }\n  }]);\n}(CSSStyleValue);\n\n/**\n * CSSKeywordValue represents CSS Values that are specified as keywords\n * eg. 'initial'\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSKeywordValue\n * @see https://chromium.googlesource.com/chromium/src/+/refs/heads/main/third_party/blink/renderer/core/css/cssom/css_keyword_value.idl\n */\nvar CSSKeywordValue = /*#__PURE__*/function (_CSSStyleValue) {\n  function CSSKeywordValue(value) {\n    var _this;\n    _classCallCheck(this, CSSKeywordValue);\n    _this = _callSuper(this, CSSKeywordValue);\n    _this.value = value;\n    return _this;\n  }\n  _inherits(CSSKeywordValue, _CSSStyleValue);\n  return _createClass(CSSKeywordValue, [{\n    key: \"clone\",\n    value: function clone() {\n      return new CSSKeywordValue(this.value);\n    }\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return CSSStyleValueType.kKeywordType;\n    }\n  }, {\n    key: \"buildCSSText\",\n    value: function buildCSSText(n, p, result) {\n      return result + this.value;\n    }\n  }]);\n}(CSSStyleValue);\n\nvar formatInfinityOrNaN = function formatInfinityOrNaN(number) {\n  var suffix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var result = '';\n  if (!Number.isFinite(number)) {\n    if (number > 0) result = 'infinity';else result = '-infinity';\n  } else {\n    result = 'NaN';\n  }\n  return result += suffix;\n};\nvar toCanonicalUnit = function toCanonicalUnit(unit) {\n  return canonicalUnitTypeForCategory(unitTypeToUnitCategory(unit));\n};\n\n/**\n * CSSNumericValue is the base class for numeric and length typed CSS Values.\n * @see https://drafts.css-houdini.org/css-typed-om/#numeric-objects\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSNumericValue\n * @see https://chromium.googlesource.com/chromium/src/+/refs/heads/main/third_party/blink/renderer/core/css/cssom/css_numeric_value.idl\n */\n\n/**\n * Represents numeric values that can be expressed as a single number plus a\n * unit (or a naked number or percentage).\n * @see https://drafts.css-houdini.org/css-typed-om/#cssunitvalue\n */\nvar CSSUnitValue = /*#__PURE__*/function (_CSSStyleValue) {\n  function CSSUnitValue(value) {\n    var _this;\n    var unitOrName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : UnitType.kNumber;\n    _classCallCheck(this, CSSUnitValue);\n    _this = _callSuper(this, CSSUnitValue);\n    var unit;\n    if (typeof unitOrName === 'string') {\n      unit = unitFromName(unitOrName);\n    } else {\n      unit = unitOrName;\n    }\n    _this.unit = unit;\n    _this.value = value;\n    return _this;\n  }\n  _inherits(CSSUnitValue, _CSSStyleValue);\n  return _createClass(CSSUnitValue, [{\n    key: \"clone\",\n    value: function clone() {\n      return new CSSUnitValue(this.value, this.unit);\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(other) {\n      var other_unit_value = other;\n      return this.value === other_unit_value.value && this.unit === other_unit_value.unit;\n    }\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return CSSStyleValueType.kUnitType;\n    }\n  }, {\n    key: \"convertTo\",\n    value: function convertTo(target_unit) {\n      if (this.unit === target_unit) {\n        return new CSSUnitValue(this.value, this.unit);\n      }\n\n      // Instead of defining the scale factors for every unit to every other unit,\n      // we simply convert to the canonical unit and back since we already have\n      // the scale factors for canonical units.\n      var canonical_unit = toCanonicalUnit(this.unit);\n      if (canonical_unit !== toCanonicalUnit(target_unit) || canonical_unit === UnitType.kUnknown) {\n        return null;\n      }\n      var scale_factor = conversionToCanonicalUnitsScaleFactor(this.unit) / conversionToCanonicalUnitsScaleFactor(target_unit);\n      return new CSSUnitValue(this.value * scale_factor, target_unit);\n    }\n  }, {\n    key: \"buildCSSText\",\n    value: function buildCSSText(n, p, result) {\n      var text;\n      switch (this.unit) {\n        case UnitType.kUnknown:\n          // FIXME\n          break;\n        case UnitType.kInteger:\n          text = Number(this.value).toFixed(0);\n          break;\n        case UnitType.kNumber:\n        case UnitType.kPercentage:\n        case UnitType.kEms:\n        // case UnitType.kQuirkyEms:\n        // case UnitType.kExs:\n        case UnitType.kRems:\n        // case UnitType.kChs:\n        case UnitType.kPixels:\n        // case UnitType.kCentimeters:\n        // case UnitType.kDotsPerPixel:\n        // case UnitType.kDotsPerInch:\n        // case UnitType.kDotsPerCentimeter:\n        // case UnitType.kMillimeters:\n        // case UnitType.kQuarterMillimeters:\n        // case UnitType.kInches:\n        // case UnitType.kPoints:\n        // case UnitType.kPicas:\n        // case UnitType.kUserUnits:\n        case UnitType.kDegrees:\n        case UnitType.kRadians:\n        case UnitType.kGradians:\n        case UnitType.kMilliseconds:\n        case UnitType.kSeconds:\n        // case UnitType.kHertz:\n        // case UnitType.kKilohertz:\n        case UnitType.kTurns:\n          {\n            // case UnitType.kContainerMax: { // case UnitType.kContainerMin: // case UnitType.kContainerBlockSize: // case UnitType.kContainerInlineSize: // case UnitType.kContainerHeight: // case UnitType.kContainerWidth: // case UnitType.kDynamicViewportMax: // case UnitType.kDynamicViewportMin: // case UnitType.kDynamicViewportBlockSize: // case UnitType.kDynamicViewportInlineSize: // case UnitType.kDynamicViewportHeight: // case UnitType.kDynamicViewportWidth: // case UnitType.kLargeViewportMax: // case UnitType.kLargeViewportMin: // case UnitType.kLargeViewportBlockSize: // case UnitType.kLargeViewportInlineSize: // case UnitType.kLargeViewportHeight: // case UnitType.kLargeViewportWidth: // case UnitType.kSmallViewportMax: // case UnitType.kSmallViewportMin: // case UnitType.kSmallViewportBlockSize: // case UnitType.kSmallViewportInlineSize: // case UnitType.kSmallViewportHeight: // case UnitType.kSmallViewportWidth: // case UnitType.kViewportMax: // case UnitType.kViewportMin: // case UnitType.kViewportBlockSize: // case UnitType.kViewportInlineSize: // case UnitType.kViewportHeight: // case UnitType.kViewportWidth: // case UnitType.kFraction:\n            var kMinInteger = -999999;\n            var kMaxInteger = 999999;\n            var value = this.value;\n            var unit = unitTypeToString(this.unit);\n            if (value < kMinInteger || value > kMaxInteger) {\n              var _unit = unitTypeToString(this.unit);\n              if (!Number.isFinite(value) || Number.isNaN(value)) {\n                text = formatInfinityOrNaN(value, _unit);\n              } else {\n                text = value + (_unit || '');\n              }\n            } else {\n              text = \"\".concat(value).concat(unit);\n            }\n          }\n      }\n      result += text;\n      return result;\n    }\n  }]);\n}(CSSStyleValue);\nvar Opx = new CSSUnitValue(0, 'px');\nnew CSSUnitValue(1, 'px');\nvar Odeg = new CSSUnitValue(0, 'deg');\n\n/**\n * The CSSRGB class represents the CSS rgb()/rgba() functions.\n *\n * @see https://drafts.css-houdini.org/css-typed-om-1/#cssrgb\n */\nvar CSSRGB = /*#__PURE__*/function (_CSSColorValue) {\n  function CSSRGB(r, g, b) {\n    var _this;\n    var alpha = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n    var isNone = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    _classCallCheck(this, CSSRGB);\n    _this = _callSuper(this, CSSRGB, ['rgb']);\n    _this.r = r;\n    _this.g = g;\n    _this.b = b;\n    _this.alpha = alpha;\n    _this.isNone = isNone;\n    return _this;\n  }\n  _inherits(CSSRGB, _CSSColorValue);\n  return _createClass(CSSRGB, [{\n    key: \"clone\",\n    value: function clone() {\n      return new CSSRGB(this.r, this.g, this.b, this.alpha);\n    }\n  }, {\n    key: \"buildCSSText\",\n    value: function buildCSSText(n, p, result) {\n      return \"\".concat(result, \"rgba(\").concat(this.r, \",\").concat(this.g, \",\").concat(this.b, \",\").concat(this.alpha, \")\");\n    }\n  }]);\n}(CSSColorValue);\n\n/**\n * CSSKeywordValue\n */\nvar unsetKeywordValue = new CSSKeywordValue('unset');\nvar initialKeywordValue = new CSSKeywordValue('initial');\nvar inheritKeywordValue = new CSSKeywordValue('inherit');\nvar keywordCache = {\n  '': unsetKeywordValue,\n  unset: unsetKeywordValue,\n  initial: initialKeywordValue,\n  inherit: inheritKeywordValue\n};\nvar getOrCreateKeyword = function getOrCreateKeyword(name) {\n  if (!keywordCache[name]) {\n    keywordCache[name] = new CSSKeywordValue(name);\n  }\n  return keywordCache[name];\n};\n\n/**\n * CSSColor\n */\nvar noneColor = new CSSRGB(0, 0, 0, 0, true);\nvar transparentColor = new CSSRGB(0, 0, 0, 0);\nvar getOrCreateRGBA = memoize(function (r, g, b, a) {\n  return new CSSRGB(r, g, b, a);\n}, function (r, g, b, a) {\n  return \"rgba(\".concat(r, \",\").concat(g, \",\").concat(b, \",\").concat(a, \")\");\n});\n\n// export const getOrCreateUnitValue = memoize(\n//   (value: number, unitOrName: UnitType | string = UnitType.kNumber) => {\n//     return new CSSUnitValue(value, unitOrName);\n//   },\n//   (value: number, unitOrName: UnitType | string = UnitType.kNumber) => {\n//     return `${value}${unitOrName}`;\n//   },\n// );\n\nvar getOrCreateUnitValue = function getOrCreateUnitValue(value) {\n  var unitOrName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : UnitType.kNumber;\n  return new CSSUnitValue(value, unitOrName);\n};\nnew CSSUnitValue(50, '%');\n\n/**\n * borrow from gradient-parser, but we delete some browser compatible prefix such as `-webkit-`\n * @see https://github.com/rafaelcaricio/gradient-parser\n */\n\nfunction colorStopToString(colorStop) {\n  var type = colorStop.type,\n    value = colorStop.value;\n  if (type === 'hex') {\n    return \"#\".concat(value);\n  }\n  if (type === 'literal') {\n    return value;\n  }\n  if (type === 'rgb') {\n    return \"rgb(\".concat(value.join(','), \")\");\n  }\n  return \"rgba(\".concat(value.join(','), \")\");\n}\nvar parseGradient$1 = function () {\n  var tokens = {\n    linearGradient: /^(linear\\-gradient)/i,\n    repeatingLinearGradient: /^(repeating\\-linear\\-gradient)/i,\n    radialGradient: /^(radial\\-gradient)/i,\n    repeatingRadialGradient: /^(repeating\\-radial\\-gradient)/i,\n    /**\n     * @see https://projects.verou.me/conic-gradient/\n     */\n    conicGradient: /^(conic\\-gradient)/i,\n    sideOrCorner: /^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,\n    extentKeywords: /^(closest\\-side|closest\\-corner|farthest\\-side|farthest\\-corner|contain|cover)/,\n    positionKeywords: /^(left|center|right|top|bottom)/i,\n    pixelValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))px/,\n    percentageValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))\\%/,\n    emValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))em/,\n    angleValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))deg/,\n    startCall: /^\\(/,\n    endCall: /^\\)/,\n    comma: /^,/,\n    hexColor: /^\\#([0-9a-fA-F]+)/,\n    literalColor: /^([a-zA-Z]+)/,\n    rgbColor: /^rgb/i,\n    rgbaColor: /^rgba/i,\n    number: /^(([0-9]*\\.[0-9]+)|([0-9]+\\.?))/\n  };\n  var input = '';\n  function error(msg) {\n    throw new Error(\"\".concat(input, \": \").concat(msg));\n  }\n  function getAST() {\n    var ast = matchListDefinitions();\n    if (input.length > 0) {\n      error('Invalid input not EOF');\n    }\n    return ast;\n  }\n  function matchListDefinitions() {\n    return matchListing(matchDefinition);\n  }\n  function matchDefinition() {\n    return matchGradient('linear-gradient', tokens.linearGradient, matchLinearOrientation) || matchGradient('repeating-linear-gradient', tokens.repeatingLinearGradient, matchLinearOrientation) || matchGradient('radial-gradient', tokens.radialGradient, matchListRadialOrientations) || matchGradient('repeating-radial-gradient', tokens.repeatingRadialGradient, matchListRadialOrientations) || matchGradient('conic-gradient', tokens.conicGradient, matchListRadialOrientations);\n  }\n  function matchGradient(gradientType, pattern, orientationMatcher) {\n    return matchCall(pattern, function (captures) {\n      var orientation = orientationMatcher();\n      if (orientation) {\n        if (!scan(tokens.comma)) {\n          error('Missing comma before color stops');\n        }\n      }\n      return {\n        type: gradientType,\n        orientation: orientation,\n        colorStops: matchListing(matchColorStop)\n      };\n    });\n  }\n  function matchCall(pattern, callback) {\n    var captures = scan(pattern);\n    if (captures) {\n      if (!scan(tokens.startCall)) {\n        error('Missing (');\n      }\n      var result = callback(captures);\n      if (!scan(tokens.endCall)) {\n        error('Missing )');\n      }\n      return result;\n    }\n  }\n  function matchLinearOrientation() {\n    return matchSideOrCorner() || matchAngle();\n  }\n  function matchSideOrCorner() {\n    return match('directional', tokens.sideOrCorner, 1);\n  }\n  function matchAngle() {\n    return match('angular', tokens.angleValue, 1);\n  }\n  function matchListRadialOrientations() {\n    var radialOrientations;\n    var radialOrientation = matchRadialOrientation();\n    var lookaheadCache;\n    if (radialOrientation) {\n      radialOrientations = [];\n      radialOrientations.push(radialOrientation);\n      lookaheadCache = input;\n      if (scan(tokens.comma)) {\n        radialOrientation = matchRadialOrientation();\n        if (radialOrientation) {\n          radialOrientations.push(radialOrientation);\n        } else {\n          input = lookaheadCache;\n        }\n      }\n    }\n    return radialOrientations;\n  }\n  function matchRadialOrientation() {\n    var radialType = matchCircle() || matchEllipse();\n    if (radialType) {\n      // @ts-ignore\n      radialType.at = matchAtPosition();\n    } else {\n      var extent = matchExtentKeyword();\n      if (extent) {\n        radialType = extent;\n        var positionAt = matchAtPosition();\n        if (positionAt) {\n          // @ts-ignore\n          radialType.at = positionAt;\n        }\n      } else {\n        var defaultPosition = matchPositioning();\n        if (defaultPosition) {\n          radialType = {\n            type: 'default-radial',\n            // @ts-ignore\n            at: defaultPosition\n          };\n        }\n      }\n    }\n    return radialType;\n  }\n  function matchCircle() {\n    var circle = match('shape', /^(circle)/i, 0);\n    if (circle) {\n      // @ts-ignore\n      circle.style = matchLength() || matchExtentKeyword();\n    }\n    return circle;\n  }\n  function matchEllipse() {\n    var ellipse = match('shape', /^(ellipse)/i, 0);\n    if (ellipse) {\n      // @ts-ignore\n      ellipse.style = matchDistance() || matchExtentKeyword();\n    }\n    return ellipse;\n  }\n  function matchExtentKeyword() {\n    return match('extent-keyword', tokens.extentKeywords, 1);\n  }\n  function matchAtPosition() {\n    if (match('position', /^at/, 0)) {\n      var positioning = matchPositioning();\n      if (!positioning) {\n        error('Missing positioning value');\n      }\n      return positioning;\n    }\n  }\n  function matchPositioning() {\n    var location = matchCoordinates();\n    if (location.x || location.y) {\n      return {\n        type: 'position',\n        value: location\n      };\n    }\n  }\n  function matchCoordinates() {\n    return {\n      x: matchDistance(),\n      y: matchDistance()\n    };\n  }\n  function matchListing(matcher) {\n    var captures = matcher();\n    var result = [];\n    if (captures) {\n      result.push(captures);\n      while (scan(tokens.comma)) {\n        captures = matcher();\n        if (captures) {\n          result.push(captures);\n        } else {\n          error('One extra comma');\n        }\n      }\n    }\n    return result;\n  }\n  function matchColorStop() {\n    var color = matchColor();\n    if (!color) {\n      error('Expected color definition');\n    }\n    color.length = matchDistance();\n    return color;\n  }\n  function matchColor() {\n    return matchHexColor() || matchRGBAColor() || matchRGBColor() || matchLiteralColor();\n  }\n  function matchLiteralColor() {\n    return match('literal', tokens.literalColor, 0);\n  }\n  function matchHexColor() {\n    return match('hex', tokens.hexColor, 1);\n  }\n  function matchRGBColor() {\n    return matchCall(tokens.rgbColor, function () {\n      return {\n        type: 'rgb',\n        value: matchListing(matchNumber)\n      };\n    });\n  }\n  function matchRGBAColor() {\n    return matchCall(tokens.rgbaColor, function () {\n      return {\n        type: 'rgba',\n        value: matchListing(matchNumber)\n      };\n    });\n  }\n  function matchNumber() {\n    return scan(tokens.number)[1];\n  }\n  function matchDistance() {\n    return match('%', tokens.percentageValue, 1) || matchPositionKeyword() || matchLength();\n  }\n  function matchPositionKeyword() {\n    return match('position-keyword', tokens.positionKeywords, 1);\n  }\n  function matchLength() {\n    return match('px', tokens.pixelValue, 1) || match('em', tokens.emValue, 1);\n  }\n  function match(type, pattern, captureIndex) {\n    var captures = scan(pattern);\n    if (captures) {\n      return {\n        type: type,\n        value: captures[captureIndex]\n      };\n    }\n  }\n  function scan(regexp) {\n    var blankCaptures = /^[\\n\\r\\t\\s]+/.exec(input);\n    if (blankCaptures) {\n      consume(blankCaptures[0].length);\n    }\n    var captures = regexp.exec(input);\n    if (captures) {\n      consume(captures[0].length);\n    }\n    return captures;\n  }\n  function consume(size) {\n    input = input.substring(size);\n  }\n  return function (code) {\n    input = code;\n    return getAST();\n  };\n}();\nfunction computeLinearGradient(min, width, height, angle) {\n  var rad = deg2rad(angle.value);\n  var rx = 0;\n  var ry = 0;\n  var rcx = rx + width / 2;\n  var rcy = ry + height / 2;\n  // get the length of gradient line\n  // @see https://observablehq.com/@danburzo/css-gradient-line\n  var length = Math.abs(width * Math.cos(rad)) + Math.abs(height * Math.sin(rad));\n  var x1 = min[0] + rcx - Math.cos(rad) * length / 2;\n  var y1 = min[1] + rcy - Math.sin(rad) * length / 2;\n  var x2 = min[0] + rcx + Math.cos(rad) * length / 2;\n  var y2 = min[1] + rcy + Math.sin(rad) * length / 2;\n  return {\n    x1: x1,\n    y1: y1,\n    x2: x2,\n    y2: y2\n  };\n}\nfunction computeRadialGradient(min, width, height, cx, cy, size) {\n  // 'px'\n  var x = cx.value;\n  var y = cy.value;\n\n  // TODO: 'em'\n\n  // '%'\n  if (cx.unit === UnitType.kPercentage) {\n    x = cx.value / 100 * width;\n  }\n  if (cy.unit === UnitType.kPercentage) {\n    y = cy.value / 100 * height;\n  }\n\n  // default to farthest-side\n  var r = Math.max(distanceSquareRoot([0, 0], [x, y]), distanceSquareRoot([0, height], [x, y]), distanceSquareRoot([width, height], [x, y]), distanceSquareRoot([width, 0], [x, y]));\n  if (size) {\n    if (size instanceof CSSUnitValue) {\n      r = size.value;\n    } else if (size instanceof CSSKeywordValue) {\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Images/Using_CSS_gradients#example_closest-side_for_circles\n      if (size.value === 'closest-side') {\n        r = Math.min(x, width - x, y, height - y);\n      } else if (size.value === 'farthest-side') {\n        r = Math.max(x, width - x, y, height - y);\n      } else if (size.value === 'closest-corner') {\n        r = Math.min(distanceSquareRoot([0, 0], [x, y]), distanceSquareRoot([0, height], [x, y]), distanceSquareRoot([width, height], [x, y]), distanceSquareRoot([width, 0], [x, y]));\n      }\n    }\n  }\n  return {\n    x: x + min[0],\n    y: y + min[1],\n    r: r\n  };\n}\n\nvar regexLG = /^l\\s*\\(\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nvar regexRG = /^r\\s*\\(\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nvar regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\nvar regexColorStop = /[\\d.]+:(#[^\\s]+|[^\\)]+\\))/gi;\nfunction spaceColorStops(colorStops) {\n  var _colorStops$length;\n  var length = colorStops.length;\n  colorStops[length - 1].length = (_colorStops$length = colorStops[length - 1].length) !== null && _colorStops$length !== void 0 ? _colorStops$length : {\n    type: '%',\n    value: '100'\n  };\n  if (length > 1) {\n    var _colorStops$0$length;\n    colorStops[0].length = (_colorStops$0$length = colorStops[0].length) !== null && _colorStops$0$length !== void 0 ? _colorStops$0$length : {\n      type: '%',\n      value: '0'\n    };\n  }\n  var previousIndex = 0;\n  var previousOffset = Number(colorStops[0].length.value);\n  for (var i = 1; i < length; i++) {\n    var _colorStops$i$length;\n    // support '%' & 'px'\n    var offset = (_colorStops$i$length = colorStops[i].length) === null || _colorStops$i$length === void 0 ? void 0 : _colorStops$i$length.value;\n    if (!isNil(offset) && !isNil(previousOffset)) {\n      for (var j = 1; j < i - previousIndex; j++) colorStops[previousIndex + j].length = {\n        type: '%',\n        value: \"\".concat(previousOffset + (Number(offset) - previousOffset) * j / (i - previousIndex))\n      };\n      previousIndex = i;\n      previousOffset = Number(offset);\n    }\n  }\n}\n\n// The position of the gradient line's starting point.\n// different from CSS side(to top) @see https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/linear-gradient#values\nvar SideOrCornerToDegMap = {\n  left: 270 - 90,\n  top: 0 - 90,\n  bottom: 180 - 90,\n  right: 90 - 90,\n  'left top': 315 - 90,\n  'top left': 315 - 90,\n  'left bottom': 225 - 90,\n  'bottom left': 225 - 90,\n  'right top': 45 - 90,\n  'top right': 45 - 90,\n  'right bottom': 135 - 90,\n  'bottom right': 135 - 90\n};\nvar angleToDeg = memoize(function (orientation) {\n  var angle;\n  if (orientation.type === 'angular') {\n    angle = Number(orientation.value);\n  } else {\n    angle = SideOrCornerToDegMap[orientation.value] || 0;\n  }\n  return getOrCreateUnitValue(angle, 'deg');\n});\nvar positonToCSSUnitValue = memoize(function (position) {\n  var cx = 50;\n  var cy = 50;\n  var unitX = '%';\n  var unitY = '%';\n  if ((position === null || position === void 0 ? void 0 : position.type) === 'position') {\n    var _position$value = position.value,\n      x = _position$value.x,\n      y = _position$value.y;\n    if ((x === null || x === void 0 ? void 0 : x.type) === 'position-keyword') {\n      if (x.value === 'left') {\n        cx = 0;\n      } else if (x.value === 'center') {\n        cx = 50;\n      } else if (x.value === 'right') {\n        cx = 100;\n      } else if (x.value === 'top') {\n        cy = 0;\n      } else if (x.value === 'bottom') {\n        cy = 100;\n      }\n    }\n    if ((y === null || y === void 0 ? void 0 : y.type) === 'position-keyword') {\n      if (y.value === 'left') {\n        cx = 0;\n      } else if (y.value === 'center') {\n        cy = 50;\n      } else if (y.value === 'right') {\n        cx = 100;\n      } else if (y.value === 'top') {\n        cy = 0;\n      } else if (y.value === 'bottom') {\n        cy = 100;\n      }\n    }\n    if ((x === null || x === void 0 ? void 0 : x.type) === 'px' || (x === null || x === void 0 ? void 0 : x.type) === '%' || (x === null || x === void 0 ? void 0 : x.type) === 'em') {\n      unitX = x === null || x === void 0 ? void 0 : x.type;\n      cx = Number(x.value);\n    }\n    if ((y === null || y === void 0 ? void 0 : y.type) === 'px' || (y === null || y === void 0 ? void 0 : y.type) === '%' || (y === null || y === void 0 ? void 0 : y.type) === 'em') {\n      unitY = y === null || y === void 0 ? void 0 : y.type;\n      cy = Number(y.value);\n    }\n  }\n  return {\n    cx: getOrCreateUnitValue(cx, unitX),\n    cy: getOrCreateUnitValue(cy, unitY)\n  };\n});\nvar parseGradient = memoize(function (colorStr) {\n  if (colorStr.indexOf('linear') > -1 || colorStr.indexOf('radial') > -1) {\n    var ast = parseGradient$1(colorStr);\n    return ast.map(function (_ref) {\n      var type = _ref.type,\n        orientation = _ref.orientation,\n        colorStops = _ref.colorStops;\n      spaceColorStops(colorStops);\n      var steps = colorStops.map(function (colorStop) {\n        // TODO: only support % for now, should calc percentage of axis length when using px/em\n        return {\n          offset: getOrCreateUnitValue(Number(colorStop.length.value), '%'),\n          color: colorStopToString(colorStop)\n        };\n      });\n      if (type === 'linear-gradient') {\n        return new CSSGradientValue(GradientType.LinearGradient, {\n          angle: orientation ? angleToDeg(orientation) : Odeg,\n          steps: steps\n        });\n      }\n      if (type === 'radial-gradient') {\n        if (!orientation) {\n          orientation = [{\n            type: 'shape',\n            value: 'circle'\n          }];\n        }\n        if (orientation[0].type === 'shape' && orientation[0].value === 'circle') {\n          var _positonToCSSUnitValu = positonToCSSUnitValue(orientation[0].at),\n            cx = _positonToCSSUnitValu.cx,\n            cy = _positonToCSSUnitValu.cy;\n          var size;\n          if (orientation[0].style) {\n            var _orientation$0$style = orientation[0].style,\n              _type = _orientation$0$style.type,\n              value = _orientation$0$style.value;\n            if (_type === 'extent-keyword') {\n              size = getOrCreateKeyword(value);\n            } else {\n              size = getOrCreateUnitValue(value, _type);\n            }\n          }\n          return new CSSGradientValue(GradientType.RadialGradient, {\n            cx: cx,\n            cy: cy,\n            size: size,\n            steps: steps\n          });\n        }\n        // TODO: support ellipse shape\n        // TODO: repeating-linear-gradient & repeating-radial-gradient\n        // } else if (type === 'repeating-linear-gradient') {\n        // } else if (type === 'repeating-radial-gradient') {\n      }\n      return undefined;\n    });\n  }\n\n  // legacy format, should be deprecated later\n  var type = colorStr[0];\n  if (colorStr[1] === '(' || colorStr[2] === '(') {\n    if (type === 'l') {\n      var arr = regexLG.exec(colorStr);\n      if (arr) {\n        var _arr$2$match;\n        var steps = ((_arr$2$match = arr[2].match(regexColorStop)) === null || _arr$2$match === void 0 ? void 0 : _arr$2$match.map(function (stop) {\n          return stop.split(':');\n        })) || [];\n        return [new CSSGradientValue(GradientType.LinearGradient, {\n          angle: getOrCreateUnitValue(parseFloat(arr[1]), 'deg'),\n          steps: steps.map(function (_ref2) {\n            var _ref3 = _slicedToArray(_ref2, 2),\n              offset = _ref3[0],\n              color = _ref3[1];\n            return {\n              offset: getOrCreateUnitValue(Number(offset) * 100, '%'),\n              color: color\n            };\n          })\n        })];\n      }\n    } else if (type === 'r') {\n      var parsedRadialGradient = parseRadialGradient(colorStr);\n      if (parsedRadialGradient) {\n        if (isString(parsedRadialGradient)) {\n          colorStr = parsedRadialGradient;\n        } else {\n          return [new CSSGradientValue(GradientType.RadialGradient, parsedRadialGradient)];\n        }\n      }\n    } else if (type === 'p') {\n      return parsePattern(colorStr);\n    }\n  }\n});\nfunction parseRadialGradient(gradientStr) {\n  var arr = regexRG.exec(gradientStr);\n  if (arr) {\n    var _arr$4$match;\n    var steps = ((_arr$4$match = arr[4].match(regexColorStop)) === null || _arr$4$match === void 0 ? void 0 : _arr$4$match.map(function (stop) {\n      return stop.split(':');\n    })) || [];\n    return {\n      cx: getOrCreateUnitValue(50, '%'),\n      cy: getOrCreateUnitValue(50, '%'),\n      steps: steps.map(function (_ref4) {\n        var _ref5 = _slicedToArray(_ref4, 2),\n          offset = _ref5[0],\n          color = _ref5[1];\n        return {\n          offset: getOrCreateUnitValue(Number(offset) * 100, '%'),\n          color: color\n        };\n      })\n    };\n  }\n  return null;\n}\nfunction parsePattern(patternStr) {\n  var arr = regexPR.exec(patternStr);\n  if (arr) {\n    var repetition = arr[1];\n    var src = arr[2];\n    switch (repetition) {\n      case 'a':\n        repetition = 'repeat';\n        break;\n      case 'x':\n        repetition = 'repeat-x';\n        break;\n      case 'y':\n        repetition = 'repeat-y';\n        break;\n      case 'n':\n        repetition = 'no-repeat';\n        break;\n      default:\n        repetition = 'no-repeat';\n    }\n    return {\n      image: src,\n      // @ts-ignore\n      repetition: repetition\n    };\n  }\n  return null;\n}\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createPattern\n */\n\nfunction isCSSGradientValue(object) {\n  return !!object.type && !!object.value;\n}\nfunction isPattern(object) {\n  return object && !!object.image;\n}\nfunction isCSSRGB(object) {\n  return object && !isNil(object.r) && !isNil(object.g) && !isNil(object.b);\n}\n\n/**\n * @see https://github.com/WebKit/WebKit/blob/main/Source/WebCore/css/parser/CSSParser.cpp#L97\n */\nvar parseColor = memoize(function (colorStr) {\n  if (isPattern(colorStr)) {\n    return _objectSpread({\n      repetition: 'repeat'\n    }, colorStr);\n  }\n  if (isNil(colorStr)) {\n    colorStr = '';\n  }\n  if (colorStr === 'transparent') {\n    // transparent black\n    return transparentColor;\n  }\n  if (colorStr === 'currentColor') {\n    // @see https://github.com/adobe-webplatform/Snap.svg/issues/526\n    colorStr = 'black';\n  } else if (colorStr === 'none') {\n    return noneColor;\n  }\n\n  // support CSS gradient syntax\n  var g = parseGradient(colorStr);\n  if (g) {\n    return g;\n  }\n\n  // constants\n  var color = d3.color(colorStr);\n  var rgba = [0, 0, 0, 0];\n  if (color !== null) {\n    rgba[0] = color.r || 0;\n    rgba[1] = color.g || 0;\n    rgba[2] = color.b || 0;\n    rgba[3] = color.opacity;\n  }\n\n  // return new CSSRGB(...rgba);\n  return getOrCreateRGBA.apply(void 0, rgba);\n});\nfunction mergeColors(left, right) {\n  // only support constant value, exclude gradient & pattern\n  if (!isCSSRGB(left) || !isCSSRGB(right)) {\n    return;\n  }\n  return [[Number(left.r), Number(left.g), Number(left.b), Number(left.alpha)], [Number(right.r), Number(right.g), Number(right.b), Number(right.alpha)], function (color) {\n    var rgba = color.slice();\n    if (rgba[3]) {\n      for (var i = 0; i < 3; i++) rgba[i] = Math.round(clamp(rgba[i], 0, 255));\n    }\n    rgba[3] = clamp(rgba[3], 0, 1);\n    return \"rgba(\".concat(rgba.join(','), \")\");\n  }];\n}\n\nfunction parseDimension(unitRegExp, string) {\n  if (isNil(string)) {\n    return getOrCreateUnitValue(0, 'px');\n  }\n  string = \"\".concat(string).trim().toLowerCase();\n  if (isFinite(Number(string))) {\n    if ('px'.search(unitRegExp) >= 0) {\n      return getOrCreateUnitValue(Number(string), 'px');\n    }\n    if ('deg'.search(unitRegExp) >= 0) {\n      return getOrCreateUnitValue(Number(string), 'deg');\n    }\n  }\n  var matchedUnits = [];\n  string = string.replace(unitRegExp, function (match) {\n    matchedUnits.push(match);\n    return \"U\".concat(match);\n  });\n  var taggedUnitRegExp = \"U(\".concat(unitRegExp.source, \")\");\n  return matchedUnits.map(function (unit) {\n    return getOrCreateUnitValue(Number(string.replace(new RegExp(\"U\".concat(unit), 'g'), '').replace(new RegExp(taggedUnitRegExp, 'g'), '*0')), unit);\n  })[0];\n}\n\n/**\n * <length>\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/length\n * length with only absolute unit, eg. 1px\n */\nvar parseLengthUnmemoize = function parseLengthUnmemoize(css) {\n  return parseDimension(new RegExp('px', 'g'), css);\n};\nvar parseLength = memoize(parseLengthUnmemoize);\n\n/**\n * <percentage>\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/percentage\n */\nvar parserPercentageUnmemoize = function parserPercentageUnmemoize(css) {\n  return parseDimension(new RegExp('%', 'g'), css);\n};\nmemoize(parserPercentageUnmemoize);\n\n/**\n * length with absolute or relative unit,\n * eg. 1px, 0.7em, 50%, calc(100% - 200px);\n *\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/length-percentage\n */\nvar parseLengthOrPercentageUnmemoize = function parseLengthOrPercentageUnmemoize(css) {\n  if (isNumber(css) || isFinite(Number(css))) {\n    // Number(css) is NaN\n    return getOrCreateUnitValue(Number(css) || 0, 'px');\n    // return Number(css);\n  }\n  return parseDimension(new RegExp('px|%|em|rem', 'g'), css);\n};\nvar parseLengthOrPercentage = memoize(parseLengthOrPercentageUnmemoize);\nvar parseAngleUnmemoize = function parseAngleUnmemoize(css) {\n  return parseDimension(new RegExp('deg|rad|grad|turn', 'g'), css);\n};\nvar parseAngle = memoize(parseAngleUnmemoize);\n\n/**\n * merge CSSUnitValue\n *\n * @example\n * 10px + 20px = 30px\n * 10deg + 10rad\n * 10% + 20% = 30%\n */\nfunction mergeDimensions(left, right, target, nonNegative) {\n  var index = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  var unit = '';\n  var leftValue = left.value || 0;\n  var rightValue = right.value || 0;\n  var canonicalUnit = toCanonicalUnit(left.unit);\n  var leftCanonicalUnitValue = left.convertTo(canonicalUnit);\n  var rightCanonicalUnitValue = right.convertTo(canonicalUnit);\n  if (leftCanonicalUnitValue && rightCanonicalUnitValue) {\n    leftValue = leftCanonicalUnitValue.value;\n    rightValue = rightCanonicalUnitValue.value;\n    unit = unitTypeToString(left.unit);\n  }\n  // format '%' to 'px'\n  else if (CSSUnitValue.isLength(left.unit) || CSSUnitValue.isLength(right.unit)) {\n    leftValue = convertPercentUnit(left, index, target);\n    rightValue = convertPercentUnit(right, index, target);\n    unit = 'px';\n  }\n  return [leftValue, rightValue, function (value) {\n    if (nonNegative) {\n      value = Math.max(value, 0);\n    }\n    return value + unit;\n  }];\n}\nfunction convertAngleUnit(value) {\n  var deg = 0;\n  if (value.unit === UnitType.kDegrees) {\n    deg = value.value;\n  } else if (value.unit === UnitType.kRadians) {\n    deg = rad2deg(Number(value.value));\n  } else if (value.unit === UnitType.kTurns) {\n    deg = turn2deg(Number(value.value));\n  } else if (value.value) {\n    deg = value.value;\n  }\n  return deg;\n}\nfunction parseDimensionArrayFormat(string, size) {\n  var parsed;\n  if (Array.isArray(string)) {\n    // [1, '2px', 3]\n    parsed = string.map(function (segment) {\n      return Number(segment);\n    });\n  } else if (isString(string)) {\n    parsed = string.split(' ').map(function (segment) {\n      return Number(segment);\n    });\n  } else if (isNumber(string)) {\n    parsed = [string];\n  }\n  if (size === 2) {\n    if (parsed.length === 1) {\n      return [parsed[0], parsed[0]];\n    }\n    return [parsed[0], parsed[1]];\n  }\n  if (size === 4) {\n    if (parsed.length === 1) {\n      return [parsed[0], parsed[0], parsed[0], parsed[0]];\n    }\n    if (parsed.length === 2) {\n      return [parsed[0], parsed[1], parsed[0], parsed[1]];\n    }\n    if (parsed.length === 3) {\n      return [parsed[0], parsed[1], parsed[2], parsed[1]];\n    }\n    return [parsed[0], parsed[1], parsed[2], parsed[3]];\n  }\n  if (size === 'even' && parsed.length % 2 === 1) {\n    return [].concat(_toConsumableArray(parsed), _toConsumableArray(parsed));\n  }\n  return parsed;\n}\n\n// export function mergeDimensionList(\n//   left: CSSUnitValue[],\n//   right: CSSUnitValue[],\n//   target: IElement | null,\n// ): [number[], number[], (list: number[]) => string] | undefined {\n//   if (left.length !== right.length) {\n//     return;\n//   }\n\n//   const unit = left[0].unit;\n\n//   return [\n//     left.map((l) => l.value),\n//     right.map((l) => l.value),\n//     (values: number[]) => {\n//       return values.map((n) => new CSSUnitValue(n, unit)).join(' ');\n//     },\n//   ];\n// }\n\nfunction convertPercentUnit(valueWithUnit, vec3Index, target) {\n  var useMin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  if (valueWithUnit.unit === UnitType.kPixels) {\n    return Number(valueWithUnit.value);\n  }\n  if (valueWithUnit.unit === UnitType.kPercentage && target) {\n    var bounds = target.nodeName === Shape.GROUP ? target.getLocalBounds() : target.getGeometryBounds();\n    return (useMin ? bounds.min[vec3Index] : 0) + valueWithUnit.value / 100 * bounds.halfExtents[vec3Index] * 2;\n  }\n  return 0;\n}\n\nvar parseParam = function parseParam(css) {\n  return parseDimension(/deg|rad|grad|turn|px|%/g, css);\n};\nvar supportedFilters = ['blur', 'brightness', 'drop-shadow', 'contrast', 'grayscale', 'sepia', 'saturate', 'hue-rotate', 'invert'];\nfunction parseFilter() {\n  var filterStr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  filterStr = filterStr.toLowerCase().trim();\n  if (filterStr === 'none') {\n    return [];\n  }\n  var filterRegExp = /\\s*([\\w-]+)\\(([^)]*)\\)/g;\n  var result = [];\n  var match;\n  var prevLastIndex = 0;\n  while (match = filterRegExp.exec(filterStr)) {\n    if (match.index !== prevLastIndex) {\n      return [];\n    }\n    prevLastIndex = match.index + match[0].length;\n    if (supportedFilters.indexOf(match[1]) > -1) {\n      result.push({\n        name: match[1],\n        params: match[2].split(' ').map(function (p) {\n          return parseParam(p) || parseColor(p);\n        })\n      });\n    }\n    if (filterRegExp.lastIndex === filterStr.length) {\n      return result;\n    }\n  }\n  return [];\n}\n\nfunction numberToString(x) {\n  // scale(0.00000001) -> scale(0)\n  // return x.toFixed(6).replace(/0+$/, '').replace(/\\.$/, '');\n  return x.toString();\n}\n\n/**\n * parse string or number to CSSUnitValue(numeric)\n *\n * eg.\n * * 0 -> CSSUnitValue(0)\n * * '2' -> CSSUnitValue(2)\n */\nvar parseNumberUnmemoize = function parseNumberUnmemoize(string) {\n  if (typeof string === 'number') {\n    return getOrCreateUnitValue(string);\n  }\n  if (/^\\s*[-+]?(\\d*\\.)?\\d+\\s*$/.test(string)) {\n    return getOrCreateUnitValue(Number(string));\n  }\n  return getOrCreateUnitValue(0);\n};\nvar parseNumber = memoize(parseNumberUnmemoize);\nmemoize(function (string) {\n  if (isString(string)) {\n    return string.split(' ').map(parseNumber);\n  }\n  return string.map(parseNumber);\n});\nfunction mergeNumbers(left, right) {\n  return [left, right, numberToString];\n}\nfunction clampedMergeNumbers(min, max) {\n  return function (left, right) {\n    return [left, right, function (x) {\n      return numberToString(clamp(x, min, max));\n    }];\n  };\n}\nfunction mergeNumberLists(left, right) {\n  if (left.length !== right.length) {\n    return;\n  }\n  return [left, right, function (numberList) {\n    return numberList;\n  }];\n}\n\nfunction getOrCalculatePathTotalLength(path) {\n  if (path.parsedStyle.d.totalLength === 0) {\n    path.parsedStyle.d.totalLength = getTotalLength(path.parsedStyle.d.absolutePath);\n  }\n  return path.parsedStyle.d.totalLength;\n}\nfunction getOrCalculatePolylineTotalLength(polyline) {\n  if (polyline.parsedStyle.points.totalLength === 0) {\n    polyline.parsedStyle.points.totalLength = polylineLength(polyline.parsedStyle.points.points);\n  }\n  return polyline.parsedStyle.points.totalLength;\n}\nfunction removeRedundantMCommand(path) {\n  for (var i = 0; i < path.length; i++) {\n    var prevSegment = path[i - 1];\n    var segment = path[i];\n    var cmd = segment[0];\n    if (cmd === 'M') {\n      if (prevSegment) {\n        var prevCmd = prevSegment[0];\n        var srcPoint = [segment[1], segment[2]];\n        var destPoint = void 0;\n        if (prevCmd === 'L' || prevCmd === 'M') {\n          destPoint = [prevSegment[1], prevSegment[2]];\n        } else if (prevCmd === 'C' || prevCmd === 'A' || prevCmd === 'Q') {\n          destPoint = [prevSegment[prevSegment.length - 2], prevSegment[prevSegment.length - 1]];\n        }\n        if (destPoint && isSamePoint(srcPoint, destPoint)) {\n          path.splice(i, 1);\n          i--;\n        }\n      }\n    }\n  }\n}\nfunction hasArcOrBezier(path) {\n  var hasArc = false;\n  var count = path.length;\n  for (var i = 0; i < count; i++) {\n    var params = path[i];\n    var cmd = params[0];\n    if (cmd === 'C' || cmd === 'A' || cmd === 'Q') {\n      hasArc = true;\n      break;\n    }\n  }\n  return hasArc;\n}\nfunction extractPolygons(pathArray) {\n  var polygons = [];\n  var polylines = [];\n  var points = []; //  'M'\n  for (var i = 0; i < pathArray.length; i++) {\n    var params = pathArray[i];\n    var cmd = params[0];\n    if (cmd === 'M') {\n      //  'M' \n      if (points.length) {\n        //  'Z'\n        polylines.push(points);\n        points = []; // \n      }\n      points.push([params[1], params[2]]);\n    } else if (cmd === 'Z') {\n      if (points.length) {\n        // \n        polygons.push(points);\n        points = []; // \n      }\n      //  'Z'\n    } else {\n      points.push([params[1], params[2]]);\n    }\n  }\n  //  points  polygons  polyline\n  //  M Z \n  if (points.length > 0) {\n    polylines.push(points);\n  }\n  return {\n    polygons: polygons,\n    polylines: polylines\n  };\n}\nfunction isSamePoint(point1, point2) {\n  return point1[0] === point2[0] && point1[1] === point2[1];\n}\nfunction getPathBBox(segments, lineWidth) {\n  var xArr = [];\n  var yArr = [];\n  var segmentsWithAngle = [];\n  for (var i = 0; i < segments.length; i++) {\n    var segment = segments[i];\n    var currentPoint = segment.currentPoint,\n      params = segment.params,\n      prePoint = segment.prePoint;\n    var box = void 0;\n    switch (segment.command) {\n      case 'Q':\n        box = quadBox(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4]);\n        break;\n      case 'C':\n        box = cubicBox(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4], params[5], params[6]);\n        break;\n      case 'A':\n        var arcParams = segment.arcParams;\n        box = arcBox(arcParams.cx, arcParams.cy, arcParams.rx, arcParams.ry, arcParams.xRotation, arcParams.startAngle, arcParams.endAngle);\n        break;\n      default:\n        xArr.push(currentPoint[0]);\n        yArr.push(currentPoint[1]);\n        break;\n    }\n    if (box) {\n      segment.box = box;\n      xArr.push(box.x, box.x + box.width);\n      yArr.push(box.y, box.y + box.height);\n    }\n    if (lineWidth && (segment.command === 'L' || segment.command === 'M') && segment.prePoint && segment.nextPoint) {\n      segmentsWithAngle.push(segment);\n    }\n  }\n  // bbox calculation should ignore NaN for path attribute\n  // ref: https://github.com/antvis/g/issues/210\n  // ref: https://github.com/antvis/G2/issues/3109\n  xArr = xArr.filter(function (item) {\n    return !Number.isNaN(item) && item !== Infinity && item !== -Infinity;\n  });\n  yArr = yArr.filter(function (item) {\n    return !Number.isNaN(item) && item !== Infinity && item !== -Infinity;\n  });\n  var minX = min(xArr);\n  var minY = min(yArr);\n  var maxX = max(xArr);\n  var maxY = max(yArr);\n  if (segmentsWithAngle.length === 0) {\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  }\n  for (var _i = 0; _i < segmentsWithAngle.length; _i++) {\n    var _segment = segmentsWithAngle[_i];\n    var _currentPoint = _segment.currentPoint;\n    var extra = void 0;\n    if (_currentPoint[0] === minX) {\n      extra = getExtraFromSegmentWithAngle(_segment, lineWidth);\n      minX -= extra.xExtra;\n    } else if (_currentPoint[0] === maxX) {\n      extra = getExtraFromSegmentWithAngle(_segment, lineWidth);\n      maxX += extra.xExtra;\n    }\n    if (_currentPoint[1] === minY) {\n      extra = getExtraFromSegmentWithAngle(_segment, lineWidth);\n      minY -= extra.yExtra;\n    } else if (_currentPoint[1] === maxY) {\n      extra = getExtraFromSegmentWithAngle(_segment, lineWidth);\n      maxY += extra.yExtra;\n    }\n  }\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  };\n}\nfunction getExtraFromSegmentWithAngle(segment, lineWidth) {\n  var prePoint = segment.prePoint,\n    currentPoint = segment.currentPoint,\n    nextPoint = segment.nextPoint;\n  var currentAndPre = Math.pow(currentPoint[0] - prePoint[0], 2) + Math.pow(currentPoint[1] - prePoint[1], 2);\n  var currentAndNext = Math.pow(currentPoint[0] - nextPoint[0], 2) + Math.pow(currentPoint[1] - nextPoint[1], 2);\n  var preAndNext = Math.pow(prePoint[0] - nextPoint[0], 2) + Math.pow(prePoint[1] - nextPoint[1], 2);\n  //  currentPoint \n  var currentAngle = Math.acos((currentAndPre + currentAndNext - preAndNext) / (2 * Math.sqrt(currentAndPre) * Math.sqrt(currentAndNext)));\n  //  0  PI \n  // :  0  0 \n  if (!currentAngle || Math.sin(currentAngle) === 0 || isNumberEqual(currentAngle, 0)) {\n    return {\n      xExtra: 0,\n      yExtra: 0\n    };\n  }\n  var xAngle = Math.abs(Math.atan2(nextPoint[1] - currentPoint[1], nextPoint[0] - currentPoint[0]));\n  var yAngle = Math.abs(Math.atan2(nextPoint[0] - currentPoint[0], nextPoint[1] - currentPoint[1]));\n  // \n  xAngle = xAngle > Math.PI / 2 ? Math.PI - xAngle : xAngle;\n  yAngle = yAngle > Math.PI / 2 ? Math.PI - yAngle : yAngle;\n  // \n  // \n  var extra = {\n    // \n    xExtra: Math.cos(currentAngle / 2 - xAngle) * (lineWidth / 2 * (1 / Math.sin(currentAngle / 2))) - lineWidth / 2 || 0,\n    // \n    yExtra: Math.cos(yAngle - currentAngle / 2) * (lineWidth / 2 * (1 / Math.sin(currentAngle / 2))) - lineWidth / 2 || 0\n  };\n  return extra;\n}\n\n// \nfunction toSymmetry(point, center) {\n  return [center[0] + (center[0] - point[0]), center[1] + (center[1] - point[1])];\n}\nvar angleBetween = function angleBetween(v0, v1) {\n  var p = v0.x * v1.x + v0.y * v1.y;\n  var n = Math.sqrt((Math.pow(v0.x, 2) + Math.pow(v0.y, 2)) * (Math.pow(v1.x, 2) + Math.pow(v1.y, 2)));\n  var sign = v0.x * v1.y - v0.y * v1.x < 0 ? -1 : 1;\n  var angle = sign * Math.acos(p / n);\n  return angle;\n};\n/**\n * @see https://github.com/rveciana/svg-path-properties/blob/b6bd9a322966f6ef7a311872d80c56e3718de861/src/arc.ts#L121\n */\nvar pointOnEllipticalArc = function pointOnEllipticalArc(p0, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, p1, t) {\n  // In accordance to: http://www.w3.org/TR/SVG/implnote.html#ArcOutOfRangeParameters\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  xAxisRotation = mod(xAxisRotation, 360);\n  var xAxisRotationRadians = deg2rad(xAxisRotation);\n  // If the endpoints are identical, then this is equivalent to omitting the elliptical arc segment entirely.\n  if (p0.x === p1.x && p0.y === p1.y) {\n    return {\n      x: p0.x,\n      y: p0.y,\n      ellipticalArcAngle: 0\n    }; // Check if angle is correct\n  }\n\n  // If rx = 0 or ry = 0 then this arc is treated as a straight line segment joining the endpoints.\n  if (rx === 0 || ry === 0) {\n    // return this.pointOnLine(p0, p1, t);\n    return {\n      x: 0,\n      y: 0,\n      ellipticalArcAngle: 0\n    }; // Check if angle is correct\n  }\n\n  // Following \"Conversion from endpoint to center parameterization\"\n  // http://www.w3.org/TR/SVG/implnote.html#ArcConversionEndpointToCenter\n\n  // Step #1: Compute transformedPoint\n  var dx = (p0.x - p1.x) / 2;\n  var dy = (p0.y - p1.y) / 2;\n  var transformedPoint = {\n    x: Math.cos(xAxisRotationRadians) * dx + Math.sin(xAxisRotationRadians) * dy,\n    y: -Math.sin(xAxisRotationRadians) * dx + Math.cos(xAxisRotationRadians) * dy\n  };\n  // Ensure radii are large enough\n  var radiiCheck = Math.pow(transformedPoint.x, 2) / Math.pow(rx, 2) + Math.pow(transformedPoint.y, 2) / Math.pow(ry, 2);\n  if (radiiCheck > 1) {\n    rx *= Math.sqrt(radiiCheck);\n    ry *= Math.sqrt(radiiCheck);\n  }\n\n  // Step #2: Compute transformedCenter\n  var cSquareNumerator = Math.pow(rx, 2) * Math.pow(ry, 2) - Math.pow(rx, 2) * Math.pow(transformedPoint.y, 2) - Math.pow(ry, 2) * Math.pow(transformedPoint.x, 2);\n  var cSquareRootDenom = Math.pow(rx, 2) * Math.pow(transformedPoint.y, 2) + Math.pow(ry, 2) * Math.pow(transformedPoint.x, 2);\n  var cRadicand = cSquareNumerator / cSquareRootDenom;\n  // Make sure this never drops below zero because of precision\n  cRadicand = cRadicand < 0 ? 0 : cRadicand;\n  var cCoef = (largeArcFlag !== sweepFlag ? 1 : -1) * Math.sqrt(cRadicand);\n  var transformedCenter = {\n    x: cCoef * (rx * transformedPoint.y / ry),\n    y: cCoef * (-(ry * transformedPoint.x) / rx)\n  };\n\n  // Step #3: Compute center\n  var center = {\n    x: Math.cos(xAxisRotationRadians) * transformedCenter.x - Math.sin(xAxisRotationRadians) * transformedCenter.y + (p0.x + p1.x) / 2,\n    y: Math.sin(xAxisRotationRadians) * transformedCenter.x + Math.cos(xAxisRotationRadians) * transformedCenter.y + (p0.y + p1.y) / 2\n  };\n\n  // Step #4: Compute start/sweep angles\n  // Start angle of the elliptical arc prior to the stretch and rotate operations.\n  // Difference between the start and end angles\n  var startVector = {\n    x: (transformedPoint.x - transformedCenter.x) / rx,\n    y: (transformedPoint.y - transformedCenter.y) / ry\n  };\n  var startAngle = angleBetween({\n    x: 1,\n    y: 0\n  }, startVector);\n  var endVector = {\n    x: (-transformedPoint.x - transformedCenter.x) / rx,\n    y: (-transformedPoint.y - transformedCenter.y) / ry\n  };\n  var sweepAngle = angleBetween(startVector, endVector);\n  if (!sweepFlag && sweepAngle > 0) {\n    sweepAngle -= 2 * Math.PI;\n  } else if (sweepFlag && sweepAngle < 0) {\n    sweepAngle += 2 * Math.PI;\n  }\n  // We use % instead of `mod(..)` because we want it to be -360deg to 360deg(but actually in radians)\n  sweepAngle %= 2 * Math.PI;\n\n  // From http://www.w3.org/TR/SVG/implnote.html#ArcParameterizationAlternatives\n  var angle = startAngle + sweepAngle * t;\n  var ellipseComponentX = rx * Math.cos(angle);\n  var ellipseComponentY = ry * Math.sin(angle);\n  var point = {\n    x: Math.cos(xAxisRotationRadians) * ellipseComponentX - Math.sin(xAxisRotationRadians) * ellipseComponentY + center.x,\n    y: Math.sin(xAxisRotationRadians) * ellipseComponentX + Math.cos(xAxisRotationRadians) * ellipseComponentY + center.y,\n    ellipticalArcStartAngle: startAngle,\n    ellipticalArcEndAngle: startAngle + sweepAngle,\n    ellipticalArcAngle: angle,\n    ellipticalArcCenter: center,\n    resultantRx: rx,\n    resultantRy: ry\n  };\n  return point;\n};\nfunction path2Segments(path) {\n  var segments = [];\n  var currentPoint = null; // \n  var nextParams = null; //  path \n  var startMovePoint = null; //  M \n  var lastStartMovePointIndex = 0; //  M \n  var count = path.length;\n  for (var i = 0; i < count; i++) {\n    var params = path[i];\n    nextParams = path[i + 1];\n    var command = params[0];\n    // \n    var segment = {\n      command: command,\n      prePoint: currentPoint,\n      params: params,\n      startTangent: null,\n      endTangent: null,\n      currentPoint: null,\n      nextPoint: null,\n      arcParams: null,\n      box: null,\n      cubicParams: null\n    };\n    switch (command) {\n      case 'M':\n        startMovePoint = [params[1], params[2]];\n        lastStartMovePointIndex = i;\n        break;\n      case 'A':\n        var arcParams = getArcParams(currentPoint, params);\n        segment.arcParams = arcParams;\n        break;\n    }\n    if (command === 'Z') {\n      //  Z  M \n      currentPoint = startMovePoint;\n      //  Z M  M \n      nextParams = path[lastStartMovePointIndex + 1];\n    } else {\n      var len = params.length;\n      currentPoint = [params[len - 2], params[len - 1]];\n    }\n    if (nextParams && nextParams[0] === 'Z') {\n      //  Z M \n      nextParams = path[lastStartMovePointIndex];\n      if (segments[lastStartMovePointIndex]) {\n        //  Z M \n        segments[lastStartMovePointIndex].prePoint = currentPoint;\n      }\n    }\n    segment.currentPoint = currentPoint;\n    //  M  M \n    if (segments[lastStartMovePointIndex] && isSamePoint(currentPoint, segments[lastStartMovePointIndex].currentPoint)) {\n      segments[lastStartMovePointIndex].prePoint = segment.prePoint;\n    }\n    var nextPoint = nextParams ? [nextParams[nextParams.length - 2], nextParams[nextParams.length - 1]] : null;\n    segment.nextPoint = nextPoint;\n    // Add startTangent and endTangent\n    var prePoint = segment.prePoint;\n    if (['L', 'H', 'V'].includes(command)) {\n      segment.startTangent = [prePoint[0] - currentPoint[0], prePoint[1] - currentPoint[1]];\n      segment.endTangent = [currentPoint[0] - prePoint[0], currentPoint[1] - prePoint[1]];\n    } else if (command === 'Q') {\n      // \n      var cp = [params[1], params[2]];\n      //  currentPoint\n      segment.startTangent = [prePoint[0] - cp[0], prePoint[1] - cp[1]];\n      segment.endTangent = [currentPoint[0] - cp[0], currentPoint[1] - cp[1]];\n    } else if (command === 'T') {\n      var preSegment = segments[i - 1];\n      var _cp = toSymmetry(preSegment.currentPoint, prePoint);\n      if (preSegment.command === 'Q') {\n        segment.command = 'Q';\n        segment.startTangent = [prePoint[0] - _cp[0], prePoint[1] - _cp[1]];\n        segment.endTangent = [currentPoint[0] - _cp[0], currentPoint[1] - _cp[1]];\n      } else {\n        // @ts-ignore\n        segment.command = 'TL';\n        segment.startTangent = [prePoint[0] - currentPoint[0], prePoint[1] - currentPoint[1]];\n        segment.endTangent = [currentPoint[0] - prePoint[0], currentPoint[1] - prePoint[1]];\n      }\n    } else if (command === 'C') {\n      // \n      var cp1 = [params[1], params[2]];\n      var cp2 = [params[3], params[4]];\n      segment.startTangent = [prePoint[0] - cp1[0], prePoint[1] - cp1[1]];\n      segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];\n\n      // horizontal line, eg. ['C', 100, 100, 100, 100, 200, 200]\n      if (segment.startTangent[0] === 0 && segment.startTangent[1] === 0) {\n        segment.startTangent = [cp1[0] - cp2[0], cp1[1] - cp2[1]];\n      }\n      if (segment.endTangent[0] === 0 && segment.endTangent[1] === 0) {\n        segment.endTangent = [cp2[0] - cp1[0], cp2[1] - cp1[1]];\n      }\n    } else if (command === 'S') {\n      var _preSegment = segments[i - 1];\n      var _cp2 = toSymmetry(_preSegment.currentPoint, prePoint);\n      var _cp3 = [params[1], params[2]];\n      if (_preSegment.command === 'C') {\n        segment.command = 'C'; //  S  C \n        segment.startTangent = [prePoint[0] - _cp2[0], prePoint[1] - _cp2[1]];\n        segment.endTangent = [currentPoint[0] - _cp3[0], currentPoint[1] - _cp3[1]];\n      } else {\n        // @ts-ignore\n        segment.command = 'SQ'; //  S  SQ \n        segment.startTangent = [prePoint[0] - _cp3[0], prePoint[1] - _cp3[1]];\n        segment.endTangent = [currentPoint[0] - _cp3[0], currentPoint[1] - _cp3[1]];\n      }\n    } else if (command === 'A') {\n      var _getTangentAtRatio = getTangentAtRatio(segment, 0),\n        dx1 = _getTangentAtRatio.x,\n        dy1 = _getTangentAtRatio.y;\n      var _getTangentAtRatio2 = getTangentAtRatio(segment, 1, false),\n        dx2 = _getTangentAtRatio2.x,\n        dy2 = _getTangentAtRatio2.y;\n      segment.startTangent = [dx1, dy1];\n      segment.endTangent = [dx2, dy2];\n    }\n    segments.push(segment);\n  }\n  return segments;\n}\n\n/**\n * Use length instead of ratio\n */\nfunction getTangentAtRatio(segment, ratio) {\n  var sign = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var _segment$arcParams = segment.arcParams,\n    _segment$arcParams$rx = _segment$arcParams.rx,\n    rx = _segment$arcParams$rx === void 0 ? 0 : _segment$arcParams$rx,\n    _segment$arcParams$ry = _segment$arcParams.ry,\n    ry = _segment$arcParams$ry === void 0 ? 0 : _segment$arcParams$ry,\n    xRotation = _segment$arcParams.xRotation,\n    arcFlag = _segment$arcParams.arcFlag,\n    sweepFlag = _segment$arcParams.sweepFlag;\n  var p1 = pointOnEllipticalArc({\n    x: segment.prePoint[0],\n    y: segment.prePoint[1]\n  }, rx, ry, xRotation, !!arcFlag, !!sweepFlag, {\n    x: segment.currentPoint[0],\n    y: segment.currentPoint[1]\n  }, ratio);\n  var p2 = pointOnEllipticalArc({\n    x: segment.prePoint[0],\n    y: segment.prePoint[1]\n  }, rx, ry, xRotation, !!arcFlag, !!sweepFlag, {\n    x: segment.currentPoint[0],\n    y: segment.currentPoint[1]\n  }, sign ? ratio + 0.005 : ratio - 0.005);\n  var xDist = p2.x - p1.x;\n  var yDist = p2.y - p1.y;\n  var dist = Math.sqrt(xDist * xDist + yDist * yDist);\n  return {\n    x: -xDist / dist,\n    y: -yDist / dist\n  };\n}\n\n// \nfunction vMag(v) {\n  return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n\n// u.v/|u||v|\nfunction vRatio(u, v) {\n  //  0  0 1\n  return vMag(u) * vMag(v) ? (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v)) : 1;\n}\n\n// \nfunction vAngle(u, v) {\n  return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n}\nfunction getArcParams(startPoint, params) {\n  var rx = params[1];\n  var ry = params[2];\n  var xRotation = mod(deg2rad(params[3]), Math.PI * 2);\n  var arcFlag = params[4];\n  var sweepFlag = params[5];\n  // \n  var x1 = startPoint[0];\n  var y1 = startPoint[1];\n  // \n  var x2 = params[6];\n  var y2 = params[7];\n  var xp = Math.cos(xRotation) * (x1 - x2) / 2.0 + Math.sin(xRotation) * (y1 - y2) / 2.0;\n  var yp = -1 * Math.sin(xRotation) * (x1 - x2) / 2.0 + Math.cos(xRotation) * (y1 - y2) / 2.0;\n  var lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n  var diff = rx * rx * (yp * yp) + ry * ry * (xp * xp);\n  var f = diff ? Math.sqrt((rx * rx * (ry * ry) - diff) / diff) : 1;\n  if (arcFlag === sweepFlag) {\n    f *= -1;\n  }\n  if (isNaN(f)) {\n    f = 0;\n  }\n\n  //  0  (0, 0) \n  var cxp = ry ? f * rx * yp / ry : 0;\n  var cyp = rx ? f * -ry * xp / rx : 0;\n\n  // \n  var cx = (x1 + x2) / 2.0 + Math.cos(xRotation) * cxp - Math.sin(xRotation) * cyp;\n  var cy = (y1 + y2) / 2.0 + Math.sin(xRotation) * cxp + Math.cos(xRotation) * cyp;\n\n  // \n  var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n  // \n  var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n  //  x \n  var theta = vAngle([1, 0], u);\n\n  // \n  var dTheta = vAngle(u, v);\n  if (vRatio(u, v) <= -1) {\n    dTheta = Math.PI;\n  }\n  if (vRatio(u, v) >= 1) {\n    dTheta = 0;\n  }\n  if (sweepFlag === 0 && dTheta > 0) {\n    dTheta -= 2 * Math.PI;\n  }\n  if (sweepFlag === 1 && dTheta < 0) {\n    dTheta += 2 * Math.PI;\n  }\n  return {\n    cx: cx,\n    cy: cy,\n    //  0 \n    rx: isSamePoint(startPoint, [x2, y2]) ? 0 : rx,\n    ry: isSamePoint(startPoint, [x2, y2]) ? 0 : ry,\n    startAngle: theta,\n    endAngle: theta + dTheta,\n    xRotation: xRotation,\n    arcFlag: arcFlag,\n    sweepFlag: sweepFlag\n  };\n}\nfunction commandsToPathString(commands, object, transform) {\n  return commands.reduce(function (prev, cur) {\n    var path = '';\n    if (cur[0] === 'M' || cur[0] === 'L') {\n      var p = vec3.fromValues(cur[1], cur[2], 0);\n      if (transform) {\n        vec3.transformMat4(p, p, transform);\n      }\n      path = \"\".concat(cur[0]).concat(p[0], \",\").concat(p[1]);\n    } else if (cur[0] === 'Z') {\n      path = cur[0];\n    } else if (cur[0] === 'C') {\n      var p1 = vec3.fromValues(cur[1], cur[2], 0);\n      var p2 = vec3.fromValues(cur[3], cur[4], 0);\n      var p3 = vec3.fromValues(cur[5], cur[6], 0);\n      if (transform) {\n        vec3.transformMat4(p1, p1, transform);\n        vec3.transformMat4(p2, p2, transform);\n        vec3.transformMat4(p3, p3, transform);\n      }\n      path = \"\".concat(cur[0]).concat(p1[0], \",\").concat(p1[1], \",\").concat(p2[0], \",\").concat(p2[1], \",\").concat(p3[0], \",\").concat(p3[1]);\n    } else if (cur[0] === 'A') {\n      var c = vec3.fromValues(cur[6], cur[7], 0);\n      if (transform) {\n        vec3.transformMat4(c, c, transform);\n      }\n      path = \"\".concat(cur[0]).concat(cur[1], \",\").concat(cur[2], \",\").concat(cur[3], \",\").concat(cur[4], \",\").concat(cur[5], \",\").concat(c[0], \",\").concat(c[1]);\n    } else if (cur[0] === 'Q') {\n      var _p = vec3.fromValues(cur[1], cur[2], 0);\n      var _p2 = vec3.fromValues(cur[3], cur[4], 0);\n      if (transform) {\n        vec3.transformMat4(_p, _p, transform);\n        vec3.transformMat4(_p2, _p2, transform);\n      }\n      path = \"\".concat(cur[0]).concat(cur[1], \",\").concat(cur[2], \",\").concat(cur[3], \",\").concat(cur[4], \"}\");\n    }\n    return prev += path;\n  }, '');\n}\nfunction lineToCommands(x1, y1, x2, y2) {\n  return [['M', x1, y1], ['L', x2, y2]];\n}\nfunction ellipseToCommands(rx, ry, cx, cy) {\n  var factor = (-1 + Math.sqrt(2)) / 3 * 4;\n  var dx = rx * factor;\n  var dy = ry * factor;\n  var left = cx - rx;\n  var right = cx + rx;\n  var top = cy - ry;\n  var bottom = cy + ry;\n  return [['M', left, cy], ['C', left, cy - dy, cx - dx, top, cx, top], ['C', cx + dx, top, right, cy - dy, right, cy], ['C', right, cy + dy, cx + dx, bottom, cx, bottom], ['C', cx - dx, bottom, left, cy + dy, left, cy], ['Z']];\n}\nfunction polygonToCommands(points, closed) {\n  var result = points.map(function (point, i) {\n    return [i === 0 ? 'M' : 'L', point[0], point[1]];\n  });\n  if (closed) {\n    result.push(['Z']);\n  }\n  return result;\n}\nfunction rectToCommands(width, height, x, y, radius) {\n  // @see https://gist.github.com/danielpquinn/dd966af424030d47e476\n  if (radius) {\n    var _radius = _slicedToArray(radius, 4),\n      tlr = _radius[0],\n      trr = _radius[1],\n      brr = _radius[2],\n      blr = _radius[3];\n    var signX = width > 0 ? 1 : -1;\n    var signY = height > 0 ? 1 : -1;\n    // sweep-flag @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Tutorial/Paths#arcs\n    var sweepFlag = signX + signY !== 0 ? 1 : 0;\n    return [['M', signX * tlr + x, y], ['L', width - signX * trr + x, y], trr ? ['A', trr, trr, 0, 0, sweepFlag, width + x, signY * trr + y] : null, ['L', width + x, height - signY * brr + y], brr ? ['A', brr, brr, 0, 0, sweepFlag, width + x - signX * brr, height + y] : null, ['L', x + signX * blr, height + y], blr ? ['A', blr, blr, 0, 0, sweepFlag, x, height + y - signY * blr] : null, ['L', x, signY * tlr + y], tlr ? ['A', tlr, tlr, 0, 0, sweepFlag, signX * tlr + x, y] : null, ['Z']].filter(function (command) {\n      return command;\n    });\n  }\n  return [['M', x, y], ['L', x + width, y], ['L', x + width, y + height], ['L', x, y + height], ['Z']];\n}\n\n/**\n * convert object to path, should account for:\n * * transform & origin\n * * lineWidth\n */\nfunction convertToPath(object) {\n  var transform = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : object.getLocalTransform();\n  var commands = [];\n  switch (object.nodeName) {\n    case Shape.LINE:\n      var _parsedStyle = object.parsedStyle,\n        _parsedStyle$x = _parsedStyle.x1,\n        x1 = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n        _parsedStyle$y = _parsedStyle.y1,\n        y1 = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y,\n        _parsedStyle$x2 = _parsedStyle.x2,\n        x2 = _parsedStyle$x2 === void 0 ? 0 : _parsedStyle$x2,\n        _parsedStyle$y2 = _parsedStyle.y2,\n        y2 = _parsedStyle$y2 === void 0 ? 0 : _parsedStyle$y2;\n      commands = lineToCommands(x1, y1, x2, y2);\n      break;\n    case Shape.CIRCLE:\n      {\n        var _parsedStyle2 = object.parsedStyle,\n          _parsedStyle2$r = _parsedStyle2.r,\n          r = _parsedStyle2$r === void 0 ? 0 : _parsedStyle2$r,\n          _parsedStyle2$cx = _parsedStyle2.cx,\n          cx = _parsedStyle2$cx === void 0 ? 0 : _parsedStyle2$cx,\n          _parsedStyle2$cy = _parsedStyle2.cy,\n          cy = _parsedStyle2$cy === void 0 ? 0 : _parsedStyle2$cy;\n        commands = ellipseToCommands(r, r, cx, cy);\n        break;\n      }\n    case Shape.ELLIPSE:\n      {\n        var _parsedStyle3 = object.parsedStyle,\n          _parsedStyle3$rx = _parsedStyle3.rx,\n          rx = _parsedStyle3$rx === void 0 ? 0 : _parsedStyle3$rx,\n          _parsedStyle3$ry = _parsedStyle3.ry,\n          ry = _parsedStyle3$ry === void 0 ? 0 : _parsedStyle3$ry,\n          _parsedStyle3$cx = _parsedStyle3.cx,\n          _cx = _parsedStyle3$cx === void 0 ? 0 : _parsedStyle3$cx,\n          _parsedStyle3$cy = _parsedStyle3.cy,\n          _cy = _parsedStyle3$cy === void 0 ? 0 : _parsedStyle3$cy;\n        commands = ellipseToCommands(rx, ry, _cx, _cy);\n        break;\n      }\n    case Shape.POLYLINE:\n    case Shape.POLYGON:\n      var points = object.parsedStyle.points;\n      commands = polygonToCommands(points.points, object.nodeName === Shape.POLYGON);\n      break;\n    case Shape.RECT:\n      var _parsedStyle4 = object.parsedStyle,\n        _parsedStyle4$width = _parsedStyle4.width,\n        width = _parsedStyle4$width === void 0 ? 0 : _parsedStyle4$width,\n        _parsedStyle4$height = _parsedStyle4.height,\n        height = _parsedStyle4$height === void 0 ? 0 : _parsedStyle4$height,\n        _parsedStyle4$x = _parsedStyle4.x,\n        x = _parsedStyle4$x === void 0 ? 0 : _parsedStyle4$x,\n        _parsedStyle4$y = _parsedStyle4.y,\n        y = _parsedStyle4$y === void 0 ? 0 : _parsedStyle4$y,\n        radius = _parsedStyle4.radius;\n      var hasRadius = radius && radius.some(function (r) {\n        return r !== 0;\n      });\n      commands = rectToCommands(width, height, x, y, hasRadius && radius.map(function (r) {\n        return clamp(r, 0, Math.min(Math.abs(width) / 2, Math.abs(height) / 2));\n      }));\n      break;\n    case Shape.PATH:\n      var absolutePath = object.parsedStyle.d.absolutePath;\n      commands = _toConsumableArray(absolutePath);\n      break;\n  }\n  if (commands.length) {\n    return commandsToPathString(commands, object, transform);\n  }\n}\nfunction translatePathToString(absolutePath) {\n  var startOffsetX = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var startOffsetY = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var endOffsetX = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  var endOffsetY = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  var newValue = absolutePath.map(function (params, i) {\n    var command = params[0];\n    var nextSegment = absolutePath[i + 1];\n    var useStartOffset = i === 0 && (startOffsetX !== 0 || startOffsetY !== 0);\n    var useEndOffset = (i === absolutePath.length - 1 || nextSegment && (nextSegment[0] === 'M' || nextSegment[0] === 'Z')) && endOffsetX !== 0 && endOffsetY !== 0;\n    var _ref = useStartOffset ? [startOffsetX, startOffsetY] : [0, 0],\n      _ref2 = _slicedToArray(_ref, 2),\n      startOffsetXTemp = _ref2[0],\n      startOffsetYTemp = _ref2[1];\n    var _ref3 = useEndOffset ? [endOffsetX, endOffsetY] : [0, 0],\n      _ref4 = _slicedToArray(_ref3, 2),\n      endOffsetXTemp = _ref4[0],\n      endOffsetYTemp = _ref4[1];\n    switch (command) {\n      case 'M':\n        return \"M \".concat(params[1] + startOffsetXTemp, \",\").concat(params[2] + startOffsetYTemp);\n      case 'L':\n        return \"L \".concat(params[1] + endOffsetXTemp, \",\").concat(params[2] + endOffsetYTemp);\n      case 'Q':\n        return \"Q \".concat(params[1], \" \").concat(params[2], \",\").concat(params[3] + endOffsetXTemp, \" \").concat(params[4] + endOffsetYTemp);\n      case 'C':\n        return \"C \".concat(params[1], \" \").concat(params[2], \",\").concat(params[3], \" \").concat(params[4], \",\").concat(params[5] + endOffsetXTemp, \" \").concat(params[6] + endOffsetYTemp);\n      case 'A':\n        return \"A \".concat(params[1], \" \").concat(params[2], \" \").concat(params[3], \" \").concat(params[4], \" \").concat(params[5], \" \").concat(params[6], \" \").concat(params[7]).concat(useEndOffset ? \" L \".concat(params[6] + endOffsetX, \",\").concat(params[7] + endOffsetY) : '');\n      case 'Z':\n        return 'Z';\n      default:\n        return null;\n    }\n  }).filter(function (item) {\n    return item !== null;\n  }).join(' ');\n  if (~newValue.indexOf('NaN')) {\n    return '';\n  }\n  return newValue;\n}\n\nvar internalParsePath = function internalParsePath(path) {\n  // empty path\n  if (path === '' || Array.isArray(path) && path.length === 0) {\n    return {\n      absolutePath: [],\n      hasArc: false,\n      segments: [],\n      polygons: [],\n      polylines: [],\n      curve: null,\n      totalLength: 0,\n      rect: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      }\n    };\n  }\n  var absolutePath;\n  try {\n    absolutePath = normalizePath(path);\n  } catch (_unused) {\n    absolutePath = normalizePath('');\n    console.error(\"[g]: Invalid SVG Path definition: \".concat(path));\n  }\n  removeRedundantMCommand(absolutePath);\n  var hasArc = hasArcOrBezier(absolutePath);\n  var _extractPolygons = extractPolygons(absolutePath),\n    polygons = _extractPolygons.polygons,\n    polylines = _extractPolygons.polylines;\n\n  // for later use\n  var segments = path2Segments(absolutePath);\n\n  // Only calculate bbox here since we don't need length now.\n  var _getPathBBox = getPathBBox(segments, 0),\n    x = _getPathBBox.x,\n    y = _getPathBBox.y,\n    width = _getPathBBox.width,\n    height = _getPathBBox.height;\n  return {\n    absolutePath: absolutePath,\n    hasArc: hasArc,\n    segments: segments,\n    polygons: polygons,\n    polylines: polylines,\n    // curve,\n    // Delay the calculation of length.\n    totalLength: 0,\n    rect: {\n      x: Number.isFinite(x) ? x : 0,\n      y: Number.isFinite(y) ? y : 0,\n      width: Number.isFinite(width) ? width : 0,\n      height: Number.isFinite(height) ? height : 0\n    }\n  };\n};\nvar memoizedParsePath = memoize(internalParsePath);\nfunction parsePath(path) {\n  return isString(path) ? memoizedParsePath(path) : internalParsePath(path);\n}\nfunction mergePaths(left, right, object) {\n  var curve1 = left.curve;\n  var curve2 = right.curve;\n  if (!curve1 || curve1.length === 0) {\n    // convert to curves to do morphing & picking later\n    // @see http://thednp.github.io/kute.js/svgCubicMorph.html\n    curve1 = path2Curve(left.absolutePath, false);\n    left.curve = curve1;\n  }\n  if (!curve2 || curve2.length === 0) {\n    curve2 = path2Curve(right.absolutePath, false);\n    right.curve = curve2;\n  }\n  var curves = [curve1, curve2];\n  if (curve1.length !== curve2.length) {\n    curves = equalizeSegments(curve1, curve2);\n  }\n  var curve0 = getDrawDirection(curves[0]) !== getDrawDirection(curves[1]) ? reverseCurve(curves[0]) : clonePath(curves[0]);\n  return [curve0, getRotatedCurve(curves[1], curve0), function (pathArray) {\n    // need converting to path string?\n    return pathArray;\n  }];\n}\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Attribute/points\n *\n * @example\n * points=\"100,10 250,150 200,110\"\n */\nfunction parsePoints(pointsOrStr, object) {\n  var points;\n  if (isString(pointsOrStr)) {\n    points = pointsOrStr.split(' ').map(function (pointStr) {\n      var _pointStr$split = pointStr.split(','),\n        _pointStr$split2 = _slicedToArray(_pointStr$split, 2),\n        x = _pointStr$split2[0],\n        y = _pointStr$split2[1];\n      return [Number(x), Number(y)];\n    });\n  } else {\n    points = pointsOrStr;\n  }\n  return {\n    points: points,\n    totalLength: 0,\n    segments: []\n  };\n}\nfunction mergePoints(left, right) {\n  return [left.points, right.points, function (points) {\n    return points;\n  }];\n}\n\n// eg. { t: 'scale', d: [CSSUnitValue(1), CSSUnitValue(2)] }\n\nvar _ = null;\nvar TRANSFORM_REGEXP = /\\s*(\\w+)\\(([^)]*)\\)/g;\nfunction cast(pattern) {\n  return function (contents) {\n    var i = 0;\n    return pattern.map(function (x) {\n      return x === _ ? contents[i++] : x;\n    });\n  };\n}\nfunction id(x) {\n  return x;\n}\n\n// type: [argTypes, convertTo3D, convertTo2D]\n// In the argument types string, lowercase characters represent optional arguments\nvar transformFunctions = {\n  // @ts-ignore\n  matrix: ['NNNNNN', [_, _, 0, 0, _, _, 0, 0, 0, 0, 1, 0, _, _, 0, 1], id],\n  matrix3d: ['NNNNNNNNNNNNNNNN', id],\n  rotate: ['A'],\n  rotateX: ['A'],\n  rotateY: ['A'],\n  rotateZ: ['A'],\n  rotate3d: ['NNNA'],\n  perspective: ['L'],\n  scale: ['Nn', cast([_, _, new CSSUnitValue(1)]), id],\n  scaleX: ['N', cast([_, new CSSUnitValue(1), new CSSUnitValue(1)]), cast([_, new CSSUnitValue(1)])],\n  scaleY: ['N', cast([new CSSUnitValue(1), _, new CSSUnitValue(1)]), cast([new CSSUnitValue(1), _])],\n  scaleZ: ['N', cast([new CSSUnitValue(1), new CSSUnitValue(1), _])],\n  scale3d: ['NNN', id],\n  skew: ['Aa', null, id],\n  skewX: ['A', null, cast([_, Odeg])],\n  skewY: ['A', null, cast([Odeg, _])],\n  translate: ['Tt', cast([_, _, Opx]), id],\n  translateX: ['T', cast([_, Opx, Opx]), cast([_, Opx])],\n  translateY: ['T', cast([Opx, _, Opx]), cast([Opx, _])],\n  translateZ: ['L', cast([Opx, Opx, _])],\n  translate3d: ['TTL', id]\n};\nfunction parseArrayTransform(transform) {\n  var result = [];\n  var length = transform.length;\n  for (var i = 0; i < length; i++) {\n    var item = transform[i];\n    var name = item[0];\n    var args = item.slice(1);\n    // infer default value\n    if (name === 'translate' || name === 'skew') {\n      if (args.length === 1) args.push(0);\n    } else if (name === 'scale') {\n      if (args.length === 1) args.push(args[0]);\n    }\n    var functionData = transformFunctions[name];\n    if (!functionData) return [];\n    var parsedArgs = args.map(function (value) {\n      return getOrCreateUnitValue(value);\n    });\n    result.push({\n      t: name,\n      d: parsedArgs\n    });\n  }\n  return result;\n}\n\n/**\n * none\n * scale(1) scale(1, 2)\n * scaleX(1)\n */\nfunction parseTransform(transform) {\n  if (Array.isArray(transform)) {\n    return parseArrayTransform(transform);\n  }\n  transform = (transform || 'none').trim();\n  if (transform === 'none') {\n    return [];\n  }\n  var result = [];\n  var match;\n  var prevLastIndex = 0;\n  TRANSFORM_REGEXP.lastIndex = 0;\n  while (match = TRANSFORM_REGEXP.exec(transform)) {\n    if (match.index !== prevLastIndex) {\n      return [];\n    }\n    prevLastIndex = match.index + match[0].length;\n    var functionName = match[1]; // scale\n    var functionData = transformFunctions[functionName]; // scale(1, 2)\n    if (!functionData) {\n      // invalid, eg. scale()\n      return [];\n    }\n    var args = match[2].split(','); // 1,2\n    var argTypes = functionData[0]; // Nn\n    if (argTypes.length < args.length) {\n      // scale(N, n)\n      return [];\n    }\n    var parsedArgs = [];\n    for (var i = 0; i < argTypes.length; i++) {\n      var arg = args[i];\n      var type = argTypes[i];\n      var parsedArg = void 0;\n      if (!arg) {\n        // @ts-ignore\n        parsedArg = {\n          a: Odeg,\n          n: parsedArgs[0],\n          t: Opx\n        }[type];\n      } else {\n        // @ts-ignore\n        parsedArg = {\n          A: function A(s) {\n            return s.trim() === '0' ? Odeg : parseAngle(s);\n          },\n          N: parseNumber,\n          T: parseLengthOrPercentage,\n          L: parseLength\n        }[type.toUpperCase()](arg);\n      }\n      if (parsedArg === undefined) {\n        return [];\n      }\n      parsedArgs.push(parsedArg);\n    }\n    result.push({\n      t: functionName,\n      d: parsedArgs\n    }); // { t: scale, d: [1, 2] }\n\n    if (TRANSFORM_REGEXP.lastIndex === transform.length) {\n      return result;\n    }\n  }\n  return [];\n}\nfunction parseTransformUnmemoize(transform) {\n  if (Array.isArray(transform)) {\n    return parseArrayTransform(transform);\n  }\n  transform = (transform || 'none').trim();\n  if (transform === 'none') {\n    return [];\n  }\n  var result = [];\n  var match;\n  var prevLastIndex = 0;\n  TRANSFORM_REGEXP.lastIndex = 0;\n  while (match = TRANSFORM_REGEXP.exec(transform)) {\n    if (match.index !== prevLastIndex) {\n      return [];\n    }\n    prevLastIndex = match.index + match[0].length;\n    var functionName = match[1]; // scale\n    var functionData = transformFunctions[functionName]; // scale(1, 2)\n    if (!functionData) {\n      // invalid, eg. scale()\n      return [];\n    }\n    var args = match[2].split(','); // 1,2\n    var argTypes = functionData[0]; // Nn\n    if (argTypes.length < args.length) {\n      // scale(N, n)\n      return [];\n    }\n    var parsedArgs = [];\n    for (var i = 0; i < argTypes.length; i++) {\n      var arg = args[i];\n      var type = argTypes[i];\n      var parsedArg = void 0;\n      if (!arg) {\n        // @ts-ignore\n        parsedArg = {\n          a: Odeg,\n          n: parsedArgs[0],\n          t: Opx\n        }[type];\n      } else {\n        // @ts-ignore\n        parsedArg = {\n          A: function A(s) {\n            return s.trim() === '0' ? Odeg : parseAngleUnmemoize(s);\n          },\n          N: parseNumberUnmemoize,\n          T: parseLengthOrPercentageUnmemoize,\n          L: parseLengthUnmemoize\n        }[type.toUpperCase()](arg);\n      }\n      if (parsedArg === undefined) {\n        return [];\n      }\n      parsedArgs.push(parsedArg);\n    }\n    result.push({\n      t: functionName,\n      d: parsedArgs\n    }); // { t: scale, d: [1, 2] }\n\n    if (TRANSFORM_REGEXP.lastIndex === transform.length) {\n      return result;\n    }\n  }\n  return [];\n}\nfunction convertItemToMatrix(item) {\n  var x;\n  var y;\n  var z;\n  var angle;\n  switch (item.t) {\n    case 'rotateX':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [1, 0, 0, 0, 0, Math.cos(angle), Math.sin(angle), 0, 0, -Math.sin(angle), Math.cos(angle), 0, 0, 0, 0, 1];\n    case 'rotateY':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [Math.cos(angle), 0, -Math.sin(angle), 0, 0, 1, 0, 0, Math.sin(angle), 0, Math.cos(angle), 0, 0, 0, 0, 1];\n    case 'rotate':\n    case 'rotateZ':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [Math.cos(angle), Math.sin(angle), 0, 0, -Math.sin(angle), Math.cos(angle), 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'rotate3d':\n      x = item.d[0].value;\n      y = item.d[1].value;\n      z = item.d[2].value;\n      angle = deg2rad(convertAngleUnit(item.d[3]));\n      var sqrLength = x * x + y * y + z * z;\n      if (sqrLength === 0) {\n        x = 1;\n        y = 0;\n        z = 0;\n      } else if (sqrLength !== 1) {\n        var length = Math.sqrt(sqrLength);\n        x /= length;\n        y /= length;\n        z /= length;\n      }\n      var s = Math.sin(angle / 2);\n      var sc = s * Math.cos(angle / 2);\n      var sq = s * s;\n      return [1 - 2 * (y * y + z * z) * sq, 2 * (x * y * sq + z * sc), 2 * (x * z * sq - y * sc), 0, 2 * (x * y * sq - z * sc), 1 - 2 * (x * x + z * z) * sq, 2 * (y * z * sq + x * sc), 0, 2 * (x * z * sq + y * sc), 2 * (y * z * sq - x * sc), 1 - 2 * (x * x + y * y) * sq, 0, 0, 0, 0, 1];\n    case 'scale':\n      return [item.d[0].value, 0, 0, 0, 0, item.d[1].value, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'scaleX':\n      return [item.d[0].value, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'scaleY':\n      return [1, 0, 0, 0, 0, item.d[0].value, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'scaleZ':\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, item.d[0].value, 0, 0, 0, 0, 1];\n    case 'scale3d':\n      return [item.d[0].value, 0, 0, 0, 0, item.d[1].value, 0, 0, 0, 0, item.d[2].value, 0, 0, 0, 0, 1];\n    case 'skew':\n      var xAngle = deg2rad(convertAngleUnit(item.d[0]));\n      var yAngle = deg2rad(convertAngleUnit(item.d[1]));\n      return [1, Math.tan(yAngle), 0, 0, Math.tan(xAngle), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'skewX':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [1, 0, 0, 0, Math.tan(angle), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'skewY':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [1, Math.tan(angle), 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'translate':\n      // TODO: pass target\n      x = convertPercentUnit(item.d[0], 0, null) || 0;\n      y = convertPercentUnit(item.d[1], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, y, 0, 1];\n    case 'translateX':\n      x = convertPercentUnit(item.d[0], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, 0, 0, 1];\n    case 'translateY':\n      y = convertPercentUnit(item.d[0], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, y, 0, 1];\n    case 'translateZ':\n      z = convertPercentUnit(item.d[0], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, z, 1];\n    case 'translate3d':\n      x = convertPercentUnit(item.d[0], 0, null) || 0;\n      y = convertPercentUnit(item.d[1], 0, null) || 0;\n      z = convertPercentUnit(item.d[2], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, y, z, 1];\n    case 'perspective':\n      var t = convertPercentUnit(item.d[0], 0, null) || 0;\n      var p = t ? -1 / t : 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, p, 0, 0, 0, 1];\n    case 'matrix':\n      return [item.d[0].value, item.d[1].value, 0, 0, item.d[2].value, item.d[3].value, 0, 0, 0, 0, 1, 0, item.d[4].value, item.d[5].value, 0, 1];\n    case 'matrix3d':\n      return item.d.map(function (d) {\n        return d.value;\n      });\n  }\n}\nfunction multiplyMatrices(a, b) {\n  return [a[0] * b[0] + a[4] * b[1] + a[8] * b[2] + a[12] * b[3], a[1] * b[0] + a[5] * b[1] + a[9] * b[2] + a[13] * b[3], a[2] * b[0] + a[6] * b[1] + a[10] * b[2] + a[14] * b[3], a[3] * b[0] + a[7] * b[1] + a[11] * b[2] + a[15] * b[3], a[0] * b[4] + a[4] * b[5] + a[8] * b[6] + a[12] * b[7], a[1] * b[4] + a[5] * b[5] + a[9] * b[6] + a[13] * b[7], a[2] * b[4] + a[6] * b[5] + a[10] * b[6] + a[14] * b[7], a[3] * b[4] + a[7] * b[5] + a[11] * b[6] + a[15] * b[7], a[0] * b[8] + a[4] * b[9] + a[8] * b[10] + a[12] * b[11], a[1] * b[8] + a[5] * b[9] + a[9] * b[10] + a[13] * b[11], a[2] * b[8] + a[6] * b[9] + a[10] * b[10] + a[14] * b[11], a[3] * b[8] + a[7] * b[9] + a[11] * b[10] + a[15] * b[11], a[0] * b[12] + a[4] * b[13] + a[8] * b[14] + a[12] * b[15], a[1] * b[12] + a[5] * b[13] + a[9] * b[14] + a[13] * b[15], a[2] * b[12] + a[6] * b[13] + a[10] * b[14] + a[14] * b[15], a[3] * b[12] + a[7] * b[13] + a[11] * b[14] + a[15] * b[15]];\n}\nfunction convertToMatrix(transformList) {\n  if (transformList.length === 0) {\n    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n  }\n  return transformList.map(convertItemToMatrix).reduce(multiplyMatrices);\n}\nfunction makeMatrixDecomposition(transformList) {\n  var translate = [0, 0, 0];\n  var scale = [1, 1, 1];\n  var skew = [0, 0, 0];\n  var perspective = [0, 0, 0, 1];\n  var quaternion = [0, 0, 0, 1];\n  decomposeMat4(\n  // @ts-ignore\n  convertToMatrix(transformList), translate, scale, skew, perspective, quaternion);\n  return [[translate, scale, skew, quaternion, perspective]];\n}\nvar composeMatrix = function () {\n  function multiply(a, b) {\n    var result = [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]];\n    for (var i = 0; i < 4; i++) {\n      for (var j = 0; j < 4; j++) {\n        for (var k = 0; k < 4; k++) {\n          result[i][j] += b[i][k] * a[k][j];\n        }\n      }\n    }\n    return result;\n  }\n  function is2D(m) {\n    return m[0][2] === 0 && m[0][3] === 0 && m[1][2] === 0 && m[1][3] === 0 && m[2][0] === 0 && m[2][1] === 0 && m[2][2] === 1 && m[2][3] === 0 && m[3][2] === 0 && m[3][3] === 1;\n  }\n  function composeMatrix(translate, scale, skew, quat, perspective) {\n    var matrix = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n    for (var i = 0; i < 4; i++) {\n      matrix[i][3] = perspective[i];\n    }\n    for (var _i = 0; _i < 3; _i++) {\n      for (var j = 0; j < 3; j++) {\n        matrix[3][_i] += translate[j] * matrix[j][_i];\n      }\n    }\n    var x = quat[0];\n    var y = quat[1];\n    var z = quat[2];\n    var w = quat[3];\n    var rotMatrix = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n    rotMatrix[0][0] = 1 - 2 * (y * y + z * z);\n    rotMatrix[0][1] = 2 * (x * y - z * w);\n    rotMatrix[0][2] = 2 * (x * z + y * w);\n    rotMatrix[1][0] = 2 * (x * y + z * w);\n    rotMatrix[1][1] = 1 - 2 * (x * x + z * z);\n    rotMatrix[1][2] = 2 * (y * z - x * w);\n    rotMatrix[2][0] = 2 * (x * z - y * w);\n    rotMatrix[2][1] = 2 * (y * z + x * w);\n    rotMatrix[2][2] = 1 - 2 * (x * x + y * y);\n    matrix = multiply(matrix, rotMatrix);\n    var temp = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n    if (skew[2]) {\n      temp[2][1] = skew[2];\n      matrix = multiply(matrix, temp);\n    }\n    if (skew[1]) {\n      temp[2][1] = 0;\n      temp[2][0] = skew[0];\n      matrix = multiply(matrix, temp);\n    }\n    if (skew[0]) {\n      temp[2][0] = 0;\n      temp[1][0] = skew[0];\n      matrix = multiply(matrix, temp);\n    }\n    for (var _i2 = 0; _i2 < 3; _i2++) {\n      for (var _j = 0; _j < 3; _j++) {\n        matrix[_i2][_j] *= scale[_i2];\n      }\n    }\n    if (is2D(matrix)) {\n      return [matrix[0][0], matrix[0][1], matrix[1][0], matrix[1][1], matrix[3][0], matrix[3][1]];\n    }\n    return matrix[0].concat(matrix[1], matrix[2], matrix[3]);\n  }\n  return composeMatrix;\n}();\nfunction numberToLongString(x) {\n  return x.toFixed(6).replace('.000000', '');\n}\nfunction mergeMatrices(left, right) {\n  var leftArgs;\n  var rightArgs;\n  // @ts-ignore\n  if (left.decompositionPair !== right) {\n    // @ts-ignore\n    left.decompositionPair = right;\n    // @ts-ignore\n    leftArgs = makeMatrixDecomposition(left);\n  }\n  // @ts-ignore\n  if (right.decompositionPair !== left) {\n    // @ts-ignore\n    right.decompositionPair = left;\n    // @ts-ignore\n    rightArgs = makeMatrixDecomposition(right);\n  }\n  if (leftArgs[0] === null || rightArgs[0] === null) return [\n  // @ts-ignore\n  [false],\n  // @ts-ignore\n  [true],\n  // @ts-ignore\n  function (x) {\n    return x ? right[0].d : left[0].d;\n  }];\n  leftArgs[0].push(0);\n  rightArgs[0].push(1);\n  return [leftArgs, rightArgs,\n  // @ts-ignore\n  function (list) {\n    // @ts-ignore\n    var q = quat(leftArgs[0][3], rightArgs[0][3], list[5]);\n    var mat = composeMatrix(list[0], list[1], list[2], q, list[4]);\n    var stringifiedArgs = mat.map(numberToLongString).join(',');\n    return stringifiedArgs;\n  }];\n}\nfunction dot(v1, v2) {\n  var result = 0;\n  for (var i = 0; i < v1.length; i++) {\n    result += v1[i] * v2[i];\n  }\n  return result;\n}\nfunction quat(fromQ, toQ, f) {\n  var product = dot(fromQ, toQ);\n  product = clamp(product, -1.0, 1.0);\n  var quat = [];\n  if (product === 1.0) {\n    quat = fromQ;\n  } else {\n    var theta = Math.acos(product);\n    var w = Math.sin(f * theta) * 1 / Math.sqrt(1 - product * product);\n    for (var i = 0; i < 4; i++) {\n      quat.push(fromQ[i] * (Math.cos(f * theta) - product * w) + toQ[i] * w);\n    }\n  }\n  return quat;\n}\n\n// scaleX/Y/Z -> scale\nfunction typeTo2D(type) {\n  return type.replace(/[XY]/, '');\n}\n\n// scaleX/Y/Z -> scale3d\nfunction typeTo3D(type) {\n  return type.replace(/(X|Y|Z|3d)?$/, '3d');\n}\nvar isMatrixOrPerspective = function isMatrixOrPerspective(lt, rt) {\n  return lt === 'perspective' && rt === 'perspective' || (lt === 'matrix' || lt === 'matrix3d') && (rt === 'matrix' || rt === 'matrix3d');\n};\nfunction mergeTransforms(left, right, target) {\n  var flipResults = false;\n  // padding empty transform, eg. merge 'scale(10)' with 'none' -> scale(1)\n  if (!left.length || !right.length) {\n    if (!left.length) {\n      flipResults = true;\n      left = right;\n      right = [];\n    }\n    var _loop = function _loop() {\n      var _left$i = left[i],\n        type = _left$i.t,\n        args = _left$i.d;\n      // none -> scale(1)/translateX(0)\n      var defaultValue = type.substring(0, 5) === 'scale' ? 1 : 0;\n      right.push({\n        t: type,\n        d: args.map(function (arg) {\n          if (typeof arg === 'number') {\n            return getOrCreateUnitValue(defaultValue);\n          }\n          return getOrCreateUnitValue(defaultValue, arg.unit);\n          //   {\n          //     unit: arg.unit,\n          //     value: defaultValue,\n          //   };\n        })\n      });\n    };\n    for (var i = 0; i < left.length; i++) {\n      _loop();\n    }\n  }\n  var leftResult = [];\n  var rightResult = [];\n  var types = [];\n\n  // merge matrix() with matrix3d()\n  if (left.length !== right.length) {\n    var merged = mergeMatrices(left, right);\n    // @ts-ignore\n    leftResult = [merged[0]];\n    // @ts-ignore\n    rightResult = [merged[1]];\n    types = [['matrix', [merged[2]]]];\n  } else {\n    for (var _i3 = 0; _i3 < left.length; _i3++) {\n      var leftType = left[_i3].t;\n      var rightType = right[_i3].t;\n      var leftArgs = left[_i3].d;\n      var rightArgs = right[_i3].d;\n      var leftFunctionData = transformFunctions[leftType];\n      var rightFunctionData = transformFunctions[rightType];\n      var type = void 0;\n      if (isMatrixOrPerspective(leftType, rightType)) {\n        var _merged = mergeMatrices([left[_i3]], [right[_i3]]);\n        // @ts-ignore\n        leftResult.push(_merged[0]);\n        // @ts-ignore\n        rightResult.push(_merged[1]);\n        types.push(['matrix', [_merged[2]]]);\n        continue;\n      } else if (leftType === rightType) {\n        type = leftType;\n      } else if (leftFunctionData[2] && rightFunctionData[2] && typeTo2D(leftType) === typeTo2D(rightType)) {\n        type = typeTo2D(leftType);\n        // @ts-ignore\n        leftArgs = leftFunctionData[2](leftArgs);\n        // @ts-ignore\n        rightArgs = rightFunctionData[2](rightArgs);\n      } else if (leftFunctionData[1] && rightFunctionData[1] && typeTo3D(leftType) === typeTo3D(rightType)) {\n        type = typeTo3D(leftType);\n        // @ts-ignore\n        leftArgs = leftFunctionData[1](leftArgs);\n        // @ts-ignore\n        rightArgs = rightFunctionData[1](rightArgs);\n      } else {\n        var _merged2 = mergeMatrices(left, right);\n        // @ts-ignore\n        leftResult = [_merged2[0]];\n        // @ts-ignore\n        rightResult = [_merged2[1]];\n        types = [['matrix', [_merged2[2]]]];\n        break;\n      }\n      var leftArgsCopy = [];\n      var rightArgsCopy = [];\n      var stringConversions = [];\n      for (var j = 0; j < leftArgs.length; j++) {\n        // const merge = leftArgs[j].unit === UnitType.kNumber ? mergeDimensions : mergeDimensions;\n        var _merged3 = mergeDimensions(leftArgs[j], rightArgs[j], target, false, j);\n        leftArgsCopy[j] = _merged3[0];\n        rightArgsCopy[j] = _merged3[1];\n        stringConversions.push(_merged3[2]);\n      }\n      leftResult.push(leftArgsCopy);\n      rightResult.push(rightArgsCopy);\n      types.push([type, stringConversions]);\n    }\n  }\n  if (flipResults) {\n    var tmp = leftResult;\n    leftResult = rightResult;\n    rightResult = tmp;\n  }\n  return [leftResult, rightResult, function (list) {\n    return list.map(function (args, i) {\n      var stringifiedArgs = args.map(function (arg, j) {\n        return types[i][1][j](arg);\n      }).join(',');\n      if (types[i][0] === 'matrix' && stringifiedArgs.split(',').length === 16) {\n        types[i][0] = 'matrix3d';\n      }\n      if (types[i][0] === 'matrix3d' && stringifiedArgs.split(',').length === 6) {\n        types[i][0] = 'matrix';\n      }\n      return \"\".concat(types[i][0], \"(\").concat(stringifiedArgs, \")\");\n    }).join(' ');\n  }];\n}\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform-origin\n * eg. 'center' 'top left' '50px 50px'\n */\nvar parseTransformOrigin = memoize(function (value) {\n  if (isString(value)) {\n    if (value === 'text-anchor') {\n      return [getOrCreateUnitValue(0, 'px'), getOrCreateUnitValue(0, 'px')];\n    }\n    var values = value.split(' ');\n    if (values.length === 1) {\n      if (values[0] === 'top' || values[0] === 'bottom') {\n        // 'top' -> 'center top'\n        values[1] = values[0];\n        values[0] = 'center';\n      } else {\n        // '50px' -> '50px center'\n        values[1] = 'center';\n      }\n    }\n    if (values.length !== 2) {\n      return null;\n    }\n\n    // eg. center bottom\n    return [parseLengthOrPercentage(convertKeyword2Percent(values[0])), parseLengthOrPercentage(convertKeyword2Percent(values[1]))];\n  }\n  return [getOrCreateUnitValue(value[0] || 0, 'px'), getOrCreateUnitValue(value[1] || 0, 'px')];\n});\nfunction convertKeyword2Percent(keyword) {\n  if (keyword === 'center') {\n    return '50%';\n  }\n  if (keyword === 'left' || keyword === 'top') {\n    return '0%';\n  }\n  if (keyword === 'right' || keyword === 'bottom') {\n    return '100%';\n  }\n  return keyword;\n}\n\n/**\n * Blink used them in code generation(css_properties.json5)\n */\nvar BUILT_IN_PROPERTIES = [{\n  /**\n   * used in CSS Layout API\n   * eg. `display: 'flex'`\n   */\n  n: 'display',\n  k: ['none']\n}, {\n  /**\n   * range [0.0, 1.0]\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/opacity\n   */\n  n: 'opacity',\n  \"int\": true,\n  inh: true,\n  d: '1',\n  syntax: PropertySyntax.OPACITY_VALUE\n}, {\n  /**\n   * inheritable, range [0.0, 1.0]\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-opacity\n   * @see https://svgwg.org/svg2-draft/painting.html#FillOpacity\n   */\n  n: 'fillOpacity',\n  \"int\": true,\n  inh: true,\n  d: '1',\n  syntax: PropertySyntax.OPACITY_VALUE\n}, {\n  /**\n   * inheritable, range [0.0, 1.0]\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-opacity\n   * @see https://svgwg.org/svg2-draft/painting.html#StrokeOpacity\n   */\n  n: 'strokeOpacity',\n  \"int\": true,\n  inh: true,\n  d: '1',\n  syntax: PropertySyntax.OPACITY_VALUE\n}, {\n  /**\n   * background-color is not inheritable\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Fills_and_Strokes\n   */\n  n: 'fill',\n  \"int\": true,\n  k: ['none'],\n  d: 'none',\n  syntax: PropertySyntax.PAINT\n}, {\n  n: 'fillRule',\n  k: ['nonzero', 'evenodd'],\n  d: 'nonzero'\n},\n/**\n * default to none\n * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke#usage_notes\n */\n{\n  n: 'stroke',\n  \"int\": true,\n  k: ['none'],\n  d: 'none',\n  syntax: PropertySyntax.PAINT,\n  /**\n   * Stroke 'none' won't affect geometry but others will.\n   */\n  l: true\n}, {\n  n: 'shadowType',\n  k: ['inner', 'outer', 'both'],\n  d: 'outer',\n  l: true\n}, {\n  n: 'shadowColor',\n  \"int\": true,\n  syntax: PropertySyntax.COLOR\n}, {\n  n: 'shadowOffsetX',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'shadowOffsetY',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'shadowBlur',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.SHADOW_BLUR\n}, {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-width\n   */\n  n: 'lineWidth',\n  \"int\": true,\n  inh: true,\n  d: '1',\n  l: true,\n  a: ['strokeWidth'],\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'increasedLineWidthForHitTesting',\n  inh: true,\n  d: '0',\n  l: true,\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'lineJoin',\n  inh: true,\n  l: true,\n  a: ['strokeLinejoin'],\n  k: ['miter', 'bevel', 'round'],\n  d: 'miter'\n}, {\n  n: 'lineCap',\n  inh: true,\n  l: true,\n  a: ['strokeLinecap'],\n  k: ['butt', 'round', 'square'],\n  d: 'butt'\n}, {\n  n: 'lineDash',\n  \"int\": true,\n  inh: true,\n  k: ['none'],\n  a: ['strokeDasharray'],\n  syntax: PropertySyntax.LENGTH_PERCENTAGE_12\n}, {\n  n: 'lineDashOffset',\n  \"int\": true,\n  inh: true,\n  d: '0',\n  a: ['strokeDashoffset'],\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'offsetPath',\n  syntax: PropertySyntax.DEFINED_PATH\n}, {\n  n: 'offsetDistance',\n  \"int\": true,\n  syntax: PropertySyntax.OFFSET_DISTANCE\n}, {\n  n: 'dx',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'dy',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'zIndex',\n  ind: true,\n  \"int\": true,\n  d: '0',\n  k: ['auto'],\n  syntax: PropertySyntax.Z_INDEX\n}, {\n  n: 'visibility',\n  k: ['visible', 'hidden'],\n  ind: true,\n  inh: true,\n  /**\n   * support interpolation\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/visibility#interpolation\n   */\n  \"int\": true,\n  d: 'visible'\n}, {\n  n: 'pointerEvents',\n  inh: true,\n  k: ['none', 'auto', 'stroke', 'fill', 'painted', 'visible', 'visiblestroke', 'visiblefill', 'visiblepainted',\n  // 'bounding-box',\n  'all'],\n  d: 'auto'\n}, {\n  n: 'filter',\n  ind: true,\n  l: true,\n  k: ['none'],\n  d: 'none',\n  syntax: PropertySyntax.FILTER\n}, {\n  n: 'clipPath',\n  syntax: PropertySyntax.DEFINED_PATH\n}, {\n  n: 'textPath',\n  syntax: PropertySyntax.DEFINED_PATH\n}, {\n  n: 'textPathSide',\n  k: ['left', 'right'],\n  d: 'left'\n}, {\n  n: 'textPathStartOffset',\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'transform',\n  p: 100,\n  \"int\": true,\n  k: ['none'],\n  d: 'none',\n  syntax: PropertySyntax.TRANSFORM\n}, {\n  n: 'transformOrigin',\n  p: 100,\n  d: '0 0',\n  // // int: true,\n  // d: (nodeName: string) => {\n  //   if (nodeName === Shape.CIRCLE || nodeName === Shape.ELLIPSE) {\n  //     return 'center';\n  //   }\n  //   if (nodeName === Shape.TEXT) {\n  //     return 'text-anchor';\n  //   }\n  //   return 'left top';\n  // },\n  l: true,\n  syntax: PropertySyntax.TRANSFORM_ORIGIN\n}, {\n  n: 'cx',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'cy',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'cz',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'r',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'rx',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'ry',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n},\n// Rect Image Group\n{\n  // x in local space\n  n: 'x',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  // y in local space\n  n: 'y',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  // z in local space\n  n: 'z',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'width',\n  \"int\": true,\n  l: true,\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/width\n   */\n  k: ['auto', 'fit-content', 'min-content', 'max-content'],\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'height',\n  \"int\": true,\n  l: true,\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/height\n   */\n  k: ['auto', 'fit-content', 'min-content', 'max-content'],\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'radius',\n  \"int\": true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE_14\n},\n// Line\n{\n  n: 'x1',\n  \"int\": true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'y1',\n  \"int\": true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'z1',\n  \"int\": true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'x2',\n  \"int\": true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'y2',\n  \"int\": true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'z2',\n  \"int\": true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n},\n// Path\n{\n  n: 'd',\n  \"int\": true,\n  l: true,\n  d: '',\n  syntax: PropertySyntax.PATH,\n  p: 50\n},\n// Polyline & Polygon\n{\n  n: 'points',\n  /**\n   * support interpolation\n   */\n  \"int\": true,\n  l: true,\n  syntax: PropertySyntax.LIST_OF_POINTS,\n  p: 50\n},\n// Text\n{\n  n: 'text',\n  l: true,\n  d: '',\n  syntax: PropertySyntax.TEXT,\n  p: 50\n}, {\n  n: 'textTransform',\n  l: true,\n  inh: true,\n  k: ['capitalize', 'uppercase', 'lowercase', 'none'],\n  d: 'none',\n  syntax: PropertySyntax.TEXT_TRANSFORM,\n  p: 51 // it must get parsed after text\n}, {\n  n: 'font',\n  l: true\n}, {\n  n: 'fontSize',\n  \"int\": true,\n  inh: true,\n  /**\n   * @see https://www.w3schools.com/css/css_font_size.asp\n   */\n  d: '16px',\n  l: true,\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'fontFamily',\n  l: true,\n  inh: true,\n  d: 'sans-serif'\n}, {\n  n: 'fontStyle',\n  l: true,\n  inh: true,\n  k: ['normal', 'italic', 'oblique'],\n  d: 'normal'\n}, {\n  n: 'fontWeight',\n  l: true,\n  inh: true,\n  k: ['normal', 'bold', 'bolder', 'lighter'],\n  d: 'normal'\n}, {\n  n: 'fontVariant',\n  l: true,\n  inh: true,\n  k: ['normal', 'small-caps'],\n  d: 'normal'\n}, {\n  n: 'lineHeight',\n  l: true,\n  syntax: PropertySyntax.LENGTH,\n  \"int\": true,\n  d: '0'\n}, {\n  n: 'letterSpacing',\n  l: true,\n  syntax: PropertySyntax.LENGTH,\n  \"int\": true,\n  d: '0'\n}, {\n  n: 'miterLimit',\n  l: true,\n  syntax: PropertySyntax.NUMBER,\n  d: function d(nodeName) {\n    if (nodeName === Shape.PATH || nodeName === Shape.POLYGON || nodeName === Shape.POLYLINE) {\n      return '4';\n    }\n    return '10';\n  }\n}, {\n  n: 'wordWrap',\n  l: true\n}, {\n  n: 'wordWrapWidth',\n  l: true\n}, {\n  n: 'maxLines',\n  l: true\n}, {\n  n: 'textOverflow',\n  l: true,\n  d: 'clip'\n}, {\n  n: 'leading',\n  l: true\n}, {\n  n: 'textBaseline',\n  l: true,\n  inh: true,\n  k: ['top', 'hanging', 'middle', 'alphabetic', 'ideographic', 'bottom'],\n  d: 'alphabetic'\n}, {\n  n: 'textAlign',\n  l: true,\n  inh: true,\n  k: ['start', 'center', 'middle', 'end', 'left', 'right'],\n  d: 'start'\n},\n// {\n//   n: 'whiteSpace',\n//   l: true,\n// },\n{\n  n: 'markerStart',\n  syntax: PropertySyntax.MARKER\n}, {\n  n: 'markerEnd',\n  syntax: PropertySyntax.MARKER\n}, {\n  n: 'markerMid',\n  syntax: PropertySyntax.MARKER\n}, {\n  n: 'markerStartOffset',\n  syntax: PropertySyntax.LENGTH,\n  l: true,\n  \"int\": true,\n  d: '0'\n}, {\n  n: 'markerEndOffset',\n  syntax: PropertySyntax.LENGTH,\n  l: true,\n  \"int\": true,\n  d: '0'\n}];\nvar GEOMETRY_ATTRIBUTE_NAMES = new Set(BUILT_IN_PROPERTIES.filter(function (n) {\n  return !!n.l;\n}).map(function (n) {\n  return n.n;\n}));\nvar propertyMetadataCache = {};\nvar DefaultStyleValueRegistry = /*#__PURE__*/function () {\n  function DefaultStyleValueRegistry(runtime) {\n    var _this = this;\n    _classCallCheck(this, DefaultStyleValueRegistry);\n    this.runtime = runtime;\n    BUILT_IN_PROPERTIES.forEach(function (property) {\n      _this.registerMetadata(property);\n    });\n  }\n  return _createClass(DefaultStyleValueRegistry, [{\n    key: \"registerMetadata\",\n    value: function registerMetadata(metadata) {\n      [metadata.n].concat(_toConsumableArray(metadata.a || [])).forEach(function (name) {\n        propertyMetadataCache[name] = metadata;\n      });\n    }\n  }, {\n    key: \"getPropertySyntax\",\n    value: function getPropertySyntax(syntax) {\n      return this.runtime.CSSPropertySyntaxFactory[syntax];\n    }\n\n    /**\n     * * parse value, eg.\n     * fill: 'red' => CSSRGB\n     * translateX: '10px' => CSSUnitValue { unit: 'px', value: 10 }\n     * fontSize: '2em' => { unit: 'px', value: 32 }\n     *\n     * * calculate used value\n     * * post process\n     */\n  }, {\n    key: \"processProperties\",\n    value: function processProperties(object, attributes) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n        skipUpdateAttribute: false,\n        skipParse: false,\n        forceUpdateGeometry: false,\n        usedAttributes: [],\n        memoize: true\n      };\n      Object.assign(object.attributes, attributes);\n\n      // clipPath\n      var oldClipPath = object.parsedStyle.clipPath;\n      var oldOffsetPath = object.parsedStyle.offsetPath;\n      assignParsedStyle(object, attributes);\n      var needUpdateGeometry = !!options.forceUpdateGeometry;\n      if (!needUpdateGeometry) {\n        for (var i in attributes) {\n          if (GEOMETRY_ATTRIBUTE_NAMES.has(i)) {\n            needUpdateGeometry = true;\n            break;\n          }\n        }\n      }\n      var list = getParsedStyleListOf(object);\n      if (list.has('fill') && attributes.fill) {\n        object.parsedStyle.fill = parseColor(attributes.fill);\n      }\n      if (list.has('stroke') && attributes.stroke) {\n        object.parsedStyle.stroke = parseColor(attributes.stroke);\n      }\n      if (list.has('shadowColor') && attributes.shadowColor) {\n        object.parsedStyle.shadowColor = parseColor(attributes.shadowColor);\n      }\n      if (list.has('filter') && attributes.filter) {\n        object.parsedStyle.filter = parseFilter(attributes.filter);\n      }\n      // Rect\n      // @ts-ignore\n      if (list.has('radius') && !isNil(attributes.radius)) {\n        // @ts-ignore\n        object.parsedStyle.radius = parseDimensionArrayFormat(\n        // @ts-ignore\n        attributes.radius, 4);\n      }\n      // Polyline\n      if (list.has('lineDash') && !isNil(attributes.lineDash)) {\n        // dom,webgl\n        object.parsedStyle.lineDash = parseDimensionArrayFormat(attributes.lineDash, 'even');\n      }\n      // @ts-ignore\n      if (list.has('points') && attributes.points) {\n        // @ts-ignore\n        object.parsedStyle.points = parsePoints(attributes.points);\n      }\n      // Path\n      // @ts-ignore\n      if (list.has('d') && attributes.d === '') {\n        object.parsedStyle.d = _objectSpread({}, EMPTY_PARSED_PATH);\n      }\n      // @ts-ignore\n      if (list.has('d') && attributes.d) {\n        object.parsedStyle.d = parsePath(\n        // @ts-ignore\n        attributes.d);\n      }\n      // Text\n      if (list.has('textTransform') && attributes.textTransform) {\n        this.runtime.CSSPropertySyntaxFactory[PropertySyntax.TEXT_TRANSFORM].calculator(null, null, {\n          value: attributes.textTransform\n        }, object, null);\n      }\n      if (list.has('clipPath') && !isUndefined(attributes.clipPath)) {\n        this.runtime.CSSPropertySyntaxFactory[PropertySyntax.DEFINED_PATH].calculator('clipPath', oldClipPath, attributes.clipPath, object, this.runtime);\n      }\n      if (list.has('offsetPath') && attributes.offsetPath) {\n        this.runtime.CSSPropertySyntaxFactory[PropertySyntax.DEFINED_PATH].calculator('offsetPath', oldOffsetPath, attributes.offsetPath, object, this.runtime);\n      }\n      if (list.has('transform') && attributes.transform) {\n        object.parsedStyle.transform = parseTransform(attributes.transform);\n      }\n      if (list.has('transformOrigin') && attributes.transformOrigin) {\n        object.parsedStyle.transformOrigin = parseTransformOrigin(attributes.transformOrigin);\n      }\n      // Marker\n      // @ts-ignore\n      if (list.has('markerStart') && attributes.markerStart) {\n        object.parsedStyle.markerStart = this.runtime.CSSPropertySyntaxFactory[PropertySyntax.MARKER].calculator(null,\n        // @ts-ignore\n        attributes.markerStart,\n        // @ts-ignore\n        attributes.markerStart, null, null);\n      }\n      // @ts-ignore\n      if (list.has('markerEnd') && attributes.markerEnd) {\n        object.parsedStyle.markerEnd = this.runtime.CSSPropertySyntaxFactory[PropertySyntax.MARKER].calculator(null,\n        // @ts-ignore\n        attributes.markerEnd,\n        // @ts-ignore\n        attributes.markerEnd, null, null);\n      }\n      // @ts-ignore\n      if (list.has('markerMid') && attributes.markerMid) {\n        object.parsedStyle.markerMid = this.runtime.CSSPropertySyntaxFactory[PropertySyntax.MARKER].calculator('',\n        // @ts-ignore\n        attributes.markerMid,\n        // @ts-ignore\n        attributes.markerMid, null, null);\n      }\n      if (list.has('zIndex') && !isNil(attributes.zIndex)) {\n        this.runtime.CSSPropertySyntaxFactory[PropertySyntax.Z_INDEX].postProcessor(object);\n      }\n      if (list.has('offsetDistance') && !isNil(attributes.offsetDistance)) {\n        this.runtime.CSSPropertySyntaxFactory[PropertySyntax.OFFSET_DISTANCE].postProcessor(object);\n      }\n      if (list.has('transform') && attributes.transform) {\n        this.runtime.CSSPropertySyntaxFactory[PropertySyntax.TRANSFORM].postProcessor(object);\n      }\n      if (list.has('transformOrigin') && attributes.transformOrigin) {\n        this.runtime.CSSPropertySyntaxFactory[PropertySyntax.TRANSFORM_ORIGIN].postProcessor(object);\n      }\n      if (needUpdateGeometry) {\n        object.geometry.dirty = true;\n        object.renderable.boundsDirty = true;\n        object.renderable.renderBoundsDirty = true;\n        if (!options.forceUpdateGeometry) {\n          this.runtime.sceneGraphService.dirtifyToRoot(object);\n        }\n      }\n    }\n\n    /**\n     * update geometry when relative props changed,\n     * eg. r of Circle, width/height of Rect\n     */\n  }, {\n    key: \"updateGeometry\",\n    value: function updateGeometry(object) {\n      var nodeName = object.nodeName;\n      var geometryUpdater = this.runtime.geometryUpdaterFactory[nodeName];\n      if (geometryUpdater) {\n        var geometry = object.geometry;\n        if (!geometry.contentBounds) {\n          geometry.contentBounds = new AABB();\n        }\n        if (!geometry.renderBounds) {\n          geometry.renderBounds = new AABB();\n        }\n        var parsedStyle = object.parsedStyle;\n        var _geometryUpdater$upda = geometryUpdater.update(parsedStyle, object),\n          _geometryUpdater$upda2 = _geometryUpdater$upda.cx,\n          cx = _geometryUpdater$upda2 === void 0 ? 0 : _geometryUpdater$upda2,\n          _geometryUpdater$upda3 = _geometryUpdater$upda.cy,\n          cy = _geometryUpdater$upda3 === void 0 ? 0 : _geometryUpdater$upda3,\n          _geometryUpdater$upda4 = _geometryUpdater$upda.cz,\n          cz = _geometryUpdater$upda4 === void 0 ? 0 : _geometryUpdater$upda4,\n          _geometryUpdater$upda5 = _geometryUpdater$upda.hwidth,\n          hwidth = _geometryUpdater$upda5 === void 0 ? 0 : _geometryUpdater$upda5,\n          _geometryUpdater$upda6 = _geometryUpdater$upda.hheight,\n          hheight = _geometryUpdater$upda6 === void 0 ? 0 : _geometryUpdater$upda6,\n          _geometryUpdater$upda7 = _geometryUpdater$upda.hdepth,\n          hdepth = _geometryUpdater$upda7 === void 0 ? 0 : _geometryUpdater$upda7;\n        // init with content box\n        var halfExtents = [Math.abs(hwidth), Math.abs(hheight), hdepth];\n        // anchor is center by default, don't account for lineWidth here\n        var stroke = parsedStyle.stroke,\n          _parsedStyle$lineWidt = parsedStyle.lineWidth,\n          lineWidth = _parsedStyle$lineWidt === void 0 ? 1 : _parsedStyle$lineWidt,\n          _parsedStyle$increase = parsedStyle.increasedLineWidthForHitTesting,\n          increasedLineWidthForHitTesting = _parsedStyle$increase === void 0 ? 0 : _parsedStyle$increase,\n          _parsedStyle$shadowTy = parsedStyle.shadowType,\n          shadowType = _parsedStyle$shadowTy === void 0 ? 'outer' : _parsedStyle$shadowTy,\n          shadowColor = parsedStyle.shadowColor,\n          _parsedStyle$filter = parsedStyle.filter,\n          filter = _parsedStyle$filter === void 0 ? [] : _parsedStyle$filter,\n          transformOrigin = parsedStyle.transformOrigin;\n        var center = [cx, cy, cz];\n        // update geometry's AABB\n        geometry.contentBounds.update(center, halfExtents);\n        // @see https://github.molgen.mpg.de/git-mirror/cairo/blob/master/src/cairo-stroke-style.c#L97..L128\n        var expansion = nodeName === Shape.POLYLINE || nodeName === Shape.POLYGON || nodeName === Shape.PATH ? Math.SQRT2 : 0.5;\n        // append border only if stroke existed\n        var hasStroke = stroke && !stroke.isNone;\n        if (hasStroke) {\n          var halfLineWidth = ((lineWidth || 0) + (increasedLineWidthForHitTesting || 0)) * expansion;\n          halfExtents[0] += halfLineWidth;\n          halfExtents[1] += halfLineWidth;\n        }\n        geometry.renderBounds.update(center, halfExtents);\n        // account for shadow, only support constant value now\n        if (shadowColor && shadowType && shadowType !== 'inner') {\n          var _geometry$renderBound = geometry.renderBounds,\n            min = _geometry$renderBound.min,\n            max = _geometry$renderBound.max;\n          var shadowBlur = parsedStyle.shadowBlur,\n            shadowOffsetX = parsedStyle.shadowOffsetX,\n            shadowOffsetY = parsedStyle.shadowOffsetY;\n          var shadowBlurInPixels = shadowBlur || 0;\n          var shadowOffsetXInPixels = shadowOffsetX || 0;\n          var shadowOffsetYInPixels = shadowOffsetY || 0;\n          var shadowLeft = min[0] - shadowBlurInPixels + shadowOffsetXInPixels;\n          var shadowRight = max[0] + shadowBlurInPixels + shadowOffsetXInPixels;\n          var shadowTop = min[1] - shadowBlurInPixels + shadowOffsetYInPixels;\n          var shadowBottom = max[1] + shadowBlurInPixels + shadowOffsetYInPixels;\n          min[0] = Math.min(min[0], shadowLeft);\n          max[0] = Math.max(max[0], shadowRight);\n          min[1] = Math.min(min[1], shadowTop);\n          max[1] = Math.max(max[1], shadowBottom);\n          geometry.renderBounds.setMinMax(min, max);\n        }\n        // account for filter, eg. blur(5px), drop-shadow()\n        filter.forEach(function (_ref) {\n          var name = _ref.name,\n            params = _ref.params;\n          if (name === 'blur') {\n            var blurRadius = params[0].value;\n            geometry.renderBounds.update(geometry.renderBounds.center, vec3.add(geometry.renderBounds.halfExtents, geometry.renderBounds.halfExtents, [blurRadius, blurRadius, 0]));\n          } else if (name === 'drop-shadow') {\n            var _shadowOffsetX = params[0].value;\n            var _shadowOffsetY = params[1].value;\n            var _shadowBlur = params[2].value;\n            var _geometry$renderBound2 = geometry.renderBounds,\n              _min = _geometry$renderBound2.min,\n              _max = _geometry$renderBound2.max;\n            var _shadowLeft = _min[0] - _shadowBlur + _shadowOffsetX;\n            var _shadowRight = _max[0] + _shadowBlur + _shadowOffsetX;\n            var _shadowTop = _min[1] - _shadowBlur + _shadowOffsetY;\n            var _shadowBottom = _max[1] + _shadowBlur + _shadowOffsetY;\n            _min[0] = Math.min(_min[0], _shadowLeft);\n            _max[0] = Math.max(_max[0], _shadowRight);\n            _min[1] = Math.min(_min[1], _shadowTop);\n            _max[1] = Math.max(_max[1], _shadowBottom);\n            geometry.renderBounds.setMinMax(_min, _max);\n          }\n        });\n        object.geometry.dirty = false;\n\n        // @see https://github.com/antvis/g/issues/957\n        var flipY = hwidth < 0;\n        var flipX = hheight < 0;\n        // set transform origin\n        var usedOriginXValue = (flipY ? -1 : 1) * (transformOrigin ? convertPercentUnit(transformOrigin[0], 0, object, true) : 0);\n        var usedOriginYValue = (flipX ? -1 : 1) * (transformOrigin ? convertPercentUnit(transformOrigin[1], 1, object, true) : 0);\n        if (usedOriginXValue || usedOriginYValue) {\n          object.setOrigin(usedOriginXValue, usedOriginYValue);\n        }\n      }\n    }\n  }, {\n    key: \"updateSizeAttenuation\",\n    value: function updateSizeAttenuation(node, zoom) {\n      if (node.style.isSizeAttenuation) {\n        if (!node.style.rawLineWidth) {\n          node.style.rawLineWidth = node.style.lineWidth;\n        }\n        node.style.lineWidth = (node.style.rawLineWidth || 1) / zoom;\n        if (node.nodeName === Shape.CIRCLE) {\n          if (!node.style.rawR) {\n            node.style.rawR = node.style.r;\n          }\n          node.style.r = (node.style.rawR || 1) / zoom;\n        }\n      } else {\n        if (node.style.rawLineWidth) {\n          node.style.lineWidth = node.style.rawLineWidth;\n          delete node.style.rawLineWidth;\n        }\n        if (node.nodeName === Shape.CIRCLE) {\n          if (node.style.rawR) {\n            node.style.r = node.style.rawR;\n            delete node.style.rawR;\n          }\n        }\n      }\n    }\n  }]);\n}();\nfunction assignParsedStyle(object, attributes) {\n  var list = getParsedStyleListOf(object);\n  for (var key in attributes) {\n    if (list.has(key)) {\n      object.parsedStyle[key] = attributes[key];\n    }\n  }\n}\nfunction getParsedStyleListOf(object) {\n  return object.constructor.PARSED_STYLE_LIST;\n}\n\nvar CSSPropertyAngle = /*#__PURE__*/function () {\n  function CSSPropertyAngle() {\n    _classCallCheck(this, CSSPropertyAngle);\n    this.mixer = mergeNumbers;\n  }\n  return _createClass(CSSPropertyAngle, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, parsed, object) {\n      return convertAngleUnit(parsed);\n    }\n  }]);\n}();\n\n/**\n * clipPath / textPath / offsetPath\n */\nvar CSSPropertyClipPath = /*#__PURE__*/function () {\n  function CSSPropertyClipPath() {\n    _classCallCheck(this, CSSPropertyClipPath);\n  }\n  return _createClass(CSSPropertyClipPath, [{\n    key: \"calculator\",\n    value: function calculator(name, oldPath, newPath, object, runtime) {\n      // unset\n      if (newPath instanceof CSSKeywordValue) {\n        newPath = null;\n      }\n      runtime.sceneGraphService.updateDisplayObjectDependency(name, oldPath, newPath, object);\n      if (name === 'clipPath') {\n        // should affect children\n        object.forEach(function (leaf) {\n          if (leaf.childNodes.length === 0) {\n            runtime.sceneGraphService.dirtifyToRoot(leaf);\n          }\n        });\n      }\n      return newPath;\n    }\n  }]);\n}();\n\nvar CSSPropertyColor = /*#__PURE__*/function () {\n  function CSSPropertyColor() {\n    _classCallCheck(this, CSSPropertyColor);\n    this.parser = parseColor;\n    this.mixer = mergeColors;\n  }\n  return _createClass(CSSPropertyColor, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, parsed, object) {\n      if (parsed instanceof CSSKeywordValue) {\n        // 'unset' 'none'\n        return parsed.value === 'none' ? noneColor : transparentColor;\n      }\n      return parsed;\n    }\n  }]);\n}();\n\nvar CSSPropertyFilter = /*#__PURE__*/function () {\n  function CSSPropertyFilter() {\n    _classCallCheck(this, CSSPropertyFilter);\n  }\n  return _createClass(CSSPropertyFilter, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, parsed) {\n      // unset or none\n      if (parsed instanceof CSSKeywordValue) {\n        return [];\n      }\n      return parsed;\n    }\n  }]);\n}();\n\nfunction getFontSize(object) {\n  var _ref = object.parsedStyle,\n    fontSize = _ref.fontSize;\n  return isNil(fontSize) ? null : fontSize;\n}\n\n/**\n * <length> & <percentage>\n */\nvar CSSPropertyLengthOrPercentage = /*#__PURE__*/function () {\n  function CSSPropertyLengthOrPercentage() {\n    _classCallCheck(this, CSSPropertyLengthOrPercentage);\n    this.mixer = mergeNumbers;\n  }\n  return _createClass(CSSPropertyLengthOrPercentage, [{\n    key: \"calculator\",\n    value:\n    /**\n     * according to parent's bounds\n     *\n     * @example\n     * CSS.percent(50) -> CSS.px(0.5 * parent.width)\n     */\n    function calculator(name, oldParsed, computed, object, runtime) {\n      if (isNumber(computed)) {\n        return computed;\n      }\n      if (CSSUnitValue.isRelativeUnit(computed.unit)) {\n        if (computed.unit === UnitType.kPercentage) {\n          // TODO: merge dimensions\n          return 0;\n        }\n        if (computed.unit === UnitType.kEms) {\n          if (object.parentNode) {\n            var fontSize = getFontSize(object.parentNode);\n            if (fontSize) {\n              fontSize *= computed.value;\n              return fontSize;\n            }\n          }\n          return 0;\n        }\n        if (computed.unit === UnitType.kRems) {\n          var _object$ownerDocument;\n          if (object !== null && object !== void 0 && (_object$ownerDocument = object.ownerDocument) !== null && _object$ownerDocument !== void 0 && _object$ownerDocument.documentElement) {\n            var _fontSize = getFontSize(object.ownerDocument.documentElement);\n            if (_fontSize) {\n              _fontSize *= computed.value;\n              return _fontSize;\n            }\n          }\n          return 0;\n        }\n      } else {\n        // remove listener if exists\n        // registry.unregisterParentGeometryBoundsChangedHandler(object, name);\n\n        // return absolute value\n        return computed.value;\n      }\n    }\n  }]);\n}();\n\n/**\n * format to Tuple2<CSSUnitValue>\n *\n * @example\n * rect.style.lineDash = 10;\n * rect.style.lineDash = [10, 10];\n * rect.style.lineDash = '10 10';\n */\nvar CSSPropertyLengthOrPercentage12 = /*#__PURE__*/function () {\n  function CSSPropertyLengthOrPercentage12() {\n    _classCallCheck(this, CSSPropertyLengthOrPercentage12);\n    this.mixer = mergeNumberLists;\n  }\n  return _createClass(CSSPropertyLengthOrPercentage12, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, computed) {\n      return computed.map(function (c) {\n        return c.value;\n      });\n    }\n  }]);\n}();\n\n/**\n * used in rounded rect\n *\n * @example\n * rect.style.radius = 10;\n * rect.style.radius = '10 10';\n * rect.style.radius = '10 10 10 10';\n */\nvar CSSPropertyLengthOrPercentage14 = /*#__PURE__*/function () {\n  function CSSPropertyLengthOrPercentage14() {\n    _classCallCheck(this, CSSPropertyLengthOrPercentage14);\n    this.mixer = mergeNumberLists;\n  }\n  return _createClass(CSSPropertyLengthOrPercentage14, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, computed) {\n      return computed.map(function (c) {\n        return c.value;\n      });\n    }\n  }]);\n}();\n\nvar CSSPropertyMarker = /*#__PURE__*/function () {\n  function CSSPropertyMarker() {\n    _classCallCheck(this, CSSPropertyMarker);\n  }\n  return _createClass(CSSPropertyMarker, [{\n    key: \"calculator\",\n    value: function calculator(name, oldMarker, newMarker, object) {\n      var _newMarker;\n      // unset\n      if (newMarker instanceof CSSKeywordValue) {\n        newMarker = null;\n      }\n      var cloned = (_newMarker = newMarker) === null || _newMarker === void 0 ? void 0 : _newMarker.cloneNode(true);\n      if (cloned) {\n        // FIXME: SVG should not inherit parent's style, add a flag here\n        cloned.style.isMarker = true;\n      }\n      return cloned;\n    }\n  }]);\n}();\n\nvar CSSPropertyNumber = /*#__PURE__*/function () {\n  function CSSPropertyNumber() {\n    _classCallCheck(this, CSSPropertyNumber);\n    this.mixer = mergeNumbers;\n  }\n  return _createClass(CSSPropertyNumber, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, computed) {\n      return computed.value;\n    }\n  }]);\n}();\n\nvar CSSPropertyOffsetDistance = /*#__PURE__*/function () {\n  function CSSPropertyOffsetDistance() {\n    _classCallCheck(this, CSSPropertyOffsetDistance);\n    this.mixer = clampedMergeNumbers(0, 1);\n  }\n  return _createClass(CSSPropertyOffsetDistance, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, computed) {\n      return computed.value;\n    }\n  }, {\n    key: \"postProcessor\",\n    value: function postProcessor(object) {\n      var _object$parsedStyle = object.parsedStyle,\n        offsetPath = _object$parsedStyle.offsetPath,\n        offsetDistance = _object$parsedStyle.offsetDistance;\n      if (!offsetPath) {\n        return;\n      }\n      var nodeName = offsetPath.nodeName;\n      if (nodeName === Shape.LINE || nodeName === Shape.PATH || nodeName === Shape.POLYLINE) {\n        // set position in world space\n        var point = offsetPath.getPoint(offsetDistance);\n        if (point) {\n          object.setLocalPosition(point.x, point.y);\n        }\n      }\n    }\n  }]);\n}();\n\n/**\n * opacity\n */\nvar CSSPropertyOpacity = /*#__PURE__*/function () {\n  function CSSPropertyOpacity() {\n    _classCallCheck(this, CSSPropertyOpacity);\n    this.mixer = clampedMergeNumbers(0, 1);\n  }\n  return _createClass(CSSPropertyOpacity, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, computed) {\n      return computed.value;\n    }\n  }]);\n}();\n\nvar CSSPropertyPath = /*#__PURE__*/function () {\n  function CSSPropertyPath() {\n    _classCallCheck(this, CSSPropertyPath);\n    /**\n     * path2Curve\n     */\n    this.parser = parsePath;\n    this.mixer = mergePaths;\n  }\n  return _createClass(CSSPropertyPath, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, parsed) {\n      // unset\n      if (parsed instanceof CSSKeywordValue && parsed.value === 'unset') {\n        return {\n          absolutePath: [],\n          hasArc: false,\n          segments: [],\n          polygons: [],\n          polylines: [],\n          curve: null,\n          totalLength: 0,\n          rect: new Rectangle(0, 0, 0, 0)\n        };\n      }\n      return parsed;\n    }\n  }]);\n}();\n\nvar CSSPropertyPoints = /*#__PURE__*/_createClass(function CSSPropertyPoints() {\n  _classCallCheck(this, CSSPropertyPoints);\n  this.mixer = mergePoints;\n});\n\nvar CSSPropertyShadowBlur = /*#__PURE__*/function (_CSSPropertyLengthOrP) {\n  function CSSPropertyShadowBlur() {\n    var _this;\n    _classCallCheck(this, CSSPropertyShadowBlur);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, CSSPropertyShadowBlur, [].concat(args));\n    _this.mixer = clampedMergeNumbers(0, Infinity);\n    return _this;\n  }\n  _inherits(CSSPropertyShadowBlur, _CSSPropertyLengthOrP);\n  return _createClass(CSSPropertyShadowBlur);\n}(CSSPropertyLengthOrPercentage);\n\nvar CSSPropertyText = /*#__PURE__*/function () {\n  function CSSPropertyText() {\n    _classCallCheck(this, CSSPropertyText);\n  }\n  return _createClass(CSSPropertyText, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, parsed, object) {\n      if (parsed instanceof CSSKeywordValue) {\n        if (parsed.value === 'unset') {\n          return '';\n        }\n        return parsed.value;\n      }\n\n      // allow number as valid text content\n      return \"\".concat(parsed);\n    }\n  }, {\n    key: \"postProcessor\",\n    value: function postProcessor(object) {\n      object.nodeValue = \"\".concat(object.parsedStyle.text) || '';\n    }\n  }]);\n}();\n\n/**\n * it must transform after text get parsed\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/text-transform\n */\nvar CSSPropertyTextTransform = /*#__PURE__*/function () {\n  function CSSPropertyTextTransform() {\n    _classCallCheck(this, CSSPropertyTextTransform);\n  }\n  return _createClass(CSSPropertyTextTransform, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, parsed, object) {\n      var rawText = object.getAttribute('text');\n      if (rawText) {\n        var transformedText = rawText;\n        if (parsed.value === 'capitalize') {\n          transformedText = rawText.charAt(0).toUpperCase() + rawText.slice(1);\n        } else if (parsed.value === 'lowercase') {\n          transformedText = rawText.toLowerCase();\n        } else if (parsed.value === 'uppercase') {\n          transformedText = rawText.toUpperCase();\n        }\n        object.parsedStyle.text = transformedText;\n      }\n      return parsed.value;\n    }\n  }]);\n}();\n\nvar definedProps = function definedProps(obj) {\n  return Object.fromEntries(Object.entries(obj).filter(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      v = _ref2[1];\n    return v !== undefined;\n  }));\n};\n\nvar CANVAS_Map = new WeakMap();\n\n/**\n * destroy existed canvas with the same id\n */\nfunction cleanExistedCanvas(container, canvas, cleanUp) {\n  if (container) {\n    var $dom = typeof container === 'string' ? document.getElementById(container) : container;\n    if (CANVAS_Map.has($dom)) CANVAS_Map.get($dom).destroy(cleanUp);\n    CANVAS_Map.set($dom, canvas);\n  }\n}\nvar isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n\nfunction isElement(target) {\n  return !!target.getAttribute;\n}\nfunction sortedIndex(array, value) {\n  var low = 0;\n  var high = array.length;\n  while (low < high) {\n    var mid = low + high >>> 1;\n    if (sortByZIndex(array[mid], value) < 0) {\n      low = mid + 1;\n    } else {\n      high = mid;\n    }\n  }\n  return low;\n}\nfunction sortByZIndex(o1, o2) {\n  var zIndex1 = Number(o1.parsedStyle.zIndex || 0);\n  var zIndex2 = Number(o2.parsedStyle.zIndex || 0);\n  if (zIndex1 === zIndex2) {\n    var parent = o1.parentNode;\n    if (parent) {\n      var children = parent.childNodes || [];\n      return children.indexOf(o1) - children.indexOf(o2);\n    }\n  }\n  return zIndex1 - zIndex2;\n}\nfunction findClosestClipPathTarget(object) {\n  var el = object;\n  do {\n    var _el$parsedStyle;\n    var clipPath = (_el$parsedStyle = el.parsedStyle) === null || _el$parsedStyle === void 0 ? void 0 : _el$parsedStyle.clipPath;\n    if (clipPath) return el;\n    el = el.parentElement;\n  } while (el !== null);\n  return null;\n}\nvar PX_SUFFIX = 'px';\nfunction setDOMSize($el, width, height) {\n  if (isBrowser && $el.style) {\n    $el.style.width = width + PX_SUFFIX;\n    $el.style.height = height + PX_SUFFIX;\n  }\n}\nfunction getStyle($el, property) {\n  if (isBrowser) {\n    return document.defaultView.getComputedStyle($el, null).getPropertyValue(property);\n  }\n}\nfunction getWidth($el) {\n  var width = getStyle($el, 'width');\n  if (width === 'auto') {\n    return $el.offsetWidth;\n  }\n  return parseFloat(width);\n}\nfunction getHeight($el) {\n  var height = getStyle($el, 'height');\n  if (height === 'auto') {\n    return $el.offsetHeight;\n  }\n  return parseFloat(height);\n}\n\n// borrow from hammer.js\nvar MOUSE_POINTER_ID = 1;\nvar TOUCH_TO_POINTER = {\n  touchstart: 'pointerdown',\n  touchend: 'pointerup',\n  touchendoutside: 'pointerupoutside',\n  touchmove: 'pointermove',\n  touchcancel: 'pointercancel'\n};\nvar clock = typeof performance === 'object' && performance.now ? performance : Date;\n\nfunction isInFragment(node) {\n  if (node.nodeName === Shape.FRAGMENT) return true;\n  return node.getRootNode().nodeName === Shape.FRAGMENT;\n}\n\nfunction isFillOrStrokeAffected() {\n  var pointerEvents = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'auto';\n  var fill = arguments.length > 1 ? arguments[1] : undefined;\n  var stroke = arguments.length > 2 ? arguments[2] : undefined;\n  // account for pointerEvents\n  // @see https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events\n\n  var hasFill = false;\n  var hasStroke = false;\n  var isFillOtherThanNone = !!fill && !fill.isNone;\n  var isStrokeOtherThanNone = !!stroke && !stroke.isNone;\n  if (pointerEvents === 'visiblepainted' || pointerEvents === 'painted' || pointerEvents === 'auto') {\n    hasFill = isFillOtherThanNone;\n    hasStroke = isStrokeOtherThanNone;\n  } else if (pointerEvents === 'visiblefill' || pointerEvents === 'fill') {\n    hasFill = true;\n  } else if (pointerEvents === 'visiblestroke' || pointerEvents === 'stroke') {\n    hasStroke = true;\n  } else if (pointerEvents === 'visible' || pointerEvents === 'all') {\n    // The values of the fill and stroke do not affect event processing.\n    hasFill = true;\n    hasStroke = true;\n  }\n  return [hasFill, hasStroke];\n}\n\n/**\n * Thanks for following contributor of codes\n * https://gist.github.com/1866474\n * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n * https://github.com/Financial-Times/polyfill-library/blob/master/polyfills/requestAnimationFrame/polyfill.js\n * */\n\nvar uId = 1;\nvar uniqueId = function uniqueId() {\n  return uId++;\n};\n\n// We use `self` instead of `window` for `WebWorker` support.\nvar root =\n// eslint-disable-next-line no-nested-ternary\ntypeof self === 'object' && self.self === self ? self :\n// @ts-ignore\ntypeof global === 'object' && global.global === global ?\n// @ts-ignore\nglobal : {};\nvar nowOffset = Date.now();\n\n// use performance api if exist, otherwise use Date.now.\n// Date.now polyfill required.\nvar pnow = function pnow() {\n  if (root.performance && typeof root.performance.now === 'function') {\n    return root.performance.now();\n  }\n\n  // fallback\n  return Date.now() - nowOffset;\n};\nvar reservedCBs = {};\nvar lastTime = Date.now();\nvar polyfillRaf = function polyfillRaf(callback) {\n  if (typeof callback !== 'function') {\n    throw new TypeError(\"\".concat(callback, \" is not a function\"));\n  }\n  var currentTime = Date.now();\n  var gap = currentTime - lastTime;\n  var delay = gap > 16 ? 0 : 16 - gap;\n  var id = uniqueId();\n  reservedCBs[id] = callback;\n\n  // keys(reservedCBs).length > 1   setTimeout   .\n  //  callback     reservedCBs   return\n  if (Object.keys(reservedCBs).length > 1) return id;\n  setTimeout(function () {\n    lastTime = currentTime;\n    var copied = reservedCBs;\n    reservedCBs = {};\n    Object.keys(copied).forEach(function (key) {\n      return copied[key](pnow());\n    });\n  }, delay);\n  return id;\n};\nvar polyfillCaf = function polyfillCaf(id) {\n  delete reservedCBs[id];\n};\nvar vendorPrefixes = ['', 'webkit', 'moz', 'ms', 'o'];\nvar getRequestAnimationFrame = function getRequestAnimationFrame(vp) {\n  if (typeof vp !== 'string') return polyfillRaf;\n  if (vp === '') return root.requestAnimationFrame;\n  return root[\"\".concat(vp, \"RequestAnimationFrame\")];\n};\nvar getCancelAnimationFrame = function getCancelAnimationFrame(vp) {\n  if (typeof vp !== 'string') return polyfillCaf;\n  if (vp === '') return root.cancelAnimationFrame;\n  return root[\"\".concat(vp, \"CancelAnimationFrame\")] || root[\"\".concat(vp, \"CancelRequestAnimationFrame\")];\n};\nvar find = function find(arr, predicate) {\n  var i = 0;\n  while (arr[i] !== undefined) {\n    if (predicate(arr[i])) return arr[i];\n    i += 1;\n  }\n};\nvar vp = find(vendorPrefixes, function (vp) {\n  return !!getRequestAnimationFrame(vp);\n});\nvar raf = getRequestAnimationFrame(vp);\nvar caf = getCancelAnimationFrame(vp);\nroot.requestAnimationFrame = raf;\nroot.cancelAnimationFrame = caf;\n\nvar AsyncParallelHook = /*#__PURE__*/function () {\n  function AsyncParallelHook() {\n    _classCallCheck(this, AsyncParallelHook);\n    this.callbacks = [];\n  }\n  return _createClass(AsyncParallelHook, [{\n    key: \"getCallbacksNum\",\n    value: function getCallbacksNum() {\n      return this.callbacks.length;\n    }\n  }, {\n    key: \"tapPromise\",\n    value: function tapPromise(options, fn) {\n      this.callbacks.push(fn);\n    }\n  }, {\n    key: \"promise\",\n    value: function promise() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return Promise.all(this.callbacks.map(function (callback) {\n        return callback.apply(void 0, args);\n      }));\n    }\n  }]);\n}();\n\nvar AsyncSeriesWaterfallHook = /*#__PURE__*/function () {\n  function AsyncSeriesWaterfallHook() {\n    _classCallCheck(this, AsyncSeriesWaterfallHook);\n    this.callbacks = [];\n  }\n  return _createClass(AsyncSeriesWaterfallHook, [{\n    key: \"tapPromise\",\n    value: function tapPromise(options, fn) {\n      this.callbacks.push(fn);\n    }\n  }, {\n    key: \"promise\",\n    value: function () {\n      var _promise = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _this$callbacks,\n          result,\n          i,\n          callback,\n          _args = arguments;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!this.callbacks.length) {\n                _context.next = 14;\n                break;\n              }\n              _context.next = 3;\n              return (_this$callbacks = this.callbacks)[0].apply(_this$callbacks, _args);\n            case 3:\n              result = _context.sent;\n              i = 0;\n            case 5:\n              if (!(i < this.callbacks.length - 1)) {\n                _context.next = 13;\n                break;\n              }\n              callback = this.callbacks[i]; // @ts-ignore\n              // eslint-disable-next-line no-await-in-loop\n              _context.next = 9;\n              return callback(result);\n            case 9:\n              result = _context.sent;\n            case 10:\n              i++;\n              _context.next = 5;\n              break;\n            case 13:\n              return _context.abrupt(\"return\", result);\n            case 14:\n              return _context.abrupt(\"return\", null);\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function promise() {\n        return _promise.apply(this, arguments);\n      }\n      return promise;\n    }()\n  }]);\n}();\n\nvar SyncHook = /*#__PURE__*/function () {\n  function SyncHook() {\n    _classCallCheck(this, SyncHook);\n    this.callbacks = [];\n  }\n  return _createClass(SyncHook, [{\n    key: \"tap\",\n    value: function tap(options, fn) {\n      this.callbacks.push(fn);\n    }\n  }, {\n    key: \"call\",\n    value: function call() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      /* eslint-disable-next-line prefer-rest-params */\n      var argsArr = arguments;\n      this.callbacks.forEach(function (callback) {\n        /* eslint-disable-next-line prefer-spread */\n        callback.apply(undefined, argsArr);\n      });\n    }\n  }]);\n}();\n\nvar SyncWaterfallHook = /*#__PURE__*/function () {\n  function SyncWaterfallHook() {\n    _classCallCheck(this, SyncWaterfallHook);\n    this.callbacks = [];\n  }\n  return _createClass(SyncWaterfallHook, [{\n    key: \"tap\",\n    value: function tap(options, fn) {\n      this.callbacks.push(fn);\n    }\n  }, {\n    key: \"call\",\n    value: function call() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      if (this.callbacks.length) {\n        /* eslint-disable-next-line prefer-rest-params */\n        var argsArr = arguments;\n        /* eslint-disable-next-line prefer-spread */\n        var result = this.callbacks[0].apply(undefined, argsArr);\n        for (var i = 0; i < this.callbacks.length - 1; i++) {\n          var callback = this.callbacks[i];\n          // @ts-ignore\n          result = callback(result);\n        }\n        return result;\n      }\n      return null;\n    }\n  }]);\n}();\n\nvar genericFontFamilies = ['serif', 'sans-serif', 'monospace', 'cursive', 'fantasy', 'system-ui'];\nvar stringRegExp = /([\\\"\\'])[^\\'\\\"]+\\1/;\nfunction toFontString(attributes) {\n  var _attributes$fontSize = attributes.fontSize,\n    fontSize = _attributes$fontSize === void 0 ? 16 : _attributes$fontSize,\n    _attributes$fontFamil = attributes.fontFamily,\n    fontFamily = _attributes$fontFamil === void 0 ? 'sans-serif' : _attributes$fontFamil,\n    _attributes$fontStyle = attributes.fontStyle,\n    fontStyle = _attributes$fontStyle === void 0 ? 'normal' : _attributes$fontStyle,\n    _attributes$fontVaria = attributes.fontVariant,\n    fontVariant = _attributes$fontVaria === void 0 ? 'normal' : _attributes$fontVaria,\n    _attributes$fontWeigh = attributes.fontWeight,\n    fontWeight = _attributes$fontWeigh === void 0 ? 'normal' : _attributes$fontWeigh;\n\n  // build canvas api font setting from individual components. Convert a numeric this.fontSize to px\n  // const fontSizeString: string = isNumber(fontSize) ? `${fontSize}px` : fontSize.toString();\n  var fontSizeString = isNumber(fontSize) && \"\".concat(fontSize, \"px\") || '16px';\n  // Clean-up fontFamily property by quoting each font name\n  // this will support font names with spaces\n\n  var fontFamilies = fontFamily.split(',');\n  for (var i = fontFamilies.length - 1; i >= 0; i--) {\n    // Trim any extra white-space\n    var _fontFamily = fontFamilies[i].trim();\n    // Check if font already contains strings\n    if (!stringRegExp.test(_fontFamily) && genericFontFamilies.indexOf(_fontFamily) < 0) {\n      _fontFamily = \"\\\"\".concat(_fontFamily, \"\\\"\");\n    }\n    fontFamilies[i] = _fontFamily;\n  }\n  return \"\".concat(fontStyle, \" \").concat(fontVariant, \" \").concat(fontWeight, \" \").concat(fontSizeString, \" \").concat(fontFamilies.join(','));\n}\n\nfunction createSkewMatrix(skewMatrix, skewX, skewY) {\n  // Create an identity matrix\n  mat4.identity(skewMatrix);\n  // Apply skew to the matrix\n  skewMatrix[4] = Math.tan(skewX); // Skew Y axis in X direction\n  skewMatrix[1] = Math.tan(skewY); // Skew X axis in Y direction\n\n  return skewMatrix;\n}\nvar $mat4_1 = mat4.create();\nvar $mat4_2 = mat4.create();\nvar parser = {\n  scale: function scale(d) {\n    mat4.fromScaling($mat4_1, [d[0].value, d[1].value, 1]);\n  },\n  scaleX: function scaleX(d) {\n    mat4.fromScaling($mat4_1, [d[0].value, 1, 1]);\n  },\n  scaleY: function scaleY(d) {\n    mat4.fromScaling($mat4_1, [1, d[0].value, 1]);\n  },\n  scaleZ: function scaleZ(d) {\n    mat4.fromScaling($mat4_1, [1, 1, d[0].value]);\n  },\n  scale3d: function scale3d(d) {\n    mat4.fromScaling($mat4_1, [d[0].value, d[1].value, d[2].value]);\n  },\n  translate: function translate(d) {\n    mat4.fromTranslation($mat4_1, [d[0].value, d[1].value, 0]);\n  },\n  translateX: function translateX(d) {\n    mat4.fromTranslation($mat4_1, [d[0].value, 0, 0]);\n  },\n  translateY: function translateY(d) {\n    mat4.fromTranslation($mat4_1, [0, d[0].value, 0]);\n  },\n  translateZ: function translateZ(d) {\n    mat4.fromTranslation($mat4_1, [0, 0, d[0].value]);\n  },\n  translate3d: function translate3d(d) {\n    mat4.fromTranslation($mat4_1, [d[0].value, d[1].value, d[2].value]);\n  },\n  rotate: function rotate(d) {\n    mat4.fromZRotation($mat4_1, deg2rad(convertAngleUnit(d[0])));\n  },\n  rotateX: function rotateX(d) {\n    mat4.fromXRotation($mat4_1, deg2rad(convertAngleUnit(d[0])));\n  },\n  rotateY: function rotateY(d) {\n    mat4.fromYRotation($mat4_1, deg2rad(convertAngleUnit(d[0])));\n  },\n  rotateZ: function rotateZ(d) {\n    mat4.fromZRotation($mat4_1, deg2rad(convertAngleUnit(d[0])));\n  },\n  rotate3d: function rotate3d(d) {\n    mat4.fromRotation($mat4_1, deg2rad(convertAngleUnit(d[3])), [d[0].value, d[1].value, d[2].value]);\n  },\n  skew: function skew(d) {\n    createSkewMatrix($mat4_1, deg2rad(d[0].value), deg2rad(d[1].value));\n  },\n  skewX: function skewX(d) {\n    createSkewMatrix($mat4_1, deg2rad(d[0].value), 0);\n  },\n  skewY: function skewY(d) {\n    createSkewMatrix($mat4_1, 0, deg2rad(d[0].value));\n  },\n  matrix: function matrix(d) {\n    // prettier-ignore\n    mat4.set($mat4_1, d[0].value, d[1].value, 0, 0, d[2].value, d[3].value, 0, 0, 0, 0, 1, 0, d[4].value, d[5].value, 0, 1);\n  },\n  matrix3d: function matrix3d(d) {\n    // @ts-ignore\n    mat4.set.apply(mat4, [$mat4_1].concat(_toConsumableArray(d.map(function (s) {\n      return s.value;\n    }))));\n  }\n};\nvar $vec3One$1 = vec3.fromValues(1, 1, 1);\nvar $vec3Zero$1 = vec3.create();\nvar optimizer = {\n  translate: function translate(object, d) {\n    runtime.sceneGraphService.setLocalScale(object, $vec3One$1, false);\n    runtime.sceneGraphService.setLocalEulerAngles(object, $vec3Zero$1, undefined, undefined, false);\n    runtime.sceneGraphService.setLocalPosition(object, [d[0].value, d[1].value, 0], false);\n    runtime.sceneGraphService.dirtifyLocal(object, object.transformable);\n  }\n};\nfunction parsedTransformToMat4(transform, object) {\n  if (transform.length) {\n    if (transform.length === 1 && optimizer[transform[0].t]) {\n      optimizer[transform[0].t](object, transform[0].d);\n      return;\n    }\n    var m = mat4.identity($mat4_2);\n    for (var i = 0; i < transform.length; i++) {\n      var _transform$i = transform[i],\n        t = _transform$i.t,\n        d = _transform$i.d;\n      var p = parser[t];\n      if (p) {\n        p(d);\n        mat4.mul(m, m, $mat4_1);\n      }\n    }\n    object.setLocalTransform(m);\n  } else {\n    object.resetLocalTransform();\n  }\n  return object.getLocalTransform();\n}\n\n/**\n * @see /zh/docs/api/animation#\n *\n * support the following formats like CSS Transform:\n *\n * scale\n * * scale(x, y)\n * * scaleX(x)\n * * scaleY(x)\n * * scaleZ(z)\n * * scale3d(x, y, z)\n *\n * translate (unit: none, px, %(relative to its bounds))\n * * translate(x, y) eg. translate(0, 0) translate(0, 30px) translate(100%, 100%)\n * * translateX(0)\n * * translateY(0)\n * * translateZ(0)\n * * translate3d(0, 0, 0)\n *\n * rotate (unit: deg rad turn)\n * * rotate(0.5turn) rotate(30deg) rotate(1rad)\n *\n * none\n *\n * unsupported for now:\n * * calc() eg. translate(calc(100% + 10px))\n * * matrix/matrix3d()\n * * skew/skewX/skewY\n * * perspective\n */\nvar CSSPropertyTransform = /*#__PURE__*/function () {\n  function CSSPropertyTransform() {\n    _classCallCheck(this, CSSPropertyTransform);\n    this.parser = parseTransformUnmemoize;\n    this.mixer = mergeTransforms;\n  }\n  return _createClass(CSSPropertyTransform, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, parsed, object) {\n      // 'none'\n      if (parsed instanceof CSSKeywordValue) {\n        return [];\n      }\n      return parsed;\n    }\n  }, {\n    key: \"postProcessor\",\n    value: function postProcessor(object) {\n      parsedTransformToMat4(object.parsedStyle.transform, object);\n    }\n  }]);\n}();\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform-origin\n * @example\n * [10px, 10px] [10%, 10%]\n */\nvar CSSPropertyTransformOrigin = /*#__PURE__*/function () {\n  function CSSPropertyTransformOrigin() {\n    _classCallCheck(this, CSSPropertyTransformOrigin);\n  }\n  return _createClass(CSSPropertyTransformOrigin, [{\n    key: \"postProcessor\",\n    value: function postProcessor(object) {\n      var transformOrigin = object.parsedStyle.transformOrigin;\n      if (transformOrigin[0].unit === UnitType.kPixels && transformOrigin[1].unit === UnitType.kPixels) {\n        object.setOrigin(transformOrigin[0].value, transformOrigin[1].value);\n      } else {\n        // Relative to geometry bounds, calculate later.\n        object.getGeometryBounds();\n      }\n    }\n  }]);\n}();\n\nvar CSSPropertyZIndex = /*#__PURE__*/function () {\n  function CSSPropertyZIndex() {\n    _classCallCheck(this, CSSPropertyZIndex);\n  }\n  return _createClass(CSSPropertyZIndex, [{\n    key: \"calculator\",\n    value: function calculator(name, oldParsed, computed, object) {\n      return computed.value;\n    }\n  }, {\n    key: \"postProcessor\",\n    value: function postProcessor(object) {\n      if (object.parentNode) {\n        var parentEntity = object.parentNode;\n        var parentRenderable = parentEntity.renderable;\n        var parentSortable = parentEntity.sortable;\n        if (parentRenderable) {\n          parentRenderable.dirty = true;\n        }\n        // need re-sort on parent\n        if (parentSortable) {\n          parentSortable.dirty = true;\n          parentSortable.dirtyReason = SortReason.Z_INDEX_CHANGED;\n        }\n      }\n    }\n  }]);\n}();\n\nvar CircleUpdater = /*#__PURE__*/function () {\n  function CircleUpdater() {\n    _classCallCheck(this, CircleUpdater);\n  }\n  return _createClass(CircleUpdater, [{\n    key: \"update\",\n    value: function update(parsedStyle, object) {\n      var _parsedStyle$cx = parsedStyle.cx,\n        cx = _parsedStyle$cx === void 0 ? 0 : _parsedStyle$cx,\n        _parsedStyle$cy = parsedStyle.cy,\n        cy = _parsedStyle$cy === void 0 ? 0 : _parsedStyle$cy,\n        _parsedStyle$r = parsedStyle.r,\n        r = _parsedStyle$r === void 0 ? 0 : _parsedStyle$r;\n      return {\n        cx: cx,\n        cy: cy,\n        hwidth: r,\n        hheight: r\n      };\n    }\n  }]);\n}();\n\nvar EllipseUpdater = /*#__PURE__*/function () {\n  function EllipseUpdater() {\n    _classCallCheck(this, EllipseUpdater);\n  }\n  return _createClass(EllipseUpdater, [{\n    key: \"update\",\n    value: function update(parsedStyle, object) {\n      var _parsedStyle$cx = parsedStyle.cx,\n        cx = _parsedStyle$cx === void 0 ? 0 : _parsedStyle$cx,\n        _parsedStyle$cy = parsedStyle.cy,\n        cy = _parsedStyle$cy === void 0 ? 0 : _parsedStyle$cy,\n        _parsedStyle$rx = parsedStyle.rx,\n        rx = _parsedStyle$rx === void 0 ? 0 : _parsedStyle$rx,\n        _parsedStyle$ry = parsedStyle.ry,\n        ry = _parsedStyle$ry === void 0 ? 0 : _parsedStyle$ry;\n      return {\n        cx: cx,\n        cy: cy,\n        hwidth: rx,\n        hheight: ry\n      };\n    }\n  }]);\n}();\n\nvar LineUpdater = /*#__PURE__*/function () {\n  function LineUpdater() {\n    _classCallCheck(this, LineUpdater);\n  }\n  return _createClass(LineUpdater, [{\n    key: \"update\",\n    value: function update(parsedStyle) {\n      var x1 = parsedStyle.x1,\n        y1 = parsedStyle.y1,\n        x2 = parsedStyle.x2,\n        y2 = parsedStyle.y2;\n      var minX = Math.min(x1, x2);\n      var maxX = Math.max(x1, x2);\n      var minY = Math.min(y1, y2);\n      var maxY = Math.max(y1, y2);\n      var width = maxX - minX;\n      var height = maxY - minY;\n      var hwidth = width / 2;\n      var hheight = height / 2;\n      return {\n        cx: minX + hwidth,\n        cy: minY + hheight,\n        hwidth: hwidth,\n        hheight: hheight\n      };\n    }\n  }]);\n}();\n\nvar PathUpdater = /*#__PURE__*/function () {\n  function PathUpdater() {\n    _classCallCheck(this, PathUpdater);\n  }\n  return _createClass(PathUpdater, [{\n    key: \"update\",\n    value: function update(parsedStyle) {\n      var d = parsedStyle.d;\n      var _d$rect = d.rect,\n        x = _d$rect.x,\n        y = _d$rect.y,\n        width = _d$rect.width,\n        height = _d$rect.height;\n      var hwidth = width / 2;\n      var hheight = height / 2;\n      return {\n        cx: x + hwidth,\n        cy: y + hheight,\n        hwidth: hwidth,\n        hheight: hheight\n      };\n    }\n  }]);\n}();\n\nvar PolylineUpdater = /*#__PURE__*/function () {\n  function PolylineUpdater() {\n    _classCallCheck(this, PolylineUpdater);\n  }\n  return _createClass(PolylineUpdater, [{\n    key: \"update\",\n    value: function update(parsedStyle) {\n      if (parsedStyle.points && isArray(parsedStyle.points.points)) {\n        var points = parsedStyle.points.points;\n\n        // FIXME: account for miter lineJoin\n        var minX = Math.min.apply(Math, _toConsumableArray(points.map(function (point) {\n          return point[0];\n        })));\n        var maxX = Math.max.apply(Math, _toConsumableArray(points.map(function (point) {\n          return point[0];\n        })));\n        var minY = Math.min.apply(Math, _toConsumableArray(points.map(function (point) {\n          return point[1];\n        })));\n        var maxY = Math.max.apply(Math, _toConsumableArray(points.map(function (point) {\n          return point[1];\n        })));\n        var width = maxX - minX;\n        var height = maxY - minY;\n        var hwidth = width / 2;\n        var hheight = height / 2;\n        return {\n          cx: minX + hwidth,\n          cy: minY + hheight,\n          hwidth: hwidth,\n          hheight: hheight\n        };\n      }\n      return {\n        cx: 0,\n        cy: 0,\n        hwidth: 0,\n        hheight: 0\n      };\n    }\n  }]);\n}();\n\nvar RectUpdater = /*#__PURE__*/function () {\n  function RectUpdater() {\n    _classCallCheck(this, RectUpdater);\n  }\n  return _createClass(RectUpdater, [{\n    key: \"update\",\n    value: function update(parsedStyle, object) {\n      var _parsedStyle$x = parsedStyle.x,\n        x = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n        _parsedStyle$y = parsedStyle.y,\n        y = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y,\n        src = parsedStyle.src,\n        _parsedStyle$width = parsedStyle.width,\n        width = _parsedStyle$width === void 0 ? 0 : _parsedStyle$width,\n        _parsedStyle$height = parsedStyle.height,\n        height = _parsedStyle$height === void 0 ? 0 : _parsedStyle$height;\n      var contentWidth = width;\n      var contentHeight = height;\n\n      // resize with HTMLImageElement's size\n      if (src && !isString(src)) {\n        if (!contentWidth) {\n          contentWidth = src.width;\n          parsedStyle.width = contentWidth;\n        }\n        if (!contentHeight) {\n          contentHeight = src.height;\n          parsedStyle.height = contentHeight;\n        }\n      }\n      return {\n        cx: x + contentWidth / 2,\n        cy: y + contentHeight / 2,\n        hwidth: contentWidth / 2,\n        hheight: contentHeight / 2\n      };\n    }\n  }]);\n}();\n\nvar TextUpdater = /*#__PURE__*/function () {\n  function TextUpdater(globalRuntime) {\n    _classCallCheck(this, TextUpdater);\n    this.globalRuntime = globalRuntime;\n  }\n  return _createClass(TextUpdater, [{\n    key: \"isReadyToMeasure\",\n    value: function isReadyToMeasure(parsedStyle, object) {\n      var text = parsedStyle.text;\n      return text;\n    }\n  }, {\n    key: \"update\",\n    value: function update(parsedStyle, object) {\n      var _object$ownerDocument;\n      var text = parsedStyle.text,\n        _parsedStyle$textAlig = parsedStyle.textAlign,\n        textAlign = _parsedStyle$textAlig === void 0 ? 'start' : _parsedStyle$textAlig,\n        _parsedStyle$lineWidt = parsedStyle.lineWidth,\n        lineWidth = _parsedStyle$lineWidt === void 0 ? 1 : _parsedStyle$lineWidt,\n        _parsedStyle$textBase = parsedStyle.textBaseline,\n        textBaseline = _parsedStyle$textBase === void 0 ? 'alphabetic' : _parsedStyle$textBase,\n        _parsedStyle$dx = parsedStyle.dx,\n        dx = _parsedStyle$dx === void 0 ? 0 : _parsedStyle$dx,\n        _parsedStyle$dy = parsedStyle.dy,\n        dy = _parsedStyle$dy === void 0 ? 0 : _parsedStyle$dy,\n        _parsedStyle$x = parsedStyle.x,\n        x = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n        _parsedStyle$y = parsedStyle.y,\n        y = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y;\n      if (!this.isReadyToMeasure(parsedStyle, object)) {\n        parsedStyle.metrics = {\n          font: '',\n          width: 0,\n          height: 0,\n          lines: [],\n          lineWidths: [],\n          lineHeight: 0,\n          maxLineWidth: 0,\n          fontProperties: {\n            ascent: 0,\n            descent: 0,\n            fontSize: 0\n          },\n          lineMetrics: []\n        };\n        return {\n          hwidth: 0,\n          hheight: 0,\n          cx: 0,\n          cy: 0\n        };\n      }\n      var _ref = (object === null || object === void 0 || (_object$ownerDocument = object.ownerDocument) === null || _object$ownerDocument === void 0 || (_object$ownerDocument = _object$ownerDocument.defaultView) === null || _object$ownerDocument === void 0 ? void 0 : _object$ownerDocument.getConfig()) || {},\n        offscreenCanvas = _ref.offscreenCanvas;\n      var metrics = this.globalRuntime.textService.measureText(text, parsedStyle, offscreenCanvas);\n      parsedStyle.metrics = metrics;\n      var width = metrics.width,\n        height = metrics.height;\n      var hwidth = width / 2;\n      var hheight = height / 2;\n\n      // default 'left'\n      var lineXOffset = x + hwidth;\n      if (textAlign === 'center' || textAlign === 'middle') {\n        lineXOffset += lineWidth / 2 - hwidth;\n      } else if (textAlign === 'right' || textAlign === 'end') {\n        lineXOffset += lineWidth - hwidth * 2;\n      }\n      var lineYOffset = y - hheight;\n      if (textBaseline === 'middle') {\n        lineYOffset += hheight;\n      } else if (textBaseline === 'top' || textBaseline === 'hanging') {\n        lineYOffset += hheight * 2;\n      } else if (textBaseline === 'alphabetic') ; else if (textBaseline === 'bottom' || textBaseline === 'ideographic') {\n        lineYOffset += 0;\n      }\n      // TODO: ideographic & bottom\n\n      if (dx) {\n        lineXOffset += dx;\n      }\n      if (dy) {\n        lineYOffset += dy;\n      }\n      return {\n        cx: lineXOffset,\n        cy: lineYOffset,\n        hwidth: hwidth,\n        hheight: hheight\n      };\n    }\n  }]);\n}();\n\nvar GroupUpdater = /*#__PURE__*/function () {\n  function GroupUpdater() {\n    _classCallCheck(this, GroupUpdater);\n  }\n  return _createClass(GroupUpdater, [{\n    key: \"update\",\n    value: function update(parsedStyle, object) {\n      return {\n        cx: 0,\n        cy: 0,\n        hwidth: 0,\n        hheight: 0\n      };\n    }\n  }]);\n}();\n\nvar HTMLUpdater = /*#__PURE__*/function () {\n  function HTMLUpdater() {\n    _classCallCheck(this, HTMLUpdater);\n  }\n  return _createClass(HTMLUpdater, [{\n    key: \"update\",\n    value: function update(parsedStyle, object) {\n      var _parsedStyle$x = parsedStyle.x,\n        x = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n        _parsedStyle$y = parsedStyle.y,\n        y = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y,\n        _parsedStyle$width = parsedStyle.width,\n        width = _parsedStyle$width === void 0 ? 0 : _parsedStyle$width,\n        _parsedStyle$height = parsedStyle.height,\n        height = _parsedStyle$height === void 0 ? 0 : _parsedStyle$height;\n      return {\n        cx: x + width / 2,\n        cy: y + height / 2,\n        hwidth: width / 2,\n        hheight: height / 2\n      };\n    }\n  }]);\n}();\n\nfunction isFederatedEvent(value) {\n  return !!value.type;\n}\n\n/**\n * An DOM-compatible synthetic event implementation that is \"forwarded\" on behalf of an original\n * FederatedEvent or native Event.\n */\nvar FederatedEvent = /*#__PURE__*/function () {\n  /**\n   * The event boundary which manages this event. Propagation can only occur\n   *  within the boundary's jurisdiction.\n   */\n  function FederatedEvent(manager) {\n    _classCallCheck(this, FederatedEvent);\n    /**\n     * The propagation phase.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/eventPhase\n     */\n    this.eventPhase = FederatedEvent.prototype.NONE;\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/bubbles\n     */\n    this.bubbles = true;\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/cancelBubble\n     */\n    this.cancelBubble = true;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/cancelable\n     */\n    this.cancelable = false;\n    /** Flags whether the default response of the user agent was prevent through this event. */\n    this.defaultPrevented = false;\n    /** Flags whether propagation was stopped. */\n    this.propagationStopped = false;\n    /** Flags whether propagation was immediately stopped. */\n    this.propagationImmediatelyStopped = false;\n    /**\n     * The coordinates of the evnet relative to the nearest DOM layer.\n     * This is a non-standard property.\n     */\n    this.layer = new Point();\n    /**\n     * The coordinates of the event relative to the DOM document.\n     * This is a non-standard property.\n     * relative to the DOM document.\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/MouseEvent/pageX\n     */\n    this.page = new Point();\n    /**\n     * relative to Canvas, origin is left-top\n     */\n    this.canvas = new Point();\n    /**\n     * relative to Viewport, account for Camera\n     */\n    this.viewport = new Point();\n    this.composed = false;\n    this.NONE = 0;\n    this.CAPTURING_PHASE = 1;\n    this.AT_TARGET = 2;\n    this.BUBBLING_PHASE = 3;\n    this.manager = manager;\n  }\n  return _createClass(FederatedEvent, [{\n    key: \"name\",\n    get:\n    /**\n     * The type of event, supports the following:\n     * * pointerdown\n     * * touchstart\n     * * mousedown\n     * * rightdown\n     * * ...\n     */\n\n    /**\n     * @deprecated\n     */\n    function get() {\n      return this.type;\n    }\n  }, {\n    key: \"layerX\",\n    get: function get() {\n      return this.layer.x;\n    }\n  }, {\n    key: \"layerY\",\n    get: function get() {\n      return this.layer.y;\n    }\n  }, {\n    key: \"pageX\",\n    get: function get() {\n      return this.page.x;\n    }\n  }, {\n    key: \"pageY\",\n    get: function get() {\n      return this.page.y;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this.canvas.x;\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this.canvas.y;\n    }\n  }, {\n    key: \"canvasX\",\n    get: function get() {\n      return this.canvas.x;\n    }\n  }, {\n    key: \"canvasY\",\n    get: function get() {\n      return this.canvas.y;\n    }\n  }, {\n    key: \"viewportX\",\n    get: function get() {\n      return this.viewport.x;\n    }\n  }, {\n    key: \"viewportY\",\n    get: function get() {\n      return this.viewport.y;\n    }\n  }, {\n    key: \"composedPath\",\n    value:\n    /**\n     * The propagation path for this event\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/composedPath\n     *\n     * So composedPath()[0] represents the original target.\n     * @see https://polymer-library.polymer-project.org/3.0/docs/devguide/events#retargeting\n     */\n    function composedPath() {\n      if (this.manager && (!this.path || this.path[0] !== this.target)) {\n        this.path = this.target ? this.manager.propagationPath(this.target) : [];\n      }\n      return this.path;\n    }\n    /**\n     * @deprecated\n     */\n  }, {\n    key: \"propagationPath\",\n    get: function get() {\n      return this.composedPath();\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/preventDefault\n     */\n  }, {\n    key: \"preventDefault\",\n    value: function preventDefault() {\n      if (this.nativeEvent instanceof Event && this.nativeEvent.cancelable) {\n        this.nativeEvent.preventDefault();\n      }\n      this.defaultPrevented = true;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/stopImmediatePropagation\n     */\n  }, {\n    key: \"stopImmediatePropagation\",\n    value: function stopImmediatePropagation() {\n      this.propagationImmediatelyStopped = true;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/stopPropagation\n     */\n  }, {\n    key: \"stopPropagation\",\n    value: function stopPropagation() {\n      this.propagationStopped = true;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/view\n     */\n  }, {\n    key: \"initEvent\",\n    value:\n    /**\n     * added for compatibility with DOM Event,\n     * deprecated props and methods\n     */\n    function initEvent() {}\n  }, {\n    key: \"initUIEvent\",\n    value: function initUIEvent() {}\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }]);\n}();\n\nvar FederatedMouseEvent = /*#__PURE__*/function (_ref) {\n  function FederatedMouseEvent() {\n    var _this;\n    _classCallCheck(this, FederatedMouseEvent);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, FederatedMouseEvent, [].concat(args));\n    /** Whether the \"alt\" key was pressed when this mouse event occurred. */\n    /** The specific button that was pressed in this mouse event. */\n    /** The button depressed when this event occurred. */\n    /** Whether the \"control\" key was pressed when this mouse event occurred. */\n    /** Whether the \"meta\" key was pressed when this mouse event occurred. */\n    /** This is currently not implemented in the Federated Events API. */\n    // @ts-ignore\n    /** Whether the \"shift\" key was pressed when this mouse event occurred. */\n    /**\n     * The coordinates of the mouse event relative to the canvas.\n     */\n    _this.client = new Point();\n    /**\n     * The movement in this pointer relative to the last `mousemove` event.\n     */\n    _this.movement = new Point();\n    /**\n     * The offset of the pointer coordinates w.r.t. target DisplayObject in world space. This is\n     * not supported at the moment.\n     */\n    _this.offset = new Point();\n    /**\n     * The pointer coordinates in world space.\n     */\n    _this.global = new Point();\n    /**\n     * The pointer coordinates in sceen space.\n     */\n    _this.screen = new Point();\n    return _this;\n  }\n  _inherits(FederatedMouseEvent, _ref);\n  return _createClass(FederatedMouseEvent, [{\n    key: \"clientX\",\n    get: function get() {\n      return this.client.x;\n    }\n  }, {\n    key: \"clientY\",\n    get: function get() {\n      return this.client.y;\n    }\n  }, {\n    key: \"movementX\",\n    get: function get() {\n      return this.movement.x;\n    }\n  }, {\n    key: \"movementY\",\n    get: function get() {\n      return this.movement.y;\n    }\n  }, {\n    key: \"offsetX\",\n    get: function get() {\n      return this.offset.x;\n    }\n  }, {\n    key: \"offsetY\",\n    get: function get() {\n      return this.offset.y;\n    }\n  }, {\n    key: \"globalX\",\n    get: function get() {\n      return this.global.x;\n    }\n  }, {\n    key: \"globalY\",\n    get: function get() {\n      return this.global.y;\n    }\n  }, {\n    key: \"screenX\",\n    get: function get() {\n      return this.screen.x;\n    }\n  }, {\n    key: \"screenY\",\n    get: function get() {\n      return this.screen.y;\n    }\n  }, {\n    key: \"getModifierState\",\n    value: function getModifierState(key) {\n      return 'getModifierState' in this.nativeEvent && this.nativeEvent.getModifierState(key);\n    }\n  }, {\n    key: \"initMouseEvent\",\n    value: function initMouseEvent() {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }]);\n}(FederatedEvent);\n\n// @ts-ignore\nvar FederatedPointerEvent = /*#__PURE__*/function (_FederatedMouseEvent) {\n  function FederatedPointerEvent() {\n    var _this;\n    _classCallCheck(this, FederatedPointerEvent);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, FederatedPointerEvent, [].concat(args));\n    /**\n     * The unique identifier of the pointer.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pointerId\n     */\n    /**\n     * The width of the pointer's contact along the x-axis, measured in CSS pixels.\n     * radiusX of TouchEvents will be represented by this value.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/width\n     */\n    _this.width = 0;\n    /**\n     * The height of the pointer's contact along the y-axis, measured in CSS pixels.\n     * radiusY of TouchEvents will be represented by this value.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/height\n     */\n    _this.height = 0;\n    /**\n     * Indicates whether or not the pointer device that created the event is the primary pointer.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/isPrimary\n     */\n    _this.isPrimary = false;\n    return _this;\n  }\n  _inherits(FederatedPointerEvent, _FederatedMouseEvent);\n  return _createClass(FederatedPointerEvent, [{\n    key: \"getCoalescedEvents\",\n    value:\n    /**\n     * The type of pointer that triggered the event.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pointerType\n     */\n\n    /**\n     * Pressure applied by the pointing device during the event.\n     *s\n     * A Touch's force property will be represented by this value.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pressure\n     */\n\n    /**\n     * Barrel pressure on a stylus pointer.\n     *\n     * @see https://w3c.github.io/pointerevents/#pointerevent-interface\n     */\n\n    /**\n     * The angle, in degrees, between the pointer device and the screen.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/tiltX\n     */\n\n    /**\n     * The angle, in degrees, between the pointer device and the screen.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/tiltY\n     */\n\n    /**\n     * Twist of a stylus pointer.\n     *\n     * @see https://w3c.github.io/pointerevents/#pointerevent-interface\n     */\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/getCoalescedEvents\n     */\n    function getCoalescedEvents() {\n      if (this.type === 'pointermove' || this.type === 'mousemove' || this.type === 'touchmove') {\n        // @ts-ignore\n        return [this];\n      }\n      return [];\n    }\n\n    /**\n     * @see https://chromestatus.com/feature/5765569655603200\n     */\n  }, {\n    key: \"getPredictedEvents\",\n    value: function getPredictedEvents() {\n      throw new Error('getPredictedEvents is not supported!');\n    }\n\n    /**\n     * @see https://github.com/antvis/G/issues/1115\n     * We currently reuses event objects in the event system,\n     * avoiding the creation of a large number of event objects.\n     * Reused objects are only used to carry different data,\n     * such as coordinate information, native event objects,\n     * and therefore the lifecycle is limited to the event handler,\n     * which can lead to unintended consequences if an attempt is made to cache the entire event object.\n     *\n     * Therefore, while keeping the above performance considerations in mind, it is possible to provide a clone method that creates a new object when the user really wants to cache it, e.g.\n     */\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return this.manager.clonePointerEvent(this);\n    }\n  }]);\n}(FederatedMouseEvent);\n\n// @ts-ignore\nvar FederatedWheelEvent = /*#__PURE__*/function (_FederatedMouseEvent) {\n  function FederatedWheelEvent() {\n    _classCallCheck(this, FederatedWheelEvent);\n    return _callSuper(this, FederatedWheelEvent, arguments);\n  }\n  _inherits(FederatedWheelEvent, _FederatedMouseEvent);\n  return _createClass(FederatedWheelEvent, [{\n    key: \"clone\",\n    value:\n    /**\n     * The units of `deltaX`, `deltaY`, and `deltaZ`. This is one of `DOM_DELTA_LINE`,\n     * `DOM_DELTA_PAGE`, `DOM_DELTA_PIXEL`.\n     */\n\n    /** Horizontal scroll amount */\n\n    /** Vertical scroll amount */\n\n    /** z-axis scroll amount. */\n\n    function clone() {\n      return this.manager.cloneWheelEvent(this);\n    }\n  }]);\n}(FederatedMouseEvent);\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/Events/Creating_and_triggering_events\n *\n * @example\n  const event = new CustomEvent('build', { detail: { prop1: 'xx' } });\n  circle.addEventListener('build', (e) => {\n    e.target; // circle\n    e.detail; // { prop1: 'xx' }\n  });\n\n  circle.dispatchEvent(event);\n */\nvar CustomEvent = /*#__PURE__*/function (_FederatedEvent) {\n  function CustomEvent(eventName, object) {\n    var _this;\n    _classCallCheck(this, CustomEvent);\n    _this = _callSuper(this, CustomEvent, [null]);\n    _this.type = eventName;\n    _this.detail = object;\n\n    // compatible with G 3.0\n    Object.assign(_this, object);\n    return _this;\n  }\n  _inherits(CustomEvent, _FederatedEvent);\n  return _createClass(CustomEvent);\n}(FederatedEvent);\n\nvar CANVAS_CACHE = new WeakMap();\n\n/**\n * Objects that can receive events and may have listeners for them.\n * eg. Element, Canvas, DisplayObject\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget\n */\nvar EventTarget = /*#__PURE__*/function () {\n  function EventTarget() {\n    _classCallCheck(this, EventTarget);\n    /**\n     * event emitter\n     */\n    this.emitter = new EventEmitter();\n  }\n  return _createClass(EventTarget, [{\n    key: \"on\",\n    value:\n    /**\n     * @deprecated\n     * @alias addEventListener\n     */\n    function on(type, listener, options) {\n      this.addEventListener(type, listener, options);\n      return this;\n    }\n    /**\n     * support `capture` & `once` in options\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener\n     */\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener(type, listener, options) {\n      var capture = false;\n      var once = false;\n      if (isBoolean(options)) capture = options;else if (options) {\n        var _options$capture = options.capture;\n        capture = _options$capture === void 0 ? false : _options$capture;\n        var _options$once = options.once;\n        once = _options$once === void 0 ? false : _options$once;\n      }\n      if (capture) type += 'capture';\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      listener = isFunction(listener) ? listener : listener.handleEvent;\n      var context = isFunction(listener) ? undefined : listener;\n      if (once) this.emitter.once(type, listener, context);else this.emitter.on(type, listener, context);\n      return this;\n    }\n    /**\n     * @deprecated\n     * @alias removeEventListener\n     */\n  }, {\n    key: \"off\",\n    value: function off(type, listener, options) {\n      if (type) {\n        this.removeEventListener(type, listener, options);\n      } else {\n        // remove all listeners\n        this.removeAllEventListeners();\n      }\n      return this;\n    }\n  }, {\n    key: \"removeAllEventListeners\",\n    value: function removeAllEventListeners() {\n      var _this$emitter;\n      (_this$emitter = this.emitter) === null || _this$emitter === void 0 || _this$emitter.removeAllListeners();\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(type, listener, options) {\n      var _listener;\n      if (!this.emitter) return this;\n      var capture = isBoolean(options) ? options : options === null || options === void 0 ? void 0 : options.capture;\n      if (capture) type += 'capture';\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      listener = isFunction(listener) ? listener : (_listener = listener) === null || _listener === void 0 ? void 0 : _listener.handleEvent;\n      var context = isFunction(listener) ? undefined : listener;\n      this.emitter.off(type, listener, context);\n      return this;\n    }\n    /**\n     * @deprecated\n     * @alias dispatchEvent\n     */\n  }, {\n    key: \"emit\",\n    value: function emit(eventName, object) {\n      this.dispatchEvent(new CustomEvent(eventName, object));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\n     */\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(e) {\n      var skipPropagate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var canvas = CANVAS_CACHE.get(this);\n      if (!canvas) {\n        var _ownerDocument;\n        // @ts-expect-error document may be defined in inherited class\n        if (this.document) canvas = this;\n        // @ts-expect-error defaultView may be defined in inherited class\n        else if (this.defaultView) canvas = this.defaultView;else canvas = (_ownerDocument = this.ownerDocument) === null || _ownerDocument === void 0 ? void 0 : _ownerDocument.defaultView;\n        if (canvas) CANVAS_CACHE.set(this, canvas);\n      }\n      if (canvas) {\n        e.manager = canvas.getEventService();\n        if (!e.manager) return false;\n        e.defaultPrevented = false;\n        if (e.path) e.path.length = 0;\n        // @ts-ignore\n        else e.page = [];\n        if (!skipPropagate) e.target = this;\n        e.manager.dispatchEvent(e, e.type, skipPropagate);\n      } else {\n        // HACK Fixed the issue that after an element leaves the DOM tree, there is no associated canvas,\n        // which causes the removed and destroy events to not be triggered\n        this.emitter.emit(e.type, e);\n      }\n      return !e.defaultPrevented;\n    }\n  }]);\n}();\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Node\n */\nvar Node = /*#__PURE__*/function (_EventTarget) {\n  function Node() {\n    var _this;\n    _classCallCheck(this, Node);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Node, [].concat(args));\n    _this.shadow = false;\n    /**\n     * points to canvas.document\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/ownerDocument\n     */\n    _this.ownerDocument = null;\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/isConnected\n     * @example\n        circle.isConnected; // false\n        canvas.appendChild(circle);\n        circle.isConnected; // true\n     */\n    _this.isConnected = false;\n    /**\n     * Returns node's node document's document base URL.\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node\n     */\n    _this.baseURI = '';\n    /**\n     * Returns the children.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes\n     */\n    _this.childNodes = [];\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType\n     */\n    _this.nodeType = 0;\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeName\n     */\n    _this.nodeName = '';\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeValue\n     */\n    _this.nodeValue = null;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode\n     */\n    _this.parentNode = null;\n    return _this;\n  }\n  _inherits(Node, _EventTarget);\n  return _createClass(Node, [{\n    key: \"textContent\",\n    get:\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/textContent\n     */\n    function get() {\n      var out = '';\n      if (this.nodeName === Shape.TEXT) {\n        // @ts-ignore\n        out += this.style.text;\n      }\n      var _iterator = _createForOfIteratorHelper(this.childNodes),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _child = _step.value;\n          if (_child.nodeName === Shape.TEXT) {\n            out += _child.nodeValue;\n          } else {\n            out += _child.textContent;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return out;\n    },\n    set: function set(content) {\n      var _this2 = this;\n      // remove all children\n      this.childNodes.slice().forEach(function (child) {\n        _this2.removeChild(child);\n      });\n      if (this.nodeName === Shape.TEXT) {\n        // @ts-ignore\n        this.style.text = \"\".concat(content);\n      }\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/getRootNode\n     */\n  }, {\n    key: \"getRootNode\",\n    value: function getRootNode() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (this.parentNode) {\n        return this.parentNode.getRootNode(opts);\n      }\n      if (opts.composed && this.host) {\n        return this.host.getRootNode(opts);\n      }\n      return this;\n    }\n  }, {\n    key: \"hasChildNodes\",\n    value: function hasChildNodes() {\n      return this.childNodes.length > 0;\n    }\n  }, {\n    key: \"isDefaultNamespace\",\n    value: function isDefaultNamespace(namespace) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"lookupNamespaceURI\",\n    value: function lookupNamespaceURI(prefix) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"lookupPrefix\",\n    value: function lookupPrefix(namespace) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/isEqualNode\n     */\n  }, {\n    key: \"isEqualNode\",\n    value: function isEqualNode(otherNode) {\n      // TODO: compare 2 nodes, not sameness\n      return this === otherNode;\n    }\n  }, {\n    key: \"isSameNode\",\n    value: function isSameNode(otherNode) {\n      return this.isEqualNode(otherNode);\n    }\n  }, {\n    key: \"parent\",\n    get:\n    /**\n     * @deprecated\n     * @alias parentNode\n     */\n    function get() {\n      return this.parentNode;\n    }\n  }, {\n    key: \"parentElement\",\n    get: function get() {\n      return null;\n    }\n  }, {\n    key: \"nextSibling\",\n    get: function get() {\n      return null;\n    }\n  }, {\n    key: \"previousSibling\",\n    get: function get() {\n      return null;\n    }\n  }, {\n    key: \"firstChild\",\n    get: function get() {\n      return this.childNodes.length > 0 ? this.childNodes[0] : null;\n    }\n  }, {\n    key: \"lastChild\",\n    get: function get() {\n      return this.childNodes.length > 0 ? this.childNodes[this.childNodes.length - 1] : null;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n     * @see https://github.com/b-fuze/deno-dom/blob/master/src/dom/node.ts#L338\n     */\n  }, {\n    key: \"compareDocumentPosition\",\n    value: function compareDocumentPosition(other) {\n      if (other === this) {\n        // same node\n        return 0;\n      }\n\n      // if (!(other instanceof Node)) {\n      //   throw new TypeError(\n      //     'Node.compareDocumentPosition: Argument 1 does not implement interface Node.',\n      //   );\n      // }\n\n      var node1Root = other;\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      var node2Root = this;\n      var node1Hierarchy = [node1Root];\n      var node2Hierarchy = [node2Root];\n      while ((_node1Root$parentNode = node1Root.parentNode) !== null && _node1Root$parentNode !== void 0 ? _node1Root$parentNode : node2Root.parentNode) {\n        var _node1Root$parentNode;\n        node1Root = node1Root.parentNode ? (node1Hierarchy.push(node1Root.parentNode), node1Root.parentNode) : node1Root;\n        node2Root = node2Root.parentNode ? (node2Hierarchy.push(node2Root.parentNode), node2Root.parentNode) : node2Root;\n      }\n\n      // Check if they don't share the same root node\n      if (node1Root !== node2Root) {\n        return Node.DOCUMENT_POSITION_DISCONNECTED | Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC | Node.DOCUMENT_POSITION_PRECEDING;\n      }\n      var longerHierarchy = node1Hierarchy.length > node2Hierarchy.length ? node1Hierarchy : node2Hierarchy;\n      var shorterHierarchy = longerHierarchy === node1Hierarchy ? node2Hierarchy : node1Hierarchy;\n\n      // Check if either is a container of the other\n      if (longerHierarchy[longerHierarchy.length - shorterHierarchy.length] === shorterHierarchy[0]) {\n        return longerHierarchy === node1Hierarchy ?\n        // other is a child of this\n        Node.DOCUMENT_POSITION_CONTAINED_BY | Node.DOCUMENT_POSITION_FOLLOWING :\n        // this is a child of other\n        Node.DOCUMENT_POSITION_CONTAINS | Node.DOCUMENT_POSITION_PRECEDING;\n      }\n\n      // Find their first common ancestor and see whether they\n      // are preceding or following\n      var longerStart = longerHierarchy.length - shorterHierarchy.length;\n      for (var i = shorterHierarchy.length - 1; i >= 0; i--) {\n        var shorterHierarchyNode = shorterHierarchy[i];\n        var longerHierarchyNode = longerHierarchy[longerStart + i];\n\n        // We found the first common ancestor\n        if (longerHierarchyNode !== shorterHierarchyNode) {\n          var siblings = shorterHierarchyNode.parentNode.childNodes;\n          if (siblings.indexOf(shorterHierarchyNode) < siblings.indexOf(longerHierarchyNode)) {\n            // Shorter is before longer\n            if (shorterHierarchy === node1Hierarchy) {\n              // Other is before this\n              return Node.DOCUMENT_POSITION_PRECEDING;\n            }\n            // This is before other\n            return Node.DOCUMENT_POSITION_FOLLOWING;\n          }\n          // Longer is before shorter\n          if (longerHierarchy === node1Hierarchy) {\n            // Other is before this\n            return Node.DOCUMENT_POSITION_PRECEDING;\n          }\n          // Other is after this\n          return Node.DOCUMENT_POSITION_FOLLOWING;\n        }\n      }\n      return Node.DOCUMENT_POSITION_FOLLOWING;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode\n     */\n  }, {\n    key: \"contain\",\n    value:\n    /**\n     * @deprecated\n     * @alias contains\n     */\n    function contain(other) {\n      return this.contains(other);\n    }\n  }, {\n    key: \"contains\",\n    value: function contains(other) {\n      // the node itself, one of its direct children\n      var tmp = other;\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\n      while (tmp && this !== tmp) {\n        tmp = tmp.parentNode;\n      }\n      return !!tmp;\n    }\n  }, {\n    key: \"getAncestor\",\n    value: function getAncestor(n) {\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      var temp = this;\n      while (n > 0 && temp) {\n        temp = temp.parentNode;\n        n--;\n      }\n      return temp;\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(callback) {\n      var stack = [this];\n      while (stack.length > 0) {\n        var node = stack.pop();\n        var result = callback(node);\n        if (result === false) {\n          break;\n        }\n        for (var i = node.childNodes.length - 1; i >= 0; i--) {\n          stack.push(node.childNodes[i]);\n        }\n      }\n    }\n  }], [{\n    key: \"isNode\",\n    value: function isNode(target) {\n      return !!target.childNodes;\n    }\n  }]);\n}(EventTarget);\n/**\n * Both nodes are in different documents or different trees in the same document.\n */\nNode.DOCUMENT_POSITION_DISCONNECTED = 1;\n/**\n * otherNode precedes the node in either a pre-order depth-first traversal\n * of a tree containing both (e.g., as an ancestor or previous sibling or a descendant of a previous sibling or previous sibling of an ancestor) or (if they are disconnected) in an arbitrary but consistent ordering.\n */\nNode.DOCUMENT_POSITION_PRECEDING = 2;\n/**\n * otherNode follows the node in either a pre-order depth-first traversal of a tree containing both (e.g., as a descendant or following sibling or a descendant of a following sibling or following sibling of an ancestor) or (if they are disconnected) in an arbitrary but consistent ordering.\n */\nNode.DOCUMENT_POSITION_FOLLOWING = 4;\n/**\n * otherNode is an ancestor of the node.\n */\nNode.DOCUMENT_POSITION_CONTAINS = 8;\n/**\n * otherNode is a descendant of the node.\n */\nNode.DOCUMENT_POSITION_CONTAINED_BY = 16;\n/**\n * The result relies upon arbitrary and/or implementation-specific behavior and is not guaranteed to be portable.\n */\nNode.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC = 32;\n\nvar PROPAGATION_LIMIT = 2048;\nvar EventService = /*#__PURE__*/function () {\n  function EventService(globalRuntime, context) {\n    var _this = this;\n    _classCallCheck(this, EventService);\n    /**\n     * Store HTML elements in current canvas.\n     */\n    this.nativeHTMLMap = new WeakMap();\n    this.cursor = 'default';\n    this.mappingTable = {};\n    this.mappingState = {\n      trackingData: {}\n    };\n    this.eventPool = new Map();\n    this.tmpMatrix = mat4.create();\n    this.tmpVec3 = vec3.create();\n    this.onPointerDown = function (from) {\n      var e = _this.createPointerEvent(from);\n      _this.dispatchEvent(e, 'pointerdown');\n      if (e.pointerType === 'touch') {\n        _this.dispatchEvent(e, 'touchstart');\n      } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n        var isRightButton = e.button === 2;\n        _this.dispatchEvent(e, isRightButton ? 'rightdown' : 'mousedown');\n      }\n      var trackingData = _this.trackingData(from.pointerId);\n      trackingData.pressTargetsByButton[from.button] = e.composedPath();\n      _this.freeEvent(e);\n    };\n    this.onPointerUp = function (from) {\n      var now = clock.now();\n      var e = _this.createPointerEvent(from, undefined, undefined, _this.context.config.alwaysTriggerPointerEventOnCanvas ? _this.rootTarget : undefined);\n      _this.dispatchEvent(e, 'pointerup');\n      if (e.pointerType === 'touch') {\n        _this.dispatchEvent(e, 'touchend');\n      } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n        var isRightButton = e.button === 2;\n        _this.dispatchEvent(e, isRightButton ? 'rightup' : 'mouseup');\n      }\n      var trackingData = _this.trackingData(from.pointerId);\n      var pressTarget = _this.findMountedTarget(trackingData.pressTargetsByButton[from.button]);\n      var clickTarget = pressTarget;\n\n      // pointerupoutside only bubbles. It only bubbles upto the parent that doesn't contain\n      // the pointerup location.\n      if (pressTarget && !e.composedPath().includes(pressTarget)) {\n        var currentTarget = pressTarget;\n        while (currentTarget && !e.composedPath().includes(currentTarget)) {\n          e.currentTarget = currentTarget;\n          _this.notifyTarget(e, 'pointerupoutside');\n          if (e.pointerType === 'touch') {\n            _this.notifyTarget(e, 'touchendoutside');\n          } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n            var _isRightButton = e.button === 2;\n            _this.notifyTarget(e, _isRightButton ? 'rightupoutside' : 'mouseupoutside');\n          }\n          if (Node.isNode(currentTarget)) {\n            currentTarget = currentTarget.parentNode;\n          }\n        }\n        delete trackingData.pressTargetsByButton[from.button];\n\n        // currentTarget is the most specific ancestor holding both the pointerdown and pointerup\n        // targets. That is - it's our click target!\n        clickTarget = currentTarget;\n      }\n      if (clickTarget) {\n        var _e$detail;\n        var clickEvent = _this.clonePointerEvent(e, 'click');\n        clickEvent.target = clickTarget;\n        clickEvent.path = [];\n        if (!trackingData.clicksByButton[from.button]) {\n          trackingData.clicksByButton[from.button] = {\n            clickCount: 0,\n            target: clickEvent.target,\n            timeStamp: now\n          };\n        }\n        var canvas = _this.context.renderingContext.root.ownerDocument.defaultView;\n        var clickHistory = trackingData.clicksByButton[from.button];\n        if (clickHistory.target === clickEvent.target && now - clickHistory.timeStamp < canvas.getConfig().dblClickSpeed) {\n          ++clickHistory.clickCount;\n        } else {\n          clickHistory.clickCount = 1;\n        }\n        clickHistory.target = clickEvent.target;\n        clickHistory.timeStamp = now;\n        clickEvent.detail = clickHistory.clickCount;\n\n        // @see https://github.com/antvis/G/issues/1091\n        if (!((_e$detail = e.detail) !== null && _e$detail !== void 0 && _e$detail.preventClick)) {\n          if (!_this.context.config.useNativeClickEvent && (clickEvent.pointerType === 'mouse' || clickEvent.pointerType === 'touch')) {\n            _this.dispatchEvent(clickEvent, 'click');\n          }\n          _this.dispatchEvent(clickEvent, 'pointertap');\n        }\n        _this.freeEvent(clickEvent);\n      }\n      _this.freeEvent(e);\n    };\n    this.onPointerMove = function (from) {\n      var e = _this.createPointerEvent(from, undefined, undefined, _this.context.config.alwaysTriggerPointerEventOnCanvas ? _this.rootTarget : undefined);\n      var isMouse = e.pointerType === 'mouse' || e.pointerType === 'pen';\n      var trackingData = _this.trackingData(from.pointerId);\n      var outTarget = _this.findMountedTarget(trackingData.overTargets);\n\n      // First pointerout/pointerleave\n      if (trackingData.overTargets && outTarget !== e.target) {\n        // pointerout always occurs on the overTarget when the pointer hovers over another element.\n        var outType = from.type === 'mousemove' ? 'mouseout' : 'pointerout';\n        var outEvent = _this.createPointerEvent(from, outType, outTarget || undefined);\n        _this.dispatchEvent(outEvent, 'pointerout');\n        if (isMouse) _this.dispatchEvent(outEvent, 'mouseout');\n\n        // If the pointer exits overTarget and its descendants, then a pointerleave event is also fired. This event\n        // is dispatched to all ancestors that no longer capture the pointer.\n        if (!e.composedPath().includes(outTarget)) {\n          var leaveEvent = _this.createPointerEvent(from, 'pointerleave', outTarget || undefined);\n          leaveEvent.eventPhase = leaveEvent.AT_TARGET;\n          while (leaveEvent.target && !e.composedPath().includes(leaveEvent.target)) {\n            leaveEvent.currentTarget = leaveEvent.target;\n            _this.notifyTarget(leaveEvent);\n            if (isMouse) {\n              _this.notifyTarget(leaveEvent, 'mouseleave');\n            }\n            if (Node.isNode(leaveEvent.target)) {\n              leaveEvent.target = leaveEvent.target.parentNode;\n            }\n          }\n          _this.freeEvent(leaveEvent);\n        }\n        _this.freeEvent(outEvent);\n      }\n\n      // Then pointerover\n      if (outTarget !== e.target) {\n        // pointerover always occurs on the new overTarget\n        var overType = from.type === 'mousemove' ? 'mouseover' : 'pointerover';\n        var overEvent = _this.clonePointerEvent(e, overType); // clone faster\n\n        _this.dispatchEvent(overEvent, 'pointerover');\n        if (isMouse) _this.dispatchEvent(overEvent, 'mouseover');\n\n        // Probe whether the newly hovered Node is an ancestor of the original overTarget.\n        var overTargetAncestor = outTarget && Node.isNode(outTarget) && outTarget.parentNode;\n        while (overTargetAncestor && overTargetAncestor !== (Node.isNode(_this.rootTarget) && _this.rootTarget.parentNode)) {\n          if (overTargetAncestor === e.target) break;\n          overTargetAncestor = overTargetAncestor.parentNode;\n        }\n\n        // The pointer has entered a non-ancestor of the original overTarget. This means we need a pointerentered\n        // event.\n        var didPointerEnter = !overTargetAncestor || overTargetAncestor === (Node.isNode(_this.rootTarget) && _this.rootTarget.parentNode);\n        if (didPointerEnter) {\n          var enterEvent = _this.clonePointerEvent(e, 'pointerenter');\n          enterEvent.eventPhase = enterEvent.AT_TARGET;\n          while (enterEvent.target && enterEvent.target !== outTarget && enterEvent.target !== (Node.isNode(_this.rootTarget) && _this.rootTarget.parentNode)) {\n            enterEvent.currentTarget = enterEvent.target;\n            _this.notifyTarget(enterEvent);\n            if (isMouse) _this.notifyTarget(enterEvent, 'mouseenter');\n            if (Node.isNode(enterEvent.target)) {\n              enterEvent.target = enterEvent.target.parentNode;\n            }\n          }\n          _this.freeEvent(enterEvent);\n        }\n        _this.freeEvent(overEvent);\n      }\n\n      // Then pointermove\n      _this.dispatchEvent(e, 'pointermove');\n      if (e.pointerType === 'touch') _this.dispatchEvent(e, 'touchmove');\n      if (isMouse) {\n        _this.dispatchEvent(e, 'mousemove');\n        _this.cursor = _this.getCursor(e.target);\n      }\n      trackingData.overTargets = e.composedPath();\n      _this.freeEvent(e);\n    };\n    this.onPointerOut = function (from) {\n      var trackingData = _this.trackingData(from.pointerId);\n      if (trackingData.overTargets) {\n        var isMouse = from.pointerType === 'mouse' || from.pointerType === 'pen';\n        var outTarget = _this.findMountedTarget(trackingData.overTargets);\n\n        // pointerout first\n        var outEvent = _this.createPointerEvent(from, 'pointerout', outTarget || undefined);\n        _this.dispatchEvent(outEvent);\n        if (isMouse) _this.dispatchEvent(outEvent, 'mouseout');\n\n        // pointerleave(s) are also dispatched b/c the pointer must've left rootTarget and its descendants to\n        // get an upstream pointerout event (upstream events do not know rootTarget has descendants).\n        var leaveEvent = _this.createPointerEvent(from, 'pointerleave', outTarget || undefined);\n        leaveEvent.eventPhase = leaveEvent.AT_TARGET;\n        while (leaveEvent.target && leaveEvent.target !== (Node.isNode(_this.rootTarget) && _this.rootTarget.parentNode)) {\n          leaveEvent.currentTarget = leaveEvent.target;\n          _this.notifyTarget(leaveEvent);\n          if (isMouse) {\n            _this.notifyTarget(leaveEvent, 'mouseleave');\n          }\n          if (Node.isNode(leaveEvent.target)) {\n            leaveEvent.target = leaveEvent.target.parentNode;\n          }\n        }\n        trackingData.overTargets = null;\n        _this.freeEvent(outEvent);\n        _this.freeEvent(leaveEvent);\n      }\n      _this.cursor = null;\n    };\n    this.onPointerOver = function (from) {\n      var trackingData = _this.trackingData(from.pointerId);\n      var e = _this.createPointerEvent(from);\n      var isMouse = e.pointerType === 'mouse' || e.pointerType === 'pen';\n      _this.dispatchEvent(e, 'pointerover');\n      if (isMouse) _this.dispatchEvent(e, 'mouseover');\n      if (e.pointerType === 'mouse') _this.cursor = _this.getCursor(e.target);\n\n      // pointerenter events must be fired since the pointer entered from upstream.\n      var enterEvent = _this.clonePointerEvent(e, 'pointerenter');\n      enterEvent.eventPhase = enterEvent.AT_TARGET;\n      while (enterEvent.target && enterEvent.target !== (Node.isNode(_this.rootTarget) && _this.rootTarget.parentNode)) {\n        enterEvent.currentTarget = enterEvent.target;\n        _this.notifyTarget(enterEvent);\n        if (isMouse) {\n          // mouseenter should not bubble\n          // @see https://developer.mozilla.org/en-US/docs/Web/API/Element/mouseenter_event#usage_notes\n          _this.notifyTarget(enterEvent, 'mouseenter');\n        }\n        if (Node.isNode(enterEvent.target)) {\n          enterEvent.target = enterEvent.target.parentNode;\n        }\n      }\n      trackingData.overTargets = e.composedPath();\n      _this.freeEvent(e);\n      _this.freeEvent(enterEvent);\n    };\n    this.onPointerUpOutside = function (from) {\n      var trackingData = _this.trackingData(from.pointerId);\n      var pressTarget = _this.findMountedTarget(trackingData.pressTargetsByButton[from.button]);\n      var e = _this.createPointerEvent(from);\n      if (pressTarget) {\n        var currentTarget = pressTarget;\n        while (currentTarget) {\n          e.currentTarget = currentTarget;\n          _this.notifyTarget(e, 'pointerupoutside');\n          if (e.pointerType === 'touch') ; else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n            _this.notifyTarget(e, e.button === 2 ? 'rightupoutside' : 'mouseupoutside');\n          }\n          if (Node.isNode(currentTarget)) {\n            currentTarget = currentTarget.parentNode;\n          }\n        }\n        delete trackingData.pressTargetsByButton[from.button];\n      }\n      _this.freeEvent(e);\n    };\n    this.onWheel = function (from) {\n      var wheelEvent = _this.createWheelEvent(from);\n      _this.dispatchEvent(wheelEvent);\n      _this.freeEvent(wheelEvent);\n    };\n    this.onClick = function (from) {\n      if (_this.context.config.useNativeClickEvent) {\n        var e = _this.createPointerEvent(from);\n        _this.dispatchEvent(e);\n        _this.freeEvent(e);\n      }\n    };\n    this.onPointerCancel = function (from) {\n      var e = _this.createPointerEvent(from, undefined, undefined, _this.context.config.alwaysTriggerPointerEventOnCanvas ? _this.rootTarget : undefined);\n      _this.dispatchEvent(e);\n      _this.freeEvent(e);\n    };\n    this.globalRuntime = globalRuntime;\n    this.context = context;\n  }\n  return _createClass(EventService, [{\n    key: \"init\",\n    value: function init() {\n      this.rootTarget = this.context.renderingContext.root.parentNode; // document\n      this.addEventMapping('pointerdown', this.onPointerDown);\n      this.addEventMapping('pointerup', this.onPointerUp);\n      this.addEventMapping('pointermove', this.onPointerMove);\n      this.addEventMapping('pointerout', this.onPointerOut);\n      this.addEventMapping('pointerleave', this.onPointerOut);\n      this.addEventMapping('pointercancel', this.onPointerCancel);\n      this.addEventMapping('pointerover', this.onPointerOver);\n      this.addEventMapping('pointerupoutside', this.onPointerUpOutside);\n      this.addEventMapping('wheel', this.onWheel);\n      this.addEventMapping('click', this.onClick);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.mappingTable = {};\n      this.mappingState = {};\n      this.eventPool.clear();\n    }\n  }, {\n    key: \"getScale\",\n    value: function getScale() {\n      var bbox = this.context.contextService.getBoundingClientRect();\n      var scaleX = 1;\n      var scaleY = 1;\n      var $el = this.context.contextService.getDomElement();\n      if ($el && bbox) {\n        var offsetWidth = $el.offsetWidth,\n          offsetHeight = $el.offsetHeight;\n        if (offsetWidth && offsetHeight) {\n          scaleX = bbox.width / offsetWidth;\n          scaleY = bbox.height / offsetHeight;\n        }\n      }\n      return {\n        scaleX: scaleX,\n        scaleY: scaleY,\n        bbox: bbox\n      };\n    }\n\n    /**\n     * Should account for CSS Transform applied on container.\n     * @see https://github.com/antvis/G/issues/1161\n     * @see https://github.com/antvis/G/issues/1677\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/MouseEvent/offsetX\n     */\n  }, {\n    key: \"client2Viewport\",\n    value: function client2Viewport(client) {\n      var _this$getScale = this.getScale(),\n        scaleX = _this$getScale.scaleX,\n        scaleY = _this$getScale.scaleY,\n        bbox = _this$getScale.bbox;\n      return new Point((client.x - ((bbox === null || bbox === void 0 ? void 0 : bbox.left) || 0)) / scaleX, (client.y - ((bbox === null || bbox === void 0 ? void 0 : bbox.top) || 0)) / scaleY);\n    }\n  }, {\n    key: \"viewport2Client\",\n    value: function viewport2Client(canvas) {\n      var _this$getScale2 = this.getScale(),\n        scaleX = _this$getScale2.scaleX,\n        scaleY = _this$getScale2.scaleY,\n        bbox = _this$getScale2.bbox;\n      return new Point((canvas.x + ((bbox === null || bbox === void 0 ? void 0 : bbox.left) || 0)) * scaleX, (canvas.y + ((bbox === null || bbox === void 0 ? void 0 : bbox.top) || 0)) * scaleY);\n    }\n  }, {\n    key: \"viewport2Canvas\",\n    value: function viewport2Canvas(_ref) {\n      var x = _ref.x,\n        y = _ref.y;\n      var canvas = this.rootTarget.defaultView;\n      var camera = canvas.getCamera();\n      var _this$context$config = this.context.config,\n        width = _this$context$config.width,\n        height = _this$context$config.height;\n      var projectionMatrixInverse = camera.getPerspectiveInverse();\n      var worldMatrix = camera.getWorldTransform();\n      var vpMatrix = mat4.multiply(this.tmpMatrix, worldMatrix, projectionMatrixInverse);\n      var viewport = vec3.set(this.tmpVec3, x / width * 2 - 1, (1 - y / height) * 2 - 1, 0);\n      vec3.transformMat4(viewport, viewport, vpMatrix);\n      return new Point(viewport[0], viewport[1]);\n    }\n  }, {\n    key: \"canvas2Viewport\",\n    value: function canvas2Viewport(canvasP) {\n      var canvas = this.rootTarget.defaultView;\n      var camera = canvas.getCamera();\n\n      // World -> Clip\n      var projectionMatrix = camera.getPerspective();\n      var viewMatrix = camera.getViewTransform();\n      var vpMatrix = mat4.multiply(this.tmpMatrix, projectionMatrix, viewMatrix);\n      var clip = vec3.set(this.tmpVec3, canvasP.x, canvasP.y, 0);\n      vec3.transformMat4(this.tmpVec3, this.tmpVec3, vpMatrix);\n\n      // Clip -> NDC -> Viewport, flip Y\n      var _this$context$config2 = this.context.config,\n        width = _this$context$config2.width,\n        height = _this$context$config2.height;\n      return new Point((clip[0] + 1) / 2 * width, (1 - (clip[1] + 1) / 2) * height);\n    }\n  }, {\n    key: \"setPickHandler\",\n    value: function setPickHandler(pickHandler) {\n      this.pickHandler = pickHandler;\n    }\n  }, {\n    key: \"addEventMapping\",\n    value: function addEventMapping(type, fn) {\n      if (!this.mappingTable[type]) {\n        this.mappingTable[type] = [];\n      }\n      this.mappingTable[type].push({\n        fn: fn,\n        priority: 0\n      });\n      this.mappingTable[type].sort(function (a, b) {\n        return a.priority - b.priority;\n      });\n    }\n  }, {\n    key: \"mapEvent\",\n    value: function mapEvent(e) {\n      if (!this.rootTarget) {\n        return;\n      }\n      var mappers = this.mappingTable[e.type];\n      if (mappers) {\n        for (var i = 0, j = mappers.length; i < j; i++) {\n          mappers[i].fn(e);\n        }\n      } else {\n        console.warn(\"[EventService]: Event mapping not defined for \".concat(e.type));\n      }\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(e, type, skipPropagate) {\n      // Canvas should skip\n      if (!skipPropagate) {\n        e.propagationStopped = false;\n        e.propagationImmediatelyStopped = false;\n        this.propagate(e, type);\n      } else {\n        // target phase\n        e.eventPhase = e.AT_TARGET;\n        var canvas = this.rootTarget.defaultView || null;\n        e.currentTarget = canvas;\n        this.notifyListeners(e, type);\n      }\n    }\n  }, {\n    key: \"propagate\",\n    value: function propagate(e, type) {\n      if (!e.target) {\n        return;\n      }\n\n      // [target, parent, root, Canvas]\n      var composedPath = e.composedPath();\n\n      // event flow: capture -> target -> bubbling\n\n      // capture phase\n      e.eventPhase = e.CAPTURING_PHASE;\n      for (var i = composedPath.length - 1; i >= 1; i--) {\n        e.currentTarget = composedPath[i];\n        this.notifyTarget(e, type);\n        if (e.propagationStopped || e.propagationImmediatelyStopped) return;\n      }\n\n      // target phase\n      e.eventPhase = e.AT_TARGET;\n      e.currentTarget = e.target;\n      this.notifyTarget(e, type);\n      if (e.propagationStopped || e.propagationImmediatelyStopped) return;\n\n      // find current target in composed path\n      var index = composedPath.indexOf(e.currentTarget);\n\n      // bubbling phase\n      e.eventPhase = e.BUBBLING_PHASE;\n      for (var _i = index + 1; _i < composedPath.length; _i++) {\n        e.currentTarget = composedPath[_i];\n        this.notifyTarget(e, type);\n        if (e.propagationStopped || e.propagationImmediatelyStopped) return;\n      }\n    }\n  }, {\n    key: \"propagationPath\",\n    value: function propagationPath(target) {\n      var propagationPath = [target];\n      var canvas = this.rootTarget.defaultView || null;\n      if (canvas && canvas === target) {\n        propagationPath.unshift(canvas.document);\n        return propagationPath;\n      }\n      for (var i = 0; i < PROPAGATION_LIMIT && target !== this.rootTarget; i++) {\n        // if (Node.isNode(target) && !target.parentNode) {\n        //   throw new Error('Cannot find propagation path to disconnected target');\n        // }\n\n        if (Node.isNode(target) && target.parentNode) {\n          // [target, parent, parent, root]\n          propagationPath.push(target.parentNode);\n          target = target.parentNode;\n        }\n      }\n      if (canvas) {\n        // @ts-ignore\n        propagationPath.push(canvas);\n      }\n      return propagationPath;\n    }\n  }, {\n    key: \"hitTest\",\n    value: function hitTest(position) {\n      var viewportX = position.viewportX,\n        viewportY = position.viewportY;\n      var _this$context$config3 = this.context.config,\n        width = _this$context$config3.width,\n        height = _this$context$config3.height,\n        disableHitTesting = _this$context$config3.disableHitTesting;\n      // outside canvas\n      if (viewportX < 0 || viewportY < 0 || viewportX > width || viewportY > height) {\n        return null;\n      }\n      return !disableHitTesting && this.pickHandler(position) || this.rootTarget ||\n      // return Document\n      null;\n    }\n\n    /**\n     * whether the native event trigger came from Canvas,\n     * should account for HTML shape\n     */\n  }, {\n    key: \"isNativeEventFromCanvas\",\n    value: function isNativeEventFromCanvas($el, nativeEvent) {\n      var _target;\n      var target = nativeEvent === null || nativeEvent === void 0 ? void 0 : nativeEvent.target;\n      // Get event target inside a web component.\n      // @see https://stackoverflow.com/questions/57963312/get-event-target-inside-a-web-component\n      if ((_target = target) !== null && _target !== void 0 && _target.shadowRoot) {\n        target = nativeEvent.composedPath()[0];\n      }\n      if (target) {\n        // from <canvas>\n        if (target === $el) {\n          return true;\n        }\n\n        // from <svg>\n        if ($el && $el.contains) {\n          return $el.contains(target);\n        }\n      }\n      if (nativeEvent !== null && nativeEvent !== void 0 && nativeEvent.composedPath) {\n        return nativeEvent.composedPath().indexOf($el) > -1;\n      }\n\n      // account for Touch\n      return false;\n    }\n\n    /**\n     * Find HTML from composed path in native UI event.\n     */\n  }, {\n    key: \"getExistedHTML\",\n    value: function getExistedHTML(event) {\n      if (event.nativeEvent.composedPath) {\n        for (var _i2 = 0, _arr = event.nativeEvent.composedPath(); _i2 < _arr.length; _i2++) {\n          var eventTarget = _arr[_i2];\n          var existed = this.nativeHTMLMap.get(eventTarget);\n          if (existed) {\n            return existed;\n          }\n        }\n      }\n      return null;\n    }\n  }, {\n    key: \"pickTarget\",\n    value: function pickTarget(event) {\n      return this.hitTest({\n        clientX: event.clientX,\n        clientY: event.clientY,\n        viewportX: event.viewportX,\n        viewportY: event.viewportY,\n        x: event.canvasX,\n        y: event.canvasY\n      });\n    }\n  }, {\n    key: \"createPointerEvent\",\n    value: function createPointerEvent(from, type, target, fallbackTarget) {\n      var event = this.allocateEvent(FederatedPointerEvent);\n      this.copyPointerData(from, event);\n      this.copyMouseData(from, event);\n      this.copyData(from, event);\n      event.nativeEvent = from.nativeEvent;\n      event.originalEvent = from;\n      var existedHTML = this.getExistedHTML(event);\n      var $el = this.context.contextService.getDomElement();\n      event.target = target !== null && target !== void 0 ? target : existedHTML || this.isNativeEventFromCanvas($el, event.nativeEvent) && this.pickTarget(event) || fallbackTarget;\n      if (typeof type === 'string') {\n        event.type = type;\n      }\n      return event;\n    }\n  }, {\n    key: \"createWheelEvent\",\n    value: function createWheelEvent(from) {\n      var event = this.allocateEvent(FederatedWheelEvent);\n      this.copyWheelData(from, event);\n      this.copyMouseData(from, event);\n      this.copyData(from, event);\n      event.nativeEvent = from.nativeEvent;\n      event.originalEvent = from;\n      var existedHTML = this.getExistedHTML(event);\n      var $el = this.context.contextService.getDomElement();\n      event.target = existedHTML || this.isNativeEventFromCanvas($el, event.nativeEvent) && this.pickTarget(event);\n      return event;\n    }\n  }, {\n    key: \"trackingData\",\n    value: function trackingData(id) {\n      if (!this.mappingState.trackingData[id]) {\n        this.mappingState.trackingData[id] = {\n          pressTargetsByButton: {},\n          clicksByButton: {},\n          overTarget: null\n        };\n      }\n      return this.mappingState.trackingData[id];\n    }\n  }, {\n    key: \"cloneWheelEvent\",\n    value: function cloneWheelEvent(from) {\n      var event = this.allocateEvent(FederatedWheelEvent);\n      event.nativeEvent = from.nativeEvent;\n      event.originalEvent = from.originalEvent;\n      this.copyWheelData(from, event);\n      this.copyMouseData(from, event);\n      this.copyData(from, event);\n      event.target = from.target;\n      event.path = from.composedPath().slice();\n      event.type = from.type;\n      return event;\n    }\n  }, {\n    key: \"clonePointerEvent\",\n    value: function clonePointerEvent(from, type) {\n      var event = this.allocateEvent(FederatedPointerEvent);\n      event.nativeEvent = from.nativeEvent;\n      event.originalEvent = from.originalEvent;\n      this.copyPointerData(from, event);\n      this.copyMouseData(from, event);\n      this.copyData(from, event);\n      event.target = from.target;\n      event.path = from.composedPath().slice();\n      event.type = type !== null && type !== void 0 ? type : event.type;\n      return event;\n    }\n  }, {\n    key: \"copyPointerData\",\n    value: function copyPointerData(from, to) {\n      // if (\n      //   !(\n      //     from instanceof FederatedPointerEvent &&\n      //     to instanceof FederatedPointerEvent\n      //   )\n      // )\n      //   return;\n\n      to.pointerId = from.pointerId;\n      to.width = from.width;\n      to.height = from.height;\n      to.isPrimary = from.isPrimary;\n      to.pointerType = from.pointerType;\n      to.pressure = from.pressure;\n      to.tangentialPressure = from.tangentialPressure;\n      to.tiltX = from.tiltX;\n      to.tiltY = from.tiltY;\n      to.twist = from.twist;\n    }\n  }, {\n    key: \"copyMouseData\",\n    value: function copyMouseData(from, to) {\n      // if (\n      //   !(\n      //     from instanceof FederatedMouseEvent && to instanceof FederatedMouseEvent\n      //   )\n      // )\n      //   return;\n\n      to.altKey = from.altKey;\n      to.button = from.button;\n      to.buttons = from.buttons;\n      to.ctrlKey = from.ctrlKey;\n      to.metaKey = from.metaKey;\n      to.shiftKey = from.shiftKey;\n      to.client.copyFrom(from.client);\n      to.movement.copyFrom(from.movement);\n      to.canvas.copyFrom(from.canvas);\n      to.screen.copyFrom(from.screen);\n      to.global.copyFrom(from.global);\n      to.offset.copyFrom(from.offset);\n    }\n  }, {\n    key: \"copyWheelData\",\n    value: function copyWheelData(from, to) {\n      to.deltaMode = from.deltaMode;\n      to.deltaX = from.deltaX;\n      to.deltaY = from.deltaY;\n      to.deltaZ = from.deltaZ;\n    }\n  }, {\n    key: \"copyData\",\n    value: function copyData(from, to) {\n      to.isTrusted = from.isTrusted;\n      to.timeStamp = clock.now();\n      to.type = from.type;\n      to.detail = from.detail;\n      to.view = from.view;\n      to.page.copyFrom(from.page);\n      to.viewport.copyFrom(from.viewport);\n    }\n  }, {\n    key: \"allocateEvent\",\n    value: function allocateEvent(constructor) {\n      if (!this.eventPool.has(constructor)) {\n        this.eventPool.set(constructor, []);\n      }\n\n      // @ts-ignore\n      var event = this.eventPool.get(constructor).pop() || new constructor(this);\n      event.eventPhase = event.NONE;\n      event.currentTarget = null;\n      event.path = [];\n      event.target = null;\n      return event;\n    }\n  }, {\n    key: \"freeEvent\",\n    value: function freeEvent(event) {\n      if (event.manager !== this) throw new Error('It is illegal to free an event not managed by this EventBoundary!');\n      var constructor = event.constructor;\n      if (!this.eventPool.has(constructor)) {\n        this.eventPool.set(constructor, []);\n      }\n\n      // @ts-ignore\n      this.eventPool.get(constructor).push(event);\n    }\n  }, {\n    key: \"notifyTarget\",\n    value: function notifyTarget(e, type) {\n      var _type;\n      type = (_type = type) !== null && _type !== void 0 ? _type : e.type;\n      var key = e.eventPhase === e.CAPTURING_PHASE || e.eventPhase === e.AT_TARGET ? \"\".concat(type, \"capture\") : type;\n      this.notifyListeners(e, key);\n      if (e.eventPhase === e.AT_TARGET) {\n        this.notifyListeners(e, type);\n      }\n    }\n  }, {\n    key: \"notifyListeners\",\n    value: function notifyListeners(e, type) {\n      // hack EventEmitter, stops if the `propagationImmediatelyStopped` flag is set\n      var emitter = e.currentTarget.emitter;\n      // @ts-ignore\n      var listeners = emitter._events[type];\n      if (!listeners) return;\n      if ('fn' in listeners) {\n        if (listeners.once) {\n          emitter.removeListener(type, listeners.fn, undefined, true);\n        }\n        listeners.fn.call(e.currentTarget || listeners.context, e);\n        // listeners.fn.call(listeners.context, e);\n      } else {\n        for (var i = 0; i < listeners.length && !e.propagationImmediatelyStopped; i++) {\n          if (listeners[i].once) {\n            emitter.removeListener(type, listeners[i].fn, undefined, true);\n          }\n          listeners[i].fn.call(e.currentTarget || listeners[i].context, e);\n          // listeners[i].fn.call(listeners[i].context, e);\n        }\n      }\n    }\n\n    /**\n     * some detached nodes may exist in propagation path, need to skip them\n     */\n  }, {\n    key: \"findMountedTarget\",\n    value: function findMountedTarget(propagationPath) {\n      if (!propagationPath) {\n        return null;\n      }\n      var currentTarget = propagationPath[propagationPath.length - 1];\n      for (var i = propagationPath.length - 2; i >= 0; i--) {\n        var target = propagationPath[i];\n        if (target === this.rootTarget || Node.isNode(target) && target.parentNode === currentTarget) {\n          currentTarget = propagationPath[i];\n        } else {\n          break;\n        }\n      }\n      return currentTarget;\n    }\n  }, {\n    key: \"getCursor\",\n    value: function getCursor(target) {\n      var tmp = target;\n      while (tmp) {\n        var cursor = isElement(tmp) && tmp.getAttribute('cursor');\n        if (cursor) {\n          return cursor;\n        }\n        tmp = Node.isNode(tmp) && tmp.parentNode;\n      }\n    }\n  }]);\n}();\n\n/**\n * used in following scenes:\n * - g `ctx.measureText`\n * - g-plugin-canvas-picker `ctx.isPointInPath`\n * - g-plugin-device-renderer `ctx.createLinearGradient` and generate texture\n *\n * @see https://blog.scottlogic.com/2020/03/19/offscreen-canvas.html\n */\nvar OffscreenCanvasCreator = /*#__PURE__*/function () {\n  function OffscreenCanvasCreator() {\n    _classCallCheck(this, OffscreenCanvasCreator);\n  }\n  return _createClass(OffscreenCanvasCreator, [{\n    key: \"getOrCreateCanvas\",\n    value: function getOrCreateCanvas(offscreenCanvas, contextAttributes) {\n      if (this.canvas) {\n        return this.canvas;\n      }\n\n      // user-defined offscreen canvas\n      if (offscreenCanvas || runtime.offscreenCanvas) {\n        this.canvas = offscreenCanvas || runtime.offscreenCanvas;\n        this.context = this.canvas.getContext('2d', _objectSpread({\n          willReadFrequently: true\n        }, contextAttributes));\n      } else {\n        try {\n          // OffscreenCanvas2D measureText can be up to 40% faster.\n          this.canvas = new window.OffscreenCanvas(0, 0);\n          this.context = this.canvas.getContext('2d', _objectSpread({\n            willReadFrequently: true\n          }, contextAttributes));\n          if (!this.context || !this.context.measureText) {\n            this.canvas = document.createElement('canvas');\n            this.context = this.canvas.getContext('2d');\n          }\n        } catch (_unused) {\n          this.canvas = document.createElement('canvas');\n          this.context = this.canvas.getContext('2d', _objectSpread({\n            willReadFrequently: true\n          }, contextAttributes));\n        }\n      }\n      this.canvas.width = 10;\n      this.canvas.height = 10;\n      return this.canvas;\n    }\n  }, {\n    key: \"getOrCreateContext\",\n    value: function getOrCreateContext(offscreenCanvas, contextAttributes) {\n      if (this.context) {\n        return this.context;\n      }\n      this.getOrCreateCanvas(offscreenCanvas, contextAttributes);\n      return this.context;\n    }\n  }], [{\n    key: \"createCanvas\",\n    value:\n    /**\n     * @returns new canvas instance\n     */\n    function createCanvas() {\n      try {\n        return new window.OffscreenCanvas(0, 0);\n      } catch (_unused2) {\n        //\n      }\n      try {\n        return document.createElement('canvas');\n      } catch (_unused3) {\n        //\n      }\n      return null;\n    }\n  }]);\n}();\n\n/**\n * why we need re-render\n */\nvar RenderReason = /*#__PURE__*/function (RenderReason) {\n  RenderReason[RenderReason[\"CAMERA_CHANGED\"] = 0] = \"CAMERA_CHANGED\";\n  RenderReason[RenderReason[\"DISPLAY_OBJECT_CHANGED\"] = 1] = \"DISPLAY_OBJECT_CHANGED\";\n  RenderReason[RenderReason[\"NONE\"] = 2] = \"NONE\";\n  return RenderReason;\n}({});\n\n/**\n * Use frame renderer implemented by `g-canvas/svg/webgl`, in every frame we do followings:\n * * update & merge dirty rectangles\n * * begin frame\n * * filter by visible\n * * sort by z-index in scene graph\n * * culling with strategies registered in `g-canvas/webgl`\n * * end frame\n */\nvar RenderingService = /*#__PURE__*/function () {\n  function RenderingService(globalRuntime, context) {\n    _classCallCheck(this, RenderingService);\n    this.inited = false;\n    this.stats = {\n      /**\n       * total display objects in scenegraph\n       */\n      total: 0,\n      /**\n       * number of display objects need to render in current frame\n       */\n      rendered: 0\n    };\n    this.zIndexCounter = 0;\n    this.hooks = {\n      /**\n       * called before any frame rendered\n       */\n      init: new SyncHook(),\n      initAsync: new AsyncParallelHook(),\n      /**\n       * only dirty object which has sth changed will be rendered\n       */\n      dirtycheck: new SyncWaterfallHook(),\n      /**\n       * do culling\n       */\n      cull: new SyncWaterfallHook(),\n      /**\n       * called at beginning of each frame, won't get called if nothing to re-render\n       */\n      beginFrame: new SyncHook(),\n      /**\n       * called before every dirty object get rendered\n       */\n      beforeRender: new SyncHook(),\n      /**\n       * called when every dirty object rendering even it's culled\n       */\n      render: new SyncHook(),\n      /**\n       * called after every dirty object get rendered\n       */\n      afterRender: new SyncHook(),\n      endFrame: new SyncHook(),\n      destroy: new SyncHook(),\n      /**\n       * use async but faster method such as GPU-based picking in `g-plugin-device-renderer`\n       */\n      pick: new AsyncSeriesWaterfallHook(),\n      /**\n       * Unsafe but sync version of pick.\n       */\n      pickSync: new SyncWaterfallHook(),\n      /**\n       * used in event system\n       */\n      pointerDown: new SyncHook(),\n      pointerUp: new SyncHook(),\n      pointerMove: new SyncHook(),\n      pointerOut: new SyncHook(),\n      pointerOver: new SyncHook(),\n      pointerWheel: new SyncHook(),\n      pointerCancel: new SyncHook(),\n      click: new SyncHook()\n    };\n    this.globalRuntime = globalRuntime;\n    this.context = context;\n  }\n  return _createClass(RenderingService, [{\n    key: \"init\",\n    value: function init(callback) {\n      var _this = this;\n      var context = _objectSpread(_objectSpread({}, this.globalRuntime), this.context);\n\n      // register rendering plugins\n      this.context.renderingPlugins.forEach(function (plugin) {\n        plugin.apply(context, _this.globalRuntime);\n      });\n      this.hooks.init.call();\n      if (this.hooks.initAsync.getCallbacksNum() === 0) {\n        this.inited = true;\n        callback();\n      } else {\n        this.hooks.initAsync.promise().then(function () {\n          _this.inited = true;\n          callback();\n        })[\"catch\"](function (err) {});\n      }\n    }\n  }, {\n    key: \"getStats\",\n    value: function getStats() {\n      return this.stats;\n    }\n\n    /**\n     * Meet the following conditions:\n     * * disable DirtyRectangleRendering\n     * * camera changed\n     */\n  }, {\n    key: \"disableDirtyRectangleRendering\",\n    value: function disableDirtyRectangleRendering() {\n      var renderer = this.context.config.renderer;\n      var _renderer$getConfig = renderer.getConfig(),\n        enableDirtyRectangleRendering = _renderer$getConfig.enableDirtyRectangleRendering;\n      return !enableDirtyRectangleRendering || this.context.renderingContext.renderReasons.has(RenderReason.CAMERA_CHANGED);\n    }\n  }, {\n    key: \"render\",\n    value: function render(canvasConfig, frame, rerenderCallback) {\n      var _this2 = this;\n      this.stats.total = 0;\n      this.stats.rendered = 0;\n      this.zIndexCounter = 0;\n      var renderingContext = this.context.renderingContext;\n      this.globalRuntime.sceneGraphService.syncHierarchy(renderingContext.root);\n      this.globalRuntime.sceneGraphService.triggerPendingEvents();\n      if (renderingContext.renderReasons.size && this.inited) {\n        // @ts-ignore\n        renderingContext.dirtyRectangleRenderingDisabled = this.disableDirtyRectangleRendering();\n        var onlyCameraChanged = renderingContext.renderReasons.size === 1 && renderingContext.renderReasons.has(RenderReason.CAMERA_CHANGED);\n        var shouldTriggerRenderHooks = !canvasConfig.disableRenderHooks || !(canvasConfig.disableRenderHooks && onlyCameraChanged);\n        if (shouldTriggerRenderHooks) {\n          this.renderDisplayObject(renderingContext.root, canvasConfig, renderingContext);\n        }\n        this.hooks.beginFrame.call(frame);\n        if (shouldTriggerRenderHooks) {\n          renderingContext.renderListCurrentFrame.forEach(function (object) {\n            _this2.hooks.beforeRender.call(object);\n            _this2.hooks.render.call(object);\n            _this2.hooks.afterRender.call(object);\n          });\n        }\n        this.hooks.endFrame.call(frame);\n        renderingContext.renderListCurrentFrame = [];\n        renderingContext.renderReasons.clear();\n        rerenderCallback();\n      }\n\n      // console.log('stats', this.stats);\n    }\n  }, {\n    key: \"renderDisplayObject\",\n    value: function renderDisplayObject(displayObject, canvasConfig, renderingContext) {\n      var self = this;\n      var _canvasConfig$rendere = canvasConfig.renderer.getConfig(),\n        enableDirtyCheck = _canvasConfig$rendere.enableDirtyCheck,\n        enableCulling = _canvasConfig$rendere.enableCulling;\n      function internalRenderSingleDisplayObject(object) {\n        // TODO: relayout\n\n        // dirtycheck first\n        var renderable = object.renderable,\n          sortable = object.sortable;\n        // eslint-disable-next-line no-nested-ternary\n        var objectChanged = enableDirtyCheck ?\n        // @ts-ignore\n        renderable.dirty || renderingContext.dirtyRectangleRenderingDisabled ? object : null : object;\n        if (objectChanged) {\n          var objectToRender = enableCulling ? self.hooks.cull.call(objectChanged, self.context.camera) : objectChanged;\n          if (objectToRender) {\n            self.stats.rendered += 1;\n            renderingContext.renderListCurrentFrame.push(objectToRender);\n          }\n        }\n        renderable.dirty = false;\n        sortable.renderOrder = self.zIndexCounter;\n        self.zIndexCounter += 1;\n        self.stats.total += 1;\n\n        // sort is very expensive, use cached result if possible\n        if (sortable.dirty) {\n          self.sort(object, sortable);\n          sortable.dirty = false;\n          sortable.dirtyChildren = [];\n          sortable.dirtyReason = undefined;\n        }\n      }\n      var stack = [displayObject];\n      while (stack.length > 0) {\n        var currentObject = stack.pop();\n        internalRenderSingleDisplayObject(currentObject);\n\n        // recursive rendering its children\n        var objects = currentObject.sortable.sorted || currentObject.childNodes;\n        for (var i = objects.length - 1; i >= 0; i--) {\n          stack.push(objects[i]);\n        }\n      }\n    }\n  }, {\n    key: \"sort\",\n    value: function sort(displayObject, sortable) {\n      if (sortable.sorted && sortable.dirtyReason !== SortReason.Z_INDEX_CHANGED) {\n        // avoid re-sorting the whole children list\n        sortable.dirtyChildren.forEach(function (child) {\n          var index = displayObject.childNodes.indexOf(child);\n          if (index === -1) {\n            // remove from sorted list\n            var _index = sortable.sorted.indexOf(child);\n            if (_index >= 0) {\n              sortable.sorted.splice(_index, 1);\n            }\n          } else if (sortable.sorted.length === 0) {\n            sortable.sorted.push(child);\n          } else {\n            var _index2 = sortedIndex(sortable.sorted, child);\n            sortable.sorted.splice(_index2, 0, child);\n          }\n        });\n      } else {\n        sortable.sorted = displayObject.childNodes.slice().sort(sortByZIndex);\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.inited = false;\n      this.hooks.destroy.call();\n      this.globalRuntime.sceneGraphService.clearPendingEvents();\n    }\n  }, {\n    key: \"dirtify\",\n    value: function dirtify() {\n      // need re-render\n      this.context.renderingContext.renderReasons.add(RenderReason.DISPLAY_OBJECT_CHANGED);\n    }\n  }]);\n}();\n\nvar ATTRIBUTE_REGEXP = /\\[\\s*(.*)=(.*)\\s*\\]/;\n\n/**\n * support the following DOM API:\n * * getElementById\n * * getElementsByClassName\n * * getElementsByName\n * * getElementsByTag\n * * querySelector\n * * querySelectorAll\n */\nvar DefaultSceneGraphSelector = /*#__PURE__*/function () {\n  function DefaultSceneGraphSelector() {\n    _classCallCheck(this, DefaultSceneGraphSelector);\n  }\n  return _createClass(DefaultSceneGraphSelector, [{\n    key: \"selectOne\",\n    value: function selectOne(query, root) {\n      var _this = this;\n      if (query.startsWith('.')) {\n        return root.find(function (node) {\n          // return !node.shadow && node.id === query.substring(1);\n          return ((node === null || node === void 0 ? void 0 : node.classList) || []).indexOf(_this.getIdOrClassname(query)) > -1;\n        });\n      }\n      if (query.startsWith('#')) {\n        // getElementById('id')\n        return root.find(function (node) {\n          // return !node.shadow && node.id === query.substring(1);\n          return node.id === _this.getIdOrClassname(query);\n        });\n      }\n      if (query.startsWith('[')) {\n        var _this$getAttribute = this.getAttribute(query),\n          name = _this$getAttribute.name,\n          value = _this$getAttribute.value;\n        if (name) {\n          // getElementByName();\n          return root.find(function (node) {\n            return root !== node && (name === 'name' ? node.name === value : _this.attributeToString(node, name) === value);\n          });\n        }\n        return null;\n      }\n      // getElementsByTag('circle');\n      return root.find(function (node) {\n        return root !== node && node.nodeName === query;\n      });\n    }\n  }, {\n    key: \"selectAll\",\n    value: function selectAll(query, root) {\n      var _this2 = this;\n      // only support `[name=\"${name}\"]` `.className` `#id`\n      if (query.startsWith('.')) {\n        // getElementsByClassName('className');\n        // should not include itself\n        return root.findAll(function (node) {\n          return root !== node && ((node === null || node === void 0 ? void 0 : node.classList) || []).indexOf(_this2.getIdOrClassname(query)) > -1;\n        });\n      }\n      if (query.startsWith('#')) {\n        return root.findAll(function (node) {\n          return root !== node && node.id === _this2.getIdOrClassname(query);\n        });\n      }\n      if (query.startsWith('[')) {\n        var _this$getAttribute2 = this.getAttribute(query),\n          name = _this$getAttribute2.name,\n          value = _this$getAttribute2.value;\n        if (name) {\n          // getElementsByName();\n          return root.findAll(function (node) {\n            return root !== node && (name === 'name' ? node.name === value : _this2.attributeToString(node, name) === value);\n          });\n        }\n        return [];\n      }\n      // getElementsByTag('circle');\n      return root.findAll(function (node) {\n        return root !== node && node.nodeName === query;\n      });\n    }\n  }, {\n    key: \"is\",\n    value: function is(query, node) {\n      // a simple `matches` implementation\n      if (query.startsWith('.')) {\n        return node.className === this.getIdOrClassname(query);\n      }\n      if (query.startsWith('#')) {\n        return node.id === this.getIdOrClassname(query);\n      }\n      if (query.startsWith('[')) {\n        var _this$getAttribute3 = this.getAttribute(query),\n          name = _this$getAttribute3.name,\n          value = _this$getAttribute3.value;\n        return name === 'name' ? node.name === value : this.attributeToString(node, name) === value;\n      }\n      return node.nodeName === query;\n    }\n  }, {\n    key: \"getIdOrClassname\",\n    value: function getIdOrClassname(query) {\n      return query.substring(1);\n    }\n  }, {\n    key: \"getAttribute\",\n    value: function getAttribute(query) {\n      var matches = query.match(ATTRIBUTE_REGEXP);\n      var name = '';\n      var value = '';\n      if (matches && matches.length > 2) {\n        name = matches[1].replace(/\"/g, '');\n        value = matches[2].replace(/\"/g, '');\n      }\n      return {\n        name: name,\n        value: value\n      };\n    }\n  }, {\n    key: \"attributeToString\",\n    value: function attributeToString(node, name) {\n      if (!node.getAttribute) {\n        return '';\n      }\n      var value = node.getAttribute(name);\n      if (isNil(value)) {\n        return '';\n      }\n      if (value.toString) {\n        return value.toString();\n      }\n      return '';\n    }\n  }]);\n}();\n\n/**\n * built-in events for element\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationEvent\n *\n * TODO: use MutationObserver instead\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n */\nvar ElementEvent = /*#__PURE__*/function (ElementEvent) {\n  ElementEvent[\"ATTR_MODIFIED\"] = \"DOMAttrModified\";\n  ElementEvent[\"INSERTED\"] = \"DOMNodeInserted\";\n  ElementEvent[\"MOUNTED\"] = \"DOMNodeInsertedIntoDocument\";\n  ElementEvent[\"REMOVED\"] = \"removed\";\n  ElementEvent[\"UNMOUNTED\"] = \"DOMNodeRemovedFromDocument\";\n  ElementEvent[\"REPARENT\"] = \"reparent\";\n  ElementEvent[\"DESTROY\"] = \"destroy\";\n  ElementEvent[\"BOUNDS_CHANGED\"] = \"bounds-changed\";\n  ElementEvent[\"CULLED\"] = \"culled\";\n  return ElementEvent;\n}({});\n\n// #region EventTarget\n\n// #region Node\n\n// #region Element\n\n// #region AnimationTimeline\n\n// #region Document\n\n// #region CSSStyleDeclaration\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/API/CSSStyleDeclaration\n */\n\n// #region Canvas\n\nvar MutationEvent = /*#__PURE__*/function (_FederatedEvent) {\n  function MutationEvent(typeArg, relatedNode, prevValue, newValue, attrName, attrChange, prevParsedValue, newParsedValue) {\n    var _this;\n    _classCallCheck(this, MutationEvent);\n    _this = _callSuper(this, MutationEvent, [null]);\n    _this.relatedNode = relatedNode;\n    _this.prevValue = prevValue;\n    _this.newValue = newValue;\n    _this.attrName = attrName;\n    _this.attrChange = attrChange;\n    _this.prevParsedValue = prevParsedValue;\n    _this.newParsedValue = newParsedValue;\n    _this.type = typeArg;\n    return _this;\n  }\n  _inherits(MutationEvent, _FederatedEvent);\n  return _createClass(MutationEvent);\n}(FederatedEvent);\nMutationEvent.ADDITION = 2;\nMutationEvent.MODIFICATION = 1;\nMutationEvent.REMOVAL = 3;\n\nfunction markRenderableDirty(e) {\n  var renderable = e.renderable;\n  if (renderable) {\n    renderable.renderBoundsDirty = true;\n    renderable.boundsDirty = true;\n  }\n}\nvar reparentEvent = new MutationEvent(ElementEvent.REPARENT, null, '', '', '', 0, '', '');\n\n// Object pooling\n/** do not modify this objects */\nvar $vec2Zero = vec2.create();\n/** do not modify this objects */\nvar $vec3Zero = vec3.create();\n/** do not modify this objects */\nvar $vec3One = vec3.fromValues(1, 1, 1);\n/** do not modify this objects */\nvar $mat4Identity = mat4.create();\n\n/** shared objects */\nvar $vec2 = vec2.create();\n/** shared objects */\nvar $vec3$1 = vec3.create();\n/** shared objects */\nvar $mat4 = mat4.create();\n/** shared objects */\nvar $quat$1 = quat$1.create();\nvar $setLocalTransform_1 = vec3.create();\nvar $setLocalTransform_2 = quat$1.create();\nvar $setLocalTransform_3 = vec3.create();\nvar $setLocalPosition = vec3.create();\nvar $setPosition_1 = vec3.create();\nvar $setPosition_ParentInvertMatrix = mat4.create();\nvar $setEulerAngles_InvParentRot = quat$1.create();\nvar $rotateLocal = quat$1.create();\nvar $rotate_ParentInvertRotation = quat$1.create();\nvar $triggerPendingEvents_detail = {\n  affectChildren: true\n};\n\n/**\n * update transform in scene graph\n *\n * @see https://community.khronos.org/t/scene-graphs/50542/7\n */\nvar DefaultSceneGraphService = /*#__PURE__*/function () {\n  function DefaultSceneGraphService(runtime) {\n    _classCallCheck(this, DefaultSceneGraphService);\n    // target -> affectChildren\n    this.pendingEvents = new Map();\n    this.boundsChangedEvent = new CustomEvent(ElementEvent.BOUNDS_CHANGED);\n    this.displayObjectDependencyMap = new WeakMap();\n    this.runtime = runtime;\n  }\n  return _createClass(DefaultSceneGraphService, [{\n    key: \"matches\",\n    value: function matches(query, root) {\n      return this.runtime.sceneGraphSelector.is(query, root);\n    }\n  }, {\n    key: \"querySelector\",\n    value: function querySelector(query, root) {\n      return this.runtime.sceneGraphSelector.selectOne(query, root);\n    }\n  }, {\n    key: \"querySelectorAll\",\n    value: function querySelectorAll(query, root) {\n      return this.runtime.sceneGraphSelector.selectAll(query, root);\n      // .filter((node) => !node.shadow);\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(child, parent, index) {\n      var _sortable$sorted;\n      var detached = false;\n      if (child.parentNode) {\n        detached = child.parentNode !== parent;\n        this.detach(child);\n      }\n      var isChildFragment = child.nodeName === Shape.FRAGMENT;\n      var isAttachToFragment = isInFragment(parent);\n      child.parentNode = parent;\n      var nodes = isChildFragment ? child.childNodes : [child];\n      if (isNumber(index)) {\n        nodes.forEach(function (node) {\n          parent.childNodes.splice(index, 0, node);\n          node.parentNode = parent;\n        });\n      } else {\n        nodes.forEach(function (node) {\n          parent.childNodes.push(node);\n          node.parentNode = parent;\n        });\n      }\n\n      // parent needs re-sort\n      var _ref = parent,\n        sortable = _ref.sortable;\n      if (sortable !== null && sortable !== void 0 && (_sortable$sorted = sortable.sorted) !== null && _sortable$sorted !== void 0 && _sortable$sorted.length || child.parsedStyle.zIndex) {\n        if (sortable.dirtyChildren.indexOf(child) === -1) {\n          sortable.dirtyChildren.push(child);\n        }\n        // if (sortable) {\n        // only child has z-Index\n        sortable.dirty = true;\n        sortable.dirtyReason = SortReason.ADDED;\n      }\n      if (isAttachToFragment) return;\n      if (isChildFragment) this.dirtifyFragment(child);else {\n        var transform = child.transformable;\n        if (transform) {\n          this.dirtifyWorld(child, transform);\n        }\n      }\n      if (detached) {\n        child.dispatchEvent(reparentEvent);\n      }\n    }\n  }, {\n    key: \"detach\",\n    value: function detach(child) {\n      if (child.parentNode) {\n        var _sortable$sorted2, _style;\n        var transform = child.transformable;\n        // if (transform) {\n        //   const worldTransform = this.getWorldTransform(child, transform);\n        //   mat4.getScaling(transform.localScale, worldTransform);\n        //   mat4.getTranslation(transform.localPosition, worldTransform);\n        //   mat4.getRotation(transform.localRotation, worldTransform);\n        //   transform.localDirtyFlag = true;\n        // }\n\n        // parent needs re-sort\n        var _ref2 = child.parentNode,\n          sortable = _ref2.sortable;\n        // if (sortable) {\n        if (sortable !== null && sortable !== void 0 && (_sortable$sorted2 = sortable.sorted) !== null && _sortable$sorted2 !== void 0 && _sortable$sorted2.length || (_style = child.style) !== null && _style !== void 0 && _style.zIndex) {\n          if (sortable.dirtyChildren.indexOf(child) === -1) {\n            sortable.dirtyChildren.push(child);\n          }\n          sortable.dirty = true;\n          sortable.dirtyReason = SortReason.REMOVED;\n        }\n        var index = child.parentNode.childNodes.indexOf(child);\n        if (index > -1) {\n          child.parentNode.childNodes.splice(index, 1);\n        }\n        if (transform) {\n          this.dirtifyWorld(child, transform);\n        }\n        child.parentNode = null;\n      }\n    }\n  }, {\n    key: \"getOrigin\",\n    value: function getOrigin(element) {\n      element.getGeometryBounds();\n      return element.transformable.origin;\n    }\n\n    /**\n     * same as pivot in Pixi.js\n     *\n     * @see https://stackoverflow.com/questions/40748452/how-to-change-css-transform-origin-but-preserve-transformation\n     */\n  }, {\n    key: \"setOrigin\",\n    value: function setOrigin(element, origin) {\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var z = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      if (typeof origin === 'number') {\n        origin = [origin, y, z];\n      }\n      var transform = element.transformable;\n      if (origin[0] === transform.origin[0] && origin[1] === transform.origin[1] && origin[2] === transform.origin[2]) {\n        return;\n      }\n      var originVec = transform.origin;\n\n      // const delta = vec3.subtract(vec3.create(), origin, originVec);\n      // vec3.add(transform.localPosition, transform.localPosition, delta);\n\n      // update origin\n      originVec[0] = origin[0];\n      originVec[1] = origin[1];\n      originVec[2] = origin[2] || 0;\n      this.dirtifyLocal(element, transform);\n    }\n\n    /**\n     * rotate in world space\n     */\n  }, {\n    key: \"rotate\",\n    value: function rotate(element, degrees) {\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var z = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      if (typeof degrees === 'number') {\n        degrees = vec3.fromValues(degrees, y, z);\n      }\n      var transform = element.transformable;\n      if (element.parentNode === null || !element.parentNode.transformable) {\n        this.rotateLocal(element, degrees);\n      } else {\n        var rotation = $quat$1;\n        quat$1.fromEuler(rotation, degrees[0], degrees[1], degrees[2]);\n        var rot = this.getRotation(element);\n        var parentRot = this.getRotation(element.parentNode);\n        quat$1.copy($rotate_ParentInvertRotation, parentRot);\n        quat$1.invert($rotate_ParentInvertRotation, $rotate_ParentInvertRotation);\n        quat$1.multiply(rotation, $rotate_ParentInvertRotation, rotation);\n        quat$1.multiply(transform.localRotation, rotation, rot);\n        quat$1.normalize(transform.localRotation, transform.localRotation);\n        this.dirtifyLocal(element, transform);\n      }\n    }\n\n    /**\n     * rotate in local space\n     * @see @see https://docs.microsoft.com/en-us/windows/win32/api/directxmath/nf-directxmath-xmquaternionrotationrollpitchyaw\n     */\n  }, {\n    key: \"rotateLocal\",\n    value: function rotateLocal(element, degrees) {\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var z = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      if (typeof degrees === 'number') {\n        degrees = vec3.fromValues(degrees, y, z);\n      }\n      var transform = element.transformable;\n      quat$1.fromEuler($rotateLocal, degrees[0], degrees[1], degrees[2]);\n      quat$1.mul(transform.localRotation, transform.localRotation, $rotateLocal);\n      this.dirtifyLocal(element, transform);\n    }\n\n    /**\n     * set euler angles(degrees) in world space\n     */\n  }, {\n    key: \"setEulerAngles\",\n    value: function setEulerAngles(element, degrees) {\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var z = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      if (typeof degrees === 'number') {\n        degrees = vec3.fromValues(degrees, y, z);\n      }\n      var transform = element.transformable;\n      if (element.parentNode === null || !element.parentNode.transformable) {\n        this.setLocalEulerAngles(element, degrees);\n      } else {\n        quat$1.fromEuler(transform.localRotation, degrees[0], degrees[1], degrees[2]);\n        var parentRotation = this.getRotation(element.parentNode);\n        quat$1.copy($setEulerAngles_InvParentRot, quat$1.invert($quat$1, parentRotation));\n        quat$1.mul(transform.localRotation, transform.localRotation, $setEulerAngles_InvParentRot);\n        this.dirtifyLocal(element, transform);\n      }\n    }\n\n    /**\n     * set euler angles(degrees) in local space\n     */\n  }, {\n    key: \"setLocalEulerAngles\",\n    value: function setLocalEulerAngles(element, degrees) {\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var z = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var dirtify = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      if (typeof degrees === 'number') {\n        degrees = vec3.fromValues(degrees, y, z);\n      }\n      var transform = element.transformable;\n      quat$1.fromEuler(transform.localRotation, degrees[0], degrees[1], degrees[2]);\n      if (dirtify) {\n        this.dirtifyLocal(element, transform);\n      }\n    }\n\n    /**\n     * translate in local space\n     *\n     * @example\n     * ```\n     * translateLocal(x, y, z)\n     * translateLocal(vec3(x, y, z))\n     * ```\n     */\n  }, {\n    key: \"translateLocal\",\n    value: function translateLocal(element, translation) {\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var z = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      if (typeof translation === 'number') {\n        translation = vec3.fromValues(translation, y, z);\n      }\n      var transform = element.transformable;\n      if (vec3.equals(translation, $vec3Zero)) return;\n      vec3.transformQuat(translation, translation, transform.localRotation);\n      vec3.add(transform.localPosition, transform.localPosition, translation);\n      this.dirtifyLocal(element, transform);\n    }\n\n    /**\n     * move to position in world space\n     *\n     *  g  move/moveTo\n     * @see https://github.com/antvis/g/blob/master/packages/g-base/src/abstract/element.ts#L684-L689\n     */\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(element, position) {\n      var _position$;\n      var transform = element.transformable;\n      $setPosition_1[0] = position[0];\n      $setPosition_1[1] = position[1];\n      $setPosition_1[2] = (_position$ = position[2]) !== null && _position$ !== void 0 ? _position$ : 0;\n      if (vec3.equals(this.getPosition(element), $setPosition_1)) {\n        return;\n      }\n      vec3.copy(transform.position, $setPosition_1);\n      if (element.parentNode === null || !element.parentNode.transformable) {\n        vec3.copy(transform.localPosition, $setPosition_1);\n      } else {\n        var parentTransform = element.parentNode.transformable;\n        mat4.copy($setPosition_ParentInvertMatrix, parentTransform.worldTransform);\n        mat4.invert($setPosition_ParentInvertMatrix, $setPosition_ParentInvertMatrix);\n        vec3.transformMat4(transform.localPosition, $setPosition_1, $setPosition_ParentInvertMatrix);\n      }\n      this.dirtifyLocal(element, transform);\n    }\n\n    /**\n     * move to position in local space\n     */\n  }, {\n    key: \"setLocalPosition\",\n    value: function setLocalPosition(element, position) {\n      var _position$2;\n      var dirtify = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var transform = element.transformable;\n      $setLocalPosition[0] = position[0];\n      $setLocalPosition[1] = position[1];\n      $setLocalPosition[2] = (_position$2 = position[2]) !== null && _position$2 !== void 0 ? _position$2 : 0;\n      if (vec3.equals(transform.localPosition, $setLocalPosition)) {\n        return;\n      }\n      vec3.copy(transform.localPosition, $setLocalPosition);\n      if (dirtify) {\n        this.dirtifyLocal(element, transform);\n      }\n    }\n\n    /**\n     * scale in local space\n     */\n  }, {\n    key: \"scaleLocal\",\n    value: function scaleLocal(element, scaling) {\n      var _scaling$;\n      var transform = element.transformable;\n      vec3.multiply(transform.localScale, transform.localScale, vec3.set($vec3$1, scaling[0], scaling[1], (_scaling$ = scaling[2]) !== null && _scaling$ !== void 0 ? _scaling$ : 1));\n      this.dirtifyLocal(element, transform);\n    }\n  }, {\n    key: \"setLocalScale\",\n    value: function setLocalScale(element, scaling) {\n      var _scaling$2;\n      var dirtify = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var transform = element.transformable;\n      vec3.set($vec3$1, scaling[0], scaling[1], (_scaling$2 = scaling[2]) !== null && _scaling$2 !== void 0 ? _scaling$2 : transform.localScale[2]);\n      if (vec3.equals($vec3$1, transform.localScale)) {\n        return;\n      }\n      vec3.copy(transform.localScale, $vec3$1);\n      if (dirtify) {\n        this.dirtifyLocal(element, transform);\n      }\n    }\n\n    /**\n     * translate in world space\n     *\n     * @example\n     * ```\n     * translate(x, y, z)\n     * translate(vec3(x, y, z))\n     * ```\n     *\n     *  g  translate 2D\n     * @see https://github.com/antvis/g/blob/master/packages/g-base/src/abstract/element.ts#L665-L676\n     */\n  }, {\n    key: \"translate\",\n    value: function translate(element, translation) {\n      var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var z = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      if (typeof translation === 'number') {\n        translation = vec3.set($vec3$1, translation, y, z);\n      }\n      if (vec3.equals(translation, $vec3Zero)) return;\n      vec3.add($vec3$1, this.getPosition(element), translation);\n      this.setPosition(element, $vec3$1);\n    }\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(element, rotation, y, z, w) {\n      var transform = element.transformable;\n      if (typeof rotation === 'number') {\n        rotation = quat$1.fromValues(rotation, y, z, w);\n      }\n      if (element.parentNode === null || !element.parentNode.transformable) {\n        this.setLocalRotation(element, rotation);\n      } else {\n        var parentRot = this.getRotation(element.parentNode);\n        quat$1.copy($quat$1, parentRot);\n        quat$1.invert($quat$1, $quat$1);\n        quat$1.multiply(transform.localRotation, $quat$1, rotation);\n        quat$1.normalize(transform.localRotation, transform.localRotation);\n        this.dirtifyLocal(element, transform);\n      }\n    }\n  }, {\n    key: \"setLocalRotation\",\n    value: function setLocalRotation(element, rotation, y, z, w) {\n      var dirtify = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n      if (typeof rotation === 'number') {\n        rotation = quat$1.set($quat$1, rotation, y, z, w);\n      }\n      var transform = element.transformable;\n      quat$1.copy(transform.localRotation, rotation);\n      if (dirtify) {\n        this.dirtifyLocal(element, transform);\n      }\n    }\n  }, {\n    key: \"setLocalSkew\",\n    value: function setLocalSkew(element, skew, y) {\n      var dirtify = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n      if (typeof skew === 'number') {\n        skew = vec2.set($vec2, skew, y);\n      }\n      var transform = element.transformable;\n      vec2.copy(transform.localSkew, skew);\n      if (dirtify) {\n        this.dirtifyLocal(element, transform);\n      }\n    }\n  }, {\n    key: \"dirtifyLocal\",\n    value: function dirtifyLocal(element, transform) {\n      if (isInFragment(element)) return;\n      if (!transform.localDirtyFlag) {\n        transform.localDirtyFlag = true;\n        if (!transform.dirtyFlag) {\n          this.dirtifyWorld(element, transform);\n        }\n      }\n    }\n  }, {\n    key: \"dirtifyWorld\",\n    value: function dirtifyWorld(element, transform) {\n      if (!transform.dirtyFlag) {\n        this.unfreezeParentToRoot(element);\n      }\n      this.dirtifyWorldInternal(element, transform);\n      this.dirtifyToRoot(element, true);\n    }\n  }, {\n    key: \"dirtifyFragment\",\n    value: function dirtifyFragment(element) {\n      var transform = element.transformable;\n      if (transform) {\n        transform.frozen = false;\n        transform.dirtyFlag = true;\n        transform.localDirtyFlag = true;\n      }\n      var renderable = element.renderable;\n      if (renderable) {\n        renderable.renderBoundsDirty = true;\n        renderable.boundsDirty = true;\n        renderable.dirty = true;\n      }\n      var length = element.childNodes.length;\n      for (var i = 0; i < length; i++) {\n        this.dirtifyFragment(element.childNodes[i]);\n      }\n      if (element.nodeName === Shape.FRAGMENT) {\n        this.pendingEvents.set(element, false);\n      }\n    }\n  }, {\n    key: \"triggerPendingEvents\",\n    value: function triggerPendingEvents() {\n      var _this = this;\n      var triggered = new Set();\n      var trigger = function trigger(element, detail) {\n        if (!element.isConnected || triggered.has(element) || element.nodeName === Shape.FRAGMENT) {\n          return;\n        }\n        _this.boundsChangedEvent.detail = detail;\n        _this.boundsChangedEvent.target = element;\n        if (element.isMutationObserved) {\n          element.dispatchEvent(_this.boundsChangedEvent);\n        } else {\n          element.ownerDocument.defaultView.dispatchEvent(_this.boundsChangedEvent, true);\n        }\n        triggered.add(element);\n      };\n      this.pendingEvents.forEach(function (affectChildren, element) {\n        if (element.nodeName === Shape.FRAGMENT) {\n          return;\n        }\n        $triggerPendingEvents_detail.affectChildren = affectChildren;\n        if (affectChildren) {\n          element.forEach(function (e) {\n            trigger(e, $triggerPendingEvents_detail);\n          });\n        } else trigger(element, $triggerPendingEvents_detail);\n      });\n      triggered.clear();\n      this.clearPendingEvents();\n    }\n  }, {\n    key: \"clearPendingEvents\",\n    value: function clearPendingEvents() {\n      this.pendingEvents.clear();\n    }\n  }, {\n    key: \"dirtifyToRoot\",\n    value: function dirtifyToRoot(element) {\n      var affectChildren = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var p = element;\n\n      // only need to re-render itself\n      if (p.renderable) {\n        p.renderable.dirty = true;\n      }\n      while (p) {\n        markRenderableDirty(p);\n        p = p.parentNode;\n      }\n      if (affectChildren) {\n        element.forEach(function (e) {\n          markRenderableDirty(e);\n        });\n      }\n      this.informDependentDisplayObjects(element);\n      this.pendingEvents.set(element, affectChildren);\n    }\n  }, {\n    key: \"updateDisplayObjectDependency\",\n    value: function updateDisplayObjectDependency(name, oldPath, newPath, object) {\n      // clear ref to old clip path\n      if (oldPath && oldPath !== newPath) {\n        var oldDependencyMap = this.displayObjectDependencyMap.get(oldPath);\n        if (oldDependencyMap && oldDependencyMap[name]) {\n          var index = oldDependencyMap[name].indexOf(object);\n          oldDependencyMap[name].splice(index, 1);\n        }\n      }\n      if (newPath) {\n        var newDependencyMap = this.displayObjectDependencyMap.get(newPath);\n        if (!newDependencyMap) {\n          this.displayObjectDependencyMap.set(newPath, {});\n          newDependencyMap = this.displayObjectDependencyMap.get(newPath);\n        }\n        if (!newDependencyMap[name]) {\n          newDependencyMap[name] = [];\n        }\n        newDependencyMap[name].push(object);\n      }\n    }\n  }, {\n    key: \"informDependentDisplayObjects\",\n    value: function informDependentDisplayObjects(object) {\n      var _this2 = this;\n      var dependencyMap = this.displayObjectDependencyMap.get(object);\n      if (!dependencyMap) {\n        return;\n      }\n      Object.keys(dependencyMap).forEach(function (name) {\n        dependencyMap[name].forEach(function (target) {\n          _this2.dirtifyToRoot(target, true);\n          target.dispatchEvent(new MutationEvent(ElementEvent.ATTR_MODIFIED, target, _this2, _this2, name, MutationEvent.MODIFICATION, _this2, _this2));\n          if (target.isCustomElement && target.isConnected) {\n            if (target.attributeChangedCallback) {\n              target.attributeChangedCallback(name, _this2, _this2);\n            }\n          }\n        });\n      });\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition(element) {\n      var transform = element.transformable;\n      return mat4.getTranslation(transform.position, this.getWorldTransform(element, transform));\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation(element) {\n      var transform = element.transformable;\n      return mat4.getRotation(transform.rotation, this.getWorldTransform(element, transform));\n    }\n  }, {\n    key: \"getScale\",\n    value: function getScale(element) {\n      var transform = element.transformable;\n      return mat4.getScaling(transform.scaling, this.getWorldTransform(element, transform));\n    }\n  }, {\n    key: \"getWorldTransform\",\n    value: function getWorldTransform(element) {\n      var transform = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : element.transformable;\n      if (!transform.localDirtyFlag && !transform.dirtyFlag) {\n        return transform.worldTransform;\n      }\n      if (element.parentNode && element.parentNode.transformable) {\n        this.getWorldTransform(element.parentNode);\n      }\n      this.sync(element, transform);\n      return transform.worldTransform;\n    }\n  }, {\n    key: \"getLocalPosition\",\n    value: function getLocalPosition(element) {\n      return element.transformable.localPosition;\n    }\n  }, {\n    key: \"getLocalRotation\",\n    value: function getLocalRotation(element) {\n      return element.transformable.localRotation;\n    }\n  }, {\n    key: \"getLocalScale\",\n    value: function getLocalScale(element) {\n      return element.transformable.localScale;\n    }\n  }, {\n    key: \"getLocalSkew\",\n    value: function getLocalSkew(element) {\n      return element.transformable.localSkew;\n    }\n  }, {\n    key: \"calcLocalTransform\",\n    value: function calcLocalTransform(transform) {\n      var hasSkew = transform.localSkew[0] !== 0 || transform.localSkew[1] !== 0;\n      if (hasSkew) {\n        mat4.fromRotationTranslationScaleOrigin(transform.localTransform, transform.localRotation, transform.localPosition, vec3.fromValues(1, 1, 1), transform.origin);\n\n        // apply skew2D\n        if (transform.localSkew[0] !== 0 || transform.localSkew[1] !== 0) {\n          mat4.identity($mat4);\n          $mat4[4] = Math.tan(transform.localSkew[0]);\n          $mat4[1] = Math.tan(transform.localSkew[1]);\n          mat4.multiply(transform.localTransform, transform.localTransform, $mat4);\n        }\n        var scaling = mat4.fromRotationTranslationScaleOrigin($mat4, quat$1.set($quat$1, 0, 0, 0, 1), vec3.set($vec3$1, 1, 1, 1), transform.localScale, transform.origin);\n        mat4.multiply(transform.localTransform, transform.localTransform, scaling);\n      } else {\n        var localTransform = transform.localTransform,\n          localPosition = transform.localPosition,\n          localRotation = transform.localRotation,\n          localScale = transform.localScale,\n          origin = transform.origin;\n        var hasPosition = localPosition[0] !== 0 || localPosition[1] !== 0 || localPosition[2] !== 0;\n        var hasRotation = localRotation[3] !== 1 || localRotation[0] !== 0 || localRotation[1] !== 0 || localRotation[2] !== 0;\n        var hasScale = localScale[0] !== 1 || localScale[1] !== 1 || localScale[2] !== 1;\n        var hasOrigin = origin[0] !== 0 || origin[1] !== 0 || origin[2] !== 0;\n        if (!hasRotation && !hasScale && !hasOrigin) {\n          if (hasPosition) {\n            mat4.fromTranslation(localTransform, localPosition);\n          } else {\n            mat4.identity(localTransform);\n          }\n        } else {\n          // @see https://github.com/mattdesl/css-mat4/blob/master/index.js\n          mat4.fromRotationTranslationScaleOrigin(localTransform, localRotation, localPosition, localScale, origin);\n        }\n      }\n    }\n  }, {\n    key: \"getLocalTransform\",\n    value: function getLocalTransform(element) {\n      var transform = element.transformable;\n      if (transform.localDirtyFlag) {\n        this.calcLocalTransform(transform);\n        transform.localDirtyFlag = false;\n      }\n      return transform.localTransform;\n    }\n  }, {\n    key: \"setLocalTransform\",\n    value: function setLocalTransform(element, transform) {\n      var t = mat4.getTranslation($setLocalTransform_1, transform);\n      var r = mat4.getRotation($setLocalTransform_2, transform);\n      var s = mat4.getScaling($setLocalTransform_3, transform);\n      this.setLocalScale(element, s, false);\n      this.setLocalPosition(element, t, false);\n      this.setLocalRotation(element, r, undefined, undefined, undefined, false);\n      this.dirtifyLocal(element, element.transformable);\n    }\n  }, {\n    key: \"resetLocalTransform\",\n    value: function resetLocalTransform(element) {\n      this.setLocalScale(element, $vec3One, false);\n      this.setLocalPosition(element, $vec3Zero, false);\n      this.setLocalEulerAngles(element, $vec3Zero, undefined, undefined, false);\n      this.setLocalSkew(element, $vec2Zero, undefined, false);\n      this.dirtifyLocal(element, element.transformable);\n    }\n  }, {\n    key: \"getTransformedGeometryBounds\",\n    value: function getTransformedGeometryBounds(element) {\n      var render = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var existedAABB = arguments.length > 2 ? arguments[2] : undefined;\n      var bounds = this.getGeometryBounds(element, render);\n      if (!AABB.isEmpty(bounds)) {\n        var aabb = existedAABB || new AABB();\n        aabb.setFromTransformedAABB(bounds, this.getWorldTransform(element));\n        return aabb;\n      }\n      return null;\n    }\n\n    /**\n     * won't account for children\n     */\n  }, {\n    key: \"getGeometryBounds\",\n    value: function getGeometryBounds(element) {\n      var render = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var _ref3 = element,\n        geometry = _ref3.geometry;\n      if (geometry.dirty) {\n        runtime.styleValueRegistry.updateGeometry(element);\n      }\n      var bounds = render ? geometry.renderBounds : geometry.contentBounds || null;\n      // return (bounds && new AABB(bounds.center, bounds.halfExtents)) || new AABB();\n      return bounds || new AABB();\n    }\n\n    /**\n     * account for children in world space\n     */\n  }, {\n    key: \"getBounds\",\n    value: function getBounds(element) {\n      var _this3 = this;\n      var render = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var _ref4 = element,\n        renderable = _ref4.renderable;\n      if (!renderable.boundsDirty && !render && renderable.bounds) {\n        return renderable.bounds;\n      }\n      if (!renderable.renderBoundsDirty && render && renderable.renderBounds) {\n        return renderable.renderBounds;\n      }\n\n      // reuse existed if possible\n      var existedAABB = render ? renderable.renderBounds : renderable.bounds;\n\n      // reset with geometry's aabb\n      var aabb = this.getTransformedGeometryBounds(element, render, existedAABB);\n\n      // merge children's aabbs\n      var children = element.childNodes;\n      children.forEach(function (child) {\n        var childBounds = _this3.getBounds(child, render);\n        if (childBounds) {\n          if (!aabb) {\n            aabb = existedAABB || new AABB();\n            aabb.update(childBounds.center, childBounds.halfExtents);\n          } else {\n            aabb.add(childBounds);\n          }\n        }\n      });\n      if (!aabb) {\n        aabb = new AABB();\n      }\n      if (render) {\n        // FIXME: account for clip path\n        var clipped = findClosestClipPathTarget(element);\n        if (clipped) {\n          // use bounds under world space\n          var clipPathBounds = clipped.parsedStyle.clipPath.getBounds(render);\n          if (!aabb) {\n            aabb.update(clipPathBounds.center, clipPathBounds.halfExtents);\n          } else if (clipPathBounds) {\n            aabb = clipPathBounds.intersection(aabb);\n          }\n        }\n      }\n      if (render) {\n        renderable.renderBounds = aabb;\n        renderable.renderBoundsDirty = false;\n      } else {\n        renderable.bounds = aabb;\n        renderable.boundsDirty = false;\n      }\n      return aabb;\n    }\n\n    /**\n     * account for children in local space\n     */\n  }, {\n    key: \"getLocalBounds\",\n    value: function getLocalBounds(element) {\n      if (element.parentNode) {\n        var parentInvert = $mat4Identity;\n        if (element.parentNode.transformable) {\n          parentInvert = mat4.invert($mat4, this.getWorldTransform(element.parentNode));\n        }\n        var bounds = this.getBounds(element);\n        if (!AABB.isEmpty(bounds)) {\n          var localBounds = new AABB();\n          localBounds.setFromTransformedAABB(bounds, parentInvert);\n          return localBounds;\n        }\n      }\n      return this.getBounds(element);\n    }\n  }, {\n    key: \"getBoundingClientRect\",\n    value: function getBoundingClientRect(element) {\n      var _element$ownerDocumen;\n      var aabb;\n      var bounds = this.getGeometryBounds(element);\n      if (!AABB.isEmpty(bounds)) {\n        aabb = new AABB();\n        // apply transformation to aabb\n        aabb.setFromTransformedAABB(bounds, this.getWorldTransform(element));\n      }\n\n      // calc context's offset\n      var bbox = (_element$ownerDocumen = element.ownerDocument) === null || _element$ownerDocumen === void 0 || (_element$ownerDocumen = _element$ownerDocumen.defaultView) === null || _element$ownerDocumen === void 0 ? void 0 : _element$ownerDocumen.getContextService().getBoundingClientRect();\n      if (aabb) {\n        var _aabb$getMin = aabb.getMin(),\n          _aabb$getMin2 = _slicedToArray(_aabb$getMin, 2),\n          left = _aabb$getMin2[0],\n          top = _aabb$getMin2[1];\n        var _aabb$getMax = aabb.getMax(),\n          _aabb$getMax2 = _slicedToArray(_aabb$getMax, 2),\n          right = _aabb$getMax2[0],\n          bottom = _aabb$getMax2[1];\n        return new Rectangle(left + ((bbox === null || bbox === void 0 ? void 0 : bbox.left) || 0), top + ((bbox === null || bbox === void 0 ? void 0 : bbox.top) || 0), right - left, bottom - top);\n      }\n      return new Rectangle((bbox === null || bbox === void 0 ? void 0 : bbox.left) || 0, (bbox === null || bbox === void 0 ? void 0 : bbox.top) || 0, 0, 0);\n    }\n  }, {\n    key: \"dirtifyWorldInternal\",\n    value: function dirtifyWorldInternal(element, transform) {\n      var _this4 = this;\n      if (!transform.dirtyFlag) {\n        transform.dirtyFlag = true;\n        transform.frozen = false;\n        element.childNodes.forEach(function (child) {\n          var childTransform = child.transformable;\n          if (!childTransform.dirtyFlag) {\n            _this4.dirtifyWorldInternal(child, childTransform);\n          }\n        });\n        var _ref5 = element,\n          renderable = _ref5.renderable;\n        if (renderable) {\n          renderable.renderBoundsDirty = true;\n          renderable.boundsDirty = true;\n          renderable.dirty = true;\n        }\n      }\n    }\n  }, {\n    key: \"syncHierarchy\",\n    value: function syncHierarchy(element) {\n      var transform = element.transformable;\n      if (transform.frozen) {\n        return;\n      }\n      transform.frozen = true;\n      if (transform.localDirtyFlag || transform.dirtyFlag) {\n        this.sync(element, transform);\n      }\n      var children = element.childNodes;\n      for (var i = 0; i < children.length; i++) {\n        this.syncHierarchy(children[i]);\n      }\n    }\n  }, {\n    key: \"sync\",\n    value: function sync(element, transform) {\n      if (transform.localDirtyFlag) {\n        this.calcLocalTransform(transform);\n        transform.localDirtyFlag = false;\n      }\n      if (transform.dirtyFlag) {\n        var parent = element.parentNode;\n        var parentTransform = parent && parent.transformable;\n        if (parent === null || !parentTransform) {\n          mat4.copy(transform.worldTransform, transform.localTransform);\n        } else {\n          // TODO: should we support scale compensation?\n          // @see https://github.com/playcanvas/engine/issues/1077#issuecomment-359765557\n          mat4.multiply(transform.worldTransform, parentTransform.worldTransform, transform.localTransform);\n        }\n        transform.dirtyFlag = false;\n      }\n    }\n  }, {\n    key: \"unfreezeParentToRoot\",\n    value: function unfreezeParentToRoot(child) {\n      var p = child.parentNode;\n      while (p) {\n        var transform = p.transformable;\n        if (transform) {\n          transform.frozen = false;\n        }\n        p = p.parentNode;\n      }\n    }\n  }]);\n}();\n\nvar TEXT_METRICS = {\n  MetricsString: '|q',\n  BaselineSymbol: 'M',\n  BaselineMultiplier: 1.4,\n  HeightMultiplier: 2,\n  Newlines: [0x000a,\n  // line feed\n  0x000d // carriage return\n  ],\n  BreakingSpaces: [0x0009,\n  // character tabulation\n  0x0020,\n  // space\n  0x2000,\n  // en quad\n  0x2001,\n  // em quad\n  0x2002,\n  // en space\n  0x2003,\n  // em space\n  0x2004,\n  // three-per-em space\n  0x2005,\n  // four-per-em space\n  0x2006,\n  // six-per-em space\n  0x2008,\n  // punctuation space\n  0x2009,\n  // thin space\n  0x200a,\n  // hair space\n  0x205f,\n  // medium mathematical space\n  0x3000 // ideographic space\n  ]\n};\nvar LATIN_REGEX = /[a-zA-Z0-9\\u00C0-\\u00D6\\u00D8-\\u00f6\\u00f8-\\u00ff!\"#$%&'()*+,-./:;]/;\n\n// Line breaking rules in CJK (Kinsoku Shori)\n// Refer from https://en.wikipedia.org/wiki/Line_breaking_rules_in_East_Asian_languages\nvar regexCannotStartZhCn = /[!%),.:;?\\]}'\"\"]/;\nvar regexCannotEndZhCn = /[$('\"]/;\nvar regexCannotStartZhTw = /[!),.:;?\\]}'\"\"]/;\nvar regexCannotEndZhTw = /[([{'\"]/;\nvar regexCannotStartJaJp = /[)\\]'\"?!:;,.]/;\nvar regexCannotEndJaJp = /[(['\"...]/;\nvar regexCannotStartKoKr = /[!%),.:;?\\]}'\"]/;\nvar regexCannotEndKoKr = /[$([{'\"#]/;\nvar regexCannotStart = new RegExp(\"\".concat(regexCannotStartZhCn.source, \"|\").concat(regexCannotStartZhTw.source, \"|\").concat(regexCannotStartJaJp.source, \"|\").concat(regexCannotStartKoKr.source));\nvar regexCannotEnd = new RegExp(\"\".concat(regexCannotEndZhCn.source, \"|\").concat(regexCannotEndZhTw.source, \"|\").concat(regexCannotEndJaJp.source, \"|\").concat(regexCannotEndKoKr.source));\n\n/**\n * Borrow from pixi/packages/text/src/TextMetrics.ts\n */\nvar TextService = /*#__PURE__*/function () {\n  function TextService(runtime) {\n    var _this = this;\n    _classCallCheck(this, TextService);\n    /**\n     * font metrics cache\n     */\n    this.fontMetricsCache = {};\n    this.shouldBreakByKinsokuShorui = function (_char, nextChar) {\n      if (_this.isBreakingSpace(nextChar)) return false;\n      if (_char) {\n        // Line breaking rules in CJK (Kinsoku Shori)\n        if (regexCannotEnd.exec(nextChar) || regexCannotStart.exec(_char)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    this.trimByKinsokuShorui = function (prev) {\n      var next = _toConsumableArray(prev);\n      var prevLine = next[next.length - 2];\n      if (!prevLine) {\n        return prev;\n      }\n      var lastChar = prevLine[prevLine.length - 1];\n      next[next.length - 2] = prevLine.slice(0, -1);\n      next[next.length - 1] = lastChar + next[next.length - 1];\n      return next;\n    };\n    this.runtime = runtime;\n  }\n  return _createClass(TextService, [{\n    key: \"measureFont\",\n    value:\n    /**\n     * Calculates the ascent, descent and fontSize of a given font-style.\n     */\n    function measureFont(font, offscreenCanvas) {\n      // as this method is used for preparing assets, don't recalculate things if we don't need to\n      if (this.fontMetricsCache[font]) {\n        return this.fontMetricsCache[font];\n      }\n      var properties = {\n        ascent: 0,\n        descent: 0,\n        fontSize: 0\n      };\n      var canvas = this.runtime.offscreenCanvasCreator.getOrCreateCanvas(offscreenCanvas);\n      var context = this.runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas, {\n        willReadFrequently: true\n      });\n      context.font = font;\n      var metricsString = TEXT_METRICS.MetricsString + TEXT_METRICS.BaselineSymbol;\n      var width = Math.ceil(context.measureText(metricsString).width);\n      var baseline = Math.ceil(context.measureText(TEXT_METRICS.BaselineSymbol).width);\n      var height = TEXT_METRICS.HeightMultiplier * baseline;\n      baseline = baseline * TEXT_METRICS.BaselineMultiplier | 0;\n      // @ts-ignore\n      canvas.width = width;\n      // @ts-ignore\n      canvas.height = height;\n      context.fillStyle = '#f00';\n      context.fillRect(0, 0, width, height);\n      context.font = font;\n      context.textBaseline = 'alphabetic';\n      context.fillStyle = '#000';\n      context.fillText(metricsString, 0, baseline);\n      var imagedata = context.getImageData(0, 0, width || 1, height || 1).data;\n      var pixels = imagedata.length;\n      var line = width * 4;\n      var i = 0;\n      var idx = 0;\n      var stop = false;\n      // ascent. scan from top to bottom until we find a non red pixel\n      for (i = 0; i < baseline; ++i) {\n        for (var j = 0; j < line; j += 4) {\n          if (imagedata[idx + j] !== 255) {\n            stop = true;\n            break;\n          }\n        }\n        if (!stop) {\n          idx += line;\n        } else {\n          break;\n        }\n      }\n      properties.ascent = baseline - i;\n      idx = pixels - line;\n      stop = false;\n      // descent. scan from bottom to top until we find a non red pixel\n      for (i = height; i > baseline; --i) {\n        for (var _j = 0; _j < line; _j += 4) {\n          if (imagedata[idx + _j] !== 255) {\n            stop = true;\n            break;\n          }\n        }\n        if (!stop) {\n          idx -= line;\n        } else {\n          break;\n        }\n      }\n      properties.descent = i - baseline;\n      properties.fontSize = properties.ascent + properties.descent;\n      this.fontMetricsCache[font] = properties;\n      return properties;\n    }\n  }, {\n    key: \"measureText\",\n    value: function measureText(text, parsedStyle, offscreenCanvas) {\n      var _parsedStyle$fontSize = parsedStyle.fontSize,\n        fontSize = _parsedStyle$fontSize === void 0 ? 16 : _parsedStyle$fontSize,\n        _parsedStyle$wordWrap = parsedStyle.wordWrap,\n        wordWrap = _parsedStyle$wordWrap === void 0 ? false : _parsedStyle$wordWrap,\n        strokeHeight = parsedStyle.lineHeight,\n        _parsedStyle$lineWidt = parsedStyle.lineWidth,\n        lineWidth = _parsedStyle$lineWidt === void 0 ? 1 : _parsedStyle$lineWidt,\n        _parsedStyle$textBase = parsedStyle.textBaseline,\n        textBaseline = _parsedStyle$textBase === void 0 ? 'alphabetic' : _parsedStyle$textBase,\n        _parsedStyle$textAlig = parsedStyle.textAlign,\n        textAlign = _parsedStyle$textAlig === void 0 ? 'start' : _parsedStyle$textAlig,\n        _parsedStyle$letterSp = parsedStyle.letterSpacing,\n        letterSpacing = _parsedStyle$letterSp === void 0 ? 0 : _parsedStyle$letterSp,\n        textPath = parsedStyle.textPath;\n        parsedStyle.textPathSide;\n        parsedStyle.textPathStartOffset;\n        var _parsedStyle$leading = parsedStyle.leading,\n        leading = _parsedStyle$leading === void 0 ? 0 : _parsedStyle$leading;\n      var font = toFontString(parsedStyle);\n      var fontProperties = this.measureFont(font, offscreenCanvas);\n      // fallback in case UA disallow canvas data extraction\n      if (fontProperties.fontSize === 0) {\n        fontProperties.fontSize = fontSize;\n        fontProperties.ascent = fontSize;\n      }\n      var context = this.runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas);\n      context.font = font;\n\n      // no overflowing by default\n      parsedStyle.isOverflowing = false;\n      var outputText = wordWrap ? this.wordWrap(text, parsedStyle, offscreenCanvas) : text;\n      var lines = outputText.split(/(?:\\r\\n|\\r|\\n)/);\n      var lineWidths = new Array(lines.length);\n      var maxLineWidth = 0;\n\n      // account for textPath\n      if (textPath) {\n        textPath.getTotalLength();\n\n        // const startingPoint = textPath.getPoint(0);\n\n        for (var i = 0; i < lines.length; i++) {\n          context.measureText(lines[i]).width + (lines[i].length - 1) * letterSpacing;\n          // for (\n          //   let i = reverse ? lines[0].length - 1 : 0;\n          //   reverse ? i >= 0 : i < lines[0].length;\n          //   reverse ? i-- : i++\n          // ) {\n          //   graphemeInfo = lineBounds[i];\n          //   if (positionInPath > totalPathLength) {\n          //     positionInPath %= totalPathLength;\n          //   } else if (positionInPath < 0) {\n          //     positionInPath += totalPathLength;\n          //   }\n          //   // it would probably much faster to send all the grapheme position for a line\n          //   // and calculate path position/angle at once.\n          //   this.setGraphemeOnPath(\n          //     positionInPath,\n          //     graphemeInfo,\n          //     startingPoint\n          //   );\n          //   positionInPath += graphemeInfo.kernedWidth;\n          // }\n        }\n      } else {\n        for (var _i = 0; _i < lines.length; _i++) {\n          // char width + letterSpacing\n          var _lineWidth = context.measureText(lines[_i]).width + (lines[_i].length - 1) * letterSpacing;\n          lineWidths[_i] = _lineWidth;\n          maxLineWidth = Math.max(maxLineWidth, _lineWidth);\n        }\n        var _width = maxLineWidth + lineWidth;\n\n        // if (dropShadow) {\n        //   width += dropShadowDistance;\n        // }\n        var lineHeight = strokeHeight || fontProperties.fontSize + lineWidth;\n        var height = Math.max(lineHeight, fontProperties.fontSize + lineWidth) + (lines.length - 1) * (lineHeight + leading);\n        // if (dropShadow) {\n        //   height += dropShadowDistance;\n        // }\n        lineHeight += leading;\n\n        // handle vertical text baseline\n        var offsetY = 0;\n        if (textBaseline === 'middle') {\n          offsetY = -height / 2;\n        } else if (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\n          offsetY = -height;\n        } else if (textBaseline === 'top' || textBaseline === 'hanging') {\n          offsetY = 0;\n        }\n        return {\n          font: font,\n          width: _width,\n          height: height,\n          lines: lines,\n          lineWidths: lineWidths,\n          lineHeight: lineHeight,\n          maxLineWidth: maxLineWidth,\n          fontProperties: fontProperties,\n          lineMetrics: lineWidths.map(function (width, i) {\n            var offsetX = 0;\n            // handle horizontal text align\n            if (textAlign === 'center' || textAlign === 'middle') {\n              offsetX -= width / 2;\n            } else if (textAlign === 'right' || textAlign === 'end') {\n              offsetX -= width;\n            }\n            return new Rectangle(offsetX - lineWidth / 2, offsetY + i * lineHeight, width + lineWidth, lineHeight);\n          })\n        };\n      }\n    }\n  }, {\n    key: \"wordWrap\",\n    value: function wordWrap(text, parsedStyle, offscreenCanvas) {\n      var _this2 = this;\n      var self = this;\n      var _parsedStyle$wordWrap2 = parsedStyle.wordWrapWidth,\n        wordWrapWidth = _parsedStyle$wordWrap2 === void 0 ? 0 : _parsedStyle$wordWrap2,\n        _parsedStyle$letterSp2 = parsedStyle.letterSpacing,\n        letterSpacing = _parsedStyle$letterSp2 === void 0 ? 0 : _parsedStyle$letterSp2,\n        _parsedStyle$maxLines = parsedStyle.maxLines,\n        maxLines = _parsedStyle$maxLines === void 0 ? Infinity : _parsedStyle$maxLines,\n        textOverflow = parsedStyle.textOverflow;\n      var context = this.runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas);\n      var maxWidth = wordWrapWidth + letterSpacing;\n      var ellipsis = '';\n      if (textOverflow === 'ellipsis') {\n        ellipsis = '...';\n      } else if (textOverflow && textOverflow !== 'clip') {\n        ellipsis = textOverflow;\n      }\n      var chars = Array.from(text);\n      var lines = [];\n      var currentLineIndex = 0;\n      var currentLineWidth = 0;\n      var prevLineLastCharIndex = 0;\n      var cache = {};\n      var calcWidth = function calcWidth(txt) {\n        return _this2.getFromCache(txt, letterSpacing, cache, context);\n      };\n      var ellipsisWidth = calcWidth(ellipsis);\n\n      /**\n       * Find text fragments that will take up as much of the given line width as possible when rendered.\n       *\n       * @see https://github.com/antvis/G/issues/1833\n       *\n       * @param lineTxt - Current line of text\n       * @param txtLastCharIndex - The index of the last character of the current line in the entire text\n       * @param txtStartCharIndex - The index of the start character of the current line in the entire text\n       */\n      function findCharIndexClosestWidthThreshold(lineTxt, txtLastCharIndex, txtStartCharIndex, widthThreshold) {\n        while (calcWidth(lineTxt) < widthThreshold && txtLastCharIndex < chars.length - 1) {\n          if (self.isNewline(chars[txtLastCharIndex + 1])) {\n            break;\n          }\n          txtLastCharIndex += 1;\n          lineTxt += chars[txtLastCharIndex];\n        }\n        while (calcWidth(lineTxt) > widthThreshold && txtLastCharIndex > txtStartCharIndex) {\n          txtLastCharIndex -= 1;\n          lineTxt = lineTxt.slice(0, -1);\n        }\n        return {\n          lineTxt: lineTxt,\n          txtLastCharIndex: txtLastCharIndex\n        };\n      }\n      function appendEllipsis(lineIndex, textCharIndex) {\n        // If there is not enough space to display the string itself, it is clipped.\n        // @see https://developer.mozilla.org/en-US/docs/Web/CSS/text-overflow#values\n        if (ellipsisWidth <= 0 || ellipsisWidth > maxWidth) {\n          return;\n        }\n        if (!lines[lineIndex]) {\n          lines[lineIndex] = ellipsis;\n          return;\n        }\n        var result = findCharIndexClosestWidthThreshold(lines[lineIndex], textCharIndex, prevLineLastCharIndex + 1, maxWidth - ellipsisWidth);\n        lines[lineIndex] = result.lineTxt + ellipsis;\n      }\n      for (var i = 0; i < chars.length; i++) {\n        var _char2 = chars[i];\n        var prevChar = chars[i - 1];\n        var nextChar = chars[i + 1];\n        var charWidth = calcWidth(_char2);\n        if (this.isNewline(_char2)) {\n          // exceed maxLines, break immediately\n          if (currentLineIndex + 1 >= maxLines) {\n            parsedStyle.isOverflowing = true;\n            if (i < chars.length - 1) {\n              appendEllipsis(currentLineIndex, i - 1);\n            }\n            break;\n          }\n          prevLineLastCharIndex = i - 1;\n          currentLineIndex += 1;\n          currentLineWidth = 0;\n          lines[currentLineIndex] = '';\n          continue;\n        }\n        if (currentLineWidth > 0 && currentLineWidth + charWidth > maxWidth) {\n          var result = findCharIndexClosestWidthThreshold(lines[currentLineIndex], i - 1, prevLineLastCharIndex + 1, maxWidth);\n          if (result.txtLastCharIndex !== i - 1) {\n            lines[currentLineIndex] = result.lineTxt;\n            if (result.txtLastCharIndex === chars.length - 1) {\n              break;\n            }\n            i = result.txtLastCharIndex + 1;\n            _char2 = chars[i];\n            prevChar = chars[i - 1];\n            nextChar = chars[i + 1];\n            charWidth = calcWidth(_char2);\n          }\n          if (currentLineIndex + 1 >= maxLines) {\n            parsedStyle.isOverflowing = true;\n            appendEllipsis(currentLineIndex, i - 1);\n            break;\n          }\n          prevLineLastCharIndex = i - 1;\n          currentLineIndex += 1;\n          currentLineWidth = 0;\n          lines[currentLineIndex] = '';\n          if (this.isBreakingSpace(_char2)) {\n            continue;\n          }\n          if (!this.canBreakInLastChar(_char2)) {\n            lines = this.trimToBreakable(lines);\n            currentLineWidth = this.sumTextWidthByCache(lines[currentLineIndex] || '', cache);\n          }\n          if (this.shouldBreakByKinsokuShorui(_char2, nextChar)) {\n            lines = this.trimByKinsokuShorui(lines);\n            currentLineWidth += calcWidth(prevChar || '');\n          }\n        }\n        currentLineWidth += charWidth;\n        lines[currentLineIndex] = (lines[currentLineIndex] || '') + _char2;\n      }\n      return lines.join('\\n');\n    }\n  }, {\n    key: \"isBreakingSpace\",\n    value: function isBreakingSpace(_char3) {\n      if (typeof _char3 !== 'string') {\n        return false;\n      }\n      return TEXT_METRICS.BreakingSpaces.indexOf(_char3.charCodeAt(0)) >= 0;\n    }\n  }, {\n    key: \"isNewline\",\n    value: function isNewline(_char4) {\n      if (typeof _char4 !== 'string') {\n        return false;\n      }\n      return TEXT_METRICS.Newlines.indexOf(_char4.charCodeAt(0)) >= 0;\n    }\n  }, {\n    key: \"trimToBreakable\",\n    value: function trimToBreakable(prev) {\n      var next = _toConsumableArray(prev);\n      var prevLine = next[next.length - 2];\n      var index = this.findBreakableIndex(prevLine);\n      if (index === -1 || !prevLine) return next;\n      var trimmedChar = prevLine.slice(index, index + 1);\n      var isTrimmedWithSpace = this.isBreakingSpace(trimmedChar);\n      var trimFrom = index + 1;\n      var trimTo = index + (isTrimmedWithSpace ? 0 : 1);\n      next[next.length - 1] += prevLine.slice(trimFrom, prevLine.length);\n      next[next.length - 2] = prevLine.slice(0, trimTo);\n      return next;\n    }\n  }, {\n    key: \"canBreakInLastChar\",\n    value: function canBreakInLastChar(_char5) {\n      if (_char5 && LATIN_REGEX.test(_char5)) return false;\n      return true;\n    }\n  }, {\n    key: \"sumTextWidthByCache\",\n    value: function sumTextWidthByCache(text, cache) {\n      return text.split('').reduce(function (sum, c) {\n        if (!cache[c]) throw Error('cannot count the word without cache');\n        return sum + cache[c];\n      }, 0);\n    }\n  }, {\n    key: \"findBreakableIndex\",\n    value: function findBreakableIndex(line) {\n      for (var i = line.length - 1; i >= 0; i--) {\n        if (!LATIN_REGEX.test(line[i])) return i;\n      }\n      return -1;\n    }\n  }, {\n    key: \"getFromCache\",\n    value: function getFromCache(key, letterSpacing, cache, context) {\n      var width = cache[key];\n      if (typeof width !== 'number') {\n        var spacing = key.length * letterSpacing;\n        var metrics = context.measureText(key);\n        width = metrics.width + spacing;\n        cache[key] = width;\n      }\n      return width;\n    }\n  }]);\n}();\n\nvar runtime = {};\n/**\n * Replace with IoC container\n */\nvar geometryUpdaterFactory = function (_ref) {\n  var rectUpdater = new RectUpdater();\n  var polylineUpdater = new PolylineUpdater();\n  return _ref = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref, Shape.FRAGMENT, null), Shape.CIRCLE, new CircleUpdater()), Shape.ELLIPSE, new EllipseUpdater()), Shape.RECT, rectUpdater), Shape.IMAGE, rectUpdater), Shape.GROUP, new GroupUpdater()), Shape.LINE, new LineUpdater()), Shape.TEXT, new TextUpdater(runtime)), Shape.POLYLINE, polylineUpdater), Shape.POLYGON, polylineUpdater), _defineProperty(_defineProperty(_defineProperty(_ref, Shape.PATH, new PathUpdater()), Shape.HTML, new HTMLUpdater()), Shape.MESH, null);\n}();\nvar CSSPropertySyntaxFactory = function (_ref2) {\n  var color = new CSSPropertyColor();\n  var length = new CSSPropertyLengthOrPercentage();\n  return _ref2 = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref2, PropertySyntax.PERCENTAGE, null), PropertySyntax.NUMBER, new CSSPropertyNumber()), PropertySyntax.ANGLE, new CSSPropertyAngle()), PropertySyntax.DEFINED_PATH, new CSSPropertyClipPath()), PropertySyntax.PAINT, color), PropertySyntax.COLOR, color), PropertySyntax.FILTER, new CSSPropertyFilter()), PropertySyntax.LENGTH, length), PropertySyntax.LENGTH_PERCENTAGE, length), PropertySyntax.LENGTH_PERCENTAGE_12, new CSSPropertyLengthOrPercentage12()), _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref2, PropertySyntax.LENGTH_PERCENTAGE_14, new CSSPropertyLengthOrPercentage14()), PropertySyntax.COORDINATE, new CSSPropertyLengthOrPercentage()), PropertySyntax.OFFSET_DISTANCE, new CSSPropertyOffsetDistance()), PropertySyntax.OPACITY_VALUE, new CSSPropertyOpacity()), PropertySyntax.PATH, new CSSPropertyPath()), PropertySyntax.LIST_OF_POINTS, new CSSPropertyPoints()), PropertySyntax.SHADOW_BLUR, new CSSPropertyShadowBlur()), PropertySyntax.TEXT, new CSSPropertyText()), PropertySyntax.TEXT_TRANSFORM, new CSSPropertyTextTransform()), PropertySyntax.TRANSFORM, new CSSPropertyTransform()), _defineProperty(_defineProperty(_defineProperty(_ref2, PropertySyntax.TRANSFORM_ORIGIN, new CSSPropertyTransformOrigin()), PropertySyntax.Z_INDEX, new CSSPropertyZIndex()), PropertySyntax.MARKER, new CSSPropertyMarker());\n}();\nvar getGlobalThis = function getGlobalThis() {\n  if (typeof globalThis !== 'undefined') return globalThis;\n  if (typeof self !== 'undefined') return self;\n  if (typeof window !== 'undefined') return window;\n  // @ts-ignore\n  if (typeof global !== 'undefined') return global;\n  return {};\n  // [!] Error: The 'this' keyword is equivalent to 'undefined' at the top level of an ES module, and has been rewritten\n  // @see https://rollupjs.org/troubleshooting/#error-this-is-undefined\n  // if (typeof this !== 'undefined') return this;\n};\n\n/**\n * Camera\n * `g-camera-api` will provide an advanced implementation\n */\nruntime.CameraContribution = Camera;\n\n/**\n * `g-web-animations-api` will provide an AnimationTimeline\n */\nruntime.AnimationTimeline = null;\nruntime.EasingFunction = null;\nruntime.offscreenCanvasCreator = new OffscreenCanvasCreator();\nruntime.sceneGraphSelector = new DefaultSceneGraphSelector();\nruntime.sceneGraphService = new DefaultSceneGraphService(runtime);\nruntime.textService = new TextService(runtime);\nruntime.geometryUpdaterFactory = geometryUpdaterFactory;\nruntime.CSSPropertySyntaxFactory = CSSPropertySyntaxFactory;\nruntime.styleValueRegistry = new DefaultStyleValueRegistry(runtime);\nruntime.layoutRegistry = null;\nruntime.globalThis = getGlobalThis();\nruntime.enableStyleSyntax = true;\nruntime.enableSizeAttenuation = false;\n\nvar entityCounter = 0;\nfunction resetEntityCounter() {\n  entityCounter = 0;\n}\nvar insertedEvent = new MutationEvent(ElementEvent.INSERTED, null, '', '', '', 0, '', '');\nvar removedEvent = new MutationEvent(ElementEvent.REMOVED, null, '', '', '', 0, '', '');\nvar destroyEvent = new CustomEvent(ElementEvent.DESTROY);\n\n/**\n * Has following capabilities:\n * * Node insert/remove, eg. appendChild, removeChild, remove...\n * * Query eg. querySelector getElementById...\n * * Animation\n */\nvar Element = /*#__PURE__*/function (_Node) {\n  function Element() {\n    var _this;\n    _classCallCheck(this, Element);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Element, [].concat(args));\n    /**\n     * Unique id.\n     */\n    _this.entity = entityCounter++;\n    _this.renderable = {\n      bounds: undefined,\n      boundsDirty: true,\n      renderBounds: undefined,\n      renderBoundsDirty: true,\n      dirtyRenderBounds: undefined,\n      dirty: false\n    };\n    _this.cullable = {\n      strategy: Strategy.Standard,\n      visibilityPlaneMask: -1,\n      visible: true,\n      enable: true\n    };\n    _this.transformable = {\n      dirtyFlag: false,\n      localDirtyFlag: false,\n      frozen: false,\n      localPosition: [0, 0, 0],\n      localRotation: [0, 0, 0, 1],\n      localScale: [1, 1, 1],\n      localTransform: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\n      localSkew: [0, 0],\n      position: [0, 0, 0],\n      rotation: [0, 0, 0, 1],\n      scaling: [1, 1, 1],\n      worldTransform: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\n      origin: [0, 0, 0]\n    };\n    _this.sortable = {\n      dirty: false,\n      sorted: undefined,\n      renderOrder: 0,\n      dirtyChildren: [],\n      dirtyReason: undefined\n    };\n    _this.geometry = {\n      contentBounds: undefined,\n      renderBounds: undefined,\n      dirty: true\n    };\n    _this.rBushNode = {\n      aabb: undefined\n    };\n    /**\n     * https://developer.mozilla.org/zh-CN/docs/Web/API/Element/namespaceURI\n     */\n    _this.namespaceURI = 'g';\n    _this.scrollLeft = 0;\n    _this.scrollTop = 0;\n    /**\n     * We don't support border now\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/clientTop\n     */\n    _this.clientTop = 0;\n    _this.clientLeft = 0;\n    /**\n     * is destroyed or not\n     */\n    _this.destroyed = false;\n    /**\n     * compatible with `style`\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style\n     */\n    _this.style = {};\n    _this.computedStyle = {};\n    /**\n     * Renderers will use these used values.\n     */\n    _this.parsedStyle = {\n      // opacity: '',\n      // fillOpacity: '',\n      // strokeOpacity: '',\n      // transformOrigin: '',\n      // visibility: '',\n      // pointerEvents: '',\n      // lineWidth: '',\n      // lineCap: '',\n      // lineJoin: '',\n      // increasedLineWidthForHitTesting: '',\n      // fontSize: '',\n      // fontFamily: '',\n      // fontStyle: '',\n      // fontWeight: '',\n      // fontVariant: '',\n      // textAlign: '',\n      // textBaseline: '',\n      // textTransform: '',\n    };\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/attributes\n     */\n    _this.attributes = {};\n    return _this;\n  }\n  _inherits(Element, _Node);\n  return _createClass(Element, [{\n    key: \"className\",\n    get:\n    /**\n     * used with `getElementById()`\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/id\n     */\n\n    /**\n     * used in `getElementsByClassName`\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n     */\n    function get() {\n      // @ts-ignore\n      return this.getAttribute('class') || '';\n    },\n    set: function set(className) {\n      this.setAttribute('class', className);\n    }\n\n    /**\n     * used in `getElementsByName`\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByName\n     */\n  }, {\n    key: \"classList\",\n    get:\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/classList\n     */\n    function get() {\n      return this.className.split(' ').filter(function (c) {\n        return c !== '';\n      });\n    }\n  }, {\n    key: \"tagName\",\n    get: function get() {\n      return this.nodeName;\n    }\n  }, {\n    key: \"children\",\n    get: function get() {\n      return this.childNodes;\n    }\n  }, {\n    key: \"childElementCount\",\n    get: function get() {\n      return this.childNodes.length;\n    }\n  }, {\n    key: \"firstElementChild\",\n    get: function get() {\n      return this.firstChild;\n    }\n  }, {\n    key: \"lastElementChild\",\n    get: function get() {\n      return this.lastChild;\n    }\n  }, {\n    key: \"parentElement\",\n    get: function get() {\n      return this.parentNode;\n    }\n  }, {\n    key: \"nextSibling\",\n    get: function get() {\n      if (this.parentNode) {\n        var index = this.parentNode.childNodes.indexOf(this);\n        return this.parentNode.childNodes[index + 1] || null;\n      }\n      return null;\n    }\n  }, {\n    key: \"previousSibling\",\n    get: function get() {\n      if (this.parentNode) {\n        var index = this.parentNode.childNodes.indexOf(this);\n        return this.parentNode.childNodes[index - 1] || null;\n      }\n      return null;\n    }\n  }, {\n    key: \"cloneNode\",\n    value: function cloneNode(deep) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"appendChild\",\n    value: function appendChild(child, index) {\n      var _this$ownerDocument;\n      if (child.destroyed) {\n        throw new Error(ERROR_MSG_APPEND_DESTROYED_ELEMENT);\n      }\n      runtime.sceneGraphService.attach(child, this, index);\n      if ((_this$ownerDocument = this.ownerDocument) !== null && _this$ownerDocument !== void 0 && _this$ownerDocument.defaultView) {\n        if (!isInFragment(this) && child.nodeName === Shape.FRAGMENT) {\n          this.ownerDocument.defaultView.mountFragment(child);\n        } else {\n          this.ownerDocument.defaultView.mountChildren(child);\n        }\n      }\n\n      // @ts-ignore\n      if (this.isMutationObserved) {\n        insertedEvent.relatedNode = this;\n        child.dispatchEvent(insertedEvent);\n      }\n      return child;\n    }\n  }, {\n    key: \"insertBefore\",\n    value: function insertBefore(newChild, refChild) {\n      if (!refChild) {\n        this.appendChild(newChild);\n      } else {\n        if (newChild.parentElement) {\n          newChild.parentElement.removeChild(newChild);\n        }\n        var index = this.childNodes.indexOf(refChild);\n        if (index === -1) {\n          this.appendChild(newChild);\n        } else {\n          this.appendChild(newChild, index);\n        }\n      }\n      return newChild;\n    }\n  }, {\n    key: \"replaceChild\",\n    value: function replaceChild(newChild, oldChild) {\n      var index = this.childNodes.indexOf(oldChild);\n      this.removeChild(oldChild);\n      this.appendChild(newChild, index);\n      return oldChild;\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(child) {\n      var _child$ownerDocument;\n      // should emit on itself before detach\n      removedEvent.relatedNode = this;\n      child.dispatchEvent(removedEvent);\n      if ((_child$ownerDocument = child.ownerDocument) !== null && _child$ownerDocument !== void 0 && _child$ownerDocument.defaultView) {\n        child.ownerDocument.defaultView.unmountChildren(child);\n      }\n\n      // remove from scene graph\n      runtime.sceneGraphService.detach(child);\n      return child;\n    }\n\n    /**\n     * Remove all children which can be appended to its original parent later again.\n     */\n  }, {\n    key: \"removeChildren\",\n    value: function removeChildren() {\n      for (var i = this.childNodes.length - 1; i >= 0; i--) {\n        var child = this.childNodes[i];\n        this.removeChild(child);\n      }\n    }\n\n    /**\n     * Recursively destroy all children which can not be appended to its original parent later again.\n     */\n  }, {\n    key: \"destroyChildren\",\n    value: function destroyChildren() {\n      for (var i = this.childNodes.length - 1; i >= 0; i--) {\n        var child = this.childNodes[i];\n        if (child.childNodes.length > 0) {\n          child.destroyChildren();\n        }\n        child.destroy();\n      }\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/matches\n     */\n  }, {\n    key: \"matches\",\n    value: function matches(selector) {\n      return runtime.sceneGraphService.matches(selector, this);\n    }\n  }, {\n    key: \"getElementById\",\n    value: function getElementById(id) {\n      return runtime.sceneGraphService.querySelector(\"#\".concat(id), this);\n    }\n  }, {\n    key: \"getElementsByName\",\n    value: function getElementsByName(name) {\n      return runtime.sceneGraphService.querySelectorAll(\"[name=\\\"\".concat(name, \"\\\"]\"), this);\n    }\n  }, {\n    key: \"getElementsByClassName\",\n    value: function getElementsByClassName(className) {\n      return runtime.sceneGraphService.querySelectorAll(\".\".concat(className), this);\n    }\n  }, {\n    key: \"getElementsByTagName\",\n    value: function getElementsByTagName(tagName) {\n      return runtime.sceneGraphService.querySelectorAll(tagName, this);\n    }\n  }, {\n    key: \"querySelector\",\n    value: function querySelector(selectors) {\n      return runtime.sceneGraphService.querySelector(selectors, this);\n    }\n  }, {\n    key: \"querySelectorAll\",\n    value: function querySelectorAll(selectors) {\n      return runtime.sceneGraphService.querySelectorAll(selectors, this);\n    }\n\n    /**\n     * should traverses the element and its parents (heading toward the document root)\n     * until it finds a node that matches the specified CSS selector.\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/closest\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/closest#polyfill\n     */\n  }, {\n    key: \"closest\",\n    value: function closest(selectors) {\n      var el = this;\n      do {\n        if (runtime.sceneGraphService.matches(selectors, el)) return el;\n        el = el.parentElement;\n      } while (el !== null);\n      return null;\n    }\n\n    /**\n     * search in scene group, but should not include itself\n     */\n  }, {\n    key: \"find\",\n    value: function find(filter) {\n      var _this2 = this;\n      var target = null;\n      this.forEach(function (object) {\n        if (object !== _this2 && filter(object)) {\n          target = object;\n          return false;\n        }\n        return true;\n      });\n      return target;\n    }\n  }, {\n    key: \"findAll\",\n    value: function findAll(filter) {\n      var _this3 = this;\n      var objects = [];\n      this.forEach(function (object) {\n        if (object !== _this3 && filter(object)) {\n          objects.push(object);\n        }\n      });\n      return objects;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/after\n     */\n  }, {\n    key: \"after\",\n    value: function after() {\n      var _this4 = this;\n      if (this.parentNode) {\n        var index = this.parentNode.childNodes.indexOf(this);\n        for (var _len2 = arguments.length, nodes = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          nodes[_key2] = arguments[_key2];\n        }\n        nodes.forEach(function (node, i) {\n          var _this4$parentNode;\n          return (_this4$parentNode = _this4.parentNode) === null || _this4$parentNode === void 0 ? void 0 : _this4$parentNode.appendChild(node, index + i + 1);\n        });\n      }\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/before\n     */\n  }, {\n    key: \"before\",\n    value: function before() {\n      if (this.parentNode) {\n        var _ref;\n        var index = this.parentNode.childNodes.indexOf(this);\n        for (var _len3 = arguments.length, nodes = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          nodes[_key3] = arguments[_key3];\n        }\n        var first = nodes[0],\n          rest = nodes.slice(1);\n        this.parentNode.appendChild(first, index);\n        (_ref = first).after.apply(_ref, _toConsumableArray(rest));\n      }\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/replaceWith\n     */\n  }, {\n    key: \"replaceWith\",\n    value: function replaceWith() {\n      this.after.apply(this, arguments);\n      this.remove();\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/append\n     */\n  }, {\n    key: \"append\",\n    value: function append() {\n      var _this5 = this;\n      for (var _len4 = arguments.length, nodes = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        nodes[_key4] = arguments[_key4];\n      }\n      nodes.forEach(function (node) {\n        return _this5.appendChild(node);\n      });\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/prepend\n     */\n  }, {\n    key: \"prepend\",\n    value: function prepend() {\n      var _this6 = this;\n      for (var _len5 = arguments.length, nodes = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        nodes[_key5] = arguments[_key5];\n      }\n      nodes.forEach(function (node, i) {\n        return _this6.appendChild(node, i);\n      });\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/replaceChildren\n     */\n  }, {\n    key: \"replaceChildren\",\n    value: function replaceChildren() {\n      while (this.childNodes.length && this.firstChild) {\n        this.removeChild(this.firstChild);\n      }\n      this.append.apply(this, arguments);\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/remove\n     */\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      if (this.parentNode) {\n        return this.parentNode.removeChild(this);\n      }\n      return this;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      // fix https://github.com/antvis/G/issues/1813\n      this.destroyChildren();\n\n      // destroy itself before remove\n      this.dispatchEvent(destroyEvent);\n\n      // remove from scenegraph first\n      this.remove();\n\n      // remove event listeners\n      this.emitter.removeAllListeners();\n      this.destroyed = true;\n    }\n  }, {\n    key: \"getGeometryBounds\",\n    value: function getGeometryBounds() {\n      return runtime.sceneGraphService.getGeometryBounds(this);\n    }\n  }, {\n    key: \"getRenderBounds\",\n    value: function getRenderBounds() {\n      return runtime.sceneGraphService.getBounds(this, true);\n    }\n\n    /**\n     * get bounds in world space, account for children\n     */\n  }, {\n    key: \"getBounds\",\n    value: function getBounds() {\n      return runtime.sceneGraphService.getBounds(this);\n    }\n\n    /**\n     * get bounds in local space, account for children\n     */\n  }, {\n    key: \"getLocalBounds\",\n    value: function getLocalBounds() {\n      return runtime.sceneGraphService.getLocalBounds(this);\n    }\n\n    /**\n     * account for context's bounds in client space,\n     * but not accounting for children\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n     */\n  }, {\n    key: \"getBoundingClientRect\",\n    value: function getBoundingClientRect() {\n      return runtime.sceneGraphService.getBoundingClientRect(this);\n    }\n\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getClientRects\n     */\n  }, {\n    key: \"getClientRects\",\n    value: function getClientRects() {\n      return [this.getBoundingClientRect()];\n    }\n  }, {\n    key: \"computedStyleMap\",\n    value:\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/computedStyleMap\n     * eg. circle.computedStyleMap().get('fill');\n     */\n    function computedStyleMap() {\n      return new Map(Object.entries(this.computedStyle));\n    }\n  }, {\n    key: \"getAttributeNames\",\n    value:\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNames\n     */\n    function getAttributeNames() {\n      return Object.keys(this.attributes);\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute\n     */\n  }, {\n    key: \"getAttribute\",\n    value: function getAttribute(name) {\n      // @see https://github.com/antvis/G/issues/1267\n      if (typeof name === 'symbol') {\n        return undefined;\n      }\n      var value = this.attributes[name];\n      if (value === undefined) {\n        // if the given attribute does not exist, the value returned will either be null or \"\"\n        return value;\n      }\n      return value;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttribute\n     */\n  }, {\n    key: \"hasAttribute\",\n    value: function hasAttribute(qualifiedName) {\n      return this.getAttributeNames().includes(qualifiedName);\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttributes\n     */\n  }, {\n    key: \"hasAttributes\",\n    value: function hasAttributes() {\n      return !!this.getAttributeNames().length;\n    }\n\n    /**\n     * should use removeAttribute() instead of setting the attribute value to null either directly or using setAttribute(). Many attributes will not behave as expected if you set them to null.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute\n     */\n  }, {\n    key: \"removeAttribute\",\n    value: function removeAttribute(attributeName) {\n      this.setAttribute(attributeName, null);\n      delete this.attributes[attributeName];\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute\n     */\n  }, {\n    key: \"setAttribute\",\n    value: function setAttribute(attributeName, value, force, memoize) {\n      this.attributes[attributeName] = value;\n    }\n  }, {\n    key: \"getAttributeNS\",\n    value: function getAttributeNS(namespace, localName) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"getAttributeNode\",\n    value: function getAttributeNode(qualifiedName) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"getAttributeNodeNS\",\n    value: function getAttributeNodeNS(namespace, localName) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"hasAttributeNS\",\n    value: function hasAttributeNS(namespace, localName) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"removeAttributeNS\",\n    value: function removeAttributeNS(namespace, localName) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"removeAttributeNode\",\n    value: function removeAttributeNode(attr) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"setAttributeNS\",\n    value: function setAttributeNS(namespace, qualifiedName, value) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"setAttributeNode\",\n    value: function setAttributeNode(attr) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"setAttributeNodeNS\",\n    value: function setAttributeNodeNS(attr) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"toggleAttribute\",\n    value: function toggleAttribute(qualifiedName, force) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }]);\n}(Node);\n\nfunction isDisplayObject(value) {\n  return !!(value !== null && value !== void 0 && value.nodeName);\n}\nvar Proxy = runtime.globalThis.Proxy ? runtime.globalThis.Proxy : function () {};\nvar attrModifiedEvent = new MutationEvent(ElementEvent.ATTR_MODIFIED, null, null, null, null, MutationEvent.MODIFICATION, null, null);\nvar $vec3 = vec3.create();\nvar $quat = quat$1.create();\n\n/**\n * prototype chains: DisplayObject -> Element -> Node -> EventTarget\n *\n * mixins: Animatable, Transformable, Visible\n * @see https://github.com/tannerntannern/ts-mixer/blob/master/README.md#mixing-generic-classes\n *\n * Provide abilities in scene graph, such as:\n * * transform `translate/rotate/scale`\n * * add/remove child\n * * visibility and z-index\n *\n * Those abilities are implemented with those components: `Transform/Sortable/Visible`.\n *\n * Emit following events:\n * * init\n * * destroy\n * * attributeChanged\n */\nvar DisplayObject = /*#__PURE__*/function (_Element) {\n  function DisplayObject(config) {\n    var _this;\n    _classCallCheck(this, DisplayObject);\n    _this = _callSuper(this, DisplayObject);\n\n    // assign name, id to config\n    // eg. group.get('name')\n    _this.isCustomElement = false;\n    _this.isMutationObserved = false;\n    /**\n     * push to active animations after calling `animate()`\n     */\n    _this.activeAnimations = [];\n    _this.config = config;\n\n    // init scene graph node\n    _this.id = config.id || '';\n    _this.name = config.name || '';\n    if (config.className || config[\"class\"]) {\n      _this.className = config.className || config[\"class\"];\n    }\n    _this.nodeName = config.type || Shape.GROUP;\n    if (config.initialParsedStyle) {\n      Object.assign(_this.parsedStyle, config.initialParsedStyle);\n    }\n\n    // start to process attributes\n    _this.initAttributes(config.style);\n    if (runtime.enableStyleSyntax) {\n      _this.style = new Proxy(\n      // @ts-ignore\n      {\n        // ...this.attributes,\n        setProperty: function setProperty(propertyName, value\n        // priority?: string,\n        ) {\n          _this.setAttribute(propertyName, value);\n        },\n        getPropertyValue: function getPropertyValue(propertyName) {\n          return _this.getAttribute(propertyName);\n        },\n        removeProperty: function removeProperty(propertyName) {\n          _this.removeAttribute(propertyName);\n        },\n        item: function item() {\n          return '';\n        }\n      }, {\n        get: function get(target, name) {\n          if (target[name] !== undefined) {\n            // if (name in target) {\n            return target[name];\n          }\n          return _this.getAttribute(name);\n        },\n        set: function set(_, prop, value) {\n          _this.setAttribute(prop, value);\n          return true;\n        }\n      });\n    }\n    return _this;\n  }\n  _inherits(DisplayObject, _Element);\n  return _createClass(DisplayObject, [{\n    key: \"destroy\",\n    value: function destroy() {\n      _superPropGet(DisplayObject, \"destroy\", this, 3)([]);\n\n      // stop all active animations\n      this.getAnimations().forEach(function (animation) {\n        animation.cancel();\n      });\n    }\n  }, {\n    key: \"cloneNode\",\n    value: function cloneNode(deep, customCloneFunc) {\n      var clonedStyle = _objectSpread({}, this.attributes);\n      for (var attributeName in clonedStyle) {\n        var attribute = clonedStyle[attributeName];\n\n        // @see https://github.com/antvis/G/issues/1095\n        if (isDisplayObject(attribute) &&\n        // share the same clipPath if possible\n        attributeName !== 'clipPath' && attributeName !== 'offsetPath' && attributeName !== 'textPath') {\n          clonedStyle[attributeName] = attribute.cloneNode(deep);\n        }\n        // TODO: clone other type\n        if (customCloneFunc) {\n          clonedStyle[attributeName] = customCloneFunc(attributeName, attribute);\n        }\n      }\n      var cloned = new this.constructor(_objectSpread(_objectSpread({}, this.config), {}, {\n        style: clonedStyle\n      }));\n\n      // apply transform\n      cloned.setLocalTransform(this.getLocalTransform());\n      if (deep) {\n        this.children.forEach(function (child) {\n          // skip marker\n          if (!child.style.isMarker) {\n            var clonedChild = child.cloneNode(deep);\n            cloned.appendChild(clonedChild);\n          }\n        });\n      }\n      return cloned;\n    }\n  }, {\n    key: \"initAttributes\",\n    value: function initAttributes() {\n      var attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var options = {\n        forceUpdateGeometry: true\n      };\n      runtime.styleValueRegistry.processProperties(this, attributes, options);\n\n      // redraw at next frame\n      this.renderable.dirty = true;\n    }\n  }, {\n    key: \"setAttribute\",\n    value: function setAttribute(name, value) {\n      var force = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var memoize = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n      // ignore undefined value\n      if (isUndefined(value)) {\n        return;\n      }\n      if (force || value !== this.attributes[name]) {\n        this.internalSetAttribute(name, value, {\n          memoize: memoize\n        });\n        _superPropGet(DisplayObject, \"setAttribute\", this, 3)([name, value]);\n      }\n    }\n\n    /**\n     * called when attributes get changed or initialized\n     */\n  }, {\n    key: \"internalSetAttribute\",\n    value: function internalSetAttribute(name, value) {\n      var parseOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var renderable = this.renderable;\n      var oldValue = this.attributes[name];\n      var oldParsedValue = this.parsedStyle[name];\n      runtime.styleValueRegistry.processProperties(this, _defineProperty({}, name, value), parseOptions);\n\n      // redraw at next frame\n      renderable.dirty = true;\n      var newParsedValue = this.parsedStyle[name];\n      if (this.isConnected) {\n        attrModifiedEvent.relatedNode = this;\n        attrModifiedEvent.prevValue = oldValue;\n        attrModifiedEvent.newValue = value;\n        attrModifiedEvent.attrName = name;\n        attrModifiedEvent.prevParsedValue = oldParsedValue;\n        attrModifiedEvent.newParsedValue = newParsedValue;\n        if (this.isMutationObserved) {\n          this.dispatchEvent(attrModifiedEvent);\n        } else {\n          attrModifiedEvent.target = this;\n          this.ownerDocument.defaultView.dispatchEvent(attrModifiedEvent, true);\n        }\n      }\n      if (this.isCustomElement && this.isConnected || !this.isCustomElement) {\n        var _attributeChangedCall, _ref;\n        (_attributeChangedCall = (_ref = this).attributeChangedCallback) === null || _attributeChangedCall === void 0 || _attributeChangedCall.call(_ref, name, oldValue, value, oldParsedValue, newParsedValue);\n      }\n    }\n\n    // #region transformable\n    /**\n     * returns different values than getBoundingClientRect(), as the latter returns value relative to the viewport\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGraphicsElement/getBBox\n     *\n     * FIXME: It is worth noting that getBBox responds to original untransformed values of a drawn object.\n     * @see https://www.w3.org/Graphics/SVG/IG/resources/svgprimer.html#getBBox\n     */\n  }, {\n    key: \"getBBox\",\n    value: function getBBox() {\n      var aabb = this.getBounds();\n      var _aabb$getMin = aabb.getMin(),\n        _aabb$getMin2 = _slicedToArray(_aabb$getMin, 2),\n        left = _aabb$getMin2[0],\n        top = _aabb$getMin2[1];\n      var _aabb$getMax = aabb.getMax(),\n        _aabb$getMax2 = _slicedToArray(_aabb$getMax, 2),\n        right = _aabb$getMax2[0],\n        bottom = _aabb$getMax2[1];\n      return new Rectangle(left, top, right - left, bottom - top);\n    }\n  }, {\n    key: \"setOrigin\",\n    value: function setOrigin(position) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      runtime.sceneGraphService.setOrigin(this, createVec3(position, y, z, false));\n      return this;\n    }\n  }, {\n    key: \"getOrigin\",\n    value: function getOrigin() {\n      return runtime.sceneGraphService.getOrigin(this);\n    }\n\n    /**\n     * set position in world space\n     */\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(position) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      runtime.sceneGraphService.setPosition(this, createVec3(position, y, z, false));\n      return this;\n    }\n\n    /**\n     * set position in local space\n     */\n  }, {\n    key: \"setLocalPosition\",\n    value: function setLocalPosition(position) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      runtime.sceneGraphService.setLocalPosition(this, createVec3(position, y, z, false));\n      return this;\n    }\n\n    /**\n     * translate in world space\n     */\n  }, {\n    key: \"translate\",\n    value: function translate(position) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      runtime.sceneGraphService.translate(this, createVec3(position, y, z, false));\n      return this;\n    }\n\n    /**\n     * translate in local space\n     */\n  }, {\n    key: \"translateLocal\",\n    value: function translateLocal(position) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      runtime.sceneGraphService.translateLocal(this, createVec3(position, y, z, false));\n      return this;\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition() {\n      return runtime.sceneGraphService.getPosition(this);\n    }\n  }, {\n    key: \"getLocalPosition\",\n    value: function getLocalPosition() {\n      return runtime.sceneGraphService.getLocalPosition(this);\n    }\n\n    /**\n     * compatible with G 3.0\n     *\n     * scaling in local space\n     * scale(10) = scale(10, 10, 10)\n     *\n     * we can't set scale in world space\n     */\n  }, {\n    key: \"scale\",\n    value: function scale(scaling, y, z) {\n      return this.scaleLocal(scaling, y, z);\n    }\n  }, {\n    key: \"scaleLocal\",\n    value: function scaleLocal(scaling, y, z) {\n      if (typeof scaling === 'number') {\n        y = y || scaling;\n        z = z || scaling;\n        scaling = createVec3(scaling, y, z, false);\n      }\n      runtime.sceneGraphService.scaleLocal(this, scaling);\n      return this;\n    }\n\n    /**\n     * set scaling in local space\n     */\n  }, {\n    key: \"setLocalScale\",\n    value: function setLocalScale(scaling, y, z) {\n      if (typeof scaling === 'number') {\n        y = y || scaling;\n        z = z || scaling;\n        scaling = createVec3(scaling, y, z, false);\n      }\n      runtime.sceneGraphService.setLocalScale(this, scaling);\n      return this;\n    }\n\n    /**\n     * get scaling in local space\n     */\n  }, {\n    key: \"getLocalScale\",\n    value: function getLocalScale() {\n      return runtime.sceneGraphService.getLocalScale(this);\n    }\n\n    /**\n     * get scaling in world space\n     */\n  }, {\n    key: \"getScale\",\n    value: function getScale() {\n      return runtime.sceneGraphService.getScale(this);\n    }\n\n    /**\n     * only return degrees of Z axis in world space\n     */\n  }, {\n    key: \"getEulerAngles\",\n    value: function getEulerAngles() {\n      var _getEuler = getEuler($vec3, runtime.sceneGraphService.getWorldTransform(this)),\n        _getEuler2 = _slicedToArray(_getEuler, 3),\n        ez = _getEuler2[2];\n      return rad2deg(ez);\n    }\n\n    /**\n     * only return degrees of Z axis in local space\n     */\n  }, {\n    key: \"getLocalEulerAngles\",\n    value: function getLocalEulerAngles() {\n      var _getEuler3 = getEuler($vec3, runtime.sceneGraphService.getLocalRotation(this)),\n        _getEuler4 = _slicedToArray(_getEuler3, 3),\n        ez = _getEuler4[2];\n      return rad2deg(ez);\n    }\n\n    /**\n     * set euler angles(degrees) in world space\n     */\n  }, {\n    key: \"setEulerAngles\",\n    value: function setEulerAngles(z) {\n      runtime.sceneGraphService.setEulerAngles(this, 0, 0, z);\n      return this;\n    }\n\n    /**\n     * set euler angles(degrees) in local space\n     */\n  }, {\n    key: \"setLocalEulerAngles\",\n    value: function setLocalEulerAngles(z) {\n      runtime.sceneGraphService.setLocalEulerAngles(this, 0, 0, z);\n      return this;\n    }\n  }, {\n    key: \"rotateLocal\",\n    value: function rotateLocal(x, y, z) {\n      if (isNil(y) && isNil(z)) {\n        runtime.sceneGraphService.rotateLocal(this, 0, 0, x);\n      } else {\n        runtime.sceneGraphService.rotateLocal(this, x, y, z);\n      }\n      return this;\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(x, y, z) {\n      if (isNil(y) && isNil(z)) {\n        runtime.sceneGraphService.rotate(this, 0, 0, x);\n      } else {\n        runtime.sceneGraphService.rotate(this, x, y, z);\n      }\n      return this;\n    }\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(rotation, y, z, w) {\n      runtime.sceneGraphService.setRotation(this, rotation, y, z, w);\n      return this;\n    }\n  }, {\n    key: \"setLocalRotation\",\n    value: function setLocalRotation(rotation, y, z, w) {\n      runtime.sceneGraphService.setLocalRotation(this, rotation, y, z, w);\n      return this;\n    }\n  }, {\n    key: \"setLocalSkew\",\n    value: function setLocalSkew(skew, y) {\n      runtime.sceneGraphService.setLocalSkew(this, skew, y);\n      return this;\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      return runtime.sceneGraphService.getRotation(this);\n    }\n  }, {\n    key: \"getLocalRotation\",\n    value: function getLocalRotation() {\n      return runtime.sceneGraphService.getLocalRotation(this);\n    }\n  }, {\n    key: \"getLocalSkew\",\n    value: function getLocalSkew() {\n      return runtime.sceneGraphService.getLocalSkew(this);\n    }\n  }, {\n    key: \"getLocalTransform\",\n    value: function getLocalTransform() {\n      return runtime.sceneGraphService.getLocalTransform(this);\n    }\n  }, {\n    key: \"getWorldTransform\",\n    value: function getWorldTransform() {\n      return runtime.sceneGraphService.getWorldTransform(this);\n    }\n  }, {\n    key: \"setLocalTransform\",\n    value: function setLocalTransform(transform) {\n      runtime.sceneGraphService.setLocalTransform(this, transform);\n      return this;\n    }\n  }, {\n    key: \"resetLocalTransform\",\n    value: function resetLocalTransform() {\n      runtime.sceneGraphService.resetLocalTransform(this);\n    }\n    // #endregion transformable\n\n    // #region animatable\n    /**\n     * returns an array of all Animation objects affecting this element\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAnimations\n     */\n  }, {\n    key: \"getAnimations\",\n    value: function getAnimations() {\n      return this.activeAnimations;\n    }\n    /**\n     * create an animation with WAAPI\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/animate\n     */\n  }, {\n    key: \"animate\",\n    value: function animate(keyframes, options) {\n      var _this$ownerDocument;\n      var timeline = (_this$ownerDocument = this.ownerDocument) === null || _this$ownerDocument === void 0 ? void 0 : _this$ownerDocument.timeline;\n      if (timeline) {\n        return timeline.play(this, keyframes, options);\n      }\n      return null;\n    }\n    // #endregion animatable\n\n    // #region visible\n    /**\n     * shortcut for Used value of `visibility`\n     */\n  }, {\n    key: \"isVisible\",\n    value: function isVisible() {\n      var _this$parsedStyle;\n      return ((_this$parsedStyle = this.parsedStyle) === null || _this$parsedStyle === void 0 ? void 0 : _this$parsedStyle.visibility) !== 'hidden';\n    }\n  }, {\n    key: \"interactive\",\n    get: function get() {\n      return this.isInteractive();\n    },\n    set: function set(b) {\n      this.style.pointerEvents = b ? 'auto' : 'none';\n    }\n  }, {\n    key: \"isInteractive\",\n    value: function isInteractive() {\n      var _this$parsedStyle2;\n      return ((_this$parsedStyle2 = this.parsedStyle) === null || _this$parsedStyle2 === void 0 ? void 0 : _this$parsedStyle2.pointerEvents) !== 'none';\n    }\n  }, {\n    key: \"isCulled\",\n    value: function isCulled() {\n      return !!(this.cullable && this.cullable.enable && !this.cullable.visible);\n    }\n\n    /**\n     * bring to front in current group\n     */\n  }, {\n    key: \"toFront\",\n    value: function toFront() {\n      if (this.parentNode) {\n        this.style.zIndex = Math.max.apply(Math, _toConsumableArray(this.parentNode.children.map(function (child) {\n          return Number(child.style.zIndex);\n        }))) + 1;\n      }\n      return this;\n    }\n\n    /**\n     * send to back in current group\n     */\n  }, {\n    key: \"toBack\",\n    value: function toBack() {\n      if (this.parentNode) {\n        this.style.zIndex = Math.min.apply(Math, _toConsumableArray(this.parentNode.children.map(function (child) {\n          return Number(child.style.zIndex);\n        }))) - 1;\n      }\n      return this;\n    }\n    // #endregion visible\n\n    // #region deprecated\n\n    /**\n     * compatible with G 3.0\n     * @alias object.config\n     * @deprecated\n     */\n  }, {\n    key: \"getConfig\",\n    value: function getConfig() {\n      return this.config;\n    }\n\n    /**\n     * @alias style\n     * @example\n     * circle.style.r = 10;\n     * const r = circle.style;\n     * @deprecated\n     */\n  }, {\n    key: \"attr\",\n    value: function attr() {\n      var _this2 = this;\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      var name = args[0],\n        value = args[1];\n      if (!name) {\n        return this.attributes;\n      }\n      if (isObject(name)) {\n        Object.keys(name).forEach(function (key) {\n          _this2.setAttribute(key, name[key]);\n        });\n        return this;\n      }\n      if (args.length === 2) {\n        this.setAttribute(name, value);\n        return this;\n      }\n      return this.attributes[name];\n    }\n\n    /**\n     * return 3x3 matrix in world space\n     * @deprecated\n     */\n  }, {\n    key: \"getMatrix\",\n    value: function getMatrix(transformMat4) {\n      var transform = transformMat4 || this.getWorldTransform();\n      var _mat4$getTranslation = mat4.getTranslation($vec3, transform),\n        _mat4$getTranslation2 = _slicedToArray(_mat4$getTranslation, 2),\n        tx = _mat4$getTranslation2[0],\n        ty = _mat4$getTranslation2[1];\n      var _mat4$getScaling = mat4.getScaling($vec3, transform),\n        _mat4$getScaling2 = _slicedToArray(_mat4$getScaling, 2),\n        sx = _mat4$getScaling2[0],\n        sy = _mat4$getScaling2[1];\n      var rotation = mat4.getRotation($quat, transform);\n      var _getEuler5 = getEuler($vec3, rotation),\n        _getEuler6 = _slicedToArray(_getEuler5, 3),\n        eux = _getEuler6[0],\n        euz = _getEuler6[2];\n      // gimbal lock at 90 degrees\n      return fromRotationTranslationScale(eux || euz, tx, ty, sx, sy);\n    }\n\n    /**\n     * return 3x3 matrix in local space\n     * @deprecated\n     */\n  }, {\n    key: \"getLocalMatrix\",\n    value: function getLocalMatrix() {\n      return this.getMatrix(this.getLocalTransform());\n    }\n\n    /**\n     * set 3x3 matrix in world space\n     * @deprecated\n     */\n  }, {\n    key: \"setMatrix\",\n    value: function setMatrix(mat) {\n      var _decompose = decompose(mat),\n        _decompose2 = _slicedToArray(_decompose, 5),\n        tx = _decompose2[0],\n        ty = _decompose2[1],\n        scalingX = _decompose2[2],\n        scalingY = _decompose2[3],\n        angle = _decompose2[4];\n      this.setEulerAngles(angle).setPosition(tx, ty).setLocalScale(scalingX, scalingY);\n    }\n\n    /**\n     * set 3x3 matrix in local space\n     * @deprecated\n     */\n  }, {\n    key: \"setLocalMatrix\",\n    value: function setLocalMatrix(mat) {\n      var _decompose3 = decompose(mat),\n        _decompose4 = _slicedToArray(_decompose3, 5),\n        tx = _decompose4[0],\n        ty = _decompose4[1],\n        scalingX = _decompose4[2],\n        scalingY = _decompose4[3],\n        angle = _decompose4[4];\n      this.setLocalEulerAngles(angle).setLocalPosition(tx, ty).setLocalScale(scalingX, scalingY);\n    }\n\n    /**\n     * Use `visibility: visible` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"show\",\n    value: function show() {\n      this.forEach(function (object) {\n        object.style.visibility = 'visible';\n      });\n    }\n\n    /**\n     * Use `visibility: hidden` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.forEach(function (object) {\n        object.style.visibility = 'hidden';\n      });\n    }\n\n    /**\n     * Use `childElementCount` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"getCount\",\n    value: function getCount() {\n      return this.childElementCount;\n    }\n\n    /**\n     * Use `parentElement` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"getParent\",\n    value: function getParent() {\n      return this.parentElement;\n    }\n\n    /**\n     * Use `children` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"getChildren\",\n    value: function getChildren() {\n      return this.children;\n    }\n\n    /**\n     * Use `firstElementChild` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"getFirst\",\n    value: function getFirst() {\n      return this.firstElementChild;\n    }\n\n    /**\n     * Use `lastElementChild` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"getLast\",\n    value: function getLast() {\n      return this.lastElementChild;\n    }\n\n    /**\n     * Use `this.children[index]` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"getChildByIndex\",\n    value: function getChildByIndex(index) {\n      return this.children[index] || null;\n    }\n\n    /**\n     * Use `appendChild` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"add\",\n    value: function add(child, index) {\n      return this.appendChild(child, index);\n    }\n\n    /**\n     * @deprecated\n     */\n  }, {\n    key: \"set\",\n    value: function set(name, value) {\n      // @ts-ignore\n      this.config[name] = value;\n    }\n\n    /**\n     * @deprecated\n     */\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      return this.config[name];\n    }\n\n    /**\n     * Use `setPosition` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"moveTo\",\n    value: function moveTo(position) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      this.setPosition(position, y, z);\n      return this;\n    }\n\n    /**\n     * Use `setPosition` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"move\",\n    value: function move(position) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      this.setPosition(position, y, z);\n      return this;\n    }\n\n    /**\n     * Use `this.style.zIndex` instead.\n     * @deprecated\n     */\n  }, {\n    key: \"setZIndex\",\n    value: function setZIndex(zIndex) {\n      this.style.zIndex = zIndex;\n      return this;\n    }\n\n    // #endregion deprecated\n  }]);\n}(Element);\nDisplayObject.PARSED_STYLE_LIST = new Set(['class', 'className', 'clipPath', 'cursor', 'display', 'draggable', 'droppable', 'fill', 'fillOpacity', 'fillRule', 'filter', 'increasedLineWidthForHitTesting', 'lineCap', 'lineDash', 'lineDashOffset', 'lineJoin', 'lineWidth', 'miterLimit', 'hitArea', 'offsetDistance', 'offsetPath', 'offsetX', 'offsetY', 'opacity', 'pointerEvents', 'shadowColor', 'shadowType', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'stroke', 'strokeOpacity', 'strokeWidth', 'strokeLinecap', 'strokeLineJoin', 'strokeDasharray', 'strokeDashoffset', 'transform', 'transformOrigin', 'textTransform', 'visibility', 'zIndex']);\n\nvar Circle = /*#__PURE__*/function (_DisplayObject) {\n  function Circle() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Circle);\n    return _callSuper(this, Circle, [_objectSpread({\n      type: Shape.CIRCLE\n    }, options)]);\n  }\n  _inherits(Circle, _DisplayObject);\n  return _createClass(Circle);\n}(DisplayObject);\nCircle.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['cx', 'cy', 'cz', 'r', 'isBillboard', 'isSizeAttenuation']));\n\nvar _excluded$6 = [\"style\"];\n/**\n * shadow root\n * @see https://yuque.antfin-inc.com/antv/czqvg5/pgqipg\n */\nvar CustomElement = /*#__PURE__*/function (_DisplayObject) {\n  // private shadowNodes: DisplayObject[] = [];\n\n  function CustomElement() {\n    var _this;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      style = _ref.style,\n      rest = _objectWithoutProperties(_ref, _excluded$6);\n    _classCallCheck(this, CustomElement);\n    _this = _callSuper(this, CustomElement, [_objectSpread({\n      style: style\n    }, rest)]);\n    _this.isCustomElement = true;\n    return _this;\n  }\n\n  /**\n   * fired after element insert into DOM tree\n   */\n  _inherits(CustomElement, _DisplayObject);\n  return _createClass(CustomElement);\n}(DisplayObject);\nCustomElement.PARSED_STYLE_LIST = new Set(['class', 'className', 'clipPath', 'cursor', 'draggable', 'droppable', 'opacity', 'pointerEvents', 'transform', 'transformOrigin', 'zIndex', 'visibility']);\n\nvar Ellipse = /*#__PURE__*/function (_DisplayObject) {\n  function Ellipse() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Ellipse);\n    return _callSuper(this, Ellipse, [_objectSpread({\n      type: Shape.ELLIPSE\n    }, options)]);\n  }\n  _inherits(Ellipse, _DisplayObject);\n  return _createClass(Ellipse);\n}(DisplayObject);\nEllipse.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['cx', 'cy', 'cz', 'rx', 'ry', 'isBillboard', 'isSizeAttenuation']));\n\n/**\n * \n *\n *   Fragment  Fragment \n *\n *  Fragment  Canvas \n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\n */\nvar Fragment = /*#__PURE__*/function (_DisplayObject) {\n  function Fragment() {\n    _classCallCheck(this, Fragment);\n    return _callSuper(this, Fragment, [{\n      type: Shape.FRAGMENT\n    }]);\n  }\n  _inherits(Fragment, _DisplayObject);\n  return _createClass(Fragment);\n}(DisplayObject);\nFragment.PARSED_STYLE_LIST = new Set(['class', 'className']);\n\n/**\n * its attributes are inherited by its children.\n * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/g\n * \n * @example\n * <g fill=\"white\" stroke=\"green\" stroke-width=\"5\">\n    <circle cx=\"40\" cy=\"40\" r=\"25\" />\n    <circle cx=\"60\" cy=\"60\" r=\"25\" />\n  </g>\n */\nvar Group = /*#__PURE__*/function (_DisplayObject) {\n  function Group() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Group);\n    return _callSuper(this, Group, [_objectSpread({\n      type: Shape.GROUP\n    }, options)]);\n  }\n  _inherits(Group, _DisplayObject);\n  return _createClass(Group);\n}(DisplayObject);\nGroup.PARSED_STYLE_LIST = new Set(['class', 'className', 'clipPath', 'cursor', 'draggable', 'droppable', 'opacity', 'pointerEvents', 'transform', 'transformOrigin', 'zIndex', 'visibility']);\n\nvar _excluded$5 = [\"style\"];\n/**\n * HTML container\n * @see https://github.com/pmndrs/drei#html\n */\nvar HTML = /*#__PURE__*/function (_DisplayObject) {\n  function HTML() {\n    var _this;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      style = _ref.style,\n      rest = _objectWithoutProperties(_ref, _excluded$5);\n    _classCallCheck(this, HTML);\n    _this = _callSuper(this, HTML, [_objectSpread({\n      type: Shape.HTML,\n      style: style\n    }, rest)]);\n    _this.cullable.enable = false;\n    return _this;\n  }\n\n  /**\n   * return wrapper HTMLElement\n   * * <div> in g-webgl/canvas\n   * * <foreignObject> in g-svg\n   */\n  _inherits(HTML, _DisplayObject);\n  return _createClass(HTML, [{\n    key: \"getDomElement\",\n    value: function getDomElement() {\n      return this.parsedStyle.$el;\n    }\n\n    /**\n     * override with $el.getBoundingClientRect\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getBoundingClientRect\n     *\n     * ! The calculation logic of the html element should be consistent with that of the canvas element\n     */\n    // getBoundingClientRect(): Rectangle {\n    //   if (this.parsedStyle.$el) {\n    //     return this.parsedStyle.$el.getBoundingClientRect();\n    //   } else {\n    //     const { x, y, width, height } = this.parsedStyle;\n    //     return new Rectangle(x, y, width, height);\n    //   }\n    // }\n  }, {\n    key: \"getClientRects\",\n    value: function getClientRects() {\n      return [this.getBoundingClientRect()];\n    }\n\n    // getBounds() {\n    //   const clientRect = this.getBoundingClientRect();\n    //   // calc context's offset\n    //   // @ts-ignore\n    //   const canvasRect = this.ownerDocument?.defaultView\n    //     ?.getContextService()\n    //     .getBoundingClientRect();\n\n    //   const aabb = new AABB();\n    //   const minX = clientRect.left - (canvasRect?.left || 0);\n    //   const minY = clientRect.top - (canvasRect?.top || 0);\n    //   aabb.setMinMax(\n    //     [minX, minY, 0],\n    //     [minX + clientRect.width, minY + clientRect.height, 0],\n    //   );\n    //   return aabb;\n    // }\n  }, {\n    key: \"getLocalBounds\",\n    value: function getLocalBounds() {\n      if (this.parentNode) {\n        var parentInvert = mat4.invert(mat4.create(), this.parentNode.getWorldTransform());\n        var bounds = this.getBounds();\n        if (!AABB.isEmpty(bounds)) {\n          var localBounds = new AABB();\n          localBounds.setFromTransformedAABB(bounds, parentInvert);\n          return localBounds;\n        }\n      }\n      return this.getBounds();\n    }\n  }]);\n}(DisplayObject);\nHTML.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['x', 'y', '$el', 'innerHTML', 'width', 'height']));\n\nvar Image = /*#__PURE__*/function (_DisplayObject) {\n  function Image() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Image);\n    return _callSuper(this, Image, [_objectSpread({\n      type: Shape.IMAGE\n    }, options)]);\n  }\n  _inherits(Image, _DisplayObject);\n  return _createClass(Image);\n}(DisplayObject);\nImage.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['x', 'y', 'z', 'src', 'width', 'height', 'isBillboard', 'billboardRotation', 'isSizeAttenuation', 'keepAspectRatio']));\n\nvar _excluded$4 = [\"style\"];\n/**\n * Create a line connecting two points.\n * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Element/line\n *\n * Also support for using marker.\n */\nvar Line = /*#__PURE__*/function (_DisplayObject) {\n  function Line() {\n    var _this;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      style = _ref.style,\n      rest = _objectWithoutProperties(_ref, _excluded$4);\n    _classCallCheck(this, Line);\n    _this = _callSuper(this, Line, [_objectSpread({\n      type: Shape.LINE,\n      style: _objectSpread({\n        x1: 0,\n        y1: 0,\n        x2: 0,\n        y2: 0,\n        z1: 0,\n        z2: 0\n      }, style)\n    }, rest)]);\n    _this.markerStartAngle = 0;\n    _this.markerEndAngle = 0;\n    var _this$parsedStyle = _this.parsedStyle,\n      markerStart = _this$parsedStyle.markerStart,\n      markerEnd = _this$parsedStyle.markerEnd;\n    if (markerStart && isDisplayObject(markerStart)) {\n      _this.markerStartAngle = markerStart.getLocalEulerAngles();\n      _this.appendChild(markerStart);\n    }\n    if (markerEnd && isDisplayObject(markerEnd)) {\n      _this.markerEndAngle = markerEnd.getLocalEulerAngles();\n      _this.appendChild(markerEnd);\n    }\n    _this.transformMarker(true);\n    _this.transformMarker(false);\n    return _this;\n  }\n  _inherits(Line, _DisplayObject);\n  return _createClass(Line, [{\n    key: \"attributeChangedCallback\",\n    value: function attributeChangedCallback(attrName, oldValue, newValue, prevParsedValue, newParsedValue) {\n      if (attrName === 'x1' || attrName === 'y1' || attrName === 'x2' || attrName === 'y2' || attrName === 'markerStartOffset' || attrName === 'markerEndOffset') {\n        this.transformMarker(true);\n        this.transformMarker(false);\n      } else if (attrName === 'markerStart') {\n        if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n          this.markerStartAngle = 0;\n          prevParsedValue.remove();\n        }\n\n        // CSSKeyword 'unset'\n        if (newParsedValue && isDisplayObject(newParsedValue)) {\n          this.markerStartAngle = newParsedValue.getLocalEulerAngles();\n          this.appendChild(newParsedValue);\n          this.transformMarker(true);\n        }\n      } else if (attrName === 'markerEnd') {\n        if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n          this.markerEndAngle = 0;\n          prevParsedValue.remove();\n        }\n        if (newParsedValue && isDisplayObject(newParsedValue)) {\n          this.markerEndAngle = newParsedValue.getLocalEulerAngles();\n          this.appendChild(newParsedValue);\n          this.transformMarker(false);\n        }\n      }\n    }\n  }, {\n    key: \"transformMarker\",\n    value: function transformMarker(isStart) {\n      var _this$parsedStyle2 = this.parsedStyle,\n        markerStart = _this$parsedStyle2.markerStart,\n        markerEnd = _this$parsedStyle2.markerEnd,\n        markerStartOffset = _this$parsedStyle2.markerStartOffset,\n        markerEndOffset = _this$parsedStyle2.markerEndOffset,\n        x1 = _this$parsedStyle2.x1,\n        x2 = _this$parsedStyle2.x2,\n        y1 = _this$parsedStyle2.y1,\n        y2 = _this$parsedStyle2.y2;\n      var marker = isStart ? markerStart : markerEnd;\n      if (!marker || !isDisplayObject(marker)) {\n        return;\n      }\n      var rad = 0;\n      var x;\n      var y;\n      var ox;\n      var oy;\n      var offset;\n      var originalAngle;\n      if (isStart) {\n        ox = x1;\n        oy = y1;\n        x = x2 - x1;\n        y = y2 - y1;\n        offset = markerStartOffset || 0;\n        originalAngle = this.markerStartAngle;\n      } else {\n        ox = x2;\n        oy = y2;\n        x = x1 - x2;\n        y = y1 - y2;\n        offset = markerEndOffset || 0;\n        originalAngle = this.markerEndAngle;\n      }\n      rad = Math.atan2(y, x);\n\n      // account for markerOffset\n      marker.setLocalEulerAngles(rad * 180 / Math.PI + originalAngle);\n      marker.setLocalPosition(ox + Math.cos(rad) * offset, oy + Math.sin(rad) * offset);\n    }\n  }, {\n    key: \"getPoint\",\n    value: function getPoint(ratio) {\n      var inWorldSpace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      // TODO: account for z1/z2 in 3D line\n      var _this$parsedStyle3 = this.parsedStyle,\n        x1 = _this$parsedStyle3.x1,\n        y1 = _this$parsedStyle3.y1,\n        x2 = _this$parsedStyle3.x2,\n        y2 = _this$parsedStyle3.y2;\n      var _linePointAt = linePointAt(x1, y1, x2, y2, ratio),\n        x = _linePointAt.x,\n        y = _linePointAt.y;\n      var transformed = vec3.transformMat4(vec3.create(), vec3.fromValues(x, y, 0), inWorldSpace ? this.getWorldTransform() : this.getLocalTransform());\n\n      // apply local transformation\n      return new Point(transformed[0], transformed[1]);\n    }\n  }, {\n    key: \"getPointAtLength\",\n    value: function getPointAtLength(distance) {\n      var inWorldSpace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return this.getPoint(distance / this.getTotalLength(), inWorldSpace);\n    }\n  }, {\n    key: \"getTotalLength\",\n    value: function getTotalLength() {\n      // TODO: account for z1/z2 in 3D line\n      var _this$parsedStyle4 = this.parsedStyle,\n        x1 = _this$parsedStyle4.x1,\n        y1 = _this$parsedStyle4.y1,\n        x2 = _this$parsedStyle4.x2,\n        y2 = _this$parsedStyle4.y2;\n      return lineLength(x1, y1, x2, y2);\n    }\n  }]);\n}(DisplayObject);\nLine.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['x1', 'y1', 'x2', 'y2', 'z1', 'z2', 'isBillboard', 'isSizeAttenuation', 'markerStart', 'markerEnd', 'markerStartOffset', 'markerEndOffset']));\n\nvar _excluded$3 = [\"style\"];\nvar Path = /*#__PURE__*/function (_DisplayObject) {\n  function Path() {\n    var _this;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      style = _ref.style,\n      rest = _objectWithoutProperties(_ref, _excluded$3);\n    _classCallCheck(this, Path);\n    _this = _callSuper(this, Path, [_objectSpread({\n      type: Shape.PATH,\n      style: style,\n      initialParsedStyle: {\n        miterLimit: 4,\n        d: _objectSpread({}, EMPTY_PARSED_PATH)\n      }\n    }, rest)]);\n    _this.markerStartAngle = 0;\n    _this.markerEndAngle = 0;\n    /**\n     * markers placed at the mid\n     */\n    _this.markerMidList = [];\n    var _this$parsedStyle = _this.parsedStyle,\n      markerStart = _this$parsedStyle.markerStart,\n      markerEnd = _this$parsedStyle.markerEnd,\n      markerMid = _this$parsedStyle.markerMid;\n    if (markerStart && isDisplayObject(markerStart)) {\n      _this.markerStartAngle = markerStart.getLocalEulerAngles();\n      _this.appendChild(markerStart);\n    }\n    if (markerMid && isDisplayObject(markerMid)) {\n      _this.placeMarkerMid(markerMid);\n    }\n    if (markerEnd && isDisplayObject(markerEnd)) {\n      _this.markerEndAngle = markerEnd.getLocalEulerAngles();\n      _this.appendChild(markerEnd);\n    }\n    _this.transformMarker(true);\n    _this.transformMarker(false);\n    return _this;\n  }\n  _inherits(Path, _DisplayObject);\n  return _createClass(Path, [{\n    key: \"attributeChangedCallback\",\n    value: function attributeChangedCallback(attrName, oldValue, newValue, prevParsedValue, newParsedValue) {\n      if (attrName === 'd') {\n        // recalc markers\n        this.transformMarker(true);\n        this.transformMarker(false);\n        this.placeMarkerMid(this.parsedStyle.markerMid);\n      } else if (attrName === 'markerStartOffset' || attrName === 'markerEndOffset') {\n        this.transformMarker(true);\n        this.transformMarker(false);\n      } else if (attrName === 'markerStart') {\n        if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n          this.markerStartAngle = 0;\n          prevParsedValue.remove();\n        }\n\n        // CSSKeyword 'unset'\n        if (newParsedValue && isDisplayObject(newParsedValue)) {\n          this.markerStartAngle = newParsedValue.getLocalEulerAngles();\n          this.appendChild(newParsedValue);\n          this.transformMarker(true);\n        }\n      } else if (attrName === 'markerEnd') {\n        if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n          this.markerEndAngle = 0;\n          prevParsedValue.remove();\n        }\n        if (newParsedValue && isDisplayObject(newParsedValue)) {\n          this.markerEndAngle = newParsedValue.getLocalEulerAngles();\n          this.appendChild(newParsedValue);\n          this.transformMarker(false);\n        }\n      } else if (attrName === 'markerMid') {\n        this.placeMarkerMid(newParsedValue);\n      }\n    }\n  }, {\n    key: \"transformMarker\",\n    value: function transformMarker(isStart) {\n      var _this$parsedStyle2 = this.parsedStyle,\n        markerStart = _this$parsedStyle2.markerStart,\n        markerEnd = _this$parsedStyle2.markerEnd,\n        markerStartOffset = _this$parsedStyle2.markerStartOffset,\n        markerEndOffset = _this$parsedStyle2.markerEndOffset;\n      var marker = isStart ? markerStart : markerEnd;\n      if (!marker || !isDisplayObject(marker)) {\n        return;\n      }\n      var rad = 0;\n      var x;\n      var y;\n      var ox;\n      var oy;\n      var offset;\n      var originalAngle;\n      if (isStart) {\n        var _this$getStartTangent = this.getStartTangent(),\n          _this$getStartTangent2 = _slicedToArray(_this$getStartTangent, 2),\n          p1 = _this$getStartTangent2[0],\n          p2 = _this$getStartTangent2[1];\n        ox = p2[0];\n        oy = p2[1];\n        x = p1[0] - p2[0];\n        y = p1[1] - p2[1];\n        offset = markerStartOffset || 0;\n        originalAngle = this.markerStartAngle;\n      } else {\n        var _this$getEndTangent = this.getEndTangent(),\n          _this$getEndTangent2 = _slicedToArray(_this$getEndTangent, 2),\n          _p = _this$getEndTangent2[0],\n          _p2 = _this$getEndTangent2[1];\n        ox = _p2[0];\n        oy = _p2[1];\n        x = _p[0] - _p2[0];\n        y = _p[1] - _p2[1];\n        offset = markerEndOffset || 0;\n        originalAngle = this.markerEndAngle;\n      }\n      rad = Math.atan2(y, x);\n\n      // account for markerOffset\n      marker.setLocalEulerAngles(rad * 180 / Math.PI + originalAngle);\n      marker.setLocalPosition(ox + Math.cos(rad) * offset, oy + Math.sin(rad) * offset);\n    }\n  }, {\n    key: \"placeMarkerMid\",\n    value: function placeMarkerMid(marker) {\n      var segments = this.parsedStyle.d.segments;\n      // clear all existed markers\n      this.markerMidList.forEach(function (marker) {\n        marker.remove();\n      });\n      if (marker && isDisplayObject(marker)) {\n        for (var i = 1; i < segments.length - 1; i++) {\n          var _segments$i$currentPo = _slicedToArray(segments[i].currentPoint, 2),\n            ox = _segments$i$currentPo[0],\n            oy = _segments$i$currentPo[1];\n          var cloned = i === 1 ? marker : marker.cloneNode(true);\n          this.markerMidList.push(cloned);\n          this.appendChild(cloned);\n          cloned.setLocalPosition(ox, oy);\n          // TODO: orient of marker\n        }\n      }\n    }\n\n    /**\n     * Returns the total length of the path.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGeometryElement/getTotalLength\n     */\n  }, {\n    key: \"getTotalLength\",\n    value: function getTotalLength() {\n      return getOrCalculatePathTotalLength(this);\n    }\n\n    /**\n     * Returns the point at a given distance along the path.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGeometryElement/getPointAtLength\n     */\n  }, {\n    key: \"getPointAtLength\",\n    value: function getPointAtLength$1(distance) {\n      var inWorldSpace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var absolutePath = this.parsedStyle.d.absolutePath;\n      var _getPointAtLength2 = getPointAtLength(absolutePath, distance),\n        x = _getPointAtLength2.x,\n        y = _getPointAtLength2.y;\n      var transformed = vec3.transformMat4(vec3.create(), vec3.fromValues(x, y, 0), inWorldSpace ? this.getWorldTransform() : this.getLocalTransform());\n\n      // apply local transformation\n      return new Point(transformed[0], transformed[1]);\n    }\n\n    /**\n     * Returns the point at a given ratio of the total length in path.\n     */\n  }, {\n    key: \"getPoint\",\n    value: function getPoint(ratio) {\n      var inWorldSpace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return this.getPointAtLength(ratio * getOrCalculatePathTotalLength(this), inWorldSpace);\n    }\n\n    /**\n     * Get start tangent vector\n     */\n  }, {\n    key: \"getStartTangent\",\n    value: function getStartTangent() {\n      var segments = this.parsedStyle.d.segments;\n      var result = [];\n      if (segments.length > 1) {\n        var startPoint = segments[0].currentPoint;\n        var endPoint = segments[1].currentPoint;\n        var tangent = segments[1].startTangent;\n        result = [];\n        if (tangent) {\n          result.push([startPoint[0] - tangent[0], startPoint[1] - tangent[1]]);\n          result.push([startPoint[0], startPoint[1]]);\n        } else {\n          result.push([endPoint[0], endPoint[1]]);\n          result.push([startPoint[0], startPoint[1]]);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Get end tangent vector\n     */\n  }, {\n    key: \"getEndTangent\",\n    value: function getEndTangent() {\n      var segments = this.parsedStyle.d.segments;\n      var length = segments.length;\n      var result = [];\n      if (length > 1) {\n        var startPoint = segments[length - 2].currentPoint;\n        var endPoint = segments[length - 1].currentPoint;\n        var tangent = segments[length - 1].endTangent;\n        result = [];\n        if (tangent) {\n          result.push([endPoint[0] - tangent[0], endPoint[1] - tangent[1]]);\n          result.push([endPoint[0], endPoint[1]]);\n        } else {\n          result.push([startPoint[0], startPoint[1]]);\n          result.push([endPoint[0], endPoint[1]]);\n        }\n      }\n      return result;\n    }\n  }]);\n}(DisplayObject);\nPath.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['d', 'markerStart', 'markerMid', 'markerEnd', 'markerStartOffset', 'markerEndOffset', 'isBillboard', 'isSizeAttenuation']));\n\nvar _excluded$2 = [\"style\"];\nvar Polygon = /*#__PURE__*/function (_DisplayObject) {\n  function Polygon() {\n    var _this;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      style = _ref.style,\n      rest = _objectWithoutProperties(_ref, _excluded$2);\n    _classCallCheck(this, Polygon);\n    _this = _callSuper(this, Polygon, [_objectSpread({\n      type: Shape.POLYGON,\n      style: style,\n      initialParsedStyle: {\n        points: {\n          points: [],\n          totalLength: 0,\n          segments: []\n        },\n        miterLimit: 4,\n        isClosed: true\n      }\n    }, rest)]);\n    _this.markerStartAngle = 0;\n    _this.markerEndAngle = 0;\n    /**\n     * markers placed at the mid\n     */\n    _this.markerMidList = [];\n    var _this$parsedStyle = _this.parsedStyle,\n      markerStart = _this$parsedStyle.markerStart,\n      markerEnd = _this$parsedStyle.markerEnd,\n      markerMid = _this$parsedStyle.markerMid;\n    if (markerStart && isDisplayObject(markerStart)) {\n      _this.markerStartAngle = markerStart.getLocalEulerAngles();\n      _this.appendChild(markerStart);\n    }\n    if (markerMid && isDisplayObject(markerMid)) {\n      _this.placeMarkerMid(markerMid);\n    }\n    if (markerEnd && isDisplayObject(markerEnd)) {\n      _this.markerEndAngle = markerEnd.getLocalEulerAngles();\n      _this.appendChild(markerEnd);\n    }\n    _this.transformMarker(true);\n    _this.transformMarker(false);\n    return _this;\n  }\n  _inherits(Polygon, _DisplayObject);\n  return _createClass(Polygon, [{\n    key: \"attributeChangedCallback\",\n    value: function attributeChangedCallback(attrName, oldValue, newValue, prevParsedValue, newParsedValue) {\n      if (attrName === 'points') {\n        // recalc markers\n        this.transformMarker(true);\n        this.transformMarker(false);\n        this.placeMarkerMid(this.parsedStyle.markerMid);\n      } else if (attrName === 'markerStartOffset' || attrName === 'markerEndOffset') {\n        this.transformMarker(true);\n        this.transformMarker(false);\n      } else if (attrName === 'markerStart') {\n        if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n          this.markerStartAngle = 0;\n          prevParsedValue.remove();\n        }\n\n        // CSSKeyword 'unset'\n        if (newParsedValue && isDisplayObject(newParsedValue)) {\n          this.markerStartAngle = newParsedValue.getLocalEulerAngles();\n          this.appendChild(newParsedValue);\n          this.transformMarker(true);\n        }\n      } else if (attrName === 'markerEnd') {\n        if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n          this.markerEndAngle = 0;\n          prevParsedValue.remove();\n        }\n        if (newParsedValue && isDisplayObject(newParsedValue)) {\n          this.markerEndAngle = newParsedValue.getLocalEulerAngles();\n          this.appendChild(newParsedValue);\n          this.transformMarker(false);\n        }\n      } else if (attrName === 'markerMid') {\n        this.placeMarkerMid(newParsedValue);\n      }\n    }\n  }, {\n    key: \"transformMarker\",\n    value: function transformMarker(isStart) {\n      var _this$parsedStyle2 = this.parsedStyle,\n        markerStart = _this$parsedStyle2.markerStart,\n        markerEnd = _this$parsedStyle2.markerEnd,\n        markerStartOffset = _this$parsedStyle2.markerStartOffset,\n        markerEndOffset = _this$parsedStyle2.markerEndOffset,\n        P = _this$parsedStyle2.points;\n      var _ref2 = P || {},\n        points = _ref2.points;\n      var marker = isStart ? markerStart : markerEnd;\n      if (!marker || !isDisplayObject(marker) || !points) {\n        return;\n      }\n      var rad = 0;\n      var x;\n      var y;\n      var ox;\n      var oy;\n      var offset;\n      var originalAngle;\n      ox = points[0][0];\n      oy = points[0][1];\n      if (isStart) {\n        x = points[1][0] - points[0][0];\n        y = points[1][1] - points[0][1];\n        offset = markerStartOffset || 0;\n        originalAngle = this.markerStartAngle;\n      } else {\n        var length = points.length;\n        if (!this.parsedStyle.isClosed) {\n          ox = points[length - 1][0];\n          oy = points[length - 1][1];\n          x = points[length - 2][0] - points[length - 1][0];\n          y = points[length - 2][1] - points[length - 1][1];\n        } else {\n          x = points[length - 1][0] - points[0][0];\n          y = points[length - 1][1] - points[0][1];\n        }\n        offset = markerEndOffset || 0;\n        originalAngle = this.markerEndAngle;\n      }\n      rad = Math.atan2(y, x);\n\n      // account for markerOffset\n      marker.setLocalEulerAngles(rad * 180 / Math.PI + originalAngle);\n      marker.setLocalPosition(ox + Math.cos(rad) * offset, oy + Math.sin(rad) * offset);\n    }\n  }, {\n    key: \"placeMarkerMid\",\n    value: function placeMarkerMid(marker) {\n      var P = this.parsedStyle.points;\n      var _ref3 = P || {},\n        points = _ref3.points;\n\n      // clear all existed markers\n      this.markerMidList.forEach(function (marker) {\n        marker.remove();\n      });\n      this.markerMidList = [];\n      if (marker && isDisplayObject(marker) && points) {\n        for (var i = 1; i < (this.parsedStyle.isClosed ? points.length : points.length - 1); i++) {\n          var ox = points[i][0];\n          var oy = points[i][1];\n          var cloned = i === 1 ? marker : marker.cloneNode(true);\n          this.markerMidList.push(cloned);\n          this.appendChild(cloned);\n          cloned.setLocalPosition(ox, oy);\n\n          // TODO: orient of marker\n        }\n      }\n    }\n  }]);\n}(DisplayObject);\nPolygon.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['points', 'markerStart', 'markerMid', 'markerEnd', 'markerStartOffset', 'markerEndOffset', 'isClosed', 'isBillboard', 'isSizeAttenuation']));\n\nvar _excluded$1 = [\"style\"];\n/**\n * Polyline inherits the marker-related capabilities of Polygon.\n */\nvar Polyline = /*#__PURE__*/function (_Polygon) {\n  function Polyline() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      style = _ref.style,\n      rest = _objectWithoutProperties(_ref, _excluded$1);\n    _classCallCheck(this, Polyline);\n    return _callSuper(this, Polyline, [_objectSpread({\n      type: Shape.POLYLINE,\n      style: style,\n      initialParsedStyle: {\n        points: {\n          points: [],\n          totalLength: 0,\n          segments: []\n        },\n        miterLimit: 4,\n        isClosed: false\n      }\n    }, rest)]);\n  }\n  _inherits(Polyline, _Polygon);\n  return _createClass(Polyline, [{\n    key: \"getTotalLength\",\n    value: function getTotalLength() {\n      return getOrCalculatePolylineTotalLength(this);\n    }\n  }, {\n    key: \"getPointAtLength\",\n    value: function getPointAtLength(distance) {\n      var inWorldSpace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return this.getPoint(distance / this.getTotalLength(), inWorldSpace);\n    }\n  }, {\n    key: \"getPoint\",\n    value: function getPoint(ratio) {\n      var inWorldSpace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var points = this.parsedStyle.points.points;\n      if (this.parsedStyle.points.segments.length === 0) {\n        var segments = [];\n        var tempLength = 0;\n        var segmentT;\n        var segmentL;\n        var totalLength = this.getTotalLength();\n        points.forEach(function (p, i) {\n          if (points[i + 1]) {\n            segmentT = [0, 0];\n            segmentT[0] = tempLength / totalLength;\n            segmentL = lineLength(p[0], p[1], points[i + 1][0], points[i + 1][1]);\n            tempLength += segmentL;\n            segmentT[1] = tempLength / totalLength;\n            segments.push(segmentT);\n          }\n        });\n        this.parsedStyle.points.segments = segments;\n      }\n      var subt = 0;\n      var index = 0;\n      this.parsedStyle.points.segments.forEach(function (v, i) {\n        if (ratio >= v[0] && ratio <= v[1]) {\n          subt = (ratio - v[0]) / (v[1] - v[0]);\n          index = i;\n        }\n      });\n      var _linePointAt = linePointAt(points[index][0], points[index][1], points[index + 1][0], points[index + 1][1], subt),\n        x = _linePointAt.x,\n        y = _linePointAt.y;\n      var transformed = vec3.transformMat4(vec3.create(), vec3.fromValues(x, y, 0), inWorldSpace ? this.getWorldTransform() : this.getLocalTransform());\n\n      // apply local transformation\n      return new Point(transformed[0], transformed[1]);\n    }\n  }, {\n    key: \"getStartTangent\",\n    value: function getStartTangent() {\n      var points = this.parsedStyle.points.points;\n      var result = [];\n      result.push([points[1][0], points[1][1]]);\n      result.push([points[0][0], points[0][1]]);\n      return result;\n    }\n  }, {\n    key: \"getEndTangent\",\n    value: function getEndTangent() {\n      var points = this.parsedStyle.points.points;\n      var l = points.length - 1;\n      var result = [];\n      result.push([points[l - 1][0], points[l - 1][1]]);\n      result.push([points[l][0], points[l][1]]);\n      return result;\n    }\n  }]);\n}(Polygon);\nPolyline.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(Polygon.PARSED_STYLE_LIST), ['points', 'markerStart', 'markerMid', 'markerEnd', 'markerStartOffset', 'markerEndOffset', 'isBillboard']));\n\nvar Rect = /*#__PURE__*/function (_DisplayObject) {\n  function Rect() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Rect);\n    return _callSuper(this, Rect, [_objectSpread({\n      type: Shape.RECT\n    }, options)]);\n  }\n  _inherits(Rect, _DisplayObject);\n  return _createClass(Rect);\n}(DisplayObject);\nRect.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['x', 'y', 'z', 'width', 'height', 'isBillboard', 'isSizeAttenuation', 'radius']));\n\nvar _excluded = [\"style\"];\n/**\n * <text> @see https://developer.mozilla.org/en-US/docs/Web/API/SVGTextElement\n */\nvar Text = /*#__PURE__*/function (_DisplayObject) {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGTextContentElement#constants\n   */\n  // LENGTHADJUST_SPACING: number = 1;\n  // LENGTHADJUST_SPACINGANDGLYPHS: number = 2;\n  // LENGTHADJUST_UNKNOWN: number = 0;\n\n  function Text() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      style = _ref.style,\n      rest = _objectWithoutProperties(_ref, _excluded);\n    _classCallCheck(this, Text);\n    return _callSuper(this, Text, [_objectSpread({\n      type: Shape.TEXT,\n      style: _objectSpread({\n        fill: 'black'\n      }, style)\n    }, rest)]);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGTextContentElement\n   */\n  _inherits(Text, _DisplayObject);\n  return _createClass(Text, [{\n    key: \"getComputedTextLength\",\n    value: function getComputedTextLength() {\n      var _this$parsedStyle$met;\n      this.getGeometryBounds();\n      return ((_this$parsedStyle$met = this.parsedStyle.metrics) === null || _this$parsedStyle$met === void 0 ? void 0 : _this$parsedStyle$met.maxLineWidth) || 0;\n    }\n  }, {\n    key: \"getLineBoundingRects\",\n    value: function getLineBoundingRects() {\n      var _this$parsedStyle$met2;\n      this.getGeometryBounds();\n      return ((_this$parsedStyle$met2 = this.parsedStyle.metrics) === null || _this$parsedStyle$met2 === void 0 ? void 0 : _this$parsedStyle$met2.lineMetrics) || [];\n    }\n  }, {\n    key: \"isOverflowing\",\n    value: function isOverflowing() {\n      this.getGeometryBounds();\n      return !!this.parsedStyle.isOverflowing;\n    }\n  }]);\n}(DisplayObject);\nText.PARSED_STYLE_LIST = new Set([].concat(_toConsumableArray(DisplayObject.PARSED_STYLE_LIST), ['x', 'y', 'z', 'isBillboard', 'billboardRotation', 'isSizeAttenuation', 'text', 'textAlign', 'textBaseline', 'fontStyle', 'fontSize', 'fontFamily', 'fontWeight', 'fontVariant', 'lineHeight', 'letterSpacing', 'leading', 'wordWrap', 'wordWrapWidth', 'maxLines', 'textOverflow', 'isOverflowing', 'textPath', 'textDecorationLine', 'textDecorationColor', 'textDecorationStyle', 'textPathSide', 'textPathStartOffset', 'metrics', 'dx', 'dy']));\n\n/**\n * canvas.customElements\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry\n */\nvar CustomElementRegistry = /*#__PURE__*/function () {\n  function CustomElementRegistry() {\n    _classCallCheck(this, CustomElementRegistry);\n    this.registry = {};\n    this.define(Shape.CIRCLE, Circle);\n    this.define(Shape.ELLIPSE, Ellipse);\n    this.define(Shape.RECT, Rect);\n    this.define(Shape.IMAGE, Image);\n    this.define(Shape.LINE, Line);\n    this.define(Shape.GROUP, Group);\n    this.define(Shape.PATH, Path);\n    this.define(Shape.POLYGON, Polygon);\n    this.define(Shape.POLYLINE, Polyline);\n    this.define(Shape.TEXT, Text);\n    this.define(Shape.HTML, HTML);\n  }\n  return _createClass(CustomElementRegistry, [{\n    key: \"define\",\n    value: function define(name, constructor) {\n      this.registry[name] = constructor;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry/get\n     */\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      return this.registry[name];\n    }\n  }]);\n}();\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/RegisterProperty#parameters\n */\n\n/**\n * holds useful CSS-related methods.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS\n *\n * * CSS Typed OM @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/factory_functions\n * * register property @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/RegisterProperty\n * * CSS Layout API\n */\nvar CSS = {\n  /**\n   * <number>\n   * @see https://drafts.csswg.org/css-values-4/#number-value\n   */\n  number: function number(n) {\n    return new CSSUnitValue(n);\n  },\n  /**\n   * <percentage>\n   * @see https://drafts.csswg.org/css-values-4/#percentage-value\n   */\n  percent: function percent(n) {\n    return new CSSUnitValue(n, '%');\n  },\n  /**\n   * <length>\n   */\n  px: function px(n) {\n    return new CSSUnitValue(n, 'px');\n  },\n  /**\n   * <length>\n   */\n  em: function em(n) {\n    return new CSSUnitValue(n, 'em');\n  },\n  rem: function rem(n) {\n    return new CSSUnitValue(n, 'rem');\n  },\n  /**\n   * <angle>\n   */\n  deg: function deg(n) {\n    return new CSSUnitValue(n, 'deg');\n  },\n  /**\n   * <angle>\n   */\n  grad: function grad(n) {\n    return new CSSUnitValue(n, 'grad');\n  },\n  /**\n   * <angle>\n   */\n  rad: function rad(n) {\n    return new CSSUnitValue(n, 'rad');\n  },\n  /**\n   * <angle>\n   */\n  turn: function turn(n) {\n    return new CSSUnitValue(n, 'turn');\n  },\n  /**\n   * <time>\n   */\n  s: function s(n) {\n    return new CSSUnitValue(n, 's');\n  },\n  /**\n   * <time>\n   */\n  ms: function ms(n) {\n    return new CSSUnitValue(n, 'ms');\n  },\n  /**\n   * CSS Properties & Values API\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS_Properties_and_Values_API\n   * @see https://drafts.css-houdini.org/css-properties-values-api/#registering-custom-properties\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/RegisterProperty\n   */\n  registerProperty: function registerProperty(definition) {\n    var name = definition.name,\n      inherits = definition.inherits,\n      interpolable = definition.interpolable,\n      initialValue = definition.initialValue,\n      syntax = definition.syntax;\n    runtime.styleValueRegistry.registerMetadata({\n      n: name,\n      inh: inherits,\n      \"int\": interpolable,\n      d: initialValue,\n      syntax: syntax\n    });\n  },\n  /**\n   * CSS Layout API\n   * register layout\n   *\n   * @see https://github.com/w3c/css-houdini-drafts/blob/main/css-layout-api/EXPLAINER.md\n   * @see https://developer.mozilla.org/en-US/docs/Web/Guide/Houdini#css_layout_api\n   */\n  registerLayout: function registerLayout(name, clazz) {\n    runtime.layoutRegistry.registerLayout(name, clazz);\n  }\n};\n\n/**\n * the entry of DOM tree\n * Document -> Node -> EventTarget\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Document\n */\nvar Document = /*#__PURE__*/function (_Node) {\n  function Document() {\n    var _this;\n    _classCallCheck(this, Document);\n    _this = _callSuper(this, Document);\n    /**\n     * only document has defaultView, points to canvas,\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/defaultView\n     */\n    _this.defaultView = null;\n    _this.ownerDocument = null;\n    _this.nodeName = 'document';\n\n    // create timeline\n    try {\n      _this.timeline = new runtime.AnimationTimeline(_this);\n    } catch (_unused) {}\n\n    /**\n     * for inherited properties, the initial value is used on the root element only,\n     * as long as no specified value is supplied.\n     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/initial_value\n     */\n    var initialStyle = {};\n    BUILT_IN_PROPERTIES.forEach(function (_ref) {\n      var n = _ref.n,\n        inh = _ref.inh,\n        d = _ref.d;\n      if (inh && d) {\n        initialStyle[n] = isFunction(d) ? d(Shape.GROUP) : d;\n      }\n    });\n\n    // like <html> in DOM tree\n    _this.documentElement = new Group({\n      id: 'g-root',\n      style: initialStyle\n    });\n    _this.documentElement.ownerDocument = _this;\n    _this.documentElement.parentNode = _this;\n    _this.childNodes = [_this.documentElement];\n    return _this;\n  }\n  _inherits(Document, _Node);\n  return _createClass(Document, [{\n    key: \"children\",\n    get: function get() {\n      return this.childNodes;\n    }\n  }, {\n    key: \"childElementCount\",\n    get: function get() {\n      return this.childNodes.length;\n    }\n  }, {\n    key: \"firstElementChild\",\n    get: function get() {\n      return this.firstChild;\n    }\n  }, {\n    key: \"lastElementChild\",\n    get: function get() {\n      return this.lastChild;\n    }\n  }, {\n    key: \"createElement\",\n    value:\n    /**\n     * @example const circle = document.createElement('circle', { style: { r: 10 } });\n     */\n    function createElement(tagName, options) {\n      // @observablehq/plot will create <svg>\n      if (tagName === 'svg') {\n        return this.documentElement;\n      }\n\n      // d3 will use <tspan>\n      var clazz = this.defaultView.customElements.get(tagName);\n      if (!clazz) {\n        console.warn('Unsupported tagName: ', tagName);\n        clazz = tagName === 'tspan' ? Text : Group;\n      }\n      var shape = new clazz(options);\n      shape.ownerDocument = this;\n      return shape;\n    }\n  }, {\n    key: \"createElementNS\",\n    value: function createElementNS(namespaceURI, tagName, options) {\n      return this.createElement(tagName, options);\n    }\n  }, {\n    key: \"cloneNode\",\n    value: function cloneNode(deep) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      try {\n        this.documentElement.destroyChildren();\n        this.timeline.destroy();\n      } catch (_unused2) {}\n    }\n\n    /**\n     * Picking 2D graphics with RBush based on BBox, fast but inaccurate.\n     */\n  }, {\n    key: \"elementsFromBBox\",\n    value: function elementsFromBBox(minX, minY, maxX, maxY) {\n      var rBush = this.defaultView.context.rBushRoot;\n      var rBushNodes = rBush.search({\n        minX: minX,\n        minY: minY,\n        maxX: maxX,\n        maxY: maxY\n      });\n      var hitTestList = [];\n      rBushNodes.forEach(function (_ref2) {\n        var displayObject = _ref2.displayObject;\n        var _displayObject$parsed = displayObject.parsedStyle.pointerEvents,\n          pointerEvents = _displayObject$parsed === void 0 ? 'auto' : _displayObject$parsed;\n\n        // account for `visibility`\n        // @see https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events\n        var isVisibilityAffected = ['auto', 'visiblepainted', 'visiblefill', 'visiblestroke', 'visible'].includes(pointerEvents);\n        if ((!isVisibilityAffected || isVisibilityAffected && displayObject.isVisible()) && !displayObject.isCulled() && displayObject.isInteractive()) {\n          hitTestList.push(displayObject);\n        }\n      });\n      // find group with max z-index\n      hitTestList.sort(function (a, b) {\n        return b.sortable.renderOrder - a.sortable.renderOrder;\n      });\n      return hitTestList;\n    }\n  }, {\n    key: \"elementFromPointSync\",\n    value: function elementFromPointSync(x, y) {\n      var _this$defaultView$can = this.defaultView.canvas2Viewport({\n          x: x,\n          y: y\n        }),\n        viewportX = _this$defaultView$can.x,\n        viewportY = _this$defaultView$can.y;\n      var _this$defaultView$get = this.defaultView.getConfig(),\n        width = _this$defaultView$get.width,\n        height = _this$defaultView$get.height;\n      // outside canvas' viewport\n      if (viewportX < 0 || viewportY < 0 || viewportX > width || viewportY > height) {\n        return null;\n      }\n      var _this$defaultView$vie = this.defaultView.viewport2Client({\n          x: viewportX,\n          y: viewportY\n        }),\n        clientX = _this$defaultView$vie.x,\n        clientY = _this$defaultView$vie.y;\n      var _this$defaultView$get2 = this.defaultView.getRenderingService().hooks.pickSync.call({\n          topmost: true,\n          position: {\n            x: x,\n            y: y,\n            viewportX: viewportX,\n            viewportY: viewportY,\n            clientX: clientX,\n            clientY: clientY\n          },\n          picked: []\n        }),\n        picked = _this$defaultView$get2.picked;\n      return picked && picked[0] || this.documentElement;\n    }\n\n    /**\n     * Do picking with API instead of triggering interactive events.\n     *\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/elementFromPoint\n     */\n  }, {\n    key: \"elementFromPoint\",\n    value: (function () {\n      var _elementFromPoint = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(x, y) {\n        var _this$defaultView$can2, viewportX, viewportY, _this$defaultView$get3, width, height, _this$defaultView$vie2, clientX, clientY, _yield$this$defaultVi, picked;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _this$defaultView$can2 = this.defaultView.canvas2Viewport({\n                x: x,\n                y: y\n              }), viewportX = _this$defaultView$can2.x, viewportY = _this$defaultView$can2.y;\n              _this$defaultView$get3 = this.defaultView.getConfig(), width = _this$defaultView$get3.width, height = _this$defaultView$get3.height; // outside canvas' viewport\n              if (!(viewportX < 0 || viewportY < 0 || viewportX > width || viewportY > height)) {\n                _context.next = 4;\n                break;\n              }\n              return _context.abrupt(\"return\", null);\n            case 4:\n              _this$defaultView$vie2 = this.defaultView.viewport2Client({\n                x: viewportX,\n                y: viewportY\n              }), clientX = _this$defaultView$vie2.x, clientY = _this$defaultView$vie2.y;\n              _context.next = 7;\n              return this.defaultView.getRenderingService().hooks.pick.promise({\n                topmost: true,\n                position: {\n                  x: x,\n                  y: y,\n                  viewportX: viewportX,\n                  viewportY: viewportY,\n                  clientX: clientX,\n                  clientY: clientY\n                },\n                picked: []\n              });\n            case 7:\n              _yield$this$defaultVi = _context.sent;\n              picked = _yield$this$defaultVi.picked;\n              return _context.abrupt(\"return\", picked && picked[0] || this.documentElement);\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function elementFromPoint(_x, _x2) {\n        return _elementFromPoint.apply(this, arguments);\n      }\n      return elementFromPoint;\n    }())\n  }, {\n    key: \"elementsFromPointSync\",\n    value: function elementsFromPointSync(x, y) {\n      var _this$defaultView$can3 = this.defaultView.canvas2Viewport({\n          x: x,\n          y: y\n        }),\n        viewportX = _this$defaultView$can3.x,\n        viewportY = _this$defaultView$can3.y;\n      var _this$defaultView$get4 = this.defaultView.getConfig(),\n        width = _this$defaultView$get4.width,\n        height = _this$defaultView$get4.height;\n      // outside canvas' viewport\n      if (viewportX < 0 || viewportY < 0 || viewportX > width || viewportY > height) {\n        return [];\n      }\n      var _this$defaultView$vie3 = this.defaultView.viewport2Client({\n          x: viewportX,\n          y: viewportY\n        }),\n        clientX = _this$defaultView$vie3.x,\n        clientY = _this$defaultView$vie3.y;\n      var _this$defaultView$get5 = this.defaultView.getRenderingService().hooks.pickSync.call({\n          topmost: false,\n          position: {\n            x: x,\n            y: y,\n            viewportX: viewportX,\n            viewportY: viewportY,\n            clientX: clientX,\n            clientY: clientY\n          },\n          picked: []\n        }),\n        picked = _this$defaultView$get5.picked;\n      if (picked[picked.length - 1] !== this.documentElement) {\n        picked.push(this.documentElement);\n      }\n      return picked;\n    }\n\n    /**\n     * Do picking with API instead of triggering interactive events.\n     *\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/elementsFromPoint\n     */\n  }, {\n    key: \"elementsFromPoint\",\n    value: (function () {\n      var _elementsFromPoint = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(x, y) {\n        var _this$defaultView$can4, viewportX, viewportY, _this$defaultView$get6, width, height, _this$defaultView$vie4, clientX, clientY, _yield$this$defaultVi2, picked;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _this$defaultView$can4 = this.defaultView.canvas2Viewport({\n                x: x,\n                y: y\n              }), viewportX = _this$defaultView$can4.x, viewportY = _this$defaultView$can4.y;\n              _this$defaultView$get6 = this.defaultView.getConfig(), width = _this$defaultView$get6.width, height = _this$defaultView$get6.height; // outside canvas' viewport\n              if (!(viewportX < 0 || viewportY < 0 || viewportX > width || viewportY > height)) {\n                _context2.next = 4;\n                break;\n              }\n              return _context2.abrupt(\"return\", []);\n            case 4:\n              _this$defaultView$vie4 = this.defaultView.viewport2Client({\n                x: viewportX,\n                y: viewportY\n              }), clientX = _this$defaultView$vie4.x, clientY = _this$defaultView$vie4.y;\n              _context2.next = 7;\n              return this.defaultView.getRenderingService().hooks.pick.promise({\n                topmost: false,\n                position: {\n                  x: x,\n                  y: y,\n                  viewportX: viewportX,\n                  viewportY: viewportY,\n                  clientX: clientX,\n                  clientY: clientY\n                },\n                picked: []\n              });\n            case 7:\n              _yield$this$defaultVi2 = _context2.sent;\n              picked = _yield$this$defaultVi2.picked;\n              if (picked[picked.length - 1] !== this.documentElement) {\n                picked.push(this.documentElement);\n              }\n              return _context2.abrupt(\"return\", picked);\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function elementsFromPoint(_x3, _x4) {\n        return _elementsFromPoint.apply(this, arguments);\n      }\n      return elementsFromPoint;\n    }()\n    /**\n     * eg. Uncaught DOMException: Failed to execute 'appendChild' on 'Node': Only one element on document allowed.\n     */\n    )\n  }, {\n    key: \"appendChild\",\n    value: function appendChild(newChild, index) {\n      throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n    }\n  }, {\n    key: \"insertBefore\",\n    value: function insertBefore(newChild, refChild) {\n      throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(oldChild, destroy) {\n      throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n    }\n  }, {\n    key: \"replaceChild\",\n    value: function replaceChild(newChild, oldChild, destroy) {\n      throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n    }\n  }, {\n    key: \"append\",\n    value: function append() {\n      throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n    }\n  }, {\n    key: \"prepend\",\n    value: function prepend() {\n      throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n    }\n\n    /**\n     * Execute query on documentElement.\n     */\n  }, {\n    key: \"getElementById\",\n    value: function getElementById(id) {\n      return this.documentElement.getElementById(id);\n    }\n  }, {\n    key: \"getElementsByName\",\n    value: function getElementsByName(name) {\n      return this.documentElement.getElementsByName(name);\n    }\n  }, {\n    key: \"getElementsByTagName\",\n    value: function getElementsByTagName(tagName) {\n      return this.documentElement.getElementsByTagName(tagName);\n    }\n  }, {\n    key: \"getElementsByClassName\",\n    value: function getElementsByClassName(className) {\n      return this.documentElement.getElementsByClassName(className);\n    }\n  }, {\n    key: \"querySelector\",\n    value: function querySelector(selectors) {\n      return this.documentElement.querySelector(selectors);\n    }\n  }, {\n    key: \"querySelectorAll\",\n    value: function querySelectorAll(selectors) {\n      return this.documentElement.querySelectorAll(selectors);\n    }\n  }, {\n    key: \"find\",\n    value: function find(filter) {\n      return this.documentElement.find(filter);\n    }\n  }, {\n    key: \"findAll\",\n    value: function findAll(filter) {\n      return this.documentElement.findAll(filter);\n    }\n  }]);\n}(Node);\n\n/**\n * apply following rules:\n * 1. `visibility` in scenegraph node\n * 2. other custom culling strategies, eg. frustum culling\n */\nvar CullingPlugin = /*#__PURE__*/function () {\n  function CullingPlugin(strategies) {\n    _classCallCheck(this, CullingPlugin);\n    this.strategies = strategies;\n  }\n  return _createClass(CullingPlugin, [{\n    key: \"apply\",\n    value: function apply(context) {\n      var camera = context.camera,\n        renderingService = context.renderingService,\n        renderingContext = context.renderingContext;\n      var strategies = this.strategies;\n      renderingService.hooks.cull.tap(CullingPlugin.tag, function (object) {\n        if (object) {\n          var cullable = object.cullable;\n          // cullable.visible = true;\n          // const renderBounds = object.getRenderBounds();\n          // if (AABB.isEmpty(renderBounds)) {\n          //   cullable.visible = false;\n          // } else {\n          //   const isShape2D = shape2D.indexOf(object.nodeName as Shape) > -1;\n          //   const [p0, p1, p2, p3] = camera.getFrustum().planes;\n          //   tmpAABB.setMinMax([-p1.distance, -p3.distance, 0], [p0.distance, p2.distance, 0]);\n\n          //   cullable.visible = isShape2D ? renderBounds.intersects(tmpAABB) : true;\n          // }\n\n          if (strategies.length === 0) {\n            cullable.visible = renderingContext.unculledEntities.indexOf(object.entity) > -1;\n          } else {\n            // eg. implemented by g-webgl(frustum culling)\n            cullable.visible = strategies.every(function (strategy) {\n              return strategy.isVisible(camera, object);\n            });\n          }\n          if (!object.isCulled() && object.isVisible()) {\n            return object;\n          }\n          // if (this.renderingContext.renderListLastFrame.indexOf(object) > -1) {\n          object.dispatchEvent(new CustomEvent(ElementEvent.CULLED));\n          // }\n\n          return null;\n        }\n        return object;\n      });\n      renderingService.hooks.afterRender.tap(CullingPlugin.tag, function (object) {\n        object.cullable.visibilityPlaneMask = -1;\n      });\n    }\n  }]);\n}();\nCullingPlugin.tag = 'Culling';\n\n/**\n * support mouse & touch events\n * @see https://github.com/pixijs/pixi.js/blob/dev/packages/interaction/README.md\n *\n * also provide some extra events such as `drag`\n */\nvar EventPlugin = /*#__PURE__*/function () {\n  function EventPlugin() {\n    var _this = this;\n    _classCallCheck(this, EventPlugin);\n    this.autoPreventDefault = false;\n    this.rootPointerEvent = new FederatedPointerEvent(null);\n    this.rootWheelEvent = new FederatedWheelEvent(null);\n    this.onPointerMove = function (nativeEvent) {\n      var _this$context$renderi;\n      var canvas = (_this$context$renderi = _this.context.renderingContext.root) === null || _this$context$renderi === void 0 || (_this$context$renderi = _this$context$renderi.ownerDocument) === null || _this$context$renderi === void 0 ? void 0 : _this$context$renderi.defaultView;\n      if (canvas.supportsTouchEvents && nativeEvent.pointerType === 'touch') return;\n      var normalizedEvents = _this.normalizeToPointerEvent(nativeEvent, canvas);\n      var _iterator = _createForOfIteratorHelper(normalizedEvents),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var normalizedEvent = _step.value;\n          var event = _this.bootstrapEvent(_this.rootPointerEvent, normalizedEvent, canvas, nativeEvent);\n          _this.context.eventService.mapEvent(event);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      _this.setCursor(_this.context.eventService.cursor);\n    };\n    this.onClick = function (nativeEvent) {\n      var _this$context$renderi2;\n      var canvas = (_this$context$renderi2 = _this.context.renderingContext.root) === null || _this$context$renderi2 === void 0 || (_this$context$renderi2 = _this$context$renderi2.ownerDocument) === null || _this$context$renderi2 === void 0 ? void 0 : _this$context$renderi2.defaultView;\n      var normalizedEvents = _this.normalizeToPointerEvent(nativeEvent, canvas);\n      var _iterator2 = _createForOfIteratorHelper(normalizedEvents),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var normalizedEvent = _step2.value;\n          var event = _this.bootstrapEvent(_this.rootPointerEvent, normalizedEvent, canvas, nativeEvent);\n          _this.context.eventService.mapEvent(event);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      _this.setCursor(_this.context.eventService.cursor);\n    };\n  }\n  return _createClass(EventPlugin, [{\n    key: \"apply\",\n    value: function apply(context) {\n      var _this2 = this;\n      this.context = context;\n      var renderingService = context.renderingService;\n      var canvas = this.context.renderingContext.root.ownerDocument.defaultView;\n      this.context.eventService.setPickHandler(function (position) {\n        var _this2$context$render = _this2.context.renderingService.hooks.pickSync.call({\n            position: position,\n            picked: [],\n            topmost: true // we only concern the topmost element\n          }),\n          picked = _this2$context$render.picked;\n        return picked[0] || null;\n      });\n      renderingService.hooks.pointerWheel.tap(EventPlugin.tag, function (nativeEvent) {\n        var wheelEvent = _this2.normalizeWheelEvent(nativeEvent);\n        _this2.context.eventService.mapEvent(wheelEvent);\n      });\n      renderingService.hooks.pointerDown.tap(EventPlugin.tag, function (nativeEvent) {\n        if (canvas.supportsTouchEvents && nativeEvent.pointerType === 'touch') return;\n        var events = _this2.normalizeToPointerEvent(nativeEvent, canvas);\n        if (_this2.autoPreventDefault && events[0].isNormalized) {\n          var cancelable = nativeEvent.cancelable || !('cancelable' in nativeEvent);\n          if (cancelable) {\n            nativeEvent.preventDefault();\n          }\n        }\n        var _iterator3 = _createForOfIteratorHelper(events),\n          _step3;\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var event = _step3.value;\n            var federatedEvent = _this2.bootstrapEvent(_this2.rootPointerEvent, event, canvas, nativeEvent);\n            _this2.context.eventService.mapEvent(federatedEvent);\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n        _this2.setCursor(_this2.context.eventService.cursor);\n      });\n      renderingService.hooks.pointerUp.tap(EventPlugin.tag, function (nativeEvent) {\n        if (canvas.supportsTouchEvents && nativeEvent.pointerType === 'touch') return;\n\n        // account for element in SVG\n        var $element = _this2.context.contextService.getDomElement();\n        var isNativeEventFromCanvas = _this2.context.eventService.isNativeEventFromCanvas($element, nativeEvent);\n        var outside = !isNativeEventFromCanvas ? 'outside' : '';\n        var normalizedEvents = _this2.normalizeToPointerEvent(nativeEvent, canvas);\n        var _iterator4 = _createForOfIteratorHelper(normalizedEvents),\n          _step4;\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var normalizedEvent = _step4.value;\n            var event = _this2.bootstrapEvent(_this2.rootPointerEvent, normalizedEvent, canvas, nativeEvent);\n            event.type += outside;\n            _this2.context.eventService.mapEvent(event);\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n        _this2.setCursor(_this2.context.eventService.cursor);\n      });\n      renderingService.hooks.pointerMove.tap(EventPlugin.tag, this.onPointerMove);\n      renderingService.hooks.pointerOver.tap(EventPlugin.tag, this.onPointerMove);\n      renderingService.hooks.pointerOut.tap(EventPlugin.tag, this.onPointerMove);\n      renderingService.hooks.click.tap(EventPlugin.tag, this.onClick);\n      renderingService.hooks.pointerCancel.tap(EventPlugin.tag, function (nativeEvent) {\n        var normalizedEvents = _this2.normalizeToPointerEvent(nativeEvent, canvas);\n        var _iterator5 = _createForOfIteratorHelper(normalizedEvents),\n          _step5;\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var normalizedEvent = _step5.value;\n            var event = _this2.bootstrapEvent(_this2.rootPointerEvent, normalizedEvent, canvas, nativeEvent);\n            _this2.context.eventService.mapEvent(event);\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n        _this2.setCursor(_this2.context.eventService.cursor);\n      });\n    }\n  }, {\n    key: \"bootstrapEvent\",\n    value: function bootstrapEvent(event, normalizedEvent, view, nativeEvent) {\n      event.view = view;\n      event.originalEvent = null;\n      event.nativeEvent = nativeEvent;\n      event.pointerId = normalizedEvent.pointerId;\n      event.width = normalizedEvent.width;\n      event.height = normalizedEvent.height;\n      event.isPrimary = normalizedEvent.isPrimary;\n      event.pointerType = normalizedEvent.pointerType;\n      event.pressure = normalizedEvent.pressure;\n      event.tangentialPressure = normalizedEvent.tangentialPressure;\n      event.tiltX = normalizedEvent.tiltX;\n      event.tiltY = normalizedEvent.tiltY;\n      event.twist = normalizedEvent.twist;\n      this.transferMouseData(event, normalizedEvent);\n      var _this$context$eventSe = this.context.eventService.client2Viewport({\n          x: normalizedEvent.clientX,\n          y: normalizedEvent.clientY\n        }),\n        x = _this$context$eventSe.x,\n        y = _this$context$eventSe.y;\n      event.viewport.x = x;\n      event.viewport.y = y;\n      var _this$context$eventSe2 = this.context.eventService.viewport2Canvas(event.viewport),\n        canvasX = _this$context$eventSe2.x,\n        canvasY = _this$context$eventSe2.y;\n      event.canvas.x = canvasX;\n      event.canvas.y = canvasY;\n      event.global.copyFrom(event.canvas);\n      event.offset.copyFrom(event.canvas);\n      event.isTrusted = nativeEvent.isTrusted;\n      if (event.type === 'pointerleave') {\n        event.type = 'pointerout';\n      }\n      if (event.type.startsWith('mouse')) {\n        event.type = event.type.replace('mouse', 'pointer');\n      }\n      if (event.type.startsWith('touch')) {\n        event.type = TOUCH_TO_POINTER[event.type] || event.type;\n      }\n      return event;\n    }\n  }, {\n    key: \"normalizeWheelEvent\",\n    value: function normalizeWheelEvent(nativeEvent) {\n      var event = this.rootWheelEvent;\n      this.transferMouseData(event, nativeEvent);\n      event.deltaMode = nativeEvent.deltaMode;\n      event.deltaX = nativeEvent.deltaX;\n      event.deltaY = nativeEvent.deltaY;\n      event.deltaZ = nativeEvent.deltaZ;\n      var _this$context$eventSe3 = this.context.eventService.client2Viewport({\n          x: nativeEvent.clientX,\n          y: nativeEvent.clientY\n        }),\n        x = _this$context$eventSe3.x,\n        y = _this$context$eventSe3.y;\n      event.viewport.x = x;\n      event.viewport.y = y;\n      var _this$context$eventSe4 = this.context.eventService.viewport2Canvas(event.viewport),\n        canvasX = _this$context$eventSe4.x,\n        canvasY = _this$context$eventSe4.y;\n      event.canvas.x = canvasX;\n      event.canvas.y = canvasY;\n      event.global.copyFrom(event.canvas);\n      event.offset.copyFrom(event.canvas);\n      event.nativeEvent = nativeEvent;\n      event.type = nativeEvent.type;\n      return event;\n    }\n\n    /**\n     * Transfers base & mouse event data from the nativeEvent to the federated event.\n     */\n  }, {\n    key: \"transferMouseData\",\n    value: function transferMouseData(event, nativeEvent) {\n      event.isTrusted = nativeEvent.isTrusted;\n      event.srcElement = nativeEvent.srcElement;\n      event.timeStamp = clock.now();\n      event.type = nativeEvent.type;\n      event.altKey = nativeEvent.altKey;\n      event.metaKey = nativeEvent.metaKey;\n      event.shiftKey = nativeEvent.shiftKey;\n      event.ctrlKey = nativeEvent.ctrlKey;\n      event.button = nativeEvent.button;\n      event.buttons = nativeEvent.buttons;\n      event.client.x = nativeEvent.clientX;\n      event.client.y = nativeEvent.clientY;\n      event.movement.x = nativeEvent.movementX;\n      event.movement.y = nativeEvent.movementY;\n      event.page.x = nativeEvent.pageX;\n      event.page.y = nativeEvent.pageY;\n      event.screen.x = nativeEvent.screenX;\n      event.screen.y = nativeEvent.screenY;\n      event.relatedTarget = null;\n    }\n  }, {\n    key: \"setCursor\",\n    value: function setCursor(cursor) {\n      this.context.contextService.applyCursorStyle(cursor || this.context.config.cursor || 'default');\n    }\n  }, {\n    key: \"normalizeToPointerEvent\",\n    value: function normalizeToPointerEvent(event, canvas) {\n      var normalizedEvents = [];\n      if (canvas.isTouchEvent(event)) {\n        for (var i = 0; i < event.changedTouches.length; i++) {\n          var touch = event.changedTouches[i];\n\n          // use changedTouches instead of touches since touchend has no touches\n          // @see https://stackoverflow.com/a/10079076\n          if (isUndefined(touch.button)) touch.button = 0;\n          if (isUndefined(touch.buttons)) touch.buttons = 1;\n          if (isUndefined(touch.isPrimary)) {\n            touch.isPrimary = event.touches.length === 1 && event.type === 'touchstart';\n          }\n          if (isUndefined(touch.width)) touch.width = touch.radiusX || 1;\n          if (isUndefined(touch.height)) touch.height = touch.radiusY || 1;\n          if (isUndefined(touch.tiltX)) touch.tiltX = 0;\n          if (isUndefined(touch.tiltY)) touch.tiltY = 0;\n          if (isUndefined(touch.pointerType)) touch.pointerType = 'touch';\n          // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Touch/identifier\n          if (isUndefined(touch.pointerId)) touch.pointerId = touch.identifier || 0;\n          if (isUndefined(touch.pressure)) touch.pressure = touch.force || 0.5;\n          if (isUndefined(touch.twist)) touch.twist = 0;\n          if (isUndefined(touch.tangentialPressure)) touch.tangentialPressure = 0;\n          touch.isNormalized = true;\n          touch.type = event.type;\n          normalizedEvents.push(touch);\n        }\n      } else if (canvas.isMouseEvent(event)) {\n        var tempEvent = event;\n        if (isUndefined(tempEvent.isPrimary)) tempEvent.isPrimary = true;\n        if (isUndefined(tempEvent.width)) tempEvent.width = 1;\n        if (isUndefined(tempEvent.height)) tempEvent.height = 1;\n        if (isUndefined(tempEvent.tiltX)) tempEvent.tiltX = 0;\n        if (isUndefined(tempEvent.tiltY)) tempEvent.tiltY = 0;\n        if (isUndefined(tempEvent.pointerType)) tempEvent.pointerType = 'mouse';\n        if (isUndefined(tempEvent.pointerId)) tempEvent.pointerId = MOUSE_POINTER_ID;\n        if (isUndefined(tempEvent.pressure)) tempEvent.pressure = 0.5;\n        if (isUndefined(tempEvent.twist)) tempEvent.twist = 0;\n        if (isUndefined(tempEvent.tangentialPressure)) tempEvent.tangentialPressure = 0;\n        tempEvent.isNormalized = true;\n        normalizedEvents.push(tempEvent);\n      } else {\n        normalizedEvents.push(event);\n      }\n      return normalizedEvents;\n    }\n  }]);\n}();\nEventPlugin.tag = 'Event';\n\n// group is not a 2d shape\nvar shape2D = [Shape.CIRCLE, Shape.ELLIPSE, Shape.IMAGE, Shape.RECT, Shape.LINE, Shape.POLYLINE, Shape.POLYGON, Shape.TEXT, Shape.PATH, Shape.HTML];\nvar FrustumCullingStrategy = /*#__PURE__*/function () {\n  function FrustumCullingStrategy() {\n    _classCallCheck(this, FrustumCullingStrategy);\n  }\n  return _createClass(FrustumCullingStrategy, [{\n    key: \"isVisible\",\n    value: function isVisible(camera, object) {\n      var _object$parentNode;\n      // return true;\n\n      var cullable = object.cullable;\n      if (!cullable.enable) {\n        return true;\n      }\n      var renderBounds = object.getRenderBounds();\n      if (AABB.isEmpty(renderBounds)) {\n        return false;\n      }\n\n      // get VP matrix from camera\n      var frustum = camera.getFrustum();\n      var parentVisibilityPlaneMask = (_object$parentNode = object.parentNode) === null || _object$parentNode === void 0 || (_object$parentNode = _object$parentNode.cullable) === null || _object$parentNode === void 0 ? void 0 : _object$parentNode.visibilityPlaneMask;\n      cullable.visibilityPlaneMask = this.computeVisibilityWithPlaneMask(object, renderBounds, parentVisibilityPlaneMask || Mask.INDETERMINATE, frustum.planes);\n      cullable.visible = cullable.visibilityPlaneMask !== Mask.OUTSIDE;\n      return cullable.visible;\n    }\n\n    /**\n     *\n     * @seeOptimized View Frustum Culling Algorithms for Bounding Boxes\n     * @see https://github.com/antvis/GWebGPUEngine/issues/3\n     *\n     * *  the basic intersection test\n     * *  masking @see https://cesium.com/blog/2015/08/04/fast-hierarchical-culling/\n     * * TODO:  the plane-coherency test\n     * * TODO:  mesh  Babylon.js @see https://doc.babylonjs.com/how_to/optimizing_your_scene#changing-mesh-culling-strategy\n     *\n     * @param aabb aabb\n     * @param parentPlaneMask mask of parent\n     * @param planes planes of frustum\n     */\n  }, {\n    key: \"computeVisibilityWithPlaneMask\",\n    value: function computeVisibilityWithPlaneMask(object, aabb, parentPlaneMask, planes) {\n      if (parentPlaneMask === Mask.OUTSIDE || parentPlaneMask === Mask.INSIDE) {\n        // \n        return parentPlaneMask;\n      }\n\n      // Start with MASK_INSIDE (all zeros) so that after the loop, the return value can be compared with MASK_INSIDE.\n      // (Because if there are fewer than 31 planes, the upper bits wont be changed.)\n      var mask = Mask.INSIDE;\n      var isShape2D = shape2D.indexOf(object.nodeName) > -1;\n\n      // Use viewport culling for 2D shapes\n      // @see https://github.com/antvis/g/issues/914\n      for (var k = 0, len = planes.length; k < len; ++k) {\n        // For k greater than 31 (since 31 is the maximum number of INSIDE/INTERSECTING bits we can store), skip the optimization.\n        var flag = 1 << k;\n        if ((parentPlaneMask & flag) === 0) {\n          // \n          continue;\n        }\n\n        // skip near & far planes when testing 2D shapes\n        if (isShape2D && (k === 4 || k === 5)) {\n          continue;\n        }\n\n        // p-vertex n-vertex <-|plane p-vertex n-vertex\n        //  p-vertex  n-vertex  aabb \n        var _planes$k = planes[k],\n          normal = _planes$k.normal,\n          distance = _planes$k.distance;\n        if (vec3.dot(normal, aabb.getPositiveFarPoint(planes[k])) + distance < 0) {\n          return Mask.OUTSIDE;\n        }\n        if (vec3.dot(normal, aabb.getNegativeFarPoint(planes[k])) + distance < 0) {\n          // 1\n          mask |= flag;\n        }\n      }\n      return mask;\n    }\n  }]);\n}();\n\nvar PrepareRendererPlugin = /*#__PURE__*/function () {\n  function PrepareRendererPlugin() {\n    _classCallCheck(this, PrepareRendererPlugin);\n    this.syncTasks = new Map();\n    this.isFirstTimeRendering = true;\n    this.syncing = false;\n    this.isFirstTimeRenderingFinished = false;\n  }\n  return _createClass(PrepareRendererPlugin, [{\n    key: \"apply\",\n    value: function apply(context) {\n      var _this = this,\n        _runtime$globalThis$r;\n      var renderingService = context.renderingService,\n        renderingContext = context.renderingContext,\n        rBushRoot = context.rBushRoot;\n      var canvas = renderingContext.root.ownerDocument.defaultView;\n      this.rBush = rBushRoot;\n      var handleAttributeChanged = function handleAttributeChanged(e) {\n        var object = e.target;\n        object.renderable.dirty = true;\n        renderingService.dirtify();\n      };\n      var handleBoundsChanged = function handleBoundsChanged(e) {\n        _this.syncTasks.set(e.target, e.detail.affectChildren);\n        renderingService.dirtify();\n      };\n      var handleMounted = function handleMounted(e) {\n        var object = e.target;\n        if (runtime.enableSizeAttenuation) {\n          runtime.styleValueRegistry.updateSizeAttenuation(object, canvas.getCamera().getZoom());\n        }\n      };\n      var handleUnmounted = function handleUnmounted(e) {\n        var object = e.target;\n        var rBushNode = object.rBushNode;\n        if (rBushNode.aabb) {\n          _this.rBush.remove(rBushNode.aabb);\n        }\n        _this.syncTasks[\"delete\"](object);\n        runtime.sceneGraphService.dirtifyToRoot(object);\n        renderingService.dirtify();\n      };\n      renderingService.hooks.init.tap(PrepareRendererPlugin.tag, function () {\n        canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n        canvas.addEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n        canvas.addEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n        canvas.addEventListener(ElementEvent.BOUNDS_CHANGED, handleBoundsChanged);\n      });\n      renderingService.hooks.destroy.tap(PrepareRendererPlugin.tag, function () {\n        canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n        canvas.removeEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n        canvas.removeEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n        canvas.removeEventListener(ElementEvent.BOUNDS_CHANGED, handleBoundsChanged);\n        _this.syncTasks.clear();\n      });\n      var ric = (_runtime$globalThis$r = runtime.globalThis.requestIdleCallback) !== null && _runtime$globalThis$r !== void 0 ? _runtime$globalThis$r : raf.bind(runtime.globalThis);\n      renderingService.hooks.endFrame.tap(PrepareRendererPlugin.tag, function () {\n        if (_this.isFirstTimeRendering) {\n          _this.isFirstTimeRendering = false;\n          _this.syncing = true;\n          ric(function () {\n            _this.syncRTree(true);\n            _this.isFirstTimeRenderingFinished = true;\n          });\n        } else {\n          _this.syncRTree();\n        }\n      });\n    }\n  }, {\n    key: \"syncNode\",\n    value: function syncNode(node) {\n      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!node.isConnected) return;\n      var rBushNode = node.rBushNode;\n\n      // clear dirty node\n      if (rBushNode.aabb) this.rBush.remove(rBushNode.aabb);\n      var renderBounds = node.getRenderBounds();\n      if (renderBounds) {\n        var renderable = node.renderable;\n        if (force) {\n          if (!renderable.dirtyRenderBounds) {\n            renderable.dirtyRenderBounds = new AABB();\n          }\n          // save last dirty aabb\n          renderable.dirtyRenderBounds.update(renderBounds.center, renderBounds.halfExtents);\n        }\n        var _renderBounds$getMin = renderBounds.getMin(),\n          _renderBounds$getMin2 = _slicedToArray(_renderBounds$getMin, 2),\n          minX = _renderBounds$getMin2[0],\n          minY = _renderBounds$getMin2[1];\n        var _renderBounds$getMax = renderBounds.getMax(),\n          _renderBounds$getMax2 = _slicedToArray(_renderBounds$getMax, 2),\n          maxX = _renderBounds$getMax2[0],\n          maxY = _renderBounds$getMax2[1];\n        if (!rBushNode.aabb) {\n          rBushNode.aabb = {};\n        }\n        rBushNode.aabb.displayObject = node;\n        rBushNode.aabb.minX = minX;\n        rBushNode.aabb.minY = minY;\n        rBushNode.aabb.maxX = maxX;\n        rBushNode.aabb.maxY = maxY;\n      }\n      if (rBushNode.aabb) {\n        // TODO: NaN occurs when width/height of Rect is 0\n        if (!isNaN(rBushNode.aabb.maxX) && !isNaN(rBushNode.aabb.maxX) && !isNaN(rBushNode.aabb.minX) && !isNaN(rBushNode.aabb.minY)) {\n          return rBushNode.aabb;\n        }\n      }\n    }\n  }, {\n    key: \"syncRTree\",\n    value: function syncRTree() {\n      var _this2 = this;\n      var force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!force && (this.syncing || this.syncTasks.size === 0)) {\n        return;\n      }\n      this.syncing = true;\n\n      // bounds changed, need re-inserting its children\n      var bulk = [];\n      var synced = new Set();\n      var sync = function sync(node) {\n        if (!synced.has(node) && node.renderable) {\n          var aabb = _this2.syncNode(node, force);\n          if (aabb) {\n            bulk.push(aabb);\n            synced.add(node);\n          }\n        }\n      };\n      this.syncTasks.forEach(function (affectChildren, node) {\n        if (affectChildren) {\n          node.forEach(sync);\n        }\n        var parent = node;\n        while (parent) {\n          sync(parent);\n          parent = parent.parentElement;\n        }\n      });\n\n      // use bulk inserting, which is ~2-3 times faster\n      // @see https://github.com/mourner/rbush#bulk-inserting-data\n      this.rBush.load(bulk);\n      bulk.length = 0;\n      this.syncing = false;\n    }\n  }]);\n}();\nPrepareRendererPlugin.tag = 'Prepare';\n\nfunction isCanvas(value) {\n  return !!value.document;\n}\nvar CanvasEvent = /*#__PURE__*/function (CanvasEvent) {\n  CanvasEvent[\"READY\"] = \"ready\";\n  CanvasEvent[\"BEFORE_RENDER\"] = \"beforerender\";\n  CanvasEvent[\"RERENDER\"] = \"rerender\";\n  CanvasEvent[\"AFTER_RENDER\"] = \"afterrender\";\n  CanvasEvent[\"BEFORE_DESTROY\"] = \"beforedestroy\";\n  CanvasEvent[\"AFTER_DESTROY\"] = \"afterdestroy\";\n  CanvasEvent[\"RESIZE\"] = \"resize\";\n  CanvasEvent[\"DIRTY_RECTANGLE\"] = \"dirtyrectangle\";\n  CanvasEvent[\"RENDERER_CHANGED\"] = \"rendererchanged\";\n  return CanvasEvent;\n}({});\nvar DEFAULT_CAMERA_Z = 500;\nvar DEFAULT_CAMERA_NEAR = 0.1;\nvar DEFAULT_CAMERA_FAR = 1000;\n\n/**\n * reuse custom event preventing from re-create them in every frame\n */\nvar mountedEvent = new CustomEvent(ElementEvent.MOUNTED);\nvar unmountedEvent = new CustomEvent(ElementEvent.UNMOUNTED);\nvar beforeRenderEvent = new CustomEvent(CanvasEvent.BEFORE_RENDER);\nvar rerenderEvent = new CustomEvent(CanvasEvent.RERENDER);\nvar afterRenderEvent = new CustomEvent(CanvasEvent.AFTER_RENDER);\n\n/**\n * can be treated like Window in DOM\n * provide some extra methods like `window`, such as:\n * * `window.requestAnimationFrame`\n * * `window.devicePixelRatio`\n *\n * prototype chains: Canvas(Window) -> EventTarget\n *\n * @docs https://g.antv.antgroup.com/api/canvas/intro\n */\nvar Canvas = /*#__PURE__*/function (_EventTarget) {\n  function Canvas(config) {\n    var _this;\n    _classCallCheck(this, Canvas);\n    _this = _callSuper(this, Canvas);\n    // #region environment\n    /**\n     * window.document\n     */\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element\n     */\n    _this.Element = DisplayObject;\n    _this.inited = false;\n    _this.context = {};\n    var container = config.container,\n      canvas = config.canvas,\n      renderer = config.renderer,\n      width = config.width,\n      height = config.height,\n      background = config.background,\n      cursor = config.cursor,\n      supportsMutipleCanvasesInOneContainer = config.supportsMutipleCanvasesInOneContainer,\n      _config$cleanUpOnDest = config.cleanUpOnDestroy,\n      cleanUpOnDestroy = _config$cleanUpOnDest === void 0 ? true : _config$cleanUpOnDest,\n      offscreenCanvas = config.offscreenCanvas,\n      devicePixelRatio = config.devicePixelRatio,\n      requestAnimationFrame = config.requestAnimationFrame,\n      cancelAnimationFrame = config.cancelAnimationFrame,\n      createImage = config.createImage,\n      supportsTouchEvents = config.supportsTouchEvents,\n      supportsPointerEvents = config.supportsPointerEvents,\n      isTouchEvent = config.isTouchEvent,\n      isMouseEvent = config.isMouseEvent,\n      dblClickSpeed = config.dblClickSpeed;\n    var canvasWidth = width;\n    var canvasHeight = height;\n    var dpr = devicePixelRatio || isBrowser && window.devicePixelRatio || 1;\n    dpr = dpr >= 1 ? Math.ceil(dpr) : 1;\n\n    // use user-defined <canvas> or OffscreenCanvas\n    if (canvas) {\n      // infer width & height with dpr\n      canvasWidth = width || getWidth(canvas) || canvas.width / dpr;\n      canvasHeight = height || getHeight(canvas) || canvas.height / dpr;\n    }\n\n    /**\n     * implements `Window` interface\n     */\n    _this.customElements = new CustomElementRegistry();\n    _this.devicePixelRatio = dpr;\n    _this.requestAnimationFrame = requestAnimationFrame !== null && requestAnimationFrame !== void 0 ? requestAnimationFrame : raf.bind(runtime.globalThis);\n    _this.cancelAnimationFrame = cancelAnimationFrame !== null && cancelAnimationFrame !== void 0 ? cancelAnimationFrame : caf.bind(runtime.globalThis);\n    // the following feature-detect from hammer.js\n    // @see https://github.com/hammerjs/hammer.js/blob/master/src/inputjs/input-consts.js#L5\n    _this.supportsTouchEvents = supportsTouchEvents !== null && supportsTouchEvents !== void 0 ? supportsTouchEvents : 'ontouchstart' in runtime.globalThis;\n    _this.supportsPointerEvents = supportsPointerEvents !== null && supportsPointerEvents !== void 0 ? supportsPointerEvents : !!runtime.globalThis.PointerEvent;\n    _this.isTouchEvent = isTouchEvent !== null && isTouchEvent !== void 0 ? isTouchEvent : function (event) {\n      return _this.supportsTouchEvents && event instanceof runtime.globalThis.TouchEvent;\n    };\n    _this.isMouseEvent = isMouseEvent !== null && isMouseEvent !== void 0 ? isMouseEvent : function (event) {\n      return !runtime.globalThis.MouseEvent || event instanceof runtime.globalThis.MouseEvent && (!_this.supportsPointerEvents || !(event instanceof runtime.globalThis.PointerEvent));\n    };\n\n    // override it in runtime\n    if (offscreenCanvas) {\n      runtime.offscreenCanvas = offscreenCanvas;\n    }\n\n    // create document\n    _this.document = new Document();\n    _this.document.defaultView = _this;\n    if (!supportsMutipleCanvasesInOneContainer) {\n      cleanExistedCanvas(container, _this, cleanUpOnDestroy);\n    }\n    _this.initRenderingContext(_objectSpread(_objectSpread({}, config), {}, {\n      width: canvasWidth,\n      height: canvasHeight,\n      background: background !== null && background !== void 0 ? background : 'transparent',\n      cursor: cursor !== null && cursor !== void 0 ? cursor : 'default',\n      cleanUpOnDestroy: cleanUpOnDestroy,\n      devicePixelRatio: dpr,\n      requestAnimationFrame: _this.requestAnimationFrame,\n      cancelAnimationFrame: _this.cancelAnimationFrame,\n      supportsTouchEvents: _this.supportsTouchEvents,\n      supportsPointerEvents: _this.supportsPointerEvents,\n      isTouchEvent: _this.isTouchEvent,\n      isMouseEvent: _this.isMouseEvent,\n      dblClickSpeed: dblClickSpeed !== null && dblClickSpeed !== void 0 ? dblClickSpeed : 200,\n      createImage: createImage !== null && createImage !== void 0 ? createImage : function () {\n        return new window.Image();\n      }\n    }));\n    _this.initDefaultCamera(canvasWidth, canvasHeight, renderer.clipSpaceNearZ);\n    _this.initRenderer(renderer, true);\n    return _this;\n  }\n  _inherits(Canvas, _EventTarget);\n  return _createClass(Canvas, [{\n    key: \"initRenderingContext\",\n    value: function initRenderingContext(mergedConfig) {\n      this.context.config = mergedConfig;\n\n      // bind rendering context, shared by all renderers\n      this.context.renderingContext = {\n        /**\n         * the root node in scene graph\n         */\n        root: this.document.documentElement,\n        renderListCurrentFrame: [],\n        unculledEntities: [],\n        renderReasons: new Set(),\n        force: false,\n        dirty: false\n      };\n    }\n  }, {\n    key: \"initDefaultCamera\",\n    value: function initDefaultCamera(width, height, clipSpaceNearZ) {\n      var _this2 = this;\n      // set a default ortho camera\n      var camera = new runtime.CameraContribution();\n      camera.clipSpaceNearZ = clipSpaceNearZ;\n      camera.setType(CameraType.EXPLORING, CameraTrackingMode.DEFAULT).setPosition(width / 2, height / 2, DEFAULT_CAMERA_Z).setFocalPoint(width / 2, height / 2, 0).setOrthographic(width / -2, width / 2, height / 2, height / -2, DEFAULT_CAMERA_NEAR, DEFAULT_CAMERA_FAR);\n\n      // keep ref since it will use raf in camera animation\n      camera.canvas = this;\n\n      // redraw when camera changed\n      camera.eventEmitter.on(CameraEvent.UPDATED, function () {\n        _this2.context.renderingContext.renderReasons.add(RenderReason.CAMERA_CHANGED);\n        if (runtime.enableSizeAttenuation && _this2.getConfig().renderer.getConfig().enableSizeAttenuation) {\n          _this2.updateSizeAttenuation();\n        }\n      });\n\n      // bind camera\n      this.context.camera = camera;\n    }\n  }, {\n    key: \"updateSizeAttenuation\",\n    value: function updateSizeAttenuation() {\n      var zoom = this.getCamera().getZoom();\n      this.document.documentElement.forEach(function (node) {\n        runtime.styleValueRegistry.updateSizeAttenuation(node, zoom);\n      });\n    }\n  }, {\n    key: \"getConfig\",\n    value: function getConfig() {\n      return this.context.config;\n    }\n\n    /**\n     * get the root displayObject in scenegraph\n     * @alias this.document.documentElement\n     */\n  }, {\n    key: \"getRoot\",\n    value: function getRoot() {\n      return this.document.documentElement;\n    }\n\n    /**\n     * get the camera of canvas\n     */\n  }, {\n    key: \"getCamera\",\n    value: function getCamera() {\n      return this.context.camera;\n    }\n  }, {\n    key: \"getContextService\",\n    value: function getContextService() {\n      return this.context.contextService;\n    }\n  }, {\n    key: \"getEventService\",\n    value: function getEventService() {\n      return this.context.eventService;\n    }\n  }, {\n    key: \"getRenderingService\",\n    value: function getRenderingService() {\n      return this.context.renderingService;\n    }\n  }, {\n    key: \"getRenderingContext\",\n    value: function getRenderingContext() {\n      return this.context.renderingContext;\n    }\n  }, {\n    key: \"getStats\",\n    value: function getStats() {\n      return this.getRenderingService().getStats();\n    }\n\n    // /**\n    //  * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Window/getComputedStyle\n    //  */\n    // getComputedStyle(node: DisplayObject) {\n    //   return node.computedStyle;\n    // }\n  }, {\n    key: \"ready\",\n    get: function get() {\n      var _this3 = this;\n      if (!this.readyPromise) {\n        this.readyPromise = new Promise(function (resolve) {\n          _this3.resolveReadyPromise = function () {\n            resolve(_this3);\n          };\n        });\n        if (this.inited) {\n          this.resolveReadyPromise();\n        }\n      }\n      return this.readyPromise;\n    }\n\n    /**\n     * @param cleanUp - whether to clean up all the internal services of Canvas\n     * @param skipTriggerEvent - whether to skip trigger destroy event\n     */\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var cleanUp = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var skipTriggerEvent = arguments.length > 1 ? arguments[1] : undefined;\n      if (!skipTriggerEvent) {\n        this.dispatchEvent(new CustomEvent(CanvasEvent.BEFORE_DESTROY));\n      }\n      if (this.frameId) {\n        this.cancelAnimationFrame(this.frameId);\n      }\n\n      // unmount all children\n      var root = this.getRoot();\n      if (cleanUp) {\n        this.unmountChildren(root);\n        // destroy Document\n        this.document.destroy();\n        this.getEventService().destroy();\n      }\n\n      // destroy services\n      this.getRenderingService().destroy();\n      this.getContextService().destroy();\n\n      // clear root after render service destroyed\n      if (this.context.rBushRoot) {\n        // clear rbush\n        this.context.rBushRoot.clear();\n      }\n      if (!skipTriggerEvent) {\n        this.dispatchEvent(new CustomEvent(CanvasEvent.AFTER_DESTROY));\n      }\n      var clearEventRetain = function clearEventRetain(event) {\n        event.currentTarget = null;\n        event.manager = null;\n        event.target = null;\n        event.relatedNode = null;\n      };\n      clearEventRetain(mountedEvent);\n      clearEventRetain(unmountedEvent);\n      clearEventRetain(beforeRenderEvent);\n      clearEventRetain(rerenderEvent);\n      clearEventRetain(afterRenderEvent);\n      clearEventRetain(attrModifiedEvent);\n      clearEventRetain(insertedEvent);\n      clearEventRetain(removedEvent);\n      clearEventRetain(destroyEvent);\n    }\n\n    /**\n     * compatible with G 3.0\n     * @deprecated\n     * @alias resize\n     */\n  }, {\n    key: \"changeSize\",\n    value: function changeSize(width, height) {\n      this.resize(width, height);\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(width, height) {\n      // update canvas' config\n      var canvasConfig = this.context.config;\n      canvasConfig.width = width;\n      canvasConfig.height = height;\n\n      // resize context\n      this.getContextService().resize(width, height);\n\n      // resize camera\n      var camera = this.context.camera;\n      var projectionMode = camera.getProjectionMode();\n      camera.setPosition(width / 2, height / 2, DEFAULT_CAMERA_Z).setFocalPoint(width / 2, height / 2, 0);\n      if (projectionMode === CameraProjectionMode.ORTHOGRAPHIC) {\n        camera.setOrthographic(width / -2, width / 2, height / 2, height / -2, camera.getNear(), camera.getFar());\n      } else {\n        camera.setAspect(width / height);\n      }\n      this.dispatchEvent(new CustomEvent(CanvasEvent.RESIZE, {\n        width: width,\n        height: height\n      }));\n    }\n\n    // proxy to document.documentElement\n  }, {\n    key: \"appendChild\",\n    value: function appendChild(child, index) {\n      return this.document.documentElement.appendChild(child, index);\n    }\n  }, {\n    key: \"insertBefore\",\n    value: function insertBefore(newChild, refChild) {\n      return this.document.documentElement.insertBefore(newChild, refChild);\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(child) {\n      return this.document.documentElement.removeChild(child);\n    }\n\n    /**\n     * Remove all children which can be appended to its original parent later again.\n     */\n  }, {\n    key: \"removeChildren\",\n    value: function removeChildren() {\n      this.document.documentElement.removeChildren();\n    }\n\n    /**\n     * Recursively destroy all children which can not be appended to its original parent later again.\n     * But the canvas remains running which means display objects can be appended later.\n     */\n  }, {\n    key: \"destroyChildren\",\n    value: function destroyChildren() {\n      this.document.documentElement.destroyChildren();\n    }\n  }, {\n    key: \"render\",\n    value: function render(frame) {\n      var _this4 = this;\n      // console.log('render ----------------------');\n      if (frame) {\n        beforeRenderEvent.detail = frame;\n        afterRenderEvent.detail = frame;\n      }\n      this.dispatchEvent(beforeRenderEvent);\n      var renderingService = this.getRenderingService();\n      renderingService.render(this.getConfig(), frame, function () {\n        // trigger actual rerender event\n        // @see https://github.com/antvis/G/issues/1268\n        _this4.dispatchEvent(rerenderEvent);\n      });\n      this.dispatchEvent(afterRenderEvent);\n    }\n  }, {\n    key: \"run\",\n    value: function run() {\n      var _this5 = this;\n      var _tick = function tick(time, frame) {\n        _this5.render(frame);\n        _this5.frameId = _this5.requestAnimationFrame(_tick);\n      };\n      _tick();\n    }\n  }, {\n    key: \"initRenderer\",\n    value: function initRenderer(renderer) {\n      var _this6 = this;\n      var firstContentfullPaint = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!renderer) {\n        throw new Error('Renderer is required.');\n      }\n\n      // reset\n      this.inited = false;\n      this.readyPromise = undefined;\n\n      // FIXME: should re-create here?\n      this.context.rBushRoot = new RBush();\n\n      // reset rendering plugins\n      this.context.renderingPlugins = [];\n      this.context.renderingPlugins.push(new EventPlugin(), new PrepareRendererPlugin(),\n      // new DirtyCheckPlugin(),\n      new CullingPlugin([new FrustumCullingStrategy()]));\n\n      //\n      this.loadRendererContainerModule(renderer);\n\n      // init context service\n      this.context.contextService = new this.context.ContextService(_objectSpread(_objectSpread({}, runtime), this.context));\n\n      // init rendering service\n      this.context.renderingService = new RenderingService(runtime, this.context);\n\n      // init event service\n      this.context.eventService = new EventService(runtime, this.context);\n      this.context.eventService.init();\n      if (this.context.contextService.init) {\n        this.context.contextService.init();\n        this.initRenderingService(renderer, firstContentfullPaint, true);\n      } else {\n        this.context.contextService.initAsync().then(function () {\n          _this6.initRenderingService(renderer, firstContentfullPaint);\n        })[\"catch\"](function (err) {\n          console.error(err);\n        });\n      }\n    }\n  }, {\n    key: \"initRenderingService\",\n    value: function initRenderingService(renderer) {\n      var _this7 = this;\n      var firstContentfullPaint = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var async = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      this.context.renderingService.init(function () {\n        _this7.inited = true;\n        if (firstContentfullPaint) {\n          if (async) {\n            _this7.requestAnimationFrame(function () {\n              _this7.dispatchEvent(new CustomEvent(CanvasEvent.READY));\n            });\n          } else {\n            _this7.dispatchEvent(new CustomEvent(CanvasEvent.READY));\n          }\n        } else {\n          _this7.dispatchEvent(new CustomEvent(CanvasEvent.RENDERER_CHANGED));\n        }\n        if (_this7.readyPromise) {\n          _this7.resolveReadyPromise();\n        }\n        if (!firstContentfullPaint) {\n          _this7.getRoot().forEach(function (node) {\n            var _ref = node,\n              renderable = _ref.renderable;\n            if (renderable) {\n              renderable.renderBoundsDirty = true;\n              renderable.boundsDirty = true;\n              renderable.dirty = true;\n            }\n          });\n        }\n\n        // keep current scenegraph unchanged, just trigger mounted event\n        _this7.mountChildren(_this7.getRoot());\n        if (renderer.getConfig().enableAutoRendering) {\n          _this7.run();\n        }\n      });\n    }\n  }, {\n    key: \"loadRendererContainerModule\",\n    value: function loadRendererContainerModule(renderer) {\n      var _this8 = this;\n      // load other container modules provided by g-canvas/g-svg/g-webgl\n      var plugins = renderer.getPlugins();\n      plugins.forEach(function (plugin) {\n        plugin.context = _this8.context;\n        plugin.init(runtime);\n      });\n    }\n  }, {\n    key: \"setRenderer\",\n    value: function setRenderer(renderer) {\n      // update canvas' config\n      var canvasConfig = this.getConfig();\n      if (canvasConfig.renderer === renderer) {\n        return;\n      }\n      var oldRenderer = canvasConfig.renderer;\n      canvasConfig.renderer = renderer;\n\n      // keep all children undestroyed\n      this.destroy(false, true);\n\n      // destroy all plugins, reverse will mutate origin array\n      _toConsumableArray((oldRenderer === null || oldRenderer === void 0 ? void 0 : oldRenderer.getPlugins()) || []).reverse().forEach(function (plugin) {\n        plugin.destroy(runtime);\n      });\n      this.initRenderer(renderer);\n    }\n  }, {\n    key: \"setCursor\",\n    value: function setCursor(cursor) {\n      var canvasConfig = this.getConfig();\n      canvasConfig.cursor = cursor;\n      this.getContextService().applyCursorStyle(cursor);\n    }\n  }, {\n    key: \"unmountChildren\",\n    value: function unmountChildren(parent) {\n      var _this9 = this;\n      // unmountChildren recursively\n      parent.childNodes.forEach(function (child) {\n        _this9.unmountChildren(child);\n      });\n      if (this.inited) {\n        if (parent.isMutationObserved) {\n          parent.dispatchEvent(unmountedEvent);\n        } else {\n          unmountedEvent.target = parent;\n          this.dispatchEvent(unmountedEvent, true);\n        }\n\n        // skip document.documentElement\n        if (parent !== this.document.documentElement) {\n          parent.ownerDocument = null;\n        }\n        parent.isConnected = false;\n      }\n\n      // trigger after unmounted\n      if (parent.isCustomElement) {\n        if (parent.disconnectedCallback) {\n          parent.disconnectedCallback();\n        }\n      }\n    }\n  }, {\n    key: \"mountChildren\",\n    value: function mountChildren(child) {\n      var _this10 = this;\n      var skipTriggerEvent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : isInFragment(child);\n      if (this.inited) {\n        if (!child.isConnected) {\n          child.ownerDocument = this.document;\n          child.isConnected = true;\n          if (!skipTriggerEvent) {\n            if (child.isMutationObserved) {\n              child.dispatchEvent(mountedEvent);\n            } else {\n              mountedEvent.target = child;\n              this.dispatchEvent(mountedEvent, true);\n            }\n          }\n        }\n      } else {\n        console.warn(\"[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.\", 'appended child: ', child.nodeName);\n      }\n\n      // recursively mount children\n      child.childNodes.forEach(function (c) {\n        _this10.mountChildren(c, skipTriggerEvent);\n      });\n\n      // trigger after mounted\n      if (child.isCustomElement) {\n        if (child.connectedCallback) {\n          child.connectedCallback();\n        }\n      }\n    }\n  }, {\n    key: \"mountFragment\",\n    value: function mountFragment(child) {\n      this.mountChildren(child, false);\n    }\n  }, {\n    key: \"client2Viewport\",\n    value: function client2Viewport(client) {\n      return this.getEventService().client2Viewport(client);\n    }\n  }, {\n    key: \"viewport2Client\",\n    value: function viewport2Client(canvas) {\n      return this.getEventService().viewport2Client(canvas);\n    }\n  }, {\n    key: \"viewport2Canvas\",\n    value: function viewport2Canvas(viewport) {\n      return this.getEventService().viewport2Canvas(viewport);\n    }\n  }, {\n    key: \"canvas2Viewport\",\n    value: function canvas2Viewport(canvas) {\n      return this.getEventService().canvas2Viewport(canvas);\n    }\n\n    /**\n     * @deprecated\n     * @alias client2Viewport\n     */\n  }, {\n    key: \"getPointByClient\",\n    value: function getPointByClient(clientX, clientY) {\n      return this.client2Viewport({\n        x: clientX,\n        y: clientY\n      });\n    }\n\n    /**\n     * @deprecated\n     * @alias viewport2Client\n     */\n  }, {\n    key: \"getClientByPoint\",\n    value: function getClientByPoint(x, y) {\n      return this.viewport2Client({\n        x: x,\n        y: y\n      });\n    }\n  }]);\n}(EventTarget);\n\nexport { AABB, AbstractRenderer, AbstractRendererPlugin, BUILT_IN_PROPERTIES, CSS, CSSGradientValue, CSSKeywordValue, CSSRGB, CSSStyleValue, CSSUnitValue, Camera, CameraEvent, CameraProjectionMode, CameraTrackingMode, CameraType, Canvas, CanvasEvent, Circle, CircleUpdater, ClipSpaceNearZ, CustomElement, CustomElementRegistry, CustomEvent, DefaultSceneGraphSelector, DefaultSceneGraphService, DisplayObject, Document, ERROR_MSG_METHOD_NOT_IMPLEMENTED, Element, ElementEvent, Ellipse, EllipseUpdater, EventService, EventTarget, FederatedEvent, FederatedMouseEvent, FederatedPointerEvent, FederatedWheelEvent, Fragment, Frustum, GradientType, Group, GroupUpdater, HTML, HTMLUpdater, Image, Line, LineUpdater, Mask, MutationEvent, Node, OffscreenCanvasCreator, Path, PathUpdater, Plane, Point, Polygon, Polyline, PolylineUpdater, PropertySyntax, RBush, Rect, RectUpdater, Rectangle, RenderReason, RenderingService, Shape, SortReason, Strategy, Text, TextService, TextUpdater, UnitType, attrModifiedEvent, computeLinearGradient, computeRadialGradient, convertToPath, createVec3, decompose, definedProps, deg2rad, deg2turn, destroyEvent, findClosestClipPathTarget, fromRotationTranslationScale, getAngle, getEuler, getOrCalculatePathTotalLength, grad2deg, insertedEvent, isBrowser, isCSSGradientValue, isCSSRGB, isCanvas, isDisplayObject, isFederatedEvent, isFillOrStrokeAffected, isPattern, mergeColors, parseColor, parseLength, parsePath, parseTransform, parsedTransformToMat4, propertyMetadataCache, rad2deg, removedEvent, resetEntityCounter, runtime, setDOMSize, translatePathToString, turn2deg };\n//# sourceMappingURL=index.esm.js.map\n","import { __assign } from \"tslib\";\nimport { pathLengthFactory } from './path-length-factory';\n/**\n * Returns the shape total length, or the equivalent to `shape.getTotalLength()`.\n *\n * The `normalizePath` version is lighter, faster, more efficient and more accurate\n * with paths that are not `curveArray`.\n */\nexport function getTotalLength(pathInput, options) {\n    return pathLengthFactory(pathInput, undefined, __assign(__assign({}, options), { bbox: false, length: true })).length;\n}\n//# sourceMappingURL=get-total-length.js.map","// reverse CURVE based pathArray segments only\nexport function reverseCurve(pathArray) {\n    var rotatedCurve = pathArray\n        .slice(1)\n        .map(function (x, i, curveOnly) {\n        // @ts-ignore\n        return !i ? pathArray[0].slice(1).concat(x.slice(1)) : curveOnly[i - 1].slice(-2).concat(x.slice(1));\n    })\n        // @ts-ignore\n        .map(function (x) { return x.map(function (y, i) { return x[x.length - i - 2 * (1 - (i % 2))]; }); })\n        .reverse();\n    return [['M'].concat(rotatedCurve[0].slice(0, 2))].concat(rotatedCurve.map(function (x) { return ['C'].concat(x.slice(2)); }));\n}\n//# sourceMappingURL=reverse-curve.js.map","import { distanceSquareRoot } from './distance-square-root';\nfunction getRotations(a) {\n    var segCount = a.length;\n    var pointCount = segCount - 1;\n    return a.map(function (f, idx) {\n        return a.map(function (p, i) {\n            var oldSegIdx = idx + i;\n            var seg;\n            if (i === 0 || (a[oldSegIdx] && a[oldSegIdx][0] === 'M')) {\n                seg = a[oldSegIdx];\n                return ['M'].concat(seg.slice(-2));\n            }\n            if (oldSegIdx >= segCount)\n                oldSegIdx -= pointCount;\n            return a[oldSegIdx];\n        });\n    });\n}\nexport function getRotatedCurve(a, b) {\n    var segCount = a.length - 1;\n    var lineLengths = [];\n    var computedIndex = 0;\n    var sumLensSqrd = 0;\n    var rotations = getRotations(a);\n    rotations.forEach(function (r, i) {\n        a.slice(1).forEach(function (s, j) {\n            // @ts-ignore\n            sumLensSqrd += distanceSquareRoot(a[(i + j) % segCount].slice(-2), b[j % segCount].slice(-2));\n        });\n        lineLengths[i] = sumLensSqrd;\n        sumLensSqrd = 0;\n    });\n    computedIndex = lineLengths.indexOf(Math.min.apply(null, lineLengths));\n    return rotations[computedIndex];\n}\n//# sourceMappingURL=get-rotated-curve.js.map","export function clonePath(path) {\n    return path.map(function (x) { return (Array.isArray(x) ? [].concat(x) : x); });\n}\n//# sourceMappingURL=clone-path.js.map","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import { __spreadArray, __read } from 'tslib';\nimport { isNumberEqual } from '@antv/util';\nimport { vec2 } from 'gl-matrix';\n\nfunction distance(x1, y1, x2, y2) {\n    var dx = x1 - x2;\n    var dy = y1 - y2;\n    return Math.sqrt(dx * dx + dy * dy);\n}\nfunction getBBoxByArray(xArr, yArr) {\n    var minX = Math.min.apply(Math, __spreadArray([], __read(xArr), false));\n    var minY = Math.min.apply(Math, __spreadArray([], __read(yArr), false));\n    var maxX = Math.max.apply(Math, __spreadArray([], __read(xArr), false));\n    var maxY = Math.max.apply(Math, __spreadArray([], __read(yArr), false));\n    return {\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY,\n    };\n}\nfunction piMod(angle) {\n    return (angle + Math.PI * 2) % (Math.PI * 2);\n}\n\nfunction copysign(v1, v2) {\n    var absv = Math.abs(v1);\n    return v2 > 0 ? absv : absv * -1;\n}\nfunction nearestPoint$4(x, y, rx, ry, x0, y0) {\n    var a = rx;\n    var b = ry;\n    // 0\n    if (a === 0 || b === 0) {\n        return {\n            x: x,\n            y: y,\n        };\n    }\n    //  0 0 \n    var relativeX = x0 - x;\n    var relativeY = y0 - y;\n    var px = Math.abs(relativeX);\n    var py = Math.abs(relativeY);\n    var squareA = a * a;\n    var squareB = b * b;\n    // const angle0 = Math.atan2(relativeY, relativeX);\n    var t = Math.PI / 4;\n    var nearestX = 0; // \n    var nearestY = 0;\n    //  4 \n    for (var i = 0; i < 4; i++) {\n        nearestX = a * Math.cos(t);\n        nearestY = b * Math.sin(t);\n        var ex = ((squareA - squareB) * Math.pow(Math.cos(t), 3)) / a;\n        var ey = ((squareB - squareA) * Math.pow(Math.sin(t), 3)) / b;\n        var rx1 = nearestX - ex;\n        var ry1 = nearestY - ey;\n        var qx = px - ex;\n        var qy = py - ey;\n        var r = Math.hypot(ry1, rx1);\n        var q = Math.hypot(qy, qx);\n        var delta_c = r * Math.asin((rx1 * qy - ry1 * qx) / (r * q));\n        var delta_t = delta_c /\n            Math.sqrt(squareA + squareB - nearestX * nearestX - nearestY * nearestY);\n        t += delta_t;\n        t = Math.min(Math.PI / 2, Math.max(0, t));\n    }\n    return {\n        x: x + copysign(nearestX, relativeX),\n        y: y + copysign(nearestY, relativeY),\n    };\n}\n\n//  x\nfunction derivativeXAt(cx, cy, rx, ry, xRotation, startAngle, endAngle, angle) {\n    return (-1 * rx * Math.cos(xRotation) * Math.sin(angle) -\n        ry * Math.sin(xRotation) * Math.cos(angle));\n}\n//  y\nfunction derivativeYAt(cx, cy, rx, ry, xRotation, startAngle, endAngle, angle) {\n    return (-1 * rx * Math.sin(xRotation) * Math.sin(angle) +\n        ry * Math.cos(xRotation) * Math.cos(angle));\n}\n// x \nfunction xExtrema(rx, ry, xRotation) {\n    return Math.atan((-ry / rx) * Math.tan(xRotation));\n}\n// y \nfunction yExtrema(rx, ry, xRotation) {\n    return Math.atan(ry / (rx * Math.tan(xRotation)));\n}\n//  x \nfunction xAt(cx, cy, rx, ry, xRotation, angle) {\n    return (rx * Math.cos(xRotation) * Math.cos(angle) -\n        ry * Math.sin(xRotation) * Math.sin(angle) +\n        cx);\n}\n//  y \nfunction yAt(cx, cy, rx, ry, xRotation, angle) {\n    return (rx * Math.sin(xRotation) * Math.cos(angle) +\n        ry * Math.cos(xRotation) * Math.sin(angle) +\n        cy);\n}\n// \nfunction getAngle(rx, ry, x0, y0) {\n    var angle = Math.atan2(y0 * rx, x0 * ry);\n    //  0 - 2PI \n    return (angle + Math.PI * 2) % (Math.PI * 2);\n}\n// x,y\nfunction getPoint(rx, ry, angle) {\n    return {\n        x: rx * Math.cos(angle),\n        y: ry * Math.sin(angle),\n    };\n}\n// \nfunction rotate(x, y, angle) {\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    return [x * cos - y * sin, x * sin + y * cos];\n}\nfunction box$5(cx, cy, rx, ry, xRotation, startAngle, endAngle) {\n    var xDim = xExtrema(rx, ry, xRotation);\n    var minX = Infinity;\n    var maxX = -Infinity;\n    var xs = [startAngle, endAngle];\n    for (var i = -Math.PI * 2; i <= Math.PI * 2; i += Math.PI) {\n        var xAngle = xDim + i;\n        if (startAngle < endAngle) {\n            if (startAngle < xAngle && xAngle < endAngle) {\n                xs.push(xAngle);\n            }\n        }\n        else {\n            if (endAngle < xAngle && xAngle < startAngle) {\n                xs.push(xAngle);\n            }\n        }\n    }\n    for (var i = 0; i < xs.length; i++) {\n        var x = xAt(cx, cy, rx, ry, xRotation, xs[i]);\n        if (x < minX) {\n            minX = x;\n        }\n        if (x > maxX) {\n            maxX = x;\n        }\n    }\n    var yDim = yExtrema(rx, ry, xRotation);\n    var minY = Infinity;\n    var maxY = -Infinity;\n    var ys = [startAngle, endAngle];\n    for (var i = -Math.PI * 2; i <= Math.PI * 2; i += Math.PI) {\n        var yAngle = yDim + i;\n        if (startAngle < endAngle) {\n            if (startAngle < yAngle && yAngle < endAngle) {\n                ys.push(yAngle);\n            }\n        }\n        else {\n            if (endAngle < yAngle && yAngle < startAngle) {\n                ys.push(yAngle);\n            }\n        }\n    }\n    for (var i = 0; i < ys.length; i++) {\n        var y = yAt(cx, cy, rx, ry, xRotation, ys[i]);\n        if (y < minY) {\n            minY = y;\n        }\n        if (y > maxY) {\n            maxY = y;\n        }\n    }\n    return {\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY,\n    };\n}\nfunction nearestPoint$3(cx, cy, rx, ry, xRotation, startAngle, endAngle, x0, y0) {\n    //  0,0 \n    var relativeVector = rotate(x0 - cx, y0 - cy, -xRotation);\n    var _a = __read(relativeVector, 2), x1 = _a[0], y1 = _a[1];\n    // \n    var relativePoint = nearestPoint$4(0, 0, rx, ry, x1, y1);\n    // \n    var angle = getAngle(rx, ry, relativePoint.x, relativePoint.y);\n    // \n    if (angle < startAngle) {\n        // \n        relativePoint = getPoint(rx, ry, startAngle);\n    }\n    else if (angle > endAngle) {\n        // \n        relativePoint = getPoint(rx, ry, endAngle);\n    }\n    //  xRotation \n    var vector = rotate(relativePoint.x, relativePoint.y, xRotation);\n    return {\n        x: vector[0] + cx,\n        y: vector[1] + cy,\n    };\n}\nfunction tangentAngle$4(cx, cy, rx, ry, xRotation, startAngle, endAngle, t) {\n    var angle = (endAngle - startAngle) * t + startAngle;\n    var dx = derivativeXAt(cx, cy, rx, ry, xRotation, startAngle, endAngle, angle);\n    var dy = derivativeYAt(cx, cy, rx, ry, xRotation, startAngle, endAngle, angle);\n    return piMod(Math.atan2(dy, dx));\n}\n\nvar EPSILON = 0.0001;\n/**\n * \n * @param {number[]} xArr       x \n * @param {number[]} yArr       y \n * @param {number}   x          x\n * @param {number}   y          y\n * @param {Function} tCallback \n */\nfunction nearestPoint$2(xArr, yArr, x, y, tCallback, length) {\n    var t = -1;\n    var d = Infinity;\n    var v0 = [x, y];\n    var segNum = 20;\n    if (length && length > 200) {\n        segNum = length / 10;\n    }\n    var increaseRate = 1 / segNum;\n    var interval = increaseRate / 10;\n    for (var i = 0; i <= segNum; i++) {\n        var _t = i * increaseRate;\n        var v1 = [\n            tCallback.apply(void 0, __spreadArray([], __read(xArr.concat([_t])), false)),\n            tCallback.apply(void 0, __spreadArray([], __read(yArr.concat([_t])), false)),\n        ];\n        var d1 = distance(v0[0], v0[1], v1[0], v1[1]);\n        if (d1 < d) {\n            t = _t;\n            d = d1;\n        }\n    }\n    // \n    if (t === 0) {\n        return {\n            x: xArr[0],\n            y: yArr[0],\n        };\n    }\n    if (t === 1) {\n        var count = xArr.length;\n        return {\n            x: xArr[count - 1],\n            y: yArr[count - 1],\n        };\n    }\n    d = Infinity;\n    for (var i = 0; i < 32; i++) {\n        if (interval < EPSILON) {\n            break;\n        }\n        var prev = t - interval;\n        var next = t + interval;\n        var v1 = [\n            tCallback.apply(void 0, __spreadArray([], __read(xArr.concat([prev])), false)),\n            tCallback.apply(void 0, __spreadArray([], __read(yArr.concat([prev])), false)),\n        ];\n        var d1 = distance(v0[0], v0[1], v1[0], v1[1]);\n        if (prev >= 0 && d1 < d) {\n            t = prev;\n            d = d1;\n        }\n        else {\n            var v2 = [\n                tCallback.apply(void 0, __spreadArray([], __read(xArr.concat([next])), false)),\n                tCallback.apply(void 0, __spreadArray([], __read(yArr.concat([next])), false)),\n            ];\n            var d2 = distance(v0[0], v0[1], v2[0], v2[1]);\n            if (next <= 1 && d2 < d) {\n                t = next;\n                d = d2;\n            }\n            else {\n                interval *= 0.5;\n            }\n        }\n    }\n    return {\n        x: tCallback.apply(void 0, __spreadArray([], __read(xArr.concat([t])), false)),\n        y: tCallback.apply(void 0, __spreadArray([], __read(yArr.concat([t])), false)),\n    };\n}\n//  https://community.khronos.org/t/3d-cubic-bezier-segment-length/62363/2\nfunction snapLength(xArr, yArr) {\n    var totalLength = 0;\n    var count = xArr.length;\n    for (var i = 0; i < count; i++) {\n        var x = xArr[i];\n        var y = yArr[i];\n        var nextX = xArr[(i + 1) % count];\n        var nextY = yArr[(i + 1) % count];\n        totalLength += distance(x, y, nextX, nextY);\n    }\n    return totalLength / 2;\n}\n\nfunction box$4(x1, y1, x2, y2) {\n    return getBBoxByArray([x1, x2], [y1, y2]);\n}\nfunction length$4(x1, y1, x2, y2) {\n    return distance(x1, y1, x2, y2);\n}\nfunction pointAt$3(x1, y1, x2, y2, t) {\n    return {\n        x: (1 - t) * x1 + t * x2,\n        y: (1 - t) * y1 + t * y2,\n    };\n}\nfunction pointDistance$4(x1, y1, x2, y2, x, y) {\n    //  x1, y1  p, p1, p2  a\n    // p1a = p1p.p1p2/|p1p2| * (p1p )\n    var cross = (x2 - x1) * (x - x1) + (y2 - y1) * (y - y1);\n    if (cross < 0) {\n        return distance(x1, y1, x, y);\n    }\n    var lengthSquare = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);\n    if (cross > lengthSquare) {\n        return distance(x2, y2, x, y);\n    }\n    return pointToLine(x1, y1, x2, y2, x, y);\n}\nfunction pointToLine(x1, y1, x2, y2, x, y) {\n    var d = [x2 - x1, y2 - y1];\n    // \n    if (vec2.exactEquals(d, [0, 0])) {\n        return Math.sqrt((x - x1) * (x - x1) + (y - y1) * (y - y1));\n    }\n    var u = [-d[1], d[0]];\n    vec2.normalize(u, u);\n    var a = [x - x1, y - y1];\n    return Math.abs(vec2.dot(a, u));\n}\nfunction tangentAngle$3(x1, y1, x2, y2) {\n    return Math.atan2(y2 - y1, x2 - x1);\n}\n\nfunction cubicAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t; // t * t * t  Math.pow(t, 3) \n    return (onet * onet * onet * p0 +\n        3 * p1 * t * onet * onet +\n        3 * p2 * t * t * onet +\n        p3 * t * t * t);\n}\nfunction derivativeAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return (3 * (onet * onet * (p1 - p0) + 2 * onet * t * (p2 - p1) + t * t * (p3 - p2)));\n}\nfunction extrema$1(p0, p1, p2, p3) {\n    var a = -3 * p0 + 9 * p1 - 9 * p2 + 3 * p3;\n    var b = 6 * p0 - 12 * p1 + 6 * p2;\n    var c = 3 * p1 - 3 * p0;\n    var extremas = [];\n    var t1;\n    var t2;\n    var discSqrt;\n    if (isNumberEqual(a, 0)) {\n        if (!isNumberEqual(b, 0)) {\n            t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                extremas.push(t1);\n            }\n        }\n    }\n    else {\n        var disc = b * b - 4 * a * c;\n        if (isNumberEqual(disc, 0)) {\n            extremas.push(-b / (2 * a));\n        }\n        else if (disc > 0) {\n            discSqrt = Math.sqrt(disc);\n            t1 = (-b + discSqrt) / (2 * a);\n            t2 = (-b - discSqrt) / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                extremas.push(t1);\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                extremas.push(t2);\n            }\n        }\n    }\n    return extremas;\n}\n// \nfunction divideCubic(x1, y1, x2, y2, x3, y3, x4, y4, t) {\n    // \n    var xt = cubicAt(x1, x2, x3, x4, t);\n    var yt = cubicAt(y1, y2, y3, y4, t);\n    // \n    var c1 = pointAt$3(x1, y1, x2, y2, t);\n    var c2 = pointAt$3(x2, y2, x3, y3, t);\n    var c3 = pointAt$3(x3, y3, x4, y4, t);\n    var c12 = pointAt$3(c1.x, c1.y, c2.x, c2.y, t);\n    var c23 = pointAt$3(c2.x, c2.y, c3.x, c3.y, t);\n    return [\n        [x1, y1, c1.x, c1.y, c12.x, c12.y, xt, yt],\n        [xt, yt, c23.x, c23.y, c3.x, c3.y, x4, y4],\n    ];\n}\n// \nfunction cubicLength(x1, y1, x2, y2, x3, y3, x4, y4, iterationCount) {\n    if (iterationCount === 0) {\n        return snapLength([x1, x2, x3, x4], [y1, y2, y3, y4]);\n    }\n    var cubics = divideCubic(x1, y1, x2, y2, x3, y3, x4, y4, 0.5);\n    var left = __spreadArray(__spreadArray([], __read(cubics[0]), false), [iterationCount - 1], false);\n    var right = __spreadArray(__spreadArray([], __read(cubics[1]), false), [iterationCount - 1], false);\n    return cubicLength.apply(void 0, __spreadArray([], __read(left), false)) + cubicLength.apply(void 0, __spreadArray([], __read(right), false));\n}\nfunction box$3(x1, y1, x2, y2, x3, y3, x4, y4) {\n    var xArr = [x1, x4];\n    var yArr = [y1, y4];\n    var xExtrema = extrema$1(x1, x2, x3, x4);\n    var yExtrema = extrema$1(y1, y2, y3, y4);\n    for (var i = 0; i < xExtrema.length; i++) {\n        xArr.push(cubicAt(x1, x2, x3, x4, xExtrema[i]));\n    }\n    for (var i = 0; i < yExtrema.length; i++) {\n        yArr.push(cubicAt(y1, y2, y3, y4, yExtrema[i]));\n    }\n    return getBBoxByArray(xArr, yArr);\n}\nfunction length$3(x1, y1, x2, y2, x3, y3, x4, y4) {\n    //  8 \n    return cubicLength(x1, y1, x2, y2, x3, y3, x4, y4, 3);\n}\nfunction nearestPoint$1(x1, y1, x2, y2, x3, y3, x4, y4, x0, y0, length) {\n    return nearestPoint$2([x1, x2, x3, x4], [y1, y2, y3, y4], x0, y0, cubicAt, length);\n}\nfunction pointDistance$3(x1, y1, x2, y2, x3, y3, x4, y4, x0, y0, length) {\n    var point = nearestPoint$1(x1, y1, x2, y2, x3, y3, x4, y4, x0, y0, length);\n    return distance(point.x, point.y, x0, y0);\n}\nfunction pointAt$2(x1, y1, x2, y2, x3, y3, x4, y4, t) {\n    return {\n        x: cubicAt(x1, x2, x3, x4, t),\n        y: cubicAt(y1, y2, y3, y4, t),\n    };\n}\nfunction tangentAngle$2(x1, y1, x2, y2, x3, y3, x4, y4, t) {\n    var dx = derivativeAt(x1, x2, x3, x4, t);\n    var dy = derivativeAt(y1, y2, y3, y4, t);\n    return piMod(Math.atan2(dy, dx));\n}\n\nfunction analyzePoints(points) {\n    // \n    var totalLength = 0;\n    var segments = [];\n    for (var i = 0; i < points.length - 1; i++) {\n        var from = points[i];\n        var to = points[i + 1];\n        var length_1 = distance(from[0], from[1], to[0], to[1]);\n        var seg = {\n            from: from,\n            to: to,\n            length: length_1,\n        };\n        segments.push(seg);\n        totalLength += length_1;\n    }\n    return { segments: segments, totalLength: totalLength };\n}\nfunction lengthOfSegment(points) {\n    if (points.length < 2) {\n        return 0;\n    }\n    var totalLength = 0;\n    for (var i = 0; i < points.length - 1; i++) {\n        var from = points[i];\n        var to = points[i + 1];\n        totalLength += distance(from[0], from[1], to[0], to[1]);\n    }\n    return totalLength;\n}\n/**\n * \n * @param {array} points \n * @param {number} t  0-1\n * @return {object} \n */\nfunction pointAtSegments(points, t) {\n    // \n    if (t > 1 || t < 0 || points.length < 2) {\n        return null;\n    }\n    var _a = analyzePoints(points), segments = _a.segments, totalLength = _a.totalLength;\n    // \n    if (totalLength === 0) {\n        return {\n            x: points[0][0],\n            y: points[0][1],\n        };\n    }\n    // \n    var startRatio = 0;\n    var point = null;\n    for (var i = 0; i < segments.length; i++) {\n        var seg = segments[i];\n        var from = seg.from, to = seg.to;\n        var currentRatio = seg.length / totalLength;\n        if (t >= startRatio && t <= startRatio + currentRatio) {\n            var localRatio = (t - startRatio) / currentRatio;\n            point = pointAt$3(from[0], from[1], to[0], to[1], localRatio);\n            break;\n        }\n        startRatio += currentRatio;\n    }\n    return point;\n}\n/**\n * \n * @param {array} points \n * @param {number} t  0-1\n */\nfunction angleAtSegments(points, t) {\n    // \n    if (t > 1 || t < 0 || points.length < 2) {\n        return 0;\n    }\n    var _a = analyzePoints(points), segments = _a.segments, totalLength = _a.totalLength;\n    // \n    var startRatio = 0;\n    var angle = 0;\n    for (var i = 0; i < segments.length; i++) {\n        var seg = segments[i];\n        var from = seg.from, to = seg.to;\n        var currentRatio = seg.length / totalLength;\n        if (t >= startRatio && t <= startRatio + currentRatio) {\n            angle = Math.atan2(to[1] - from[1], to[0] - from[0]);\n            break;\n        }\n        startRatio += currentRatio;\n    }\n    return angle;\n}\nfunction distanceAtSegment(points, x, y) {\n    var minDistance = Infinity;\n    for (var i = 0; i < points.length - 1; i++) {\n        var point = points[i];\n        var nextPoint = points[i + 1];\n        var distance_1 = pointDistance$4(point[0], point[1], nextPoint[0], nextPoint[1], x, y);\n        if (distance_1 < minDistance) {\n            minDistance = distance_1;\n        }\n    }\n    return minDistance;\n}\n\nfunction box$2(points) {\n    var xArr = [];\n    var yArr = [];\n    for (var i = 0; i < points.length; i++) {\n        var point = points[i];\n        xArr.push(point[0]);\n        yArr.push(point[1]);\n    }\n    return getBBoxByArray(xArr, yArr);\n}\nfunction length$2(points) {\n    return lengthOfSegment(points);\n}\nfunction pointAt$1(points, t) {\n    return pointAtSegments(points, t);\n}\nfunction pointDistance$2(points, x, y) {\n    return distanceAtSegment(points, x, y);\n}\nfunction tangentAngle$1(points, t) {\n    return angleAtSegments(points, t);\n}\n\nfunction getAllPoints(points) {\n    var tmp = points.slice(0);\n    if (points.length) {\n        tmp.push(points[0]);\n    }\n    return tmp;\n}\nfunction box$1(points) {\n    return box$2(points);\n}\nfunction length$1(points) {\n    return lengthOfSegment(getAllPoints(points));\n}\nfunction pointAt(points, t) {\n    return pointAtSegments(getAllPoints(points), t);\n}\nfunction pointDistance$1(points, x, y) {\n    return distanceAtSegment(getAllPoints(points), x, y);\n}\nfunction tangentAngle(points, t) {\n    return angleAtSegments(getAllPoints(points), t);\n}\n\n// \nfunction quadraticAt(p0, p1, p2, t) {\n    var onet = 1 - t;\n    return onet * onet * p0 + 2 * t * onet * p1 + t * t * p2;\n}\n// \nfunction extrema(p0, p1, p2) {\n    var a = p0 + p2 - 2 * p1;\n    if (isNumberEqual(a, 0)) {\n        return [0.5];\n    }\n    var rst = (p0 - p1) / a;\n    if (rst <= 1 && rst >= 0) {\n        return [rst];\n    }\n    return [];\n}\n// \nfunction divideQuadratic(x1, y1, x2, y2, x3, y3, t) {\n    // \n    var xt = quadraticAt(x1, x2, x3, t);\n    var yt = quadraticAt(y1, y2, y3, t);\n    // \n    var controlPoint1 = pointAt$3(x1, y1, x2, y2, t);\n    // \n    var controlPoint2 = pointAt$3(x2, y2, x3, y3, t);\n    return [\n        [x1, y1, controlPoint1.x, controlPoint1.y, xt, yt],\n        [xt, yt, controlPoint2.x, controlPoint2.y, x3, y3],\n    ];\n}\n// \nfunction quadraticLength(x1, y1, x2, y2, x3, y3, iterationCount) {\n    if (iterationCount === 0) {\n        return ((distance(x1, y1, x2, y2) +\n            distance(x2, y2, x3, y3) +\n            distance(x1, y1, x3, y3)) /\n            2);\n    }\n    var quadratics = divideQuadratic(x1, y1, x2, y2, x3, y3, 0.5);\n    var left = quadratics[0];\n    var right = quadratics[1];\n    left.push(iterationCount - 1);\n    right.push(iterationCount - 1);\n    return quadraticLength.apply(void 0, __spreadArray([], __read(left), false)) + quadraticLength.apply(void 0, __spreadArray([], __read(right), false));\n}\nfunction box(x1, y1, x2, y2, x3, y3) {\n    var xExtrema = extrema(x1, x2, x3)[0];\n    var yExtrema = extrema(y1, y2, y3)[0];\n    //  box \n    var xArr = [x1, x3];\n    var yArr = [y1, y3];\n    if (xExtrema !== undefined) {\n        xArr.push(quadraticAt(x1, x2, x3, xExtrema));\n    }\n    if (yExtrema !== undefined) {\n        yArr.push(quadraticAt(y1, y2, y3, yExtrema));\n    }\n    return getBBoxByArray(xArr, yArr);\n}\nfunction length(x1, y1, x2, y2, x3, y3) {\n    return quadraticLength(x1, y1, x2, y2, x3, y3, 3);\n}\nfunction nearestPoint(x1, y1, x2, y2, x3, y3, x0, y0) {\n    return nearestPoint$2([x1, x2, x3], [y1, y2, y3], x0, y0, quadraticAt);\n}\nfunction pointDistance(x1, y1, x2, y2, x3, y3, x0, y0) {\n    var point = nearestPoint(x1, y1, x2, y2, x3, y3, x0, y0);\n    return distance(point.x, point.y, x0, y0);\n}\n\nexport { box$5 as arcBox, nearestPoint$3 as arcNearestPoint, tangentAngle$4 as arcTangentAngle, box$3 as cubicBox, length$3 as cubicLength, nearestPoint$1 as cubicNearestPoint, pointAt$2 as cubicPointAt, pointDistance$3 as cubicPointDistance, tangentAngle$2 as cubicTangentAngle, distance, box$4 as lineBox, length$4 as lineLength, pointAt$3 as linePointAt, pointDistance$4 as linePointDistance, pointToLine as linePointToLine, tangentAngle$3 as lineTangentAngle, box$1 as polygonBox, length$1 as polygonLength, pointAt as polygonPointAt, pointDistance$1 as polygonPointDistance, tangentAngle as polygonTangentAngle, box$2 as polylineBox, length$2 as polylineLength, pointAt$1 as polylinePointAt, pointDistance$2 as polylinePointDistance, tangentAngle$1 as polylineTangentAngle, box as quadBox, length as quadLength, nearestPoint as quadNearestPoint, pointDistance as quadPointDistance };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-plugin-dragndrop\n * @description A G plugin for Drag n Drop implemented with PointerEvents\n * @version 2.0.30\n * @date 1/2/2025, 2:55:43 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { AbstractRendererPlugin } from '@antv/g-lite';\nimport _regeneratorRuntime from '@babel/runtime/helpers/regeneratorRuntime';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport { distanceSquareRoot } from '@antv/util';\n\nvar DragndropPlugin = /*#__PURE__*/function () {\n  function DragndropPlugin(dragndropPluginOptions) {\n    _classCallCheck(this, DragndropPlugin);\n    this.dragndropPluginOptions = dragndropPluginOptions;\n  }\n  return _createClass(DragndropPlugin, [{\n    key: \"apply\",\n    value: function apply(context) {\n      var _this = this;\n      var renderingService = context.renderingService,\n        renderingContext = context.renderingContext;\n      var document = renderingContext.root.ownerDocument;\n\n      // TODO: should we add an option like `draggable` to Canvas\n      var canvas = document.defaultView;\n      var handlePointerdown = function handlePointerdown(event) {\n        var target = event.target;\n        var isDocument = target === document;\n        var draggableEventTarget = isDocument && _this.dragndropPluginOptions.isDocumentDraggable ? document : target.closest && target.closest('[draggable=true]');\n\n        // `draggable` may be set on ancestor nodes:\n        // @see https://github.com/antvis/G/issues/1088\n        if (draggableEventTarget) {\n          // delay triggering dragstart event\n          var dragstartTriggered = false;\n          var dragstartTimeStamp = event.timeStamp;\n          var dragstartClientCoordinates = [event.clientX, event.clientY];\n          var currentDroppable = null;\n          var lastDragClientCoordinates = [event.clientX, event.clientY];\n          // @ts-ignore\n          // eslint-disable-next-line no-inner-declarations\n          var handlePointermove = /*#__PURE__*/function () {\n            var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event) {\n              var timeElapsed, distanceMoved, point, elementsBelow, elementBelow, droppableBelow;\n              return _regeneratorRuntime().wrap(function _callee$(_context) {\n                while (1) switch (_context.prev = _context.next) {\n                  case 0:\n                    if (dragstartTriggered) {\n                      _context.next = 8;\n                      break;\n                    }\n                    timeElapsed = event.timeStamp - dragstartTimeStamp;\n                    distanceMoved = distanceSquareRoot([event.clientX, event.clientY], dragstartClientCoordinates); // check thresholds\n                    if (!(timeElapsed <= _this.dragndropPluginOptions.dragstartTimeThreshold || distanceMoved <= _this.dragndropPluginOptions.dragstartDistanceThreshold)) {\n                      _context.next = 5;\n                      break;\n                    }\n                    return _context.abrupt(\"return\");\n                  case 5:\n                    // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragstart_event\n                    event.type = 'dragstart';\n                    draggableEventTarget.dispatchEvent(event);\n                    dragstartTriggered = true;\n                  case 8:\n                    // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/drag_event\n                    event.type = 'drag';\n                    // @ts-ignore\n                    event.dx = event.clientX - lastDragClientCoordinates[0];\n                    // @ts-ignore\n                    event.dy = event.clientY - lastDragClientCoordinates[1];\n                    draggableEventTarget.dispatchEvent(event);\n                    lastDragClientCoordinates = [event.clientX, event.clientY];\n                    if (isDocument) {\n                      _context.next = 21;\n                      break;\n                    }\n                    point = _this.dragndropPluginOptions.overlap === 'pointer' ? [event.canvasX, event.canvasY] : target.getBounds().center;\n                    _context.next = 17;\n                    return document.elementsFromPoint(point[0], point[1]);\n                  case 17:\n                    elementsBelow = _context.sent;\n                    // prevent from picking the dragging element\n                    elementBelow = elementsBelow[elementsBelow.indexOf(target) + 1];\n                    droppableBelow = (elementBelow === null || elementBelow === void 0 ? void 0 : elementBelow.closest('[droppable=true]')) || (_this.dragndropPluginOptions.isDocumentDroppable ? document : null);\n                    if (currentDroppable !== droppableBelow) {\n                      if (currentDroppable) {\n                        // null when we were not over a droppable before this event\n                        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragleave_event\n                        event.type = 'dragleave';\n                        event.target = currentDroppable;\n                        currentDroppable.dispatchEvent(event);\n                      }\n                      if (droppableBelow) {\n                        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragleave_event\n                        event.type = 'dragenter';\n                        event.target = droppableBelow;\n                        droppableBelow.dispatchEvent(event);\n                      }\n                      currentDroppable = droppableBelow;\n                      if (currentDroppable) {\n                        // null if we're not coming over a droppable now\n                        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragover_event\n                        event.type = 'dragover';\n                        event.target = currentDroppable;\n                        currentDroppable.dispatchEvent(event);\n                      }\n                    }\n                  case 21:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }, _callee);\n            }));\n            return function handlePointermove(_x) {\n              return _ref.apply(this, arguments);\n            };\n          }();\n          canvas.addEventListener('pointermove', handlePointermove);\n          var stopDragging = function stopDragging(originalPointerUpEvent) {\n            if (dragstartTriggered) {\n              // prevent click event being triggerd\n              // @see https://github.com/antvis/G/issues/1091\n              originalPointerUpEvent.detail = {\n                preventClick: true\n              };\n\n              // clone event first\n              var _event = originalPointerUpEvent.clone();\n\n              // drop should fire before dragend\n              // @see https://javascript.tutorialink.com/is-there-a-defined-ordering-between-dragend-and-drop-events/\n\n              if (currentDroppable) {\n                // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/drop_event\n                _event.type = 'drop';\n                _event.target = currentDroppable;\n                currentDroppable.dispatchEvent(_event);\n              }\n\n              // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragend_event\n              _event.type = 'dragend';\n              draggableEventTarget.dispatchEvent(_event);\n              dragstartTriggered = false;\n            }\n            canvas.removeEventListener('pointermove', handlePointermove);\n          };\n          target.addEventListener('pointerup', stopDragging, {\n            once: true\n          });\n          target.addEventListener('pointerupoutside', stopDragging, {\n            once: true\n          });\n        }\n      };\n      renderingService.hooks.init.tap(DragndropPlugin.tag, function () {\n        canvas.addEventListener('pointerdown', handlePointerdown);\n      });\n      renderingService.hooks.destroy.tap(DragndropPlugin.tag, function () {\n        canvas.removeEventListener('pointerdown', handlePointerdown);\n      });\n    }\n  }]);\n}();\nDragndropPlugin.tag = 'Dragndrop';\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Plugin);\n    _this = _callSuper(this, Plugin);\n    _this.name = 'dragndrop';\n    _this.options = options;\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init() {\n      this.addRenderingPlugin(new DragndropPlugin(_objectSpread({\n        overlap: 'pointer',\n        isDocumentDraggable: false,\n        isDocumentDroppable: false,\n        dragstartDistanceThreshold: 0,\n        dragstartTimeThreshold: 0\n      }, this.options)));\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeAllRenderingPlugins();\n    }\n  }, {\n    key: \"setOptions\",\n    value: function setOptions(options) {\n      Object.assign(this.plugins[0].dragndropPluginOptions, options);\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { Plugin };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-camera-api\n * @description A simple implementation of Camera API.\n * @version 2.0.33\n * @date 1/2/2025, 2:54:38 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport { getAngle, CameraType, deg2rad, createVec3, runtime, Camera } from '@antv/g-lite';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { isString, isNumber } from '@antv/util';\nimport { quat, mat4, vec3 } from 'gl-matrix';\n\n/**\n * Provides camera action & animation.\n */\nvar AdvancedCamera = /*#__PURE__*/function (_Camera) {\n  function AdvancedCamera() {\n    var _this;\n    _classCallCheck(this, AdvancedCamera);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, AdvancedCamera, [].concat(args));\n    /**\n     * switch between multiple landmarks\n     */\n    _this.landmarks = [];\n    return _this;\n  }\n  _inherits(AdvancedCamera, _Camera);\n  return _createClass(AdvancedCamera, [{\n    key: \"rotate\",\n    value:\n    /**\n     * Changes the azimuth and elevation with respect to the current camera axes\n     * @param {Number} azimuth the relative azimuth\n     * @param {Number} elevation the relative elevation\n     * @param {Number} roll the relative roll\n     */\n    function rotate(azimuth, elevation, roll) {\n      this.relElevation = getAngle(elevation);\n      this.relAzimuth = getAngle(azimuth);\n      this.relRoll = getAngle(roll);\n      this.elevation += this.relElevation;\n      this.azimuth += this.relAzimuth;\n      this.roll += this.relRoll;\n      if (this.type === CameraType.EXPLORING) {\n        var rotX = quat.setAxisAngle(quat.create(), [1, 0, 0], deg2rad((this.rotateWorld ? 1 : -1) * this.relElevation));\n        var rotY = quat.setAxisAngle(quat.create(), [0, 1, 0], deg2rad((this.rotateWorld ? 1 : -1) * this.relAzimuth));\n        var rotZ = quat.setAxisAngle(quat.create(), [0, 0, 1], deg2rad(this.relRoll));\n        var rotQ = quat.multiply(quat.create(), rotY, rotX);\n        rotQ = quat.multiply(quat.create(), rotQ, rotZ);\n        var rotMatrix = mat4.fromQuat(mat4.create(), rotQ);\n        mat4.translate(this.matrix, this.matrix, [0, 0, -this.distance]);\n        mat4.multiply(this.matrix, this.matrix, rotMatrix);\n        mat4.translate(this.matrix, this.matrix, [0, 0, this.distance]);\n      } else {\n        if (Math.abs(this.elevation) > 90) {\n          return this;\n        }\n        this.computeMatrix();\n      }\n      this._getAxes();\n      if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n        this._getPosition();\n      } else if (this.type === CameraType.TRACKING) {\n        this._getFocalPoint();\n      }\n      this._update();\n      return this;\n    }\n\n    /**\n     * (right) & (up)\n     */\n  }, {\n    key: \"pan\",\n    value: function pan(tx, ty) {\n      var coords = createVec3(tx, ty, 0);\n      var pos = vec3.clone(this.position);\n      vec3.add(pos, pos, vec3.scale(vec3.create(), this.right, coords[0]));\n      vec3.add(pos, pos, vec3.scale(vec3.create(), this.up, coords[1]));\n      this._setPosition(pos);\n      this.triggerUpdate();\n      return this;\n    }\n\n    /**\n     *  n \n     */\n  }, {\n    key: \"dolly\",\n    value: function dolly(value) {\n      var n = this.forward;\n      var pos = vec3.clone(this.position);\n      var step = value * this.dollyingStep;\n      var updatedDistance = this.distance + value * this.dollyingStep;\n\n      // \n      step = Math.max(Math.min(updatedDistance, this.maxDistance), this.minDistance) - this.distance;\n      pos[0] += step * n[0];\n      pos[1] += step * n[1];\n      pos[2] += step * n[2];\n      this._setPosition(pos);\n      if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n        // \n        this._getDistance();\n      } else if (this.type === CameraType.TRACKING) {\n        // \n        vec3.add(this.focalPoint, pos, this.distanceVector);\n      }\n      this.triggerUpdate();\n      return this;\n    }\n  }, {\n    key: \"cancelLandmarkAnimation\",\n    value: function cancelLandmarkAnimation() {\n      if (this.landmarkAnimationID !== undefined) {\n        this.canvas.cancelAnimationFrame(this.landmarkAnimationID);\n      }\n    }\n  }, {\n    key: \"createLandmark\",\n    value: function createLandmark(name) {\n      var _position$, _position$2, _focalPoint$, _focalPoint$2;\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var _params$position = params.position,\n        position = _params$position === void 0 ? this.position : _params$position,\n        _params$focalPoint = params.focalPoint,\n        focalPoint = _params$focalPoint === void 0 ? this.focalPoint : _params$focalPoint,\n        roll = params.roll,\n        zoom = params.zoom;\n      var camera = new runtime.CameraContribution();\n      camera.setType(this.type, undefined);\n      camera.setPosition(position[0], (_position$ = position[1]) !== null && _position$ !== void 0 ? _position$ : this.position[1], (_position$2 = position[2]) !== null && _position$2 !== void 0 ? _position$2 : this.position[2]);\n      camera.setFocalPoint(focalPoint[0], (_focalPoint$ = focalPoint[1]) !== null && _focalPoint$ !== void 0 ? _focalPoint$ : this.focalPoint[1], (_focalPoint$2 = focalPoint[2]) !== null && _focalPoint$2 !== void 0 ? _focalPoint$2 : this.focalPoint[2]);\n      camera.setRoll(roll !== null && roll !== void 0 ? roll : this.roll);\n      camera.setZoom(zoom !== null && zoom !== void 0 ? zoom : this.zoom);\n      var landmark = {\n        name: name,\n        matrix: mat4.clone(camera.getWorldTransform()),\n        right: vec3.clone(camera.right),\n        up: vec3.clone(camera.up),\n        forward: vec3.clone(camera.forward),\n        position: vec3.clone(camera.getPosition()),\n        focalPoint: vec3.clone(camera.getFocalPoint()),\n        distanceVector: vec3.clone(camera.getDistanceVector()),\n        distance: camera.getDistance(),\n        dollyingStep: camera.getDollyingStep(),\n        azimuth: camera.getAzimuth(),\n        elevation: camera.getElevation(),\n        roll: camera.getRoll(),\n        relAzimuth: camera.relAzimuth,\n        relElevation: camera.relElevation,\n        relRoll: camera.relRoll,\n        zoom: camera.getZoom()\n      };\n      this.landmarks.push(landmark);\n      return landmark;\n    }\n  }, {\n    key: \"gotoLandmark\",\n    value: function gotoLandmark(name) {\n      var _this2 = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var landmark = isString(name) ? this.landmarks.find(function (l) {\n        return l.name === name;\n      }) : name;\n      if (landmark) {\n        var _ref = isNumber(options) ? {\n            duration: options\n          } : options,\n          _ref$easing = _ref.easing,\n          easing = _ref$easing === void 0 ? 'linear' : _ref$easing,\n          _ref$duration = _ref.duration,\n          duration = _ref$duration === void 0 ? 100 : _ref$duration,\n          _ref$easingFunction = _ref.easingFunction,\n          easingFunction = _ref$easingFunction === void 0 ? undefined : _ref$easingFunction,\n          _ref$onfinish = _ref.onfinish,\n          onfinish = _ref$onfinish === void 0 ? undefined : _ref$onfinish,\n          _ref$onframe = _ref.onframe,\n          onframe = _ref$onframe === void 0 ? undefined : _ref$onframe;\n        var epsilon = 0.01;\n\n        // cancel ongoing animation\n        this.cancelLandmarkAnimation();\n        var destPosition = landmark.position;\n        var destFocalPoint = landmark.focalPoint;\n        var destZoom = landmark.zoom;\n        var destRoll = landmark.roll;\n        var easingFunc = easingFunction || runtime.EasingFunction(easing);\n        var timeStart;\n        var end = function end() {\n          _this2.setFocalPoint(destFocalPoint);\n          _this2.setPosition(destPosition);\n          _this2.setRoll(destRoll);\n          _this2.setZoom(destZoom);\n          _this2.computeMatrix();\n          _this2.triggerUpdate();\n          onfinish === null || onfinish === void 0 || onfinish();\n        };\n        if (duration === 0) return end();\n        var _animate = function animate(timestamp) {\n          if (timeStart === undefined) {\n            timeStart = timestamp;\n          }\n          var elapsed = timestamp - timeStart;\n          if (elapsed >= duration) {\n            end();\n            return;\n          }\n          // use the same ease function in animation system\n          var t = easingFunc(elapsed / duration);\n          var interFocalPoint = vec3.create();\n          var interPosition = vec3.create();\n          var interZoom = 1;\n          var interRoll = 0;\n          vec3.lerp(interFocalPoint, _this2.focalPoint, destFocalPoint, t);\n          vec3.lerp(interPosition, _this2.position, destPosition, t);\n          interRoll = _this2.roll * (1 - t) + destRoll * t;\n          interZoom = _this2.zoom * (1 - t) + destZoom * t;\n          _this2.setFocalPoint(interFocalPoint);\n          _this2.setPosition(interPosition);\n          _this2.setRoll(interRoll);\n          _this2.setZoom(interZoom);\n          var dist = vec3.dist(interFocalPoint, destFocalPoint) + vec3.dist(interPosition, destPosition);\n          if (dist <= epsilon && destZoom === undefined && destRoll === undefined) {\n            return end();\n          }\n          _this2.computeMatrix();\n          _this2.triggerUpdate();\n          if (elapsed < duration) {\n            onframe === null || onframe === void 0 || onframe(t);\n            _this2.landmarkAnimationID = _this2.canvas.requestAnimationFrame(_animate);\n          }\n        };\n        this.canvas.requestAnimationFrame(_animate);\n      }\n    }\n\n    /**\n     * Sets the camera to a distance such that the area covered by the bounding box is viewed.\n     */\n    // shot(displayObject: DisplayObject) {\n    //   const aabb = displayObject.getBounds();\n\n    //   if (!AABB.isEmpty(aabb)) {\n    //     this.setElevation(0);\n    //     this.setAzimuth(0);\n    //     this.setRoll(0);\n\n    //     const { halfExtents, center } = aabb;\n    //     const maxDim = Math.max(halfExtents[0] * 2, halfExtents[1] * 2);\n\n    //     const cc = center.map((c: number) => Math.round(c * 1000) / 1000) as [number, number, number];\n\n    //     if (maxDim !== 0) {\n    //       const d = (1.5 * maxDim) / Math.tan(this.fov * DEG_2_RAD);\n    //       this.setPosition([cc[0], cc[1], cc[2] + d]);\n    //     }\n\n    //     this.setFocalPoint(cc);\n    //   }\n    // }\n  }]);\n}(Camera);\n\nruntime.CameraContribution = AdvancedCamera;\n\nexport { AdvancedCamera };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-dom-mutation-observer-api\n * @description A simple implementation of DOM MutationObserver API.\n * @version 2.0.30\n * @date 1/2/2025, 2:54:52 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport { ElementEvent, MutationEvent, runtime } from '@antv/g-lite';\n\nvar MutationRecord = /*#__PURE__*/function () {\n  function MutationRecord(type, target) {\n    _classCallCheck(this, MutationRecord);\n    this.addedNodes = [];\n    this.attributeName = null;\n    this.attributeNamespace = null;\n    this.nextSibling = null;\n    this.oldValue = null;\n    this.previousSibling = null;\n    this.removedNodes = [];\n    this.type = type;\n    this.target = target;\n  }\n  return _createClass(MutationRecord, null, [{\n    key: \"copy\",\n    value: function copy(original) {\n      var record = new MutationRecord(original.type, original.target);\n      record.addedNodes = original.addedNodes.slice();\n      record.removedNodes = original.removedNodes.slice();\n      record.previousSibling = original.previousSibling;\n      record.nextSibling = original.nextSibling;\n      record.attributeName = original.attributeName;\n      record.attributeNamespace = original.attributeNamespace;\n      record.oldValue = original.oldValue;\n      return record;\n    }\n  }]);\n}();\n\nvar uidCounter = 0;\nvar registrationsTable = new WeakMap();\nvar Registration = /*#__PURE__*/function () {\n  function Registration(observer, target, options) {\n    _classCallCheck(this, Registration);\n    this.transientObservedNodes = [];\n    this.observer = observer;\n    this.target = target;\n    this.options = options;\n  }\n  return _createClass(Registration, [{\n    key: \"enqueue\",\n    value: function enqueue(record) {\n      var records = this.observer.records;\n      var length = records.length;\n\n      // There are cases where we replace the last record with the new record.\n      // For example if the record represents the same mutation we need to use\n      // the one with the oldValue. If we get same record (this can happen as we\n      // walk up the tree) we ignore the new record.\n      if (records.length > 0) {\n        var lastRecord = records[length - 1];\n        var recordToReplaceLast = selectRecord(lastRecord, record);\n        if (recordToReplaceLast) {\n          records[length - 1] = recordToReplaceLast;\n          return;\n        }\n      } else {\n        scheduleCallback(this.observer);\n      }\n      records[length] = record;\n    }\n  }, {\n    key: \"addListeners\",\n    value: function addListeners() {\n      this.addListeners_(this.target);\n    }\n  }, {\n    key: \"addListeners_\",\n    value: function addListeners_(node) {\n      var options = this.options;\n      if (options.attributes) node.addEventListener(ElementEvent.ATTR_MODIFIED, this, true);\n\n      // if (options.characterData) node.addEventListener('DOMCharacterDataModified', this, true);\n\n      if (options.childList) node.addEventListener(ElementEvent.INSERTED, this, true);\n      if (options.childList || options.subtree) node.addEventListener(ElementEvent.REMOVED, this, true);\n    }\n  }, {\n    key: \"removeListeners\",\n    value: function removeListeners() {\n      this.removeListeners_(this.target);\n    }\n  }, {\n    key: \"removeListeners_\",\n    value: function removeListeners_(node) {\n      var options = this.options;\n      if (options.attributes) node.removeEventListener(ElementEvent.ATTR_MODIFIED, this, true);\n\n      // if (options.characterData) node.removeEventListener('DOMCharacterDataModified', this, true);\n\n      if (options.childList) node.removeEventListener(ElementEvent.INSERTED, this, true);\n      if (options.childList || options.subtree) node.removeEventListener(ElementEvent.REMOVED, this, true);\n    }\n\n    /**\n     * Adds a transient observer on node. The transient observer gets removed\n     * next time we deliver the change records.\n     */\n    // addTransientObserver(node: IElement) {\n    //   // Don't add transient observers on the target itself. We already have all\n    //   // the required listeners set up on the target.\n    //   if (node === this.target) return;\n\n    //   this.addListeners_(node);\n    //   this.transientObservedNodes.push(node);\n    //   let registrations = registrationsTable.get(node);\n    //   if (!registrations) registrationsTable.set(node, (registrations = []));\n\n    //   // We know that registrations does not contain this because we already\n    //   // checked if node === this.target.\n    //   registrations.push(this);\n    // }\n  }, {\n    key: \"removeTransientObservers\",\n    value: function removeTransientObservers() {\n      var transientObservedNodes = this.transientObservedNodes;\n      this.transientObservedNodes = [];\n      transientObservedNodes.forEach(function (node) {\n        // Transient observers are never added to the target.\n        this.removeListeners_(node);\n        var registrations = registrationsTable.get(node);\n        for (var i = 0; i < registrations.length; i++) {\n          if (registrations[i] === this) {\n            registrations.splice(i, 1);\n            // Each node can only have one registered observer associated with\n            // this observer.\n            break;\n          }\n        }\n      }, this);\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(e) {\n      // Stop propagation since we are managing the propagation manually.\n      // This means that other mutation events on the page will not work\n      // correctly but that is by design.\n      e.stopImmediatePropagation();\n      var record;\n      var target;\n      switch (e.type) {\n        case ElementEvent.ATTR_MODIFIED:\n          // http://dom.spec.whatwg.org/#concept-mo-queue-attributes\n\n          var name = e.attrName;\n          // @ts-ignore\n          var namespace = e.relatedNode.namespaceURI;\n          target = e.target;\n\n          // 1.\n          record = getRecord('attributes', target);\n          record.attributeName = name;\n          record.attributeNamespace = namespace;\n\n          // 2.\n          var oldValue = e.attrChange === MutationEvent.ADDITION ? null : e.prevValue;\n          forEachAncestorAndObserverEnqueueRecord(target, function (options) {\n            // 3.1, 4.2\n            if (!options.attributes) return;\n\n            // 3.2, 4.3\n            if (options.attributeFilter && options.attributeFilter.length && options.attributeFilter.indexOf(name) === -1 && options.attributeFilter.indexOf(namespace) === -1) {\n              return;\n            }\n            // 3.3, 4.4\n            if (options.attributeOldValue) return getRecordWithOldValue(oldValue);\n\n            // 3.4, 4.5\n            return record;\n          });\n          break;\n\n        // case 'DOMCharacterDataModified':\n        //   // http://dom.spec.whatwg.org/#concept-mo-queue-characterdata\n        //   var target = e.target;\n\n        //   // 1.\n        //   var record = getRecord('characterData', target);\n\n        //   // 2.\n        //   var oldValue = e.prevValue;\n\n        //   forEachAncestorAndObserverEnqueueRecord(target, function(options) {\n        //     // 3.1, 4.2\n        //     if (!options.characterData)\n        //       return;\n\n        //     // 3.2, 4.3\n        //     if (options.characterDataOldValue)\n        //       return getRecordWithOldValue(oldValue);\n\n        //     // 3.3, 4.4\n        //     return record;\n        //   });\n\n        //   break;\n\n        case ElementEvent.REMOVED:\n        // this.addTransientObserver(e.target as IElement);\n        // Fall through.\n        case ElementEvent.INSERTED:\n          // http://dom.spec.whatwg.org/#concept-mo-queue-childlist\n          target = e.relatedNode;\n          var changedNode = e.target;\n          var addedNodes;\n          var removedNodes;\n          if (e.type === ElementEvent.INSERTED) {\n            addedNodes = [changedNode];\n            removedNodes = [];\n          } else {\n            addedNodes = [];\n            removedNodes = [changedNode];\n          }\n          var previousSibling = changedNode.previousSibling;\n          var nextSibling = changedNode.nextSibling;\n\n          // 1.\n          record = getRecord('childList', target);\n          record.addedNodes = addedNodes;\n          record.removedNodes = removedNodes;\n          record.previousSibling = previousSibling;\n          record.nextSibling = nextSibling;\n          forEachAncestorAndObserverEnqueueRecord(target, function (options) {\n            // 2.1, 3.2\n            if (!options.childList) return;\n\n            // 2.2, 3.3\n            return record;\n          });\n      }\n      clearRecords();\n    }\n  }]);\n}();\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n * @see https://github.com/googlearchive/MutationObservers/blob/master/MutationObserver.js\n */\nvar MutationObserver = /*#__PURE__*/function () {\n  function MutationObserver(callback) {\n    _classCallCheck(this, MutationObserver);\n    this.nodes = [];\n    this.records = [];\n    this.uid = uidCounter++;\n    this.callback = callback;\n  }\n  return _createClass(MutationObserver, [{\n    key: \"observe\",\n    value: function observe(target, options) {\n      // 1.1\n      if (!options.childList && !options.attributes && !options.characterData ||\n      // 1.2\n      options.attributeOldValue && !options.attributes ||\n      // 1.3\n      options.attributeFilter && options.attributeFilter.length && !options.attributes ||\n      // 1.4\n      options.characterDataOldValue && !options.characterData) {\n        throw new SyntaxError();\n      }\n      var registrations = registrationsTable.get(target);\n      if (!registrations) registrationsTable.set(target, registrations = []);\n\n      // 2\n      // If target's list of registered observers already includes a registered\n      // observer associated with the context object, replace that registered\n      // observer's options with options.\n      var registration;\n      for (var i = 0; i < registrations.length; i++) {\n        if (registrations[i].observer === this) {\n          registration = registrations[i];\n          registration.removeListeners();\n          registration.options = options;\n          break;\n        }\n      }\n\n      // 3.\n      // Otherwise, add a new registered observer to target's list of registered\n      // observers with the context object as the observer and options as the\n      // options, and add target to context object's list of nodes on which it\n      // is registered.\n      if (!registration) {\n        registration = new Registration(this, target, options);\n        registrations.push(registration);\n        this.nodes.push(target);\n      }\n      registration.addListeners();\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      var _this = this;\n      this.nodes.forEach(function (node) {\n        var registrations = registrationsTable.get(node);\n        for (var i = 0; i < registrations.length; i++) {\n          var registration = registrations[i];\n          if (registration.observer === _this) {\n            registration.removeListeners();\n            registrations.splice(i, 1);\n            // Each node can only have one registered observer associated with\n            // this observer.\n            break;\n          }\n        }\n      }, this);\n      this.records = [];\n    }\n  }, {\n    key: \"takeRecords\",\n    value: function takeRecords() {\n      var copyOfRecords = this.records;\n      this.records = [];\n      return copyOfRecords;\n    }\n  }]);\n}();\n\n// We keep track of the two (possibly one) records used in a single mutation.\nvar currentRecord;\nvar recordWithOldValue;\n\n/**\n * Creates a record without |oldValue| and caches it as |currentRecord| for\n * later use.\n */\nfunction getRecord(type, target) {\n  return currentRecord = new MutationRecord(type, target);\n}\n\n/**\n * Gets or creates a record with |oldValue| based in the |currentRecord|\n */\nfunction getRecordWithOldValue(oldValue) {\n  if (recordWithOldValue) return recordWithOldValue;\n  recordWithOldValue = MutationRecord.copy(currentRecord);\n  recordWithOldValue.oldValue = oldValue;\n  return recordWithOldValue;\n}\nfunction clearRecords() {\n  currentRecord = recordWithOldValue = undefined;\n}\n\n/**\n * Whether the record represents a record from the current\n * mutation event.\n */\nfunction recordRepresentsCurrentMutation(record) {\n  return record === recordWithOldValue || record === currentRecord;\n}\n\n/**\n * Selects which record, if any, to replace the last record in the queue.\n * This returns |null| if no record should be replaced.\n */\nfunction selectRecord(lastRecord, newRecord) {\n  if (lastRecord === newRecord) return lastRecord;\n\n  // Check if the the record we are adding represents the same record. If\n  // so, we keep the one with the oldValue in it.\n  if (recordWithOldValue && recordRepresentsCurrentMutation(lastRecord)) return recordWithOldValue;\n  return null;\n}\nfunction removeTransientObserversFor(observer) {\n  observer.nodes.forEach(function (node) {\n    var registrations = registrationsTable.get(node);\n    if (!registrations) return;\n    registrations.forEach(function (registration) {\n      if (registration.observer === observer) registration.removeTransientObservers();\n    });\n  });\n}\n\n/**\n * This function is used for the \"For each registered observer observer (with\n * observer's options as options) in target's list of registered observers,\n * run these substeps:\" and the \"For each ancestor ancestor of target, and for\n * each registered observer observer (with options options) in ancestor's list\n * of registered observers, run these substeps:\" part of the algorithms. The\n * |options.subtree| is checked to ensure that the callback is called\n * correctly.\n *\n * @param {Node} target\n * @param {function(MutationObserverInit):MutationRecord} callback\n */\nfunction forEachAncestorAndObserverEnqueueRecord(target, callback) {\n  for (var node = target; node; node = node.parentNode) {\n    var registrations = registrationsTable.get(node);\n    if (registrations) {\n      for (var j = 0; j < registrations.length; j++) {\n        var registration = registrations[j];\n        var _options = registration.options;\n\n        // Only target ignores subtree.\n        if (node !== target && !_options.subtree) continue;\n        var record = callback(_options);\n        if (record) registration.enqueue(record);\n      }\n    }\n  }\n}\n\n// This is used to ensure that we never schedule 2 callas to setImmediate\nvar isScheduled = false;\n\n// Keep track of observers that needs to be notified next time.\nvar scheduledObservers = [];\n\n/**\n * Schedules |dispatchCallback| to be called in the future.\n */\nfunction scheduleCallback(observer) {\n  scheduledObservers.push(observer);\n  if (!isScheduled) {\n    isScheduled = true;\n    // setImmediate(dispatchCallbacks);\n    if (typeof runtime.globalThis !== 'undefined') {\n      runtime.globalThis.setTimeout(dispatchCallbacks);\n    } else {\n      dispatchCallbacks();\n    }\n  }\n}\nfunction dispatchCallbacks() {\n  // http://dom.spec.whatwg.org/#mutation-observers\n\n  isScheduled = false; // Used to allow a new setImmediate call above.\n\n  var observers = scheduledObservers;\n  scheduledObservers = [];\n  // Sort observers based on their creation UID (incremental).\n  observers.sort(function (o1, o2) {\n    return o1.uid - o2.uid;\n  });\n  var anyNonEmpty = false;\n  observers.forEach(function (observer) {\n    // 2.1, 2.2\n    var queue = observer.takeRecords();\n    // 2.3. Remove all transient registered observers whose observer is mo.\n    removeTransientObserversFor(observer);\n\n    // 2.4\n    if (queue.length) {\n      // @ts-ignore\n      observer.callback(queue, observer);\n      anyNonEmpty = true;\n    }\n  });\n\n  // 3.\n  if (anyNonEmpty) dispatchCallbacks();\n}\n\nexport { MutationObserver, MutationRecord, Registration };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n * @antv/g-web-animations-api\n * @description A simple implementation of Web Animations API.\n * @version 2.1.19\n * @date 1/2/2025, 2:56:26 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport { FederatedEvent, ERROR_MSG_METHOD_NOT_IMPLEMENTED, propertyMetadataCache, runtime } from '@antv/g-lite';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport { clamp, isNumber, isNil } from '@antv/util';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationPlaybackEvent\n */\n// @ts-ignore\nvar AnimationEvent = /*#__PURE__*/function (_FederatedEvent) {\n  function AnimationEvent(manager, target, currentTime, timelineTime) {\n    var _this;\n    _classCallCheck(this, AnimationEvent);\n    _this = _callSuper(this, AnimationEvent, [manager]);\n\n    // @ts-ignore\n    _this.currentTime = currentTime;\n    _this.timelineTime = timelineTime;\n    _this.target = target;\n    _this.type = 'finish';\n    _this.bubbles = false;\n    // @ts-ignore\n    _this.currentTarget = target;\n    _this.defaultPrevented = false;\n    _this.eventPhase = _this.AT_TARGET;\n    _this.timeStamp = Date.now();\n    _this.currentTime = currentTime;\n    _this.timelineTime = timelineTime;\n    return _this;\n  }\n  _inherits(AnimationEvent, _FederatedEvent);\n  return _createClass(AnimationEvent);\n}(FederatedEvent);\n\nvar sequenceNumber = 0;\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/Animation\n */\nvar Animation = /*#__PURE__*/function () {\n  function Animation(effect, timeline) {\n    var _this$effect;\n    _classCallCheck(this, Animation);\n    this.currentTimePending = false;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/playState\n     */\n    // playState: AnimationPlayState;\n    this._idle = true;\n    this._paused = false;\n    this._finishedFlag = true;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/currentTime\n     */\n    this._currentTime = 0;\n    this._playbackRate = 1;\n    this._inTimeline = true;\n    this.effect = effect;\n    effect.animation = this;\n    this.timeline = timeline;\n    this.id = \"\".concat(sequenceNumber++);\n    this._inEffect = !!this.effect.update(0);\n    this._totalDuration = Number((_this$effect = this.effect) === null || _this$effect === void 0 ? void 0 : _this$effect.getComputedTiming().endTime);\n    this._holdTime = 0;\n    this._paused = false;\n    this.oldPlayState = 'idle';\n    this.updatePromises();\n  }\n\n  /**\n   * state machine,\n   * resolve/reject ready/finished Promise according to current state\n   */\n  return _createClass(Animation, [{\n    key: \"pending\",\n    get:\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/effect\n     */\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/timeline\n     */\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/id\n     */\n\n    // animation: InternalAnimation | null;\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/pending\n     */\n    function get() {\n      return this._startTime === null && !this._paused && this.playbackRate !== 0 || this.currentTimePending;\n    }\n  }, {\n    key: \"playState\",\n    get: function get() {\n      if (this._idle) return 'idle';\n      if (this._isFinished) return 'finished';\n      if (this._paused) return 'paused';\n      return 'running';\n    }\n\n    /**\n     * record previos state\n     */\n  }, {\n    key: \"ready\",\n    get:\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/ready\n     * @example\n      animation.pause();\n      animation.ready.then(function() {\n        // Displays 'running'\n        alert(animation.playState);\n      });\n      animation.play();\n     */\n    function get() {\n      var _this = this;\n      if (!this.readyPromise) {\n        if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n          this.timeline.animationsWithPromises.push(this);\n        }\n        this.readyPromise = new Promise(function (resolve, reject) {\n          _this.resolveReadyPromise = function () {\n            resolve(_this);\n          };\n          _this.rejectReadyPromise = function () {\n            reject(new Error());\n          };\n        });\n        if (!this.pending) {\n          this.resolveReadyPromise();\n        }\n      }\n      return this.readyPromise;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/finished\n     * @example\n      Promise.all(\n        elem.getAnimations().map(\n          function(animation) {\n            return animation.finished\n          }\n        )\n      ).then(\n        function() {\n          return elem.remove();\n        }\n      );\n     */\n  }, {\n    key: \"finished\",\n    get: function get() {\n      var _this2 = this;\n      if (!this.finishedPromise) {\n        if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n          this.timeline.animationsWithPromises.push(this);\n        }\n        this.finishedPromise = new Promise(function (resolve, reject) {\n          _this2.resolveFinishedPromise = function () {\n            resolve(_this2);\n          };\n          _this2.rejectFinishedPromise = function () {\n            reject(new Error());\n          };\n        });\n        if (this.playState === 'finished') {\n          this.resolveFinishedPromise();\n        }\n      }\n      return this.finishedPromise;\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/onfinish\n     */\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/oncancel\n     */\n\n    /**\n     * get called after each frame when running\n     */\n  }, {\n    key: \"currentTime\",\n    get: function get() {\n      this.updatePromises();\n      return this._idle || this.currentTimePending ? null : this._currentTime;\n    },\n    set: function set(newTime) {\n      newTime = Number(newTime);\n      if (isNaN(newTime)) return;\n      this.timeline.restart();\n      if (!this._paused && this._startTime !== null) {\n        var _this$timeline;\n        this._startTime = Number((_this$timeline = this.timeline) === null || _this$timeline === void 0 ? void 0 : _this$timeline.currentTime) - newTime / this.playbackRate;\n      }\n      this.currentTimePending = false;\n      if (this._currentTime === newTime) {\n        return;\n      }\n      if (this._idle) {\n        this._idle = false;\n        this._paused = true;\n      }\n      this.tickCurrentTime(newTime, true);\n      this.timeline.applyDirtiedAnimation(this);\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/startTime\n     */\n  }, {\n    key: \"startTime\",\n    get: function get() {\n      return this._startTime;\n    },\n    set: function set(newTime) {\n      if (newTime !== null) {\n        this.updatePromises();\n        newTime = Number(newTime);\n        if (isNaN(newTime)) return;\n        if (this._paused || this._idle) return;\n        this._startTime = newTime;\n        this.tickCurrentTime((Number(this.timeline.currentTime) - this._startTime) * this.playbackRate);\n        this.timeline.applyDirtiedAnimation(this);\n        this.updatePromises();\n      }\n    }\n  }, {\n    key: \"playbackRate\",\n    get: function get() {\n      return this._playbackRate;\n    },\n    set: function set(value) {\n      if (value === this._playbackRate) {\n        return;\n      }\n      this.updatePromises();\n      var oldCurrentTime = this.currentTime;\n      this._playbackRate = value;\n      this.startTime = null;\n      if (this.playState !== 'paused' && this.playState !== 'idle') {\n        this._finishedFlag = false;\n        this._idle = false;\n        this.ensureAlive();\n        this.timeline.applyDirtiedAnimation(this);\n      }\n      if (oldCurrentTime !== null) {\n        this.currentTime = oldCurrentTime;\n      }\n      this.updatePromises();\n    }\n  }, {\n    key: \"_isFinished\",\n    get: function get() {\n      return !this._idle && (this._playbackRate > 0 && Number(this._currentTime) >= this._totalDuration || this._playbackRate < 0 && Number(this._currentTime) <= 0);\n    }\n  }, {\n    key: \"totalDuration\",\n    get: function get() {\n      return this._totalDuration;\n    }\n  }, {\n    key: \"_needsTick\",\n    get: function get() {\n      return this.pending || this.playState === 'running' || !this._finishedFlag;\n    }\n  }, {\n    key: \"updatePromises\",\n    value: function updatePromises() {\n      var oldPlayState = this.oldPlayState;\n      var newPlayState = this.pending ? 'pending' : this.playState;\n      if (this.readyPromise && newPlayState !== oldPlayState) {\n        if (newPlayState === 'idle') {\n          this.rejectReadyPromise();\n          this.readyPromise = undefined;\n        } else if (oldPlayState === 'pending') {\n          this.resolveReadyPromise();\n        } else if (newPlayState === 'pending') {\n          this.readyPromise = undefined;\n        }\n      }\n      if (this.finishedPromise && newPlayState !== oldPlayState) {\n        if (newPlayState === 'idle') {\n          this.rejectFinishedPromise();\n          this.finishedPromise = undefined;\n        } else if (newPlayState === 'finished') {\n          this.resolveFinishedPromise();\n        } else if (oldPlayState === 'finished') {\n          this.finishedPromise = undefined;\n        }\n      }\n      this.oldPlayState = newPlayState;\n      return this.readyPromise || this.finishedPromise;\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      this.updatePromises();\n      this._paused = false;\n      if (this._isFinished || this._idle) {\n        this.rewind();\n        this._startTime = null;\n      }\n      this._finishedFlag = false;\n      this._idle = false;\n      this.ensureAlive();\n      this.timeline.applyDirtiedAnimation(this);\n      if (this.timeline.animations.indexOf(this) === -1) {\n        this.timeline.animations.push(this);\n      }\n      this.updatePromises();\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.updatePromises();\n      if (this.currentTime) {\n        this._holdTime = this.currentTime;\n      }\n      if (!this._isFinished && !this._paused && !this._idle) {\n        this.currentTimePending = true;\n      } else if (this._idle) {\n        this.rewind();\n        this._idle = false;\n      }\n      this._startTime = null;\n      this._paused = true;\n      this.updatePromises();\n    }\n  }, {\n    key: \"finish\",\n    value: function finish() {\n      this.updatePromises();\n      if (this._idle) return;\n      this.currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n      this._startTime = this._totalDuration - this.currentTime;\n      this.currentTimePending = false;\n      this.timeline.applyDirtiedAnimation(this);\n      this.updatePromises();\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      var _this3 = this;\n      this.updatePromises();\n      if (!this._inEffect) return;\n      this._inEffect = false;\n      this._idle = true;\n      this._paused = false;\n      this._finishedFlag = true;\n      this._currentTime = 0;\n      this._startTime = null;\n      this.effect.update(null);\n      // effects are invalid after cancellation as the animation state\n      // needs to un-apply.\n      this.timeline.applyDirtiedAnimation(this);\n      this.updatePromises();\n\n      /**\n       * 1. Reject the current finished promise with a DOMException named \"AbortError\".\n       * 2. Let current finished promise be a new promise\n       * @see https://w3c.github.io/csswg-drafts/web-animations-1/#canceling-an-animation-section\n       */\n      // if (this.finishedPromise) {\n      //   this.rejectFinishedPromise();\n      //   this.finishedPromise = undefined;\n      // }\n\n      if (this.oncancel) {\n        var event = new AnimationEvent(null, this, this.currentTime, null);\n        setTimeout(function () {\n          _this3.oncancel(event);\n        });\n      }\n    }\n  }, {\n    key: \"reverse\",\n    value: function reverse() {\n      this.updatePromises();\n      var oldCurrentTime = this.currentTime;\n      this.playbackRate *= -1;\n      this.play();\n      if (oldCurrentTime !== null) {\n        this.currentTime = oldCurrentTime;\n      }\n      this.updatePromises();\n    }\n\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/updatePlaybackRate\n     */\n  }, {\n    key: \"updatePlaybackRate\",\n    value: function updatePlaybackRate(playbackRate) {\n      this.playbackRate = playbackRate;\n    }\n  }, {\n    key: \"targetAnimations\",\n    value: function targetAnimations() {\n      var _this$effect2;\n      var target = (_this$effect2 = this.effect) === null || _this$effect2 === void 0 ? void 0 : _this$effect2.target;\n      return target.getAnimations();\n    }\n  }, {\n    key: \"markTarget\",\n    value: function markTarget() {\n      var animations = this.targetAnimations();\n      if (animations.indexOf(this) === -1) {\n        animations.push(this);\n      }\n    }\n  }, {\n    key: \"unmarkTarget\",\n    value: function unmarkTarget() {\n      var animations = this.targetAnimations();\n      var index = animations.indexOf(this);\n      if (index !== -1) {\n        animations.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"tick\",\n    value: function tick(timelineTime, isAnimationFrame) {\n      if (!this._idle && !this._paused) {\n        if (this._startTime === null) {\n          if (isAnimationFrame) {\n            this.startTime = timelineTime - this._currentTime / this.playbackRate;\n          }\n        } else if (!this._isFinished) {\n          this.tickCurrentTime((timelineTime - this._startTime) * this.playbackRate);\n        }\n      }\n      if (isAnimationFrame) {\n        this.currentTimePending = false;\n        this.fireEvents(timelineTime);\n      }\n    }\n  }, {\n    key: \"rewind\",\n    value: function rewind() {\n      if (this.playbackRate >= 0) {\n        this.currentTime = 0;\n      } else if (this._totalDuration < Infinity) {\n        this.currentTime = this._totalDuration;\n      } else {\n        throw new Error('Unable to rewind negative playback rate animation with infinite duration');\n      }\n    }\n  }, {\n    key: \"persist\",\n    value: function persist() {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener(type, listener, options) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(type, listener, options) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(event) {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"commitStyles\",\n    value:\n    // replaceState: AnimationReplaceState;\n    function commitStyles() {\n      throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    }\n  }, {\n    key: \"ensureAlive\",\n    value: function ensureAlive() {\n      // If an animation is playing backwards and is not fill backwards/both\n      // then it should go out of effect when it reaches the start of its\n      // active interval (currentTime === 0).\n      if (this.playbackRate < 0 && this.currentTime === 0) {\n        var _this$effect3;\n        this._inEffect = !!((_this$effect3 = this.effect) !== null && _this$effect3 !== void 0 && _this$effect3.update(-1));\n      } else {\n        var _this$effect4;\n        this._inEffect = !!((_this$effect4 = this.effect) !== null && _this$effect4 !== void 0 && _this$effect4.update(this.currentTime));\n      }\n      if (!this._inTimeline && (this._inEffect || !this._finishedFlag)) {\n        this._inTimeline = true;\n        this.timeline.animations.push(this);\n      }\n    }\n  }, {\n    key: \"tickCurrentTime\",\n    value: function tickCurrentTime(newTime, ignoreLimit) {\n      if (newTime !== this._currentTime) {\n        this._currentTime = newTime;\n        if (this._isFinished && !ignoreLimit) {\n          this._currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n        }\n        this.ensureAlive();\n      }\n    }\n  }, {\n    key: \"fireEvents\",\n    value: function fireEvents(baseTime) {\n      var _this4 = this;\n      if (this._isFinished) {\n        if (!this._finishedFlag) {\n          if (this.onfinish) {\n            var event = new AnimationEvent(null, this, this.currentTime, baseTime);\n            setTimeout(function () {\n              if (_this4.onfinish) {\n                _this4.onfinish(event);\n              }\n            });\n          }\n          this._finishedFlag = true;\n        }\n      } else {\n        if (this.onframe && this.playState === 'running') {\n          var _event = new AnimationEvent(null, this, this.currentTime, baseTime);\n          this.onframe(_event);\n        }\n        this._finishedFlag = false;\n      }\n    }\n  }]);\n}();\n\n/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gatan Renaudeau 2014 - 2015  MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\nvar float32ArraySupported = typeof Float32Array === 'function';\nvar A = function A(aA1, aA2) {\n  return 1.0 - 3.0 * aA2 + 3.0 * aA1;\n};\nvar B = function B(aA1, aA2) {\n  return 3.0 * aA2 - 6.0 * aA1;\n};\nvar C = function C(aA1) {\n  return 3.0 * aA1;\n};\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nvar calcBezier = function calcBezier(aT, aA1, aA2) {\n  return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n};\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nvar getSlope = function getSlope(aT, aA1, aA2) {\n  return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n};\nvar binarySubdivide = function binarySubdivide(aX, aA, aB, mX1, mX2) {\n  var currentX;\n  var currentT;\n  var i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) aB = currentT;else aA = currentT;\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n};\nvar newtonRaphsonIterate = function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n  for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n    var currentSlope = getSlope(aGuessT, mX1, mX2);\n    if (currentSlope === 0.0) return aGuessT;\n    var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n  return aGuessT;\n};\nvar bezier = function bezier(mX1, mY1, mX2, mY2) {\n  if (!(mX1 >= 0 && mX1 <= 1 && mX2 >= 0 && mX2 <= 1)) throw new Error('bezier x values must be in [0, 1] range');\n  if (mX1 === mY1 && mX2 === mY2) return function (t) {\n    return t;\n  };\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n  var getTForX = function getTForX(aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) intervalStart += kSampleStepSize;\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    if (initialSlope === 0.0) return guessForT;\n    return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n  };\n  return function (t) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (t === 0 || t === 1) return t;\n    return calcBezier(getTForX(t), mY1, mY2);\n  };\n};\n\nvar convertToDash = function convertToDash(str) {\n  str = str.replace(/([A-Z])/g, function (letter) {\n    return \"-\".concat(letter.toLowerCase());\n  });\n\n  // Remove first dash\n  return str.charAt(0) === '-' ? str.substring(1) : str;\n};\n/**\n  Easing Functions from anime.js, they are tried and true, so, its better to use them instead of other alternatives\n*/\nvar Quad = function Quad(t) {\n  return Math.pow(t, 2);\n};\nvar Cubic = function Cubic(t) {\n  return Math.pow(t, 3);\n};\nvar Quart = function Quart(t) {\n  return Math.pow(t, 4);\n};\nvar Quint = function Quint(t) {\n  return Math.pow(t, 5);\n};\nvar Expo = function Expo(t) {\n  return Math.pow(t, 6);\n};\nvar Sine = function Sine(t) {\n  return 1 - Math.cos(t * Math.PI / 2);\n};\nvar Circ = function Circ(t) {\n  return 1 - Math.sqrt(1 - t * t);\n};\nvar Back = function Back(t) {\n  return t * t * (3 * t - 2);\n};\nvar Bounce = function Bounce(t) {\n  var pow2;\n  var b = 4;\n  while (t < ((pow2 = Math.pow(2, --b)) - 1) / 11) {}\n  return 1 / Math.pow(4, 3 - b) - 7.5625 * Math.pow((pow2 * 3 - 2) / 22 - t, 2);\n};\nvar Elastic = function Elastic(t) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var _params = _slicedToArray(params, 2),\n    _params$ = _params[0],\n    amplitude = _params$ === void 0 ? 1 : _params$,\n    _params$2 = _params[1],\n    period = _params$2 === void 0 ? 0.5 : _params$2;\n  var a = clamp(Number(amplitude), 1, 10);\n  var p = clamp(Number(period), 0.1, 2);\n  if (t === 0 || t === 1) return t;\n  return -a * Math.pow(2, 10 * (t - 1)) * Math.sin((t - 1 - p / (Math.PI * 2) * Math.asin(1 / a)) * (Math.PI * 2) / p);\n};\nvar Spring = function Spring(t) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var duration = arguments.length > 2 ? arguments[2] : undefined;\n  var _params2 = _slicedToArray(params, 4),\n    _params2$ = _params2[0],\n    mass = _params2$ === void 0 ? 1 : _params2$,\n    _params2$2 = _params2[1],\n    stiffness = _params2$2 === void 0 ? 100 : _params2$2,\n    _params2$3 = _params2[2],\n    damping = _params2$3 === void 0 ? 10 : _params2$3,\n    _params2$4 = _params2[3],\n    velocity = _params2$4 === void 0 ? 0 : _params2$4;\n  mass = clamp(mass, 0.1, 1000);\n  stiffness = clamp(stiffness, 0.1, 1000);\n  damping = clamp(damping, 0.1, 1000);\n  velocity = clamp(velocity, 0.1, 1000);\n  var w0 = Math.sqrt(stiffness / mass);\n  var zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  var wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  var a = 1;\n  var b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n  var progress = duration ? duration * t / 1000 : t;\n  if (zeta < 1) {\n    progress = Math.exp(-progress * zeta * w0) * (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n  } else {\n    progress = (a + b * progress) * Math.exp(-progress * w0);\n  }\n  if (t === 0 || t === 1) return t;\n  return 1 - progress;\n};\n\n/**\n * Cache the durations at set easing parameters\n */\n// export const EasingDurationCache: Map<string | TypeEasingFunction, number> = new Map();\n\n/**\n * The threshold for an infinite loop\n */\n// const INTINITE_LOOP_LIMIT = 10000;\n\n/** Convert easing parameters to Array of numbers, e.g. \"spring(2, 500)\" to [2, 500] */\n// export const parseEasingParameters = (str: string) => {\n//   const match = /(\\(|\\s)([^)]+)\\)?/.exec(str);\n//   return match\n//     ? match[2].split(',').map((value) => {\n//         const num = parseFloat(value);\n//         return !Number.isNaN(num) ? num : value.trim();\n//       })\n//     : [];\n// };\n\n/**\n * The spring easing function will only look smooth at certain durations, with certain parameters.\n * This functions returns the optimal duration to create a smooth springy animation based on physics\n *\n * Note: it can also be used to determine the optimal duration of other types of easing function, but be careful of 'in-'\n * easing functions, because of the nature of the function it can sometimes create an infinite loop, I suggest only using\n * `getEasingDuration` for `spring`, specifically 'out-spring' and 'spring'\n */\n// export const getEasingDuration = (easing: string | TypeEasingFunction = 'spring') => {\n//   if (EasingDurationCache.has(easing)) return EasingDurationCache.get(easing);\n\n//   // eslint-disable-next-line @typescript-eslint/no-use-before-define\n//   const easingFunction = typeof easing == 'function' ? easing : getEasingFunction(easing as string);\n//   const params = typeof easing == 'function' ? [] : parseEasingParameters(easing);\n//   const frame = 1 / 6;\n\n//   let elapsed = 0;\n//   let rest = 0;\n//   let count = 0;\n\n//   while (++count < INTINITE_LOOP_LIMIT) {\n//     elapsed += frame;\n//     if (easingFunction(elapsed, params, undefined) === 1) {\n//       rest++;\n//       if (rest >= 16) break;\n//     } else {\n//       rest = 0;\n//     }\n//   }\n\n//   const duration = elapsed * frame * 1000;\n//   EasingDurationCache.set(easing, duration);\n//   return duration;\n// };\n\n/**\n  These Easing Functions are based off of the Sozi Project's easing functions\n  https://github.com/sozi-projects/Sozi/blob/d72e44ebd580dc7579d1e177406ad41e632f961d/src/js/player/Timing.js\n*/\nvar Steps = function Steps(t) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var _ref = params,\n    _ref2 = _slicedToArray(_ref, 2),\n    _ref2$ = _ref2[0],\n    steps = _ref2$ === void 0 ? 10 : _ref2$,\n    type = _ref2[1];\n  var trunc = type === 'start' ? Math.ceil : Math.floor;\n  return trunc(clamp(t, 0, 1) * steps) / steps;\n};\n\n// @ts-ignore\nvar Bezier = function Bezier(t) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var _params3 = _slicedToArray(params, 4),\n    mX1 = _params3[0],\n    mY1 = _params3[1],\n    mX2 = _params3[2],\n    mY2 = _params3[3];\n  return bezier(mX1, mY1, mX2, mY2)(t);\n};\n\n/** The default `ease-in` easing function */\nvar easein = bezier(0.42, 0.0, 1.0, 1.0);\n\n/** Converts easing functions to their `out`counter parts */\nvar EaseOut = function EaseOut(ease) {\n  return function (t) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var duration = arguments.length > 2 ? arguments[2] : undefined;\n    return 1 - ease(1 - t, params, duration);\n  };\n};\n\n/** Converts easing functions to their `in-out` counter parts */\nvar EaseInOut = function EaseInOut(ease) {\n  return function (t) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var duration = arguments.length > 2 ? arguments[2] : undefined;\n    return t < 0.5 ? ease(t * 2, params, duration) / 2 : 1 - ease(t * -2 + 2, params, duration) / 2;\n  };\n};\n\n/** Converts easing functions to their `out-in` counter parts */\nvar EaseOutIn = function EaseOutIn(ease) {\n  return function (t) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var duration = arguments.length > 2 ? arguments[2] : undefined;\n    return t < 0.5 ? (1 - ease(1 - t * 2, params, duration)) / 2 : (ease(t * 2 - 1, params, duration) + 1) / 2;\n  };\n};\n\n/**\n * The default list of easing functions, do note this is different from {@link EASING}\n */\n\nvar EasingFunctions = {\n  steps: Steps,\n  'step-start': function stepStart(t) {\n    return Steps(t, [1, 'start']);\n  },\n  'step-end': function stepEnd(t) {\n    return Steps(t, [1, 'end']);\n  },\n  linear: function linear(t) {\n    return t;\n  },\n  'cubic-bezier': Bezier,\n  ease: function ease(t) {\n    return Bezier(t, [0.25, 0.1, 0.25, 1.0]);\n  },\n  \"in\": easein,\n  out: EaseOut(easein),\n  'in-out': EaseInOut(easein),\n  'out-in': EaseOutIn(easein),\n  'in-quad': Quad,\n  'out-quad': EaseOut(Quad),\n  'in-out-quad': EaseInOut(Quad),\n  'out-in-quad': EaseOutIn(Quad),\n  'in-cubic': Cubic,\n  'out-cubic': EaseOut(Cubic),\n  'in-out-cubic': EaseInOut(Cubic),\n  'out-in-cubic': EaseOutIn(Cubic),\n  'in-quart': Quart,\n  'out-quart': EaseOut(Quart),\n  'in-out-quart': EaseInOut(Quart),\n  'out-in-quart': EaseOutIn(Quart),\n  'in-quint': Quint,\n  'out-quint': EaseOut(Quint),\n  'in-out-quint': EaseInOut(Quint),\n  'out-in-quint': EaseOutIn(Quint),\n  'in-expo': Expo,\n  'out-expo': EaseOut(Expo),\n  'in-out-expo': EaseInOut(Expo),\n  'out-in-expo': EaseOutIn(Expo),\n  'in-sine': Sine,\n  'out-sine': EaseOut(Sine),\n  'in-out-sine': EaseInOut(Sine),\n  'out-in-sine': EaseOutIn(Sine),\n  'in-circ': Circ,\n  'out-circ': EaseOut(Circ),\n  'in-out-circ': EaseInOut(Circ),\n  'out-in-circ': EaseOutIn(Circ),\n  'in-back': Back,\n  'out-back': EaseOut(Back),\n  'in-out-back': EaseInOut(Back),\n  'out-in-back': EaseOutIn(Back),\n  'in-bounce': Bounce,\n  'out-bounce': EaseOut(Bounce),\n  'in-out-bounce': EaseInOut(Bounce),\n  'out-in-bounce': EaseOutIn(Bounce),\n  'in-elastic': Elastic,\n  'out-elastic': EaseOut(Elastic),\n  'in-out-elastic': EaseInOut(Elastic),\n  'out-in-elastic': EaseOutIn(Elastic),\n  spring: Spring,\n  'spring-in': Spring,\n  'spring-out': EaseOut(Spring),\n  'spring-in-out': EaseInOut(Spring),\n  'spring-out-in': EaseOutIn(Spring)\n};\n\n/**\n * Convert string easing to their proper form\n */\nvar complexEasingSyntax = function complexEasingSyntax(ease) {\n  return convertToDash(ease).replace(/^ease-/, '') // Remove the \"ease-\" keyword\n  .replace(/(\\(|\\s).+/, '') // Remove the function brackets and parameters\n  .toLowerCase().trim();\n};\n\n/** Re-maps a number from one range to another. Numbers outside the range are not clamped to 0 and 1, because out-of-range values are often intentional and useful. */\nvar getEasingFunction = function getEasingFunction(ease) {\n  return EasingFunctions[complexEasingSyntax(ease)] || EasingFunctions.linear;\n};\n\n// /**\n//  * Allows you to register new easing functions\n//  */\n// export const registerEasingFunction = (key: string, fn: TypeEasingFunction) => {\n//   Object.assign(EasingFunctions, {\n//     [key]: fn,\n//   });\n// };\n\n// /**\n//  * Allows you to register multiple new easing functions\n//  */\n// export const registerEasingFunctions = (...obj: typeof EasingFunctions[]) => {\n//   Object.assign(EasingFunctions, ...obj);\n// };\n\nvar linear = function linear(x) {\n  return x;\n};\nvar Start = 1;\nvar Middle = 0.5;\nvar End = 0;\nfunction step(count, pos) {\n  return function (x) {\n    if (x >= 1) {\n      return 1;\n    }\n    var stepSize = 1 / count;\n    x += pos * stepSize;\n    return x - x % stepSize;\n  };\n}\nvar numberString = '\\\\s*(-?\\\\d+\\\\.?\\\\d*|-?\\\\.\\\\d+)\\\\s*';\nvar cubicBezierRe = new RegExp(\"cubic-bezier\\\\(\".concat(numberString, \",\").concat(numberString, \",\").concat(numberString, \",\").concat(numberString, \"\\\\)\"));\nvar step1Re = /steps\\(\\s*(\\d+)\\s*\\)/;\nvar step2Re = /steps\\(\\s*(\\d+)\\s*,\\s*(start|middle|end)\\s*\\)/;\nfunction parseEasingFunction(normalizedEasing) {\n  var cubicData = cubicBezierRe.exec(normalizedEasing);\n  if (cubicData) {\n    // @ts-ignore\n    return bezier.apply(void 0, _toConsumableArray(cubicData.slice(1).map(Number)));\n  }\n  var step1Data = step1Re.exec(normalizedEasing);\n  if (step1Data) {\n    return step(Number(step1Data[1]), End);\n  }\n  var step2Data = step2Re.exec(normalizedEasing);\n  if (step2Data) {\n    // @ts-ignore\n    return step(Number(step2Data[1]), {\n      start: Start,\n      middle: Middle,\n      end: End\n    }[step2Data[2]]);\n  }\n  return getEasingFunction(normalizedEasing);\n}\nfunction calculateActiveDuration(timing) {\n  // @ts-ignore\n  return Math.abs(repeatedDuration(timing) / (timing.playbackRate || 1));\n}\nfunction repeatedDuration(timing) {\n  var _timing$iterations;\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-duration\n  if (timing.duration === 0 || timing.iterations === 0) {\n    return 0;\n  }\n\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration#value\n  // if (timing.duration === 'auto') {\n  //   timing.duration = 0;\n  // }\n\n  return (timing.duration === 'auto' ? 0 : Number(timing.duration)) * ((_timing$iterations = timing.iterations) !== null && _timing$iterations !== void 0 ? _timing$iterations : 1);\n}\nvar PhaseNone = 0;\nvar PhaseBefore = 1;\nvar PhaseAfter = 2;\nvar PhaseActive = 3;\nfunction calculatePhase(activeDuration, localTime, timing) {\n  // https://drafts.csswg.org/web-animations/#animation-effect-phases-and-states\n  if (localTime === null) {\n    return PhaseNone;\n  }\n  var endTime = timing.endTime;\n  if (localTime < Math.min(timing.delay, endTime)) {\n    return PhaseBefore;\n  }\n  if (localTime >= Math.min(timing.delay + activeDuration + timing.endDelay, endTime)) {\n    return PhaseAfter;\n  }\n  return PhaseActive;\n}\nfunction calculateActiveTime(activeDuration, fillMode, localTime, phase, delay) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-time\n  switch (phase) {\n    case PhaseBefore:\n      if (fillMode === 'backwards' || fillMode === 'both') return 0;\n      return null;\n    case PhaseActive:\n      return localTime - delay;\n    case PhaseAfter:\n      if (fillMode === 'forwards' || fillMode === 'both') return activeDuration;\n      return null;\n    case PhaseNone:\n      return null;\n  }\n}\nfunction calculateOverallProgress(iterationDuration, phase, iterations, activeTime, iterationStart) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-overall-progress\n  var overallProgress = iterationStart;\n  if (iterationDuration === 0) {\n    if (phase !== PhaseBefore) {\n      overallProgress += iterations;\n    }\n  } else {\n    overallProgress += activeTime / iterationDuration;\n  }\n  return overallProgress;\n}\nfunction calculateSimpleIterationProgress(overallProgress, iterationStart, phase, iterations, activeTime, iterationDuration) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-simple-iteration-progress\n\n  var simpleIterationProgress = overallProgress === Infinity ? iterationStart % 1 : overallProgress % 1;\n  if (simpleIterationProgress === 0 && phase === PhaseAfter && iterations !== 0 && (activeTime !== 0 || iterationDuration === 0)) {\n    simpleIterationProgress = 1;\n  }\n  return simpleIterationProgress;\n}\nfunction calculateCurrentIteration(phase, iterations, simpleIterationProgress, overallProgress) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-current-iteration\n  if (phase === PhaseAfter && iterations === Infinity) {\n    return Infinity;\n  }\n  if (simpleIterationProgress === 1) {\n    return Math.floor(overallProgress) - 1;\n  }\n  return Math.floor(overallProgress);\n}\nfunction calculateDirectedProgress(playbackDirection, currentIteration, simpleIterationProgress) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-directed-progress\n  var currentDirection = playbackDirection;\n  if (playbackDirection !== 'normal' && playbackDirection !== 'reverse') {\n    var d = currentIteration;\n    if (playbackDirection === 'alternate-reverse') {\n      d += 1;\n    }\n    currentDirection = 'normal';\n    if (d !== Infinity && d % 2 !== 0) {\n      currentDirection = 'reverse';\n    }\n  }\n  if (currentDirection === 'normal') {\n    return simpleIterationProgress;\n  }\n  return 1 - simpleIterationProgress;\n}\nfunction calculateIterationProgress(activeDuration, localTime, timing) {\n  var phase = calculatePhase(activeDuration, localTime, timing);\n  var activeTime = calculateActiveTime(activeDuration, timing.fill, localTime, phase, timing.delay);\n  if (activeTime === null) return null;\n  var duration = timing.duration === 'auto' ? 0 : timing.duration;\n  var overallProgress = calculateOverallProgress(duration, phase, timing.iterations, activeTime, timing.iterationStart);\n  var simpleIterationProgress = calculateSimpleIterationProgress(overallProgress, timing.iterationStart, phase, timing.iterations, activeTime, duration);\n  var currentIteration = calculateCurrentIteration(phase, timing.iterations, simpleIterationProgress, overallProgress);\n  var directedProgress = calculateDirectedProgress(timing.direction, currentIteration, simpleIterationProgress);\n  timing.currentIteration = currentIteration;\n  timing.progress = directedProgress;\n\n  // https://drafts.csswg.org/web-animations/#calculating-the-transformed-progress\n  // https://drafts.csswg.org/web-animations/#calculating-the-iteration-progress\n  return timing.easingFunction(directedProgress);\n}\n\nfunction convertEffectInput(keyframes, timing, target) {\n  var propertySpecificKeyframeGroups = makePropertySpecificKeyframeGroups(keyframes, timing);\n  var interpolations = makeInterpolations(propertySpecificKeyframeGroups, target);\n  return function (target, fraction) {\n    if (fraction !== null) {\n      interpolations.filter(function (interpolation) {\n        return fraction >= interpolation.applyFrom && fraction < interpolation.applyTo;\n      }).forEach(function (interpolation) {\n        var offsetFraction = fraction - interpolation.startOffset;\n        var localDuration = interpolation.endOffset - interpolation.startOffset;\n        var scaledLocalTime = localDuration === 0 ? 0 : offsetFraction / localDuration;\n        // apply updated attribute\n        target.setAttribute(interpolation.property, interpolation.interpolation(scaledLocalTime), false, false // disable memoize\n        );\n\n        // if (interpolation.property === 'visibility') {\n        //   console.log(\n        //     scaledLocalTime,\n        //     interpolation.interpolation(scaledLocalTime),\n        //   );\n        // }\n      });\n    } else {\n      for (var property in propertySpecificKeyframeGroups) if (isNotReservedWord(property)) {\n        // clear attribute\n        target.setAttribute(property, null);\n      }\n    }\n  };\n}\nfunction isNotReservedWord(member) {\n  return member !== 'offset' && member !== 'easing' && member !== 'composite' && member !== 'computedOffset';\n}\nfunction makePropertySpecificKeyframeGroups(keyframes, timing) {\n  var propertySpecificKeyframeGroups = {};\n  for (var i = 0; i < keyframes.length; i++) {\n    for (var member in keyframes[i]) {\n      if (isNotReservedWord(member)) {\n        var propertySpecificKeyframe = {\n          offset: keyframes[i].offset,\n          computedOffset: keyframes[i].computedOffset,\n          easing: keyframes[i].easing,\n          easingFunction: parseEasingFunction(keyframes[i].easing) || timing.easingFunction,\n          value: keyframes[i][member]\n        };\n        propertySpecificKeyframeGroups[member] = propertySpecificKeyframeGroups[member] || [];\n        propertySpecificKeyframeGroups[member].push(propertySpecificKeyframe);\n      }\n    }\n  }\n  return propertySpecificKeyframeGroups;\n}\nfunction makeInterpolations(propertySpecificKeyframeGroups, target) {\n  var interpolations = [];\n  for (var groupName in propertySpecificKeyframeGroups) {\n    var keyframes = propertySpecificKeyframeGroups[groupName];\n    for (var i = 0; i < keyframes.length - 1; i++) {\n      var startIndex = i;\n      var endIndex = i + 1;\n      var startOffset = keyframes[startIndex].computedOffset;\n      var endOffset = keyframes[endIndex].computedOffset;\n      var applyFrom = startOffset;\n      var applyTo = endOffset;\n      if (i === 0) {\n        applyFrom = -Infinity;\n        if (endOffset === 0) {\n          endIndex = startIndex;\n        }\n      }\n      if (i === keyframes.length - 2) {\n        applyTo = Infinity;\n        if (startOffset === 1) {\n          startIndex = endIndex;\n        }\n      }\n      interpolations.push({\n        applyFrom: applyFrom,\n        applyTo: applyTo,\n        startOffset: keyframes[startIndex].computedOffset,\n        endOffset: keyframes[endIndex].computedOffset,\n        easingFunction: keyframes[startIndex].easingFunction,\n        property: groupName,\n        interpolation: propertyInterpolation(groupName, keyframes[startIndex].value, keyframes[endIndex].value, target)\n      });\n    }\n  }\n  interpolations.sort(function (leftInterpolation, rightInterpolation) {\n    return leftInterpolation.startOffset - rightInterpolation.startOffset;\n  });\n  return interpolations;\n}\nvar InterpolationFactory = function InterpolationFactory(from, to, convertToString) {\n  return function (f) {\n    var interpolated = interpolate(from, to, f);\n    return isNumber(interpolated) ? interpolated : convertToString(interpolated);\n  };\n};\nfunction propertyInterpolation(property, left, right, target) {\n  var metadata = propertyMetadataCache[property];\n  if (metadata && metadata.syntax && metadata[\"int\"]) {\n    var propertyHandler = runtime.styleValueRegistry.getPropertySyntax(metadata.syntax);\n    if (propertyHandler) {\n      var parser = propertyHandler.parser;\n      var usedLeft = parser ? parser(left, target) : left;\n      var usedRight = parser ? parser(right, target) : right;\n\n      // merger [left, right, n2string()]\n      var interpolationArgs = propertyHandler.mixer(usedLeft, usedRight, target);\n      if (interpolationArgs) {\n        var interp = InterpolationFactory.apply(void 0, _toConsumableArray(interpolationArgs));\n        return function (t) {\n          if (t === 0) return left;\n          if (t === 1) return right;\n          return interp(t);\n        };\n      }\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  return InterpolationFactory(false, true, function (bool) {\n    return bool ? right : left;\n  });\n}\n\n/**\n * interpolate with number, boolean, number[], boolean[]\n */\nfunction interpolate(from, to, f) {\n  if (typeof from === 'number' && typeof to === 'number') {\n    return from * (1 - f) + to * f;\n  }\n  if (typeof from === 'boolean' && typeof to === 'boolean' || typeof from === 'string' && typeof to === 'string' // skip string, eg. path ['M', 10, 10]\n  ) {\n    return f < 0.5 ? from : to;\n  }\n  if (Array.isArray(from) && Array.isArray(to)) {\n    // interpolate arrays/matrix\n    var fromLength = from.length;\n    var toLength = to.length;\n    var length = Math.max(fromLength, toLength);\n    var r = [];\n    for (var i = 0; i < length; i++) {\n      r.push(interpolate(from[i < fromLength ? i : fromLength - 1], to[i < toLength ? i : toLength - 1], f));\n    }\n    return r;\n  }\n  throw new Error(\"Mismatched interpolation arguments \".concat(from, \":\").concat(to));\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming\n */\nvar AnimationEffectTiming = /*#__PURE__*/function () {\n  function AnimationEffectTiming() {\n    _classCallCheck(this, AnimationEffectTiming);\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/delay\n     */\n    this.delay = 0;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/direction\n     */\n    this.direction = 'normal';\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration\n     */\n    this.duration = 'auto';\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing\n     */\n    this._easing = 'linear';\n    this.easingFunction = linear;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/endDelay\n     */\n    this.endDelay = 0;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/fill\n     */\n    this.fill = 'auto';\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterationStart\n     */\n    this.iterationStart = 0;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterations\n     */\n    this.iterations = 1;\n    this.currentIteration = null;\n    this.progress = null;\n  }\n  return _createClass(AnimationEffectTiming, [{\n    key: \"easing\",\n    get: function get() {\n      return this._easing;\n    },\n    set: function set(value) {\n      this.easingFunction = parseEasingFunction(value);\n      this._easing = value;\n    }\n  }]);\n}();\n\n/**\n * @example\n  {\n    translateY: [200, 300],\n    scale: [1, 10],\n  }\n\n * groups' length can be different, the following config should generate 3 frames:\n  @example\n  {\n    translateY: [200, 300, 400],\n    scale: [1, 10],\n  }\n */\nfunction convertToArrayForm(effectInput) {\n  var normalizedEffectInput = [];\n  for (var property in effectInput) {\n    // skip reserved props\n    if (property in ['easing', 'offset', 'composite']) {\n      continue;\n    }\n\n    // @ts-ignore\n    var values = effectInput[property];\n    if (!Array.isArray(values)) {\n      values = [values];\n    }\n    var numKeyframes = values.length;\n    for (var i = 0; i < numKeyframes; i++) {\n      if (!normalizedEffectInput[i]) {\n        var keyframe = {};\n        if ('offset' in effectInput) {\n          keyframe.offset = Number(effectInput.offset);\n        }\n        if ('easing' in effectInput) {\n          // @ts-ignore\n          keyframe.easing = effectInput.easing;\n        }\n        if ('composite' in effectInput) {\n          // @ts-ignore\n          keyframe.composite = effectInput.composite;\n        }\n        normalizedEffectInput[i] = keyframe;\n      }\n      if (values[i] !== undefined && values[i] !== null) {\n        normalizedEffectInput[i][property] = values[i];\n      }\n    }\n  }\n  normalizedEffectInput.sort(function (a, b) {\n    return (a.computedOffset || 0) - (b.computedOffset || 0);\n  });\n  return normalizedEffectInput;\n}\nfunction normalizeKeyframes(effectInput, timing) {\n  if (effectInput === null) {\n    return [];\n  }\n  if (!Array.isArray(effectInput)) {\n    effectInput = convertToArrayForm(effectInput);\n  }\n  var keyframes = effectInput.map(function (originalKeyframe) {\n    var keyframe = {};\n    if (timing !== null && timing !== void 0 && timing.composite) {\n      // This will be auto if the composite operation specified on the effect is being used.\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Keyframe_Formats\n      keyframe.composite = 'auto';\n    }\n    for (var member in originalKeyframe) {\n      var memberValue = originalKeyframe[member];\n      if (member === 'offset') {\n        if (memberValue !== null) {\n          memberValue = Number(memberValue);\n          if (!isFinite(memberValue)) throw new Error('Keyframe offsets must be numbers.');\n          if (memberValue < 0 || memberValue > 1) throw new Error('Keyframe offsets must be between 0 and 1.');\n          keyframe.computedOffset = memberValue;\n        }\n      } else if (member === 'composite') {\n        // TODO: Support add & accumulate in KeyframeEffect.composite\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect/composite\n        if (['replace', 'add', 'accumulate', 'auto'].indexOf(memberValue) === -1) {\n          throw new Error(\"\".concat(memberValue, \" compositing is not supported\"));\n        }\n      } else ;\n\n      // assign to keyframe, no need to parse shorthand value\n      keyframe[member] = memberValue;\n    }\n    if (keyframe.offset === undefined) {\n      keyframe.offset = null;\n    }\n    if (keyframe.easing === undefined) {\n      // override with timing.easing\n      keyframe.easing = (timing === null || timing === void 0 ? void 0 : timing.easing) || 'linear';\n    }\n    if (keyframe.composite === undefined) {\n      keyframe.composite = 'auto';\n    }\n    return keyframe;\n  });\n  var everyFrameHasOffset = true;\n  var previousOffset = -Infinity;\n  for (var i = 0; i < keyframes.length; i++) {\n    var offset = keyframes[i].offset;\n    if (!isNil(offset)) {\n      if (offset < previousOffset) {\n        throw new TypeError('Keyframes are not loosely sorted by offset. Sort or specify offsets.');\n      }\n      previousOffset = offset;\n    } else {\n      everyFrameHasOffset = false;\n    }\n  }\n  keyframes = keyframes.filter(function (keyframe) {\n    return Number(keyframe.offset) >= 0 && Number(keyframe.offset) <= 1;\n  });\n  function spaceKeyframes() {\n    var _keyframes$offset;\n    var _keyframes = keyframes,\n      length = _keyframes.length;\n    keyframes[length - 1].computedOffset = Number((_keyframes$offset = keyframes[length - 1].offset) !== null && _keyframes$offset !== void 0 ? _keyframes$offset : 1);\n    if (length > 1) {\n      var _keyframes$0$offset;\n      keyframes[0].computedOffset = Number((_keyframes$0$offset = keyframes[0].offset) !== null && _keyframes$0$offset !== void 0 ? _keyframes$0$offset : 0);\n    }\n    var previousIndex = 0;\n    var previousOffset = Number(keyframes[0].computedOffset);\n    for (var _i = 1; _i < length; _i++) {\n      var _offset = keyframes[_i].computedOffset;\n      if (!isNil(_offset) && !isNil(previousOffset)) {\n        for (var j = 1; j < _i - previousIndex; j++) keyframes[previousIndex + j].computedOffset = previousOffset + (Number(_offset) - previousOffset) * j / (_i - previousIndex);\n        previousIndex = _i;\n        previousOffset = Number(_offset);\n      }\n    }\n  }\n  if (!everyFrameHasOffset) spaceKeyframes();\n  return keyframes;\n}\n\nvar fills = 'backwards|forwards|both|none'.split('|');\nvar directions = 'reverse|alternate|alternate-reverse'.split('|');\nfunction makeTiming(timingInput, forGroup) {\n  var timing = new AnimationEffectTiming();\n  if (forGroup) {\n    timing.fill = 'both';\n    timing.duration = 'auto';\n  }\n  if (typeof timingInput === 'number' && !isNaN(timingInput)) {\n    timing.duration = timingInput;\n  } else if (timingInput !== undefined) {\n    Object.keys(timingInput).forEach(function (property) {\n      if (timingInput[property] !== undefined && timingInput[property] !== null && timingInput[property] !== 'auto') {\n        if (typeof timing[property] === 'number' || property === 'duration') {\n          if (typeof timingInput[property] !== 'number' || isNaN(timingInput[property])) {\n            return;\n          }\n        }\n        if (property === 'fill' && fills.indexOf(timingInput[property]) === -1) {\n          return;\n        }\n        if (property === 'direction' && directions.indexOf(timingInput[property]) === -1) {\n          return;\n        }\n        // @ts-ignore\n        timing[property] = timingInput[property];\n      }\n    });\n  }\n  return timing;\n}\nfunction normalizeTimingInput(timingInput, forGroup) {\n  var _timingInput;\n  timingInput = numericTimingToObject((_timingInput = timingInput) !== null && _timingInput !== void 0 ? _timingInput : {\n    duration: 'auto'\n  });\n  return makeTiming(timingInput, forGroup);\n}\nfunction numericTimingToObject(timingInput) {\n  if (typeof timingInput === 'number') {\n    if (isNaN(timingInput)) {\n      timingInput = {\n        duration: 'auto'\n      };\n    } else {\n      timingInput = {\n        duration: timingInput\n      };\n    }\n  }\n  return timingInput;\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect\n * @example\n  const circleDownKeyframes = new KeyframeEffect(\n    circle, // element to animate\n    [\n      { transform: 'translateY(0)' }, // keyframe\n      { transform: 'translateY(100)' } // keyframe\n    ],\n    { duration: 3000, fill: 'forwards' } // keyframe options\n  );\n *\n */\nvar KeyframeEffect = /*#__PURE__*/function () {\n  // pseudoElement: string | null;\n\n  function KeyframeEffect(target, effectInput, timingInput) {\n    var _this = this;\n    _classCallCheck(this, KeyframeEffect);\n    this.composite = 'replace';\n    this.iterationComposite = 'replace';\n    this.target = target;\n    this.timing = normalizeTimingInput(timingInput, false);\n    this.timing.effect = this;\n    this.timing.activeDuration = calculateActiveDuration(this.timing);\n    this.timing.endTime = Math.max(0, this.timing.delay + this.timing.activeDuration + this.timing.endDelay);\n    this.normalizedKeyframes = normalizeKeyframes(effectInput, this.timing);\n    this.interpolations = convertEffectInput(this.normalizedKeyframes, this.timing, this.target);\n\n    //  proxy  this.timing\n    var Proxy = runtime.globalThis.Proxy;\n    this.computedTiming = Proxy ? new Proxy(this.timing, {\n      get: function get(target, prop) {\n        if (prop === 'duration') {\n          return target.duration === 'auto' ? 0 : target.duration;\n        }\n        if (prop === 'fill') {\n          return target.fill === 'auto' ? 'none' : target.fill;\n        }\n        if (prop === 'localTime') {\n          return _this.animation && _this.animation.currentTime || null;\n        }\n        if (prop === 'currentIteration') {\n          if (!_this.animation || _this.animation.playState !== 'running') {\n            return null;\n          }\n          return target.currentIteration || 0;\n        }\n        if (prop === 'progress') {\n          if (!_this.animation || _this.animation.playState !== 'running') {\n            return null;\n          }\n          return target.progress || 0;\n        }\n        return target[prop];\n      },\n      set: function set() {\n        return true;\n      }\n    }) : this.timing;\n  }\n  return _createClass(KeyframeEffect, [{\n    key: \"applyInterpolations\",\n    value: function applyInterpolations() {\n      this.interpolations(this.target, Number(this.timeFraction));\n    }\n  }, {\n    key: \"update\",\n    value: function update(localTime) {\n      if (localTime === null) {\n        return false;\n      }\n      this.timeFraction = calculateIterationProgress(this.timing.activeDuration, localTime, this.timing);\n      return this.timeFraction !== null;\n    }\n  }, {\n    key: \"getKeyframes\",\n    value: function getKeyframes() {\n      return this.normalizedKeyframes;\n    }\n  }, {\n    key: \"setKeyframes\",\n    value: function setKeyframes(keyframes) {\n      this.normalizedKeyframes = normalizeKeyframes(keyframes);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n     */\n  }, {\n    key: \"getComputedTiming\",\n    value: function getComputedTiming() {\n      return this.computedTiming;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getTiming\n     */\n  }, {\n    key: \"getTiming\",\n    value: function getTiming() {\n      return this.timing;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/updateTiming\n     */\n  }, {\n    key: \"updateTiming\",\n    value: function updateTiming(timing) {\n      var _this2 = this;\n      Object.keys(timing || {}).forEach(function (name) {\n        _this2.timing[name] = timing[name];\n      });\n    }\n  }]);\n}();\n\nfunction compareAnimations(leftAnimation, rightAnimation) {\n  return Number(leftAnimation.id) - Number(rightAnimation.id);\n}\n\n/**\n * @see https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/web-animations-js/index.d.ts\n */\nvar AnimationTimeline = /*#__PURE__*/function () {\n  function AnimationTimeline(document) {\n    var _this = this;\n    _classCallCheck(this, AnimationTimeline);\n    /**\n     * all active animations\n     */\n    this.animations = [];\n    this.ticking = false;\n    this.timelineTicking = false;\n    this.hasRestartedThisFrame = false;\n    this.animationsWithPromises = [];\n    this.inTick = false;\n    this.pendingEffects = [];\n    this.currentTime = null;\n    this.rafId = 0;\n    this.rafCallbacks = [];\n    this.webAnimationsNextTick = function (t) {\n      _this.currentTime = t;\n      _this.discardAnimations();\n      if (_this.animations.length === 0) {\n        _this.timelineTicking = false;\n      } else {\n        _this.requestAnimationFrame(_this.webAnimationsNextTick);\n      }\n    };\n    this.processRafCallbacks = function (t) {\n      var processing = _this.rafCallbacks;\n      _this.rafCallbacks = [];\n      if (t < Number(_this.currentTime)) t = Number(_this.currentTime);\n      _this.animations.sort(compareAnimations);\n      _this.animations = _this.tick(t, true, _this.animations)[0];\n      processing.forEach(function (entry) {\n        entry[1](t);\n      });\n      _this.applyPendingEffects();\n    };\n    this.document = document;\n  }\n  return _createClass(AnimationTimeline, [{\n    key: \"getAnimations\",\n    value: function getAnimations() {\n      this.discardAnimations();\n      return this.animations.slice();\n    }\n  }, {\n    key: \"isTicking\",\n    value: function isTicking() {\n      return this.inTick;\n    }\n  }, {\n    key: \"play\",\n    value: function play(target, keyframes, options) {\n      var effect = new KeyframeEffect(target, keyframes, options);\n      var animation = new Animation(effect, this);\n      this.animations.push(animation);\n      this.restartWebAnimationsNextTick();\n      animation.updatePromises();\n      animation.play();\n      animation.updatePromises();\n      return animation;\n    }\n\n    // RAF is supposed to be the last script to occur before frame rendering but not\n    // all browsers behave like this. This function is for synchonously updating an\n    // animation's effects whenever its state is mutated by script to work around\n    // incorrect script execution ordering by the browser.\n  }, {\n    key: \"applyDirtiedAnimation\",\n    value: function applyDirtiedAnimation(animation) {\n      var _this2 = this;\n      if (this.inTick) {\n        return;\n      }\n      // update active animations in displayobject\n      animation.markTarget();\n      var animations = animation.targetAnimations();\n      animations.sort(compareAnimations);\n\n      // clear inactive animations\n      var inactiveAnimations = this.tick(Number(this.currentTime), false, animations.slice())[1];\n      inactiveAnimations.forEach(function (animation) {\n        var index = _this2.animations.indexOf(animation);\n        if (index !== -1) {\n          _this2.animations.splice(index, 1);\n        }\n      });\n      this.applyPendingEffects();\n    }\n  }, {\n    key: \"restart\",\n    value: function restart() {\n      if (!this.ticking) {\n        this.ticking = true;\n        this.requestAnimationFrame(function () {});\n        this.hasRestartedThisFrame = true;\n      }\n      return this.hasRestartedThisFrame;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.document.defaultView.cancelAnimationFrame(this.frameId);\n    }\n  }, {\n    key: \"applyPendingEffects\",\n    value: function applyPendingEffects() {\n      this.pendingEffects.forEach(function (effect) {\n        effect === null || effect === void 0 || effect.applyInterpolations();\n      });\n      this.pendingEffects = [];\n    }\n  }, {\n    key: \"updateAnimationsPromises\",\n    value: function updateAnimationsPromises() {\n      this.animationsWithPromises = this.animationsWithPromises.filter(function (animation) {\n        return animation.updatePromises();\n      });\n    }\n  }, {\n    key: \"discardAnimations\",\n    value: function discardAnimations() {\n      this.updateAnimationsPromises();\n      this.animations = this.animations.filter(function (animation) {\n        return animation.playState !== 'finished' && animation.playState !== 'idle';\n      });\n    }\n  }, {\n    key: \"restartWebAnimationsNextTick\",\n    value: function restartWebAnimationsNextTick() {\n      if (!this.timelineTicking) {\n        this.timelineTicking = true;\n        this.requestAnimationFrame(this.webAnimationsNextTick);\n      }\n    }\n  }, {\n    key: \"rAF\",\n    value: function rAF(f) {\n      var id = this.rafId++;\n      if (this.rafCallbacks.length === 0) {\n        this.frameId = this.document.defaultView.requestAnimationFrame(this.processRafCallbacks);\n      }\n      this.rafCallbacks.push([id, f]);\n      return id;\n    }\n  }, {\n    key: \"requestAnimationFrame\",\n    value: function requestAnimationFrame(f) {\n      var _this3 = this;\n      return this.rAF(function (x) {\n        _this3.updateAnimationsPromises();\n        f(x);\n        _this3.updateAnimationsPromises();\n      });\n    }\n  }, {\n    key: \"tick\",\n    value: function tick(t, isAnimationFrame, updatingAnimations) {\n      var _this4 = this,\n        _this$pendingEffects,\n        _this$pendingEffects2;\n      this.inTick = true;\n      this.hasRestartedThisFrame = false;\n      this.currentTime = t;\n      this.ticking = false;\n      var newPendingClears = [];\n      var newPendingEffects = [];\n      var activeAnimations = [];\n      var inactiveAnimations = [];\n      updatingAnimations.forEach(function (animation) {\n        animation.tick(t, isAnimationFrame);\n        if (!animation._inEffect) {\n          newPendingClears.push(animation.effect);\n          animation.unmarkTarget();\n        } else {\n          newPendingEffects.push(animation.effect);\n          animation.markTarget();\n        }\n        if (animation._needsTick) _this4.ticking = true;\n        var alive = animation._inEffect || animation._needsTick;\n        animation._inTimeline = alive;\n        if (alive) {\n          activeAnimations.push(animation);\n        } else {\n          inactiveAnimations.push(animation);\n        }\n      });\n      (_this$pendingEffects = this.pendingEffects).push.apply(_this$pendingEffects, newPendingClears);\n      (_this$pendingEffects2 = this.pendingEffects).push.apply(_this$pendingEffects2, newPendingEffects);\n      if (this.ticking) this.requestAnimationFrame(function () {});\n      this.inTick = false;\n      return [activeAnimations, inactiveAnimations];\n    }\n  }]);\n}();\n\nruntime.EasingFunction = parseEasingFunction;\nruntime.AnimationTimeline = AnimationTimeline;\n\nexport { Animation, AnimationEvent, AnimationTimeline, EasingFunctions, KeyframeEffect, compareAnimations, makeTiming, normalizeKeyframes, normalizeTimingInput, numericTimingToObject };\n//# sourceMappingURL=index.esm.js.map\n","function internGet({ map, initKey }, value) {\n    const key = initKey(value);\n    return map.has(key) ? map.get(key) : value;\n}\nfunction internSet({ map, initKey }, value) {\n    const key = initKey(value);\n    if (map.has(key))\n        return map.get(key);\n    map.set(key, value);\n    return value;\n}\nfunction internDelete({ map, initKey }, value) {\n    const key = initKey(value);\n    if (map.has(key)) {\n        value = map.get(key);\n        map.delete(key);\n    }\n    return value;\n}\nfunction keyof(value) {\n    return typeof value === 'object' ? value.valueOf() : value;\n}\n/**\n * @see  https://github.com/mbostock/internmap/blob/main/src/index.js\n */\nexport class InternMap extends Map {\n    constructor(entries) {\n        super();\n        this.map = new Map();\n        this.initKey = keyof;\n        if (entries !== null) {\n            for (const [key, value] of entries) {\n                this.set(key, value);\n            }\n        }\n    }\n    get(key) {\n        return super.get(internGet({ map: this.map, initKey: this.initKey }, key));\n    }\n    has(key) {\n        return super.has(internGet({ map: this.map, initKey: this.initKey }, key));\n    }\n    set(key, value) {\n        return super.set(internSet({ map: this.map, initKey: this.initKey }, key), value);\n    }\n    delete(key) {\n        return super.delete(internDelete({ map: this.map, initKey: this.initKey }, key));\n    }\n}\n//# sourceMappingURL=internMap.js.map","import { InternMap } from '../utils';\nimport { Ordinal, defaultUnknown } from './ordinal';\nfunction normalize(array) {\n    const min = Math.min(...array);\n    return array.map((d) => d / min);\n}\nfunction splice(array, n) {\n    const sn = array.length;\n    const diff = n - sn;\n    return diff > 0 ? [...array, ...new Array(diff).fill(1)] : diff < 0 ? array.slice(0, n) : array;\n}\nfunction pretty(n) {\n    return Math.round(n * 1e12) / 1e12;\n}\n/**\n *  band  flex band \n */\nfunction computeFlexBandState(options) {\n    //  flex  domain \n    //  flex  domain \n    const { domain, range, paddingOuter, paddingInner, flex: F, round, align } = options;\n    const n = domain.length;\n    const flex = splice(F, n);\n    //  step \n    // stepSum = step1 + step2 ... + stepN;\n    // stepAverage = stepSum / n;\n    // PO = stepAverage * paddingOuter;\n    // PI = stepAverage * paddingInner;\n    // width = PO * 2 + stepSum - PI;\n    const [start, end] = range;\n    const width = end - start;\n    const ratio = (2 / n) * paddingOuter + 1 - (1 / n) * paddingInner;\n    const stepSum = width / ratio;\n    // stepSum = (b1 + PI) + (b2 + PI) ... + (bN + PI)\n    // = bandSum + PI * n;\n    const PI = (stepSum * paddingInner) / n;\n    const bandWidthSum = stepSum - n * PI;\n    //  bandWidth\n    const normalizedFlex = normalize(flex);\n    const flexSum = normalizedFlex.reduce((sum, value) => sum + value);\n    const minBandWidth = bandWidthSum / flexSum;\n    //  bandWidth  step\n    const valueBandWidth = new InternMap(domain.map((d, i) => {\n        const bandWidth = normalizedFlex[i] * minBandWidth;\n        return [d, round ? Math.floor(bandWidth) : bandWidth];\n    }));\n    const valueStep = new InternMap(domain.map((d, i) => {\n        const bandWidth = normalizedFlex[i] * minBandWidth;\n        const step = bandWidth + PI;\n        return [d, round ? Math.floor(step) : step];\n    }));\n    // \n    //  step  round  step \n    const finalStepSum = Array.from(valueStep.values()).reduce((sum, value) => sum + value);\n    const outerPaddingSum = width - (finalStepSum - (finalStepSum / n) * paddingInner);\n    const offset = outerPaddingSum * align;\n    //  adjustedRange domain \n    const bandStart = start + offset;\n    let prev = round ? Math.round(bandStart) : bandStart;\n    const adjustedRange = new Array(n);\n    for (let i = 0; i < n; i += 1) {\n        // \n        adjustedRange[i] = pretty(prev);\n        const value = domain[i];\n        prev += valueStep.get(value);\n    }\n    return {\n        valueBandWidth,\n        valueStep,\n        adjustedRange,\n    };\n}\n/**\n *  band  band \n */\nfunction computeBandState(options) {\n    var _a;\n    const { domain } = options;\n    const n = domain.length;\n    if (n === 0) {\n        return {\n            valueBandWidth: undefined,\n            valueStep: undefined,\n            adjustedRange: [],\n        };\n    }\n    const hasFlex = !!((_a = options.flex) === null || _a === void 0 ? void 0 : _a.length);\n    if (hasFlex) {\n        return computeFlexBandState(options);\n    }\n    const { range, paddingOuter, paddingInner, round, align } = options;\n    let step;\n    let bandWidth;\n    let rangeStart = range[0];\n    const rangeEnd = range[1];\n    // range \n    // = stop - start\n    // = (n * step(n  step) )\n    // + (2 * step * paddingOuter( padding))\n    // - (1 * step * paddingInner( inner))\n    const deltaRange = rangeEnd - rangeStart;\n    const outerTotal = paddingOuter * 2;\n    const innerTotal = n - paddingInner;\n    step = deltaRange / Math.max(1, outerTotal + innerTotal);\n    // \n    if (round) {\n        step = Math.floor(step);\n    }\n    //  align \n    rangeStart += (deltaRange - step * (n - paddingInner)) * align;\n    //  step \n    // step = bandWidth + step * paddingInner\n    //  bandWidth = step - step * (paddingInner)\n    bandWidth = step * (1 - paddingInner);\n    if (round) {\n        rangeStart = Math.round(rangeStart);\n        bandWidth = Math.round(bandWidth);\n    }\n    //  range\n    const adjustedRange = new Array(n).fill(0).map((_, i) => rangeStart + i * step);\n    return {\n        valueStep: step,\n        valueBandWidth: bandWidth,\n        adjustedRange,\n    };\n}\n/**\n * Band \n *\n *  ordinal scale\n * \n *\n * \n *\n * BN = bandWidthN\n * SN = stepN\n * domain = [A, B]\n *\n * \n * width = PO + B1 + PI + B2 + PI ... + BN + PO;\n * PO = (S1 + S2 + ... SN) / N * paddingOuter\n * PI = (S1 + S2 + ... SN) / N * paddingInner\n * BN / BN-1 = flex[n] / flex[n-1]\n *\n * |<------------------------------------------- range ------------------------------------------->|\n * |             |                   |             |                   |             |             |\n * |<-----PO---->|<------B1--------->|<-----PI---->|<-------B2-------->|<----PI----->|<-----PO---->|\n * |             | ***************** |             | ***************** |             |             |\n * |             | ******* A ******* |             | ******* B ******* |             |             |\n * |             | ***************** |             | ***************** |             |             |\n * |             |<--------------S1--------------->| <--------------S2-------------->|                                              |\n * |-----------------------------------------------------------------------------------------------|\n *\n */\nexport class Band extends Ordinal {\n    // \n    getDefaultOptions() {\n        return {\n            domain: [],\n            range: [0, 1],\n            align: 0.5,\n            round: false,\n            paddingInner: 0,\n            paddingOuter: 0,\n            padding: 0,\n            unknown: defaultUnknown,\n            flex: [],\n        };\n    }\n    //  options  OrdinalOptions O \n    constructor(options) {\n        super(options);\n    }\n    clone() {\n        return new Band(this.options);\n    }\n    getStep(x) {\n        if (this.valueStep === undefined)\n            return 1;\n        //  flex , valueStep  number \n        if (typeof this.valueStep === 'number') {\n            return this.valueStep;\n        }\n        //  flex  1 x \n        //  step \n        if (x === undefined)\n            return Array.from(this.valueStep.values())[0];\n        return this.valueStep.get(x);\n    }\n    getBandWidth(x) {\n        if (this.valueBandWidth === undefined)\n            return 1;\n        //  flex, valueBandWidth  number \n        if (typeof this.valueBandWidth === 'number') {\n            return this.valueBandWidth;\n        }\n        //  flex  1 x \n        //  bandWidth \n        if (x === undefined)\n            return Array.from(this.valueBandWidth.values())[0];\n        return this.valueBandWidth.get(x);\n    }\n    getRange() {\n        return this.adjustedRange;\n    }\n    getPaddingInner() {\n        const { padding, paddingInner } = this.options;\n        return padding > 0 ? padding : paddingInner;\n    }\n    getPaddingOuter() {\n        const { padding, paddingOuter } = this.options;\n        return padding > 0 ? padding : paddingOuter;\n    }\n    rescale() {\n        super.rescale();\n        // opt.padding  0  paddingInner paddingOuter\n        //  padding  paddingInner  paddingOuter \n        const { align, domain, range, round, flex } = this.options;\n        const { adjustedRange, valueBandWidth, valueStep } = computeBandState({\n            align,\n            range,\n            round,\n            flex,\n            paddingInner: this.getPaddingInner(),\n            paddingOuter: this.getPaddingOuter(),\n            domain,\n        });\n        // \n        this.valueStep = valueStep;\n        this.valueBandWidth = valueBandWidth;\n        this.adjustedRange = adjustedRange;\n    }\n}\n//# sourceMappingURL=band.js.map","import { deepMix } from '@antv/util';\nexport class Base {\n    /**\n     * \n     * @param options \n     */\n    constructor(options) {\n        this.options = deepMix({}, this.getDefaultOptions());\n        this.update(options);\n    }\n    /**\n     * \n     * @returns \n     */\n    getOptions() {\n        return this.options;\n    }\n    /**\n     * \n     * @param updateOptions \n     */\n    update(updateOptions = {}) {\n        this.options = deepMix({}, this.options, updateOptions);\n        this.rescale(updateOptions);\n    }\n    /**\n     *  options  options  scale \n     *  this.options  options\n     * @param options  options\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    rescale(options) { }\n}\n//# sourceMappingURL=base.js.map","import { identity } from '@antv/util';\nimport { Base } from './base';\nimport { createInterpolateNumber, createInterpolateRound, createClamp, createNormalize, bisect, compose, d3LinearNice, isValid, } from '../utils';\n/**  domain  range  map   */\nconst createBiMap = (domain, range, createInterpolate) => {\n    const [d0, d1] = domain;\n    const [r0, r1] = range;\n    let normalize;\n    let interpolate;\n    if (d0 < d1) {\n        normalize = createNormalize(d0, d1);\n        interpolate = createInterpolate(r0, r1);\n    }\n    else {\n        normalize = createNormalize(d1, d0);\n        interpolate = createInterpolate(r1, r0);\n    }\n    return compose(interpolate, normalize);\n};\n/**  domain  range  map   */\nconst createPolyMap = (domain, range, createInterpolate) => {\n    const len = Math.min(domain.length, range.length) - 1;\n    const normalizeList = new Array(len);\n    const interpolateList = new Array(len);\n    const reverse = domain[0] > domain[len];\n    const ascendingDomain = reverse ? [...domain].reverse() : domain;\n    const ascendingRange = reverse ? [...range].reverse() : range;\n    //  normalize  interpolate\n    for (let i = 0; i < len; i += 1) {\n        normalizeList[i] = createNormalize(ascendingDomain[i], ascendingDomain[i + 1]);\n        interpolateList[i] = createInterpolate(ascendingRange[i], ascendingRange[i + 1]);\n    }\n    //  normalize  interpolate\n    return (x) => {\n        const i = bisect(domain, x, 1, len) - 1;\n        const normalize = normalizeList[i];\n        const interpolate = interpolateList[i];\n        return compose(interpolate, normalize)(x);\n    };\n};\n/**  */\nconst choosePiecewise = (domain, range, interpolate, shouldRound) => {\n    const n = Math.min(domain.length, range.length);\n    const createPiecewise = n > 2 ? createPolyMap : createBiMap;\n    const createInterpolate = shouldRound ? createInterpolateRound : interpolate;\n    return createPiecewise(domain, range, createInterpolate);\n};\n/**\n * Continuous   x  y y = a * f(x) + b\n * \n * https://github.com/d3/d3-scale/blob/master/src/continuous.js\n */\nexport class Continuous extends Base {\n    getDefaultOptions() {\n        return {\n            domain: [0, 1],\n            range: [0, 1],\n            nice: false,\n            clamp: false,\n            round: false,\n            interpolate: createInterpolateNumber,\n            tickCount: 5,\n        };\n    }\n    /**\n     * y = interpolate(normalize(clamp(transform(x))))\n     */\n    map(x) {\n        if (!isValid(x))\n            return this.options.unknown;\n        return this.output(x);\n    }\n    /**\n     * x = transform(clamp(interpolate(normalize(y))))\n     */\n    invert(x) {\n        if (!isValid(x))\n            return this.options.unknown;\n        return this.input(x);\n    }\n    nice() {\n        if (!this.options.nice)\n            return;\n        const [min, max, tickCount, ...rest] = this.getTickMethodOptions();\n        this.options.domain = this.chooseNice()(min, max, tickCount, ...rest);\n    }\n    getTicks() {\n        const { tickMethod } = this.options;\n        const [min, max, tickCount, ...rest] = this.getTickMethodOptions();\n        return tickMethod(min, max, tickCount, ...rest);\n    }\n    getTickMethodOptions() {\n        const { domain, tickCount } = this.options;\n        const min = domain[0];\n        const max = domain[domain.length - 1];\n        return [min, max, tickCount];\n    }\n    chooseNice() {\n        return d3LinearNice;\n    }\n    rescale() {\n        this.nice();\n        const [transform, untransform] = this.chooseTransforms();\n        this.composeOutput(transform, this.chooseClamp(transform));\n        this.composeInput(transform, untransform, this.chooseClamp(untransform));\n    }\n    chooseClamp(transform) {\n        const { clamp: shouldClamp, range } = this.options;\n        const domain = this.options.domain.map(transform);\n        const n = Math.min(domain.length, range.length);\n        return shouldClamp ? createClamp(domain[0], domain[n - 1]) : identity;\n    }\n    composeOutput(transform, clamp) {\n        const { domain, range, round, interpolate } = this.options;\n        const piecewise = choosePiecewise(domain.map(transform), range, interpolate, round);\n        this.output = compose(piecewise, clamp, transform);\n    }\n    composeInput(transform, untransform, clamp) {\n        const { domain, range } = this.options;\n        const piecewise = choosePiecewise(range, domain.map(transform), createInterpolateNumber);\n        this.input = compose(untransform, clamp, piecewise);\n    }\n}\n//# sourceMappingURL=continuous.js.map","/**\n *  clamp \n * @param a \n * @param b \n * @returns clamp \n */\nexport function createClamp(a, b) {\n    const lo = b < a ? b : a;\n    const hi = a > b ? a : b;\n    return (x) => Math.min(Math.max(lo, x), hi);\n}\n//# sourceMappingURL=clamp.js.map","import { identity } from '@antv/util';\nimport { Continuous } from './continuous';\nimport { createInterpolateValue } from '../utils';\nimport { d3Ticks } from '../tick-methods/d3-ticks';\n/**\n * Linear \n *\n * \n */\nexport class Linear extends Continuous {\n    getDefaultOptions() {\n        return {\n            domain: [0, 1],\n            range: [0, 1],\n            unknown: undefined,\n            nice: false,\n            clamp: false,\n            round: false,\n            interpolate: createInterpolateValue,\n            tickMethod: d3Ticks,\n            tickCount: 5,\n        };\n    }\n    chooseTransforms() {\n        return [identity, identity];\n    }\n    clone() {\n        return new Linear(this.options);\n    }\n}\n//# sourceMappingURL=linear.js.map","import { Base } from './base';\nexport const defaultUnknown = Symbol('defaultUnknown');\n/**\n *  indexMap\n *\n * @param arr \n * @param target  map\n * @returns {Map<string, any>}  indexMap\n */\nfunction updateIndexMap(target, arr, key) {\n    for (let i = 0; i < arr.length; i += 1) {\n        if (!target.has(arr[i])) {\n            target.set(key(arr[i]), i);\n        }\n    }\n}\n/**\n *  indexMap \n *\n * @param options \n * @see MapBetweenArrOptions\n * @return {any} \n */\nfunction mapBetweenArrByMapIndex(options) {\n    const { value, from, to, mapper, notFoundReturn } = options;\n    let mappedIndex = mapper.get(value);\n    // index \n    //  unknown  unknown \n    //  value ,  Map\n    if (mappedIndex === undefined) {\n        if (notFoundReturn !== defaultUnknown) {\n            return notFoundReturn;\n        }\n        mappedIndex = from.push(value) - 1;\n        mapper.set(value, mappedIndex);\n    }\n    return to[mappedIndex % to.length];\n}\nfunction createKey(d) {\n    if (d instanceof Date)\n        return (d) => `${d}`;\n    if (typeof d === 'object')\n        return (d) => JSON.stringify(d);\n    return (d) => d;\n}\n/**\n * Ordinal \n *\n * \n *\n * -  for  map for  forEach, map\n * -  mapinvert  update \n * -  map  new Map \n *    update  d3-scale \n */\nexport class Ordinal extends Base {\n    // \n    getDefaultOptions() {\n        return {\n            domain: [],\n            range: [],\n            unknown: defaultUnknown,\n        };\n    }\n    //  options  OrdinalOptions O \n    constructor(options) {\n        super(options);\n    }\n    map(x) {\n        if (this.domainIndexMap.size === 0) {\n            updateIndexMap(this.domainIndexMap, this.getDomain(), this.domainKey);\n        }\n        return mapBetweenArrByMapIndex({\n            value: this.domainKey(x),\n            mapper: this.domainIndexMap,\n            from: this.getDomain(),\n            to: this.getRange(),\n            notFoundReturn: this.options.unknown,\n        });\n    }\n    invert(y) {\n        if (this.rangeIndexMap.size === 0) {\n            updateIndexMap(this.rangeIndexMap, this.getRange(), this.rangeKey);\n        }\n        return mapBetweenArrByMapIndex({\n            value: this.rangeKey(y),\n            mapper: this.rangeIndexMap,\n            from: this.getRange(),\n            to: this.getDomain(),\n            notFoundReturn: this.options.unknown,\n        });\n    }\n    //  ordinal \n    rescale(options) {\n        const [d] = this.options.domain;\n        const [r] = this.options.range;\n        this.domainKey = createKey(d);\n        this.rangeKey = createKey(r);\n        //  rangeIndexMap \n        if (!this.rangeIndexMap) {\n            this.rangeIndexMap = new Map();\n            this.domainIndexMap = new Map();\n            return;\n        }\n        // \n        if (!options || options.range) {\n            this.rangeIndexMap.clear();\n        }\n        if (!options || options.domain || options.compare) {\n            this.domainIndexMap.clear();\n            this.sortedDomain = undefined;\n        }\n    }\n    clone() {\n        return new Ordinal(this.options);\n    }\n    getRange() {\n        return this.options.range;\n    }\n    getDomain() {\n        // \n        if (this.sortedDomain)\n            return this.sortedDomain;\n        const { domain, compare } = this.options;\n        this.sortedDomain = compare ? [...domain].sort(compare) : domain;\n        return this.sortedDomain;\n    }\n}\n//# sourceMappingURL=ordinal.js.map","import { tickIncrement } from '../utils';\nexport const d3Ticks = (begin, end, count) => {\n    let n;\n    let ticks;\n    let start = begin;\n    let stop = end;\n    if (start === stop && count > 0) {\n        return [start];\n    }\n    let step = tickIncrement(start, stop, count);\n    if (step === 0 || !Number.isFinite(step)) {\n        return [];\n    }\n    if (step > 0) {\n        start = Math.ceil(start / step);\n        stop = Math.floor(stop / step);\n        ticks = new Array((n = Math.ceil(stop - start + 1)));\n        for (let i = 0; i < n; i += 1) {\n            ticks[i] = (start + i) * step;\n        }\n    }\n    else {\n        step = -step;\n        start = Math.ceil(start * step);\n        stop = Math.floor(stop * step);\n        ticks = new Array((n = Math.ceil(stop - start + 1)));\n        for (let i = 0; i < n; i += 1) {\n            ticks[i] = (start + i) / step;\n        }\n    }\n    return ticks;\n};\n//# sourceMappingURL=d3-ticks.js.map","/**\n *  array[lo, hi)  x i\n * https://github.com/d3/d3-array/blob/master/src/bisector.js\n * @param array \n * @param x \n * @param lo \n * @param hi \n * @returns \n */\nexport function bisect(array, x, lo, hi, getter) {\n    let i = lo || 0;\n    let j = hi || array.length;\n    const get = getter || ((x) => x);\n    while (i < j) {\n        const mid = Math.floor((i + j) / 2);\n        if (get(array[mid]) > x) {\n            j = mid;\n        }\n        else {\n            i = mid + 1;\n        }\n    }\n    return i;\n}\n//# sourceMappingURL=bisect.js.map","/**\n * \n * @param fn \n * @param rest \n * @returns \n */\nexport function compose(fn, ...rest) {\n    return rest.reduce((pre, cur) => (x) => pre(cur(x)), fn);\n}\n//# sourceMappingURL=compose.js.map","//  d3-ticks nice \n// https://github.com/d3/d3-scale\nimport { tickIncrement } from './ticks';\nexport const d3LinearNice = (min, max, count = 5) => {\n    const d = [min, max];\n    let i0 = 0;\n    let i1 = d.length - 1;\n    let start = d[i0];\n    let stop = d[i1];\n    let step;\n    if (stop < start) {\n        [start, stop] = [stop, start];\n        [i0, i1] = [i1, i0];\n    }\n    step = tickIncrement(start, stop, count);\n    if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n        step = tickIncrement(start, stop, count);\n    }\n    else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n        step = tickIncrement(start, stop, count);\n    }\n    if (step > 0) {\n        d[i0] = Math.floor(start / step) * step;\n        d[i1] = Math.ceil(stop / step) * step;\n    }\n    else if (step < 0) {\n        d[i0] = Math.ceil(start * step) / step;\n        d[i1] = Math.floor(stop * step) / step;\n    }\n    return d;\n};\n//# sourceMappingURL=d3-linear-nice.js.map","import colorString from 'color-string';\nfunction hue2rgb(p, q, m) {\n    let t = m;\n    if (t < 0)\n        t += 1;\n    if (t > 1)\n        t -= 1;\n    if (t < 1 / 6)\n        return p + (q - p) * 6 * t;\n    if (t < 1 / 2)\n        return q;\n    if (t < 2 / 3)\n        return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n}\nfunction hsl2rbg(hsl) {\n    const h = hsl[0] / 360;\n    const s = hsl[1] / 100;\n    const l = hsl[2] / 100;\n    const a = hsl[3];\n    if (s === 0)\n        return [l * 255, l * 255, l * 255, a];\n    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    const p = 2 * l - q;\n    const r = hue2rgb(p, q, h + 1 / 3);\n    const g = hue2rgb(p, q, h);\n    const b = hue2rgb(p, q, h - 1 / 3);\n    return [r * 255, g * 255, b * 255, a];\n}\nexport function string2rbg(s) {\n    const color = colorString.get(s);\n    if (!color)\n        return null;\n    const { model, value } = color;\n    if (model === 'rgb')\n        return value;\n    if (model === 'hsl')\n        return hsl2rbg(value);\n    return null;\n}\n//# sourceMappingURL=color.js.map","import { string2rbg } from './color';\n/**\n * \n * @param a \n * @param b \n * @returns \n */\nexport const createInterpolateNumber = (a, b) => {\n    return (t) => a * (1 - t) + b * t;\n};\nexport const createInterpolateColor = (a, b) => {\n    const c1 = string2rbg(a);\n    const c2 = string2rbg(b);\n    if (c1 === null || c2 === null)\n        return c1 ? () => a : () => b;\n    return (t) => {\n        const values = new Array(4);\n        for (let i = 0; i < 4; i += 1) {\n            const from = c1[i];\n            const to = c2[i];\n            values[i] = from * (1 - t) + to * t;\n        }\n        const [r, g, b, a] = values;\n        return `rgba(${Math.round(r)}, ${Math.round(g)}, ${Math.round(b)}, ${a})`;\n    };\n};\n/**\n * \n * @param a \n * @param b \n * @returns \n */\nexport const createInterpolateValue = (a, b) => {\n    if (typeof a === 'number' && typeof b === 'number')\n        return createInterpolateNumber(a, b);\n    if (typeof a === 'string' && typeof b === 'string')\n        return createInterpolateColor(a, b);\n    return () => a;\n};\n/**\n *  round \n * @param a \n * @param b \n * @returns \n */\nexport const createInterpolateRound = (a, b) => {\n    const interpolateNumber = createInterpolateNumber(a, b);\n    return (t) => Math.round(interpolateNumber(t));\n};\n//# sourceMappingURL=interpolate.js.map","var isNull = function (value) {\n    return value === null;\n};\nexport default isNull;\n//# sourceMappingURL=is-null.js.map","import { isNull, isUndefined } from '@antv/util';\nexport function isValid(x) {\n    return !isUndefined(x) && !isNull(x) && !Number.isNaN(x);\n}\n//# sourceMappingURL=is-valid.js.map","/**\n *  normalize  t  [a, b]  [0, 1]\n * @param a  t \n * @param b  t \n * @returns normalize \n */\nexport function createNormalize(a, b) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    return b - a ? (t) => (t - a) / (b - a) : (_) => 0.5;\n}\n//# sourceMappingURL=normalize.js.map","const e10 = Math.sqrt(50);\nconst e5 = Math.sqrt(10);\nconst e2 = Math.sqrt(2);\nexport function tickIncrement(start, stop, count) {\n    const step = (stop - start) / Math.max(0, count);\n    const power = Math.floor(Math.log(step) / Math.LN10);\n    const error = step / 10 ** power;\n    if (power >= 0) {\n        // eslint-disable-next-line no-nested-ternary\n        return (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * 10 ** power;\n    }\n    // eslint-disable-next-line no-nested-ternary\n    return -(10 ** -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\nexport function tickStep(start, stop, count) {\n    const step0 = Math.abs(stop - start) / Math.max(0, count);\n    let step1 = 10 ** Math.floor(Math.log(step0) / Math.LN10);\n    const error = step0 / step1;\n    if (error >= e10)\n        step1 *= 10;\n    else if (error >= e5)\n        step1 *= 5;\n    else if (error >= e2)\n        step1 *= 2;\n    return stop < start ? -step1 : step1;\n}\n//# sourceMappingURL=ticks.js.map","var clamp = function (a, min, max) {\n    if (a < min) {\n        return min;\n    }\n    else if (a > max) {\n        return max;\n    }\n    return a;\n};\nexport default clamp;\n//# sourceMappingURL=clamp.js.map","import isArray from './is-array';\nimport isPlainObject from './is-plain-object';\nvar MAX_MIX_LEVEL = 5;\nfunction hasOwn(object, property) {\n    if (Object.hasOwn) {\n        return Object.hasOwn(object, property);\n    }\n    if (object == null) {\n        throw new TypeError('Cannot convert undefined or null to object');\n    }\n    return Object.prototype.hasOwnProperty.call(Object(object), property);\n}\nfunction _deepMix(dist, src, level, maxLevel) {\n    level = level || 0;\n    maxLevel = maxLevel || MAX_MIX_LEVEL;\n    for (var key in src) {\n        if (hasOwn(src, key)) {\n            var value = src[key];\n            if (value !== null && isPlainObject(value)) {\n                if (!isPlainObject(dist[key])) {\n                    dist[key] = {};\n                }\n                if (level < maxLevel) {\n                    _deepMix(dist[key], value, level + 1, maxLevel);\n                }\n                else {\n                    dist[key] = src[key];\n                }\n            }\n            else if (isArray(value)) {\n                dist[key] = [];\n                dist[key] = dist[key].concat(value);\n            }\n            else if (value !== undefined) {\n                dist[key] = value;\n            }\n        }\n    }\n}\n// todo \nvar deepMix = function (rst) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    for (var i = 0; i < args.length; i += 1) {\n        _deepMix(rst, args[i]);\n    }\n    return rst;\n};\nexport default deepMix;\n//# sourceMappingURL=deep-mix.js.map","export default (function (v) { return v; });\n//# sourceMappingURL=identity.js.map","var isArrayLike = function (value) {\n    /**\n     * isArrayLike([1, 2, 3]) => true\n     * isArrayLike(document.body.children) => true\n     * isArrayLike('abc') => true\n     * isArrayLike(Function) => false\n     */\n    return value !== null && typeof value !== 'function' && isFinite(value.length);\n};\nexport default isArrayLike;\n//# sourceMappingURL=is-array-like.js.map","import isType from './is-type';\nexport default (function (value) {\n    return Array.isArray ? Array.isArray(value) : isType(value, 'Array');\n});\n//# sourceMappingURL=is-array.js.map","/**\n * \n *\n * @param {Object} value \n * @return {Boolean}\n */\nimport isType from './is-type';\nvar isBoolean = function (value) {\n    return isType(value, 'Boolean');\n};\nexport default isBoolean;\n//# sourceMappingURL=is-boolean.js.map","/**\n * @see https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore#_isfunction\n */\nexport default (function (value) {\n    return typeof value === 'function';\n});\n//# sourceMappingURL=is-function.js.map","// isFinite,\nvar isNil = function (value) {\n    /**\n     * isNil(null) => true\n     * isNil() => true\n     */\n    return value === null || value === undefined;\n};\nexport default isNil;\n//# sourceMappingURL=is-nil.js.map","var PRECISION = 0.00001; // numbers less than this is considered as 0\nexport default function isNumberEqual(a, b, precision) {\n    if (precision === void 0) { precision = PRECISION; }\n    return Math.abs(a - b) < precision;\n}\n//# sourceMappingURL=is-number-equal.js.map","/**\n * \n * @return {Boolean} \n */\nimport isType from './is-type';\nvar isNumber = function (value) {\n    return isType(value, 'Number');\n};\nexport default isNumber;\n//# sourceMappingURL=is-number.js.map","var isObjectLike = function (value) {\n    /**\n     * isObjectLike({}) => true\n     * isObjectLike([1, 2, 3]) => true\n     * isObjectLike(Function) => false\n     * isObjectLike(null) => false\n     */\n    return typeof value === 'object' && value !== null;\n};\nexport default isObjectLike;\n//# sourceMappingURL=is-object-like.js.map","export default (function (value) {\n    /**\n     * isObject({}) => true\n     * isObject([1, 2, 3]) => true\n     * isObject(Function) => true\n     * isObject(null) => false\n     */\n    var type = typeof value;\n    return (value !== null && type === 'object') || type === 'function';\n});\n//# sourceMappingURL=is-object.js.map","import isObjectLike from './is-object-like';\nimport isType from './is-type';\nvar isPlainObject = function (value) {\n    /**\n     * isObjectLike(new Foo) => false\n     * isObjectLike([1, 2, 3]) => false\n     * isObjectLike({ x: 0, y: 0 }) => true\n     * isObjectLike(Object.create(null)) => true\n     */\n    if (!isObjectLike(value) || !isType(value, 'Object')) {\n        return false;\n    }\n    if (Object.getPrototypeOf(value) === null) {\n        return true;\n    }\n    var proto = value;\n    while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(value) === proto;\n};\nexport default isPlainObject;\n//# sourceMappingURL=is-plain-object.js.map","import isType from './is-type';\nexport default (function (str) {\n    return isType(str, 'String');\n});\n//# sourceMappingURL=is-string.js.map","var toString = {}.toString;\nvar isType = function (value, type) { return toString.call(value) === '[object ' + type + ']'; };\nexport default isType;\n//# sourceMappingURL=is-type.js.map","var isUndefined = function (value) {\n    return value === undefined;\n};\nexport default isUndefined;\n//# sourceMappingURL=is-undefined.js.map","export function rotateVector(x, y, rad) {\n    var X = x * Math.cos(rad) - y * Math.sin(rad);\n    var Y = x * Math.sin(rad) + y * Math.cos(rad);\n    return { x: X, y: Y };\n}\n//# sourceMappingURL=rotate-vector.js.map","import { rotateVector } from '../util/rotate-vector';\n/**\n * Converts A (arc-to) segments to C (cubic-bezier-to).\n *\n * For more information of where this math came from visit:\n * http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n */\nexport function arcToCubic(X1, Y1, RX, RY, angle, LAF, SF, X2, Y2, recursive) {\n    var x1 = X1;\n    var y1 = Y1;\n    var rx = RX;\n    var ry = RY;\n    var x2 = X2;\n    var y2 = Y2;\n    // for more information of where this Math came from visit:\n    // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n    var d120 = (Math.PI * 120) / 180;\n    var rad = (Math.PI / 180) * (+angle || 0);\n    /** @type {number[]} */\n    var res = [];\n    var xy;\n    var f1;\n    var f2;\n    var cx;\n    var cy;\n    if (!recursive) {\n        xy = rotateVector(x1, y1, -rad);\n        x1 = xy.x;\n        y1 = xy.y;\n        xy = rotateVector(x2, y2, -rad);\n        x2 = xy.x;\n        y2 = xy.y;\n        var x = (x1 - x2) / 2;\n        var y = (y1 - y2) / 2;\n        var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\n        if (h > 1) {\n            h = Math.sqrt(h);\n            rx *= h;\n            ry *= h;\n        }\n        var rx2 = rx * rx;\n        var ry2 = ry * ry;\n        var k = (LAF === SF ? -1 : 1) *\n            Math.sqrt(Math.abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x)));\n        cx = (k * rx * y) / ry + (x1 + x2) / 2;\n        cy = (k * -ry * x) / rx + (y1 + y2) / 2;\n        // eslint-disable-next-line no-bitwise -- Impossible to satisfy no-bitwise\n        f1 = Math.asin(((((y1 - cy) / ry) * Math.pow(10, 9)) >> 0) / Math.pow(10, 9));\n        // eslint-disable-next-line no-bitwise -- Impossible to satisfy no-bitwise\n        f2 = Math.asin(((((y2 - cy) / ry) * Math.pow(10, 9)) >> 0) / Math.pow(10, 9));\n        f1 = x1 < cx ? Math.PI - f1 : f1;\n        f2 = x2 < cx ? Math.PI - f2 : f2;\n        if (f1 < 0)\n            f1 = Math.PI * 2 + f1;\n        if (f2 < 0)\n            f2 = Math.PI * 2 + f2;\n        if (SF && f1 > f2) {\n            f1 -= Math.PI * 2;\n        }\n        if (!SF && f2 > f1) {\n            f2 -= Math.PI * 2;\n        }\n    }\n    else {\n        f1 = recursive[0], f2 = recursive[1], cx = recursive[2], cy = recursive[3];\n    }\n    var df = f2 - f1;\n    if (Math.abs(df) > d120) {\n        var f2old = f2;\n        var x2old = x2;\n        var y2old = y2;\n        f2 = f1 + d120 * (SF && f2 > f1 ? 1 : -1);\n        x2 = cx + rx * Math.cos(f2);\n        y2 = cy + ry * Math.sin(f2);\n        res = arcToCubic(x2, y2, rx, ry, angle, 0, SF, x2old, y2old, [f2, f2old, cx, cy]);\n    }\n    df = f2 - f1;\n    var c1 = Math.cos(f1);\n    var s1 = Math.sin(f1);\n    var c2 = Math.cos(f2);\n    var s2 = Math.sin(f2);\n    var t = Math.tan(df / 4);\n    var hx = (4 / 3) * rx * t;\n    var hy = (4 / 3) * ry * t;\n    var m1 = [x1, y1];\n    var m2 = [x1 + hx * s1, y1 - hy * c1];\n    var m3 = [x2 + hx * s2, y2 - hy * c2];\n    var m4 = [x2, y2];\n    m2[0] = 2 * m1[0] - m2[0];\n    m2[1] = 2 * m1[1] - m2[1];\n    if (recursive) {\n        return m2.concat(m3, m4, res);\n        // return [...m2, ...m3, ...m4, ...res];\n    }\n    res = m2.concat(m3, m4, res);\n    // res = [...m2, ...m3, ...m4, ...res];\n    var newres = [];\n    for (var i = 0, ii = res.length; i < ii; i += 1) {\n        newres[i] = i % 2 ? rotateVector(res[i - 1], res[i], rad).y : rotateVector(res[i], res[i + 1], rad).x;\n    }\n    return newres;\n}\n// const TAU = Math.PI * 2;\n// const mapToEllipse = (\n//   { x, y }: { x: number; y: number },\n//   rx: number,\n//   ry: number,\n//   cosphi: number,\n//   sinphi: number,\n//   centerx: number,\n//   centery: number,\n// ) => {\n//   x *= rx;\n//   y *= ry;\n//   const xp = cosphi * x - sinphi * y;\n//   const yp = sinphi * x + cosphi * y;\n//   return {\n//     x: xp + centerx,\n//     y: yp + centery,\n//   };\n// };\n// const approxUnitArc = (ang1: number, ang2: number) => {\n//   // If 90 degree circular arc, use a constant\n//   // as derived from http://spencermortensen.com/articles/bezier-circle\n//   const a =\n//     ang2 === 1.5707963267948966\n//       ? 0.551915024494\n//       : ang2 === -1.5707963267948966\n//       ? -0.551915024494\n//       : (4 / 3) * Math.tan(ang2 / 4);\n//   const x1 = Math.cos(ang1);\n//   const y1 = Math.sin(ang1);\n//   const x2 = Math.cos(ang1 + ang2);\n//   const y2 = Math.sin(ang1 + ang2);\n//   return [\n//     {\n//       x: x1 - y1 * a,\n//       y: y1 + x1 * a,\n//     },\n//     {\n//       x: x2 + y2 * a,\n//       y: y2 - x2 * a,\n//     },\n//     {\n//       x: x2,\n//       y: y2,\n//     },\n//   ];\n// };\n// const vectorAngle = (ux: number, uy: number, vx: number, vy: number) => {\n//   const sign = ux * vy - uy * vx < 0 ? -1 : 1;\n//   let dot = ux * vx + uy * vy;\n//   if (dot > 1) {\n//     dot = 1;\n//   }\n//   if (dot < -1) {\n//     dot = -1;\n//   }\n//   return sign * Math.acos(dot);\n// };\n// const getArcCenter = (\n//   px: any,\n//   py: any,\n//   cx: any,\n//   cy: any,\n//   rx: number,\n//   ry: number,\n//   largeArcFlag: number,\n//   sweepFlag: number,\n//   sinphi: number,\n//   cosphi: number,\n//   pxp: number,\n//   pyp: number,\n// ) => {\n//   const rxsq = Math.pow(rx, 2);\n//   const rysq = Math.pow(ry, 2);\n//   const pxpsq = Math.pow(pxp, 2);\n//   const pypsq = Math.pow(pyp, 2);\n//   let radicant = rxsq * rysq - rxsq * pypsq - rysq * pxpsq;\n//   if (radicant < 0) {\n//     radicant = 0;\n//   }\n//   radicant /= rxsq * pypsq + rysq * pxpsq;\n//   radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n//   const centerxp = ((radicant * rx) / ry) * pyp;\n//   const centeryp = ((radicant * -ry) / rx) * pxp;\n//   const centerx = cosphi * centerxp - sinphi * centeryp + (px + cx) / 2;\n//   const centery = sinphi * centerxp + cosphi * centeryp + (py + cy) / 2;\n//   const vx1 = (pxp - centerxp) / rx;\n//   const vy1 = (pyp - centeryp) / ry;\n//   const vx2 = (-pxp - centerxp) / rx;\n//   const vy2 = (-pyp - centeryp) / ry;\n//   const ang1 = vectorAngle(1, 0, vx1, vy1);\n//   let ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n//   if (sweepFlag === 0 && ang2 > 0) {\n//     ang2 -= TAU;\n//   }\n//   if (sweepFlag === 1 && ang2 < 0) {\n//     ang2 += TAU;\n//   }\n//   return [centerx, centery, ang1, ang2];\n// };\n// const arcToBezier = ({ px, py, cx, cy, rx, ry, xAxisRotation = 0, largeArcFlag = 0, sweepFlag = 0 }) => {\n//   const curves = [];\n//   if (rx === 0 || ry === 0) {\n//     return [{ x1: 0, y1: 0, x2: 0, y2: 0, x: cx, y: cy }];\n//   }\n//   const sinphi = Math.sin((xAxisRotation * TAU) / 360);\n//   const cosphi = Math.cos((xAxisRotation * TAU) / 360);\n//   const pxp = (cosphi * (px - cx)) / 2 + (sinphi * (py - cy)) / 2;\n//   const pyp = (-sinphi * (px - cx)) / 2 + (cosphi * (py - cy)) / 2;\n//   if (pxp === 0 && pyp === 0) {\n//     return [{ x1: 0, y1: 0, x2: 0, y2: 0, x: cx, y: cy }];\n//   }\n//   rx = Math.abs(rx);\n//   ry = Math.abs(ry);\n//   const lambda = Math.pow(pxp, 2) / Math.pow(rx, 2) + Math.pow(pyp, 2) / Math.pow(ry, 2);\n//   if (lambda > 1) {\n//     rx *= Math.sqrt(lambda);\n//     ry *= Math.sqrt(lambda);\n//   }\n//   let [centerx, centery, ang1, ang2] = getArcCenter(\n//     px,\n//     py,\n//     cx,\n//     cy,\n//     rx,\n//     ry,\n//     largeArcFlag,\n//     sweepFlag,\n//     sinphi,\n//     cosphi,\n//     pxp,\n//     pyp,\n//   );\n//   // If 'ang2' == 90.0000000001, then `ratio` will evaluate to\n//   // 1.0000000001. This causes `segments` to be greater than one, which is an\n//   // unecessary split, and adds extra points to the bezier curve. To alleviate\n//   // this issue, we round to 1.0 when the ratio is close to 1.0.\n//   let ratio = Math.abs(ang2) / (TAU / 4);\n//   if (Math.abs(1.0 - ratio) < 0.0000001) {\n//     ratio = 1.0;\n//   }\n//   const segments = Math.max(Math.ceil(ratio), 1);\n//   ang2 /= segments;\n//   for (let i = 0; i < segments; i++) {\n//     curves.push(approxUnitArc(ang1, ang2));\n//     ang1 += ang2;\n//   }\n//   return curves.map((curve) => {\n//     const { x: x1, y: y1 } = mapToEllipse(curve[0], rx, ry, cosphi, sinphi, centerx, centery);\n//     const { x: x2, y: y2 } = mapToEllipse(curve[1], rx, ry, cosphi, sinphi, centerx, centery);\n//     const { x, y } = mapToEllipse(curve[2], rx, ry, cosphi, sinphi, centerx, centery);\n//     return { x1, y1, x2, y2, x, y };\n//   });\n// };\n// export function arcToCubic(\n//   x1: number,\n//   y1: number,\n//   rx: number,\n//   ry: number,\n//   angle: number,\n//   LAF: number,\n//   SF: number,\n//   x2: number,\n//   y2: number,\n// ) {\n//   const curves = arcToBezier({\n//     px: x1,\n//     py: y1,\n//     cx: x2,\n//     cy: y2,\n//     rx,\n//     ry,\n//     xAxisRotation: angle,\n//     largeArcFlag: LAF,\n//     sweepFlag: SF,\n//   });\n//   return curves.reduce((prev, cur) => {\n//     const { x1, y1, x2, y2, x, y } = cur;\n//     prev.push(x1, y1, x2, y2, x, y);\n//     return prev;\n//   }, [] as number[]);\n// }\n//# sourceMappingURL=arc-2-cubic.js.map","export function distanceSquareRoot(a, b) {\n    return Math.sqrt((a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]));\n}\n//# sourceMappingURL=distance-square-root.js.map","'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n","/* MIT license */\nvar colorNames = require('color-name');\nvar swizzle = require('simple-swizzle');\nvar hasOwnProperty = Object.hasOwnProperty;\n\nvar reverseNames = Object.create(null);\n\n// create a list of reverse color names\nfor (var name in colorNames) {\n\tif (hasOwnProperty.call(colorNames, name)) {\n\t\treverseNames[colorNames[name]] = name;\n\t}\n}\n\nvar cs = module.exports = {\n\tto: {},\n\tget: {}\n};\n\ncs.get = function (string) {\n\tvar prefix = string.substring(0, 3).toLowerCase();\n\tvar val;\n\tvar model;\n\tswitch (prefix) {\n\t\tcase 'hsl':\n\t\t\tval = cs.get.hsl(string);\n\t\t\tmodel = 'hsl';\n\t\t\tbreak;\n\t\tcase 'hwb':\n\t\t\tval = cs.get.hwb(string);\n\t\t\tmodel = 'hwb';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tval = cs.get.rgb(string);\n\t\t\tmodel = 'rgb';\n\t\t\tbreak;\n\t}\n\n\tif (!val) {\n\t\treturn null;\n\t}\n\n\treturn {model: model, value: val};\n};\n\ncs.get.rgb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar abbr = /^#([a-f0-9]{3,4})$/i;\n\tvar hex = /^#([a-f0-9]{6})([a-f0-9]{2})?$/i;\n\tvar rgba = /^rgba?\\(\\s*([+-]?\\d+)(?=[\\s,])\\s*(?:,\\s*)?([+-]?\\d+)(?=[\\s,])\\s*(?:,\\s*)?([+-]?\\d+)\\s*(?:[,|\\/]\\s*([+-]?[\\d\\.]+)(%?)\\s*)?\\)$/;\n\tvar per = /^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,?\\s*([+-]?[\\d\\.]+)\\%\\s*,?\\s*([+-]?[\\d\\.]+)\\%\\s*(?:[,|\\/]\\s*([+-]?[\\d\\.]+)(%?)\\s*)?\\)$/;\n\tvar keyword = /^(\\w+)$/;\n\n\tvar rgb = [0, 0, 0, 1];\n\tvar match;\n\tvar i;\n\tvar hexAlpha;\n\n\tif (match = string.match(hex)) {\n\t\thexAlpha = match[2];\n\t\tmatch = match[1];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\t// https://jsperf.com/slice-vs-substr-vs-substring-methods-long-string/19\n\t\t\tvar i2 = i * 2;\n\t\t\trgb[i] = parseInt(match.slice(i2, i2 + 2), 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = parseInt(hexAlpha, 16) / 255;\n\t\t}\n\t} else if (match = string.match(abbr)) {\n\t\tmatch = match[1];\n\t\thexAlpha = match[3];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i] + match[i], 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = parseInt(hexAlpha + hexAlpha, 16) / 255;\n\t\t}\n\t} else if (match = string.match(rgba)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i + 1], 0);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\tif (match[5]) {\n\t\t\t\trgb[3] = parseFloat(match[4]) * 0.01;\n\t\t\t} else {\n\t\t\t\trgb[3] = parseFloat(match[4]);\n\t\t\t}\n\t\t}\n\t} else if (match = string.match(per)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = Math.round(parseFloat(match[i + 1]) * 2.55);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\tif (match[5]) {\n\t\t\t\trgb[3] = parseFloat(match[4]) * 0.01;\n\t\t\t} else {\n\t\t\t\trgb[3] = parseFloat(match[4]);\n\t\t\t}\n\t\t}\n\t} else if (match = string.match(keyword)) {\n\t\tif (match[1] === 'transparent') {\n\t\t\treturn [0, 0, 0, 0];\n\t\t}\n\n\t\tif (!hasOwnProperty.call(colorNames, match[1])) {\n\t\t\treturn null;\n\t\t}\n\n\t\trgb = colorNames[match[1]];\n\t\trgb[3] = 1;\n\n\t\treturn rgb;\n\t} else {\n\t\treturn null;\n\t}\n\n\tfor (i = 0; i < 3; i++) {\n\t\trgb[i] = clamp(rgb[i], 0, 255);\n\t}\n\trgb[3] = clamp(rgb[3], 0, 1);\n\n\treturn rgb;\n};\n\ncs.get.hsl = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hsl = /^hsla?\\(\\s*([+-]?(?:\\d{0,3}\\.)?\\d+)(?:deg)?\\s*,?\\s*([+-]?[\\d\\.]+)%\\s*,?\\s*([+-]?[\\d\\.]+)%\\s*(?:[,|\\/]\\s*([+-]?(?=\\.\\d|\\d)(?:0|[1-9]\\d*)?(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)\\s*)?\\)$/;\n\tvar match = string.match(hsl);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = ((parseFloat(match[1]) % 360) + 360) % 360;\n\t\tvar s = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar l = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\n\t\treturn [h, s, l, a];\n\t}\n\n\treturn null;\n};\n\ncs.get.hwb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hwb = /^hwb\\(\\s*([+-]?\\d{0,3}(?:\\.\\d+)?)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?(?=\\.\\d|\\d)(?:0|[1-9]\\d*)?(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)\\s*)?\\)$/;\n\tvar match = string.match(hwb);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = ((parseFloat(match[1]) % 360) + 360) % 360;\n\t\tvar w = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar b = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\t\treturn [h, w, b, a];\n\t}\n\n\treturn null;\n};\n\ncs.to.hex = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn (\n\t\t'#' +\n\t\thexDouble(rgba[0]) +\n\t\thexDouble(rgba[1]) +\n\t\thexDouble(rgba[2]) +\n\t\t(rgba[3] < 1\n\t\t\t? (hexDouble(Math.round(rgba[3] * 255)))\n\t\t\t: '')\n\t);\n};\n\ncs.to.rgb = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ')'\n\t\t: 'rgba(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ', ' + rgba[3] + ')';\n};\n\ncs.to.rgb.percent = function () {\n\tvar rgba = swizzle(arguments);\n\n\tvar r = Math.round(rgba[0] / 255 * 100);\n\tvar g = Math.round(rgba[1] / 255 * 100);\n\tvar b = Math.round(rgba[2] / 255 * 100);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + r + '%, ' + g + '%, ' + b + '%)'\n\t\t: 'rgba(' + r + '%, ' + g + '%, ' + b + '%, ' + rgba[3] + ')';\n};\n\ncs.to.hsl = function () {\n\tvar hsla = swizzle(arguments);\n\treturn hsla.length < 4 || hsla[3] === 1\n\t\t? 'hsl(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%)'\n\t\t: 'hsla(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%, ' + hsla[3] + ')';\n};\n\n// hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\ncs.to.hwb = function () {\n\tvar hwba = swizzle(arguments);\n\n\tvar a = '';\n\tif (hwba.length >= 4 && hwba[3] !== 1) {\n\t\ta = ', ' + hwba[3];\n\t}\n\n\treturn 'hwb(' + hwba[0] + ', ' + hwba[1] + '%, ' + hwba[2] + '%' + a + ')';\n};\n\ncs.to.keyword = function (rgb) {\n\treturn reverseNames[rgb.slice(0, 3)];\n};\n\n// helpers\nfunction clamp(num, min, max) {\n\treturn Math.min(Math.max(min, num), max);\n}\n\nfunction hexDouble(num) {\n\tvar str = Math.round(num).toString(16).toUpperCase();\n\treturn (str.length < 2) ? '0' + str : str;\n}\n","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\n * Returns a string representation of a quatenion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var clone = vec4.clone;\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var fromValues = vec4.fromValues;\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\n\nexport var copy = vec4.copy;\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\n\nexport var set = vec4.set;\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\n\nexport var add = vec4.add;\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\n\nexport var scale = vec4.scale;\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = vec4.dot;\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\n\nexport var lerp = vec4.lerp;\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport var length = vec4.length;\n/**\n * Alias for {@link quat.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\n\nexport var normalize = vec4.normalize;\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat} a The first vector.\n * @param {ReadonlyQuat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var equals = vec4.equals;\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var basePickBy = require('./_basePickBy'),\n    hasIn = require('./hasIn');\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nmodule.exports = basePick;\n","var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nmodule.exports = hasUnicode;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n","'use strict';\n\nvar isArrayish = require('is-arrayish');\n\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\n\nvar swizzle = module.exports = function swizzle(args) {\n\tvar results = [];\n\n\tfor (var i = 0, len = args.length; i < len; i++) {\n\t\tvar arg = args[i];\n\n\t\tif (isArrayish(arg)) {\n\t\t\t// http://jsperf.com/javascript-array-concat-vs-push/98\n\t\t\tresults = concat.call(results, slice.call(arg));\n\t\t} else {\n\t\t\tresults.push(arg);\n\t\t}\n\t}\n\n\treturn results;\n};\n\nswizzle.wrap = function (fn) {\n\treturn function () {\n\t\treturn fn(swizzle(arguments));\n\t};\n};\n","module.exports = function isArrayish(obj) {\n\tif (!obj || typeof obj === 'string') {\n\t\treturn false;\n\t}\n\n\treturn obj instanceof Array || Array.isArray(obj) ||\n\t\t(obj.length >= 0 && (obj.splice instanceof Function ||\n\t\t\t(Object.getOwnPropertyDescriptor(obj, (obj.length - 1)) && obj.constructor.name !== 'String')));\n};\n","var unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nmodule.exports = _createForOfIteratorHelper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nfunction _callSuper(t, o, e) {\n  return o = getPrototypeOf(o), possibleConstructorReturn(t, isNativeReflectConstruct() ? Reflect.construct(o, e || [], getPrototypeOf(t).constructor) : o.apply(t, e));\n}\nexport { _callSuper as default };","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nfunction _createForOfIteratorHelper(r, e) {\n  var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (!t) {\n    if (Array.isArray(r) || (t = unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) {\n      t && (r = t);\n      var _n = 0,\n        F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          return _n >= r.length ? {\n            done: !0\n          } : {\n            done: !1,\n            value: r[_n++]\n          };\n        },\n        e: function e(r) {\n          throw r;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var o,\n    a = !0,\n    u = !1;\n  return {\n    s: function s() {\n      t = t.call(r);\n    },\n    n: function n() {\n      var r = t.next();\n      return a = r.done, r;\n    },\n    e: function e(r) {\n      u = !0, o = r;\n    },\n    f: function f() {\n      try {\n        a || null == t[\"return\"] || t[\"return\"]();\n      } finally {\n        if (u) throw o;\n      }\n    }\n  };\n}\nexport { _createForOfIteratorHelper as default };","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export default function(x, y) {\n  var nodes, strength = 1;\n\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n\n  function force() {\n    var i,\n        n = nodes.length,\n        node,\n        sx = 0,\n        sy = 0;\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], sx += node.x, sy += node.y;\n    }\n\n    for (sx = (sx / n - x) * strength, sy = (sy / n - y) * strength, i = 0; i < n; ++i) {\n      node = nodes[i], node.x -= sx, node.y -= sy;\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = +_, force) : strength;\n  };\n\n  return force;\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(random) {\n  return (random() - 0.5) * 1e-6;\n}\n","import constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction index(d) {\n  return d.index;\n}\n\nfunction find(nodeById, nodeId) {\n  var node = nodeById.get(nodeId);\n  if (!node) throw new Error(\"node not found: \" + nodeId);\n  return node;\n}\n\nexport default function(links) {\n  var id = index,\n      strength = defaultStrength,\n      strengths,\n      distance = constant(30),\n      distances,\n      nodes,\n      count,\n      bias,\n      random,\n      iterations = 1;\n\n  if (links == null) links = [];\n\n  function defaultStrength(link) {\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\n  }\n\n  function force(alpha) {\n    for (var k = 0, n = links.length; k < iterations; ++k) {\n      for (var i = 0, link, source, target, x, y, l, b; i < n; ++i) {\n        link = links[i], source = link.source, target = link.target;\n        x = target.x + target.vx - source.x - source.vx || jiggle(random);\n        y = target.y + target.vy - source.y - source.vy || jiggle(random);\n        l = Math.sqrt(x * x + y * y);\n        l = (l - distances[i]) / l * alpha * strengths[i];\n        x *= l, y *= l;\n        target.vx -= x * (b = bias[i]);\n        target.vy -= y * b;\n        source.vx += x * (b = 1 - b);\n        source.vy += y * b;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n\n    var i,\n        n = nodes.length,\n        m = links.length,\n        nodeById = new Map(nodes.map((d, i) => [id(d, i, nodes), d])),\n        link;\n\n    for (i = 0, count = new Array(n); i < m; ++i) {\n      link = links[i], link.index = i;\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\n    }\n\n    for (i = 0, bias = new Array(m); i < m; ++i) {\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\n    }\n\n    strengths = new Array(m), initializeStrength();\n    distances = new Array(m), initializeDistance();\n  }\n\n  function initializeStrength() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      strengths[i] = +strength(links[i], i, links);\n    }\n  }\n\n  function initializeDistance() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      distances[i] = +distance(links[i], i, links);\n    }\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.links = function(_) {\n    return arguments.length ? (links = _, initialize(), force) : links;\n  };\n\n  force.id = function(_) {\n    return arguments.length ? (id = _, force) : id;\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\n  };\n\n  force.distance = function(_) {\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\n  };\n\n  return force;\n}\n","import {quadtree} from \"d3-quadtree\";\nimport constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\nimport {x, y} from \"./simulation.js\";\n\nexport default function() {\n  var nodes,\n      node,\n      random,\n      alpha,\n      strength = constant(-30),\n      strengths,\n      distanceMin2 = 1,\n      distanceMax2 = Infinity,\n      theta2 = 0.81;\n\n  function force(_) {\n    var i, n = nodes.length, tree = quadtree(nodes, x, y).visitAfter(accumulate);\n    for (alpha = _, i = 0; i < n; ++i) node = nodes[i], tree.visit(apply);\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length, node;\n    strengths = new Array(n);\n    for (i = 0; i < n; ++i) node = nodes[i], strengths[node.index] = +strength(node, i, nodes);\n  }\n\n  function accumulate(quad) {\n    var strength = 0, q, c, weight = 0, x, y, i;\n\n    // For internal nodes, accumulate forces from child quadrants.\n    if (quad.length) {\n      for (x = y = i = 0; i < 4; ++i) {\n        if ((q = quad[i]) && (c = Math.abs(q.value))) {\n          strength += q.value, weight += c, x += c * q.x, y += c * q.y;\n        }\n      }\n      quad.x = x / weight;\n      quad.y = y / weight;\n    }\n\n    // For leaf nodes, accumulate forces from coincident quadrants.\n    else {\n      q = quad;\n      q.x = q.data.x;\n      q.y = q.data.y;\n      do strength += strengths[q.data.index];\n      while (q = q.next);\n    }\n\n    quad.value = strength;\n  }\n\n  function apply(quad, x1, _, x2) {\n    if (!quad.value) return true;\n\n    var x = quad.x - node.x,\n        y = quad.y - node.y,\n        w = x2 - x1,\n        l = x * x + y * y;\n\n    // Apply the Barnes-Hut approximation if possible.\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (w * w / theta2 < l) {\n      if (l < distanceMax2) {\n        if (x === 0) x = jiggle(random), l += x * x;\n        if (y === 0) y = jiggle(random), l += y * y;\n        if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n        node.vx += x * quad.value * alpha / l;\n        node.vy += y * quad.value * alpha / l;\n      }\n      return true;\n    }\n\n    // Otherwise, process points directly.\n    else if (quad.length || l >= distanceMax2) return;\n\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (quad.data !== node || quad.next) {\n      if (x === 0) x = jiggle(random), l += x * x;\n      if (y === 0) y = jiggle(random), l += y * y;\n      if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n    }\n\n    do if (quad.data !== node) {\n      w = strengths[quad.data.index] * alpha / l;\n      node.vx += x * w;\n      node.vy += y * w;\n    } while (quad = quad.next);\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.distanceMin = function(_) {\n    return arguments.length ? (distanceMin2 = _ * _, force) : Math.sqrt(distanceMin2);\n  };\n\n  force.distanceMax = function(_) {\n    return arguments.length ? (distanceMax2 = _ * _, force) : Math.sqrt(distanceMax2);\n  };\n\n  force.theta = function(_) {\n    return arguments.length ? (theta2 = _ * _, force) : Math.sqrt(theta2);\n  };\n\n  return force;\n}\n","// https://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use\nconst a = 1664525;\nconst c = 1013904223;\nconst m = 4294967296; // 2^32\n\nexport default function() {\n  let s = 1;\n  return () => (s = (a * s + c) % m) / m;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer} from \"d3-timer\";\nimport lcg from \"./lcg.js\";\n\nexport function x(d) {\n  return d.x;\n}\n\nexport function y(d) {\n  return d.y;\n}\n\nvar initialRadius = 10,\n    initialAngle = Math.PI * (3 - Math.sqrt(5));\n\nexport default function(nodes) {\n  var simulation,\n      alpha = 1,\n      alphaMin = 0.001,\n      alphaDecay = 1 - Math.pow(alphaMin, 1 / 300),\n      alphaTarget = 0,\n      velocityDecay = 0.6,\n      forces = new Map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\"),\n      random = lcg();\n\n  if (nodes == null) nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n    if (alpha < alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i, n = nodes.length, node;\n\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      alpha += (alphaTarget - alpha) * alphaDecay;\n\n      forces.forEach(function(force) {\n        force(alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        if (node.fx == null) node.x += node.vx *= velocityDecay;\n        else node.x = node.fx, node.vx = 0;\n        if (node.fy == null) node.y += node.vy *= velocityDecay;\n        else node.y = node.fy, node.vy = 0;\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n      if (isNaN(node.x) || isNaN(node.y)) {\n        var radius = initialRadius * Math.sqrt(0.5 + i), angle = i * initialAngle;\n        node.x = radius * Math.cos(angle);\n        node.y = radius * Math.sin(angle);\n      }\n      if (isNaN(node.vx) || isNaN(node.vy)) {\n        node.vx = node.vy = 0;\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(nodes, random);\n    return force;\n  }\n\n  initializeNodes();\n\n  return simulation = {\n    tick: tick,\n\n    restart: function() {\n      return stepper.restart(step), simulation;\n    },\n\n    stop: function() {\n      return stepper.stop(), simulation;\n    },\n\n    nodes: function(_) {\n      return arguments.length ? (nodes = _, initializeNodes(), forces.forEach(initializeForce), simulation) : nodes;\n    },\n\n    alpha: function(_) {\n      return arguments.length ? (alpha = +_, simulation) : alpha;\n    },\n\n    alphaMin: function(_) {\n      return arguments.length ? (alphaMin = +_, simulation) : alphaMin;\n    },\n\n    alphaDecay: function(_) {\n      return arguments.length ? (alphaDecay = +_, simulation) : +alphaDecay;\n    },\n\n    alphaTarget: function(_) {\n      return arguments.length ? (alphaTarget = +_, simulation) : alphaTarget;\n    },\n\n    velocityDecay: function(_) {\n      return arguments.length ? (velocityDecay = 1 - _, simulation) : 1 - velocityDecay;\n    },\n\n    randomSource: function(_) {\n      return arguments.length ? (random = _, forces.forEach(initializeForce), simulation) : random;\n    },\n\n    force: function(name, _) {\n      return arguments.length > 1 ? ((_ == null ? forces.delete(name) : forces.set(name, initializeForce(_))), simulation) : forces.get(name);\n    },\n\n    find: function(x, y, radius) {\n      var i = 0,\n          n = nodes.length,\n          dx,\n          dy,\n          d2,\n          node,\n          closest;\n\n      if (radius == null) radius = Infinity;\n      else radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        dx = x - node.x;\n        dy = y - node.y;\n        d2 = dx * dx + dy * dy;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n\n    on: function(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}\n","import constant from \"./constant.js\";\n\nexport default function(x) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      xz;\n\n  if (typeof x !== \"function\") x = constant(x == null ? 0 : +x);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vx += (xz[i] - node.x) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    xz = new Array(n);\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(xz[i] = +x(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : x;\n  };\n\n  return force;\n}\n","import constant from \"./constant.js\";\n\nexport default function(y) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      yz;\n\n  if (typeof y !== \"function\") y = constant(y == null ? 0 : +y);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vy += (yz[i] - node.y) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    yz = new Array(n);\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(yz[i] = +y(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : y;\n  };\n\n  return force;\n}\n","export default function(d) {\n  const x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  }\n\n  // If there were no (valid) points, abort.\n  if (x0 > x1 || y0 > y1) return this;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0).cover(x1, y1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, {defaultX} from \"./x.js\";\nimport tree_y, {defaultY} from \"./y.js\";\n\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(4)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(4)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\n","export default function(x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1;\n\n  // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else {\n    var z = x1 - x0 || 1,\n        node = this._root,\n        parent,\n        i;\n\n    while (x0 > x || x >= x1 || y0 > y || y >= y1) {\n      i = (y < y0) << 1 | (x < x0);\n      parent = new Array(4), parent[i] = node, node = parent, z *= 2;\n      switch (i) {\n        case 0: x1 = x0 + z, y1 = y0 + z; break;\n        case 1: x0 = x1 - z, y1 = y0 + z; break;\n        case 2: x1 = x0 + z, y0 = y1 - z; break;\n        case 3: x0 = x1 - z, y0 = y1 - z; break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}\n","import Quad from \"./quad.js\";\n\nexport default function(x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n\n    // Stop searching if this quadrant cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0) continue;\n\n    // Bisect the current quadrant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n\n      quads.push(\n        new Quad(node[3], xm, ym, x2, y2),\n        new Quad(node[2], x1, ym, xm, y2),\n        new Quad(node[1], xm, y1, x2, ym),\n        new Quad(node[0], x1, y1, xm, ym)\n      );\n\n      // Visit the closest quadrant first.\n      if (i = (y >= ym) << 1 | (x >= xm)) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          d2 = dx * dx + dy * dy;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d;\n        x3 = x + d, y3 = y + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 3] || parent[(i + 2) & 3] || parent[(i + 3) & 3]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3])\n      && node === (parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], q, node = this._root, child, x0, y0, x1, y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n  return this;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], next = [], q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n  return this;\n}\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n"],"names":["parseAnimationOption","option","enter","update","exit","keys","baseOption","Object","fromEntries","entries","filter","_a","k","includes","map","isStandardAnimationOption","onAnimateFinished","animation","callback","finished","then","onAnimatesFinished","animations","length","Promise","all","a","attr","target","value","animate","keyframes","options","style","slice","transitionShape","source","after","nodeName","attributes","text","identicalTextNode","remove","afterTransition","destroy","isVisible","duration","_b","delay","middle","Math","ceil","offset","_c","getGeometryBounds","center","sx","sy","_d","ex","ey","_e","mx","my","_f","opacity","so","_g","to","st","transform","tt","sourceAnimation","concat","fill","targetAnimation","transition","state","from","forEach","key","tarStyle","currStyle","parsedStyle","applyVisibility","this","visibility","Component","_super","defaultStyleProps","_this","call","initialized","_defaultOptions","defineProperty","prototype","get","_offscreen","enumerable","configurable","connectedCallback","render","bindEvents","disconnectedCallback","attributeChangedCallback","name","clear","removeChildren","container","getSubShapeStyle","x","y","transformOrigin","class","className","zIndex","Text","restOptions","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","lineWidth","textAlign","textBaseline","degToRad","deg","PI","radToDeg","rad","Number","toPrecision","element","PRIMILTIVE_ATTRIBUTES","isPrimitiveAttribute","getPrimitiveAttributes","object","CLASS_NAMES","lineGroup","line","regionGroup","region","getStraightPath","points","reduce","acc","curr","idx","push","getLinePath","cfg","reversed","type","connect","radius","sweepFlag","r","p","getSurroundPath","connectPaths","closeFlag","closed","reverse","path1","path2","startOfFrom","endOfTo","createPath","insertA","insertB","flat","Error","raduis1","radius2","Grid","apply","arguments","areaFill","data","datum","start","getData","maybeAppendByClassName","lineTransitions","isBillboard","lines","item","id","d","selectAll","join","append","each","index","lineStyle","stroke","lineDash","fadeOut","transitions","renderGridLine","reigionTransitions","colors","Array","isArray","getColor","regions","path","_","i","regionStyle","renderAlternateRegion","obj","defaultValue","keyArr","split","undefined","interpolate","t","numberInterpolate","nb","na","min","c","arrayInterpolate","v","objectInterpolate","omit","res","innerKeys","getCallbackStyle","params","val","filterExec","getLineAngle","startAngle","endAngle","getLineTangentVector","startPos","startX","startY","endPos","endX","endY","dx","dy","angle","sin","cos","getDirectionVector","direction","tangentVector","getLabelVector","labelDirection","getValuePos","getLinearValuePos","cx","cy","getArcValuePos","isAxisHorizontal","isAxisVertical","isCircle","getArcPath","diffAngle","rx","ry","startAngleRadians","endAngleRadians","getPosByAngle","x1","y1","x2","y2","middleAngleRadians","large","sweep","renderArc","styles","int","count","array","__keyframe_data__","keyframeInterpolate","arc","getArcAttr","layout","onframe","onfinish","renderLinear","showTrunc","truncRange","lineExtension","range","l1","l2","L","sqrt","pow","s1","s2","extendLine","ox1","oy1","ox2","oy2","renderLine","r1","r2","x3","y3","x4","y4","lineFirst","lineSecond","truncShape","renderTruncation","renderAxisLine","shapeToAddArrow","showArrow","lineArrow","lineArrowOffset","lineArrowSize","select","node","markerEnd","arrow","renderAxisArrow","getGridCenter","gridCenter","renderStraight","gridLength","gridDirection","getGridVector","renderGrid","gridAttr","finalData","gridFilter","gridItems","controlAngles","gridControlAngles","angleInRad","cosa","sina","renderSurround","grid","inRange","n","end","includeLeft","includeRight","percentTransform","computedVal","replace","match","getBBox","width","height","parseFloat","getTranslate","e","defined","isNaN","Bounds","set","rotatedPoints","radian","MAX_VALUE","getBounds","margin","getEulerAngles","setEulerAngles","max","right","bottom","w","anchorX","anchorY","b_1","_h","b","_j","bounds","onLine","point","isRectangleBInsideA","rectA","rectB","every","polygon","line1","line2","dir1","dir2","dir3","dir4","lineToInfinity","side","isPointInsideRectangle","lineToLine","x0","y0","s10x","s10y","s32x","s32y","denom","denomPositive","s02x","s02y","sNum","tNum","intersectBoxLine","box","some","boxLine","boundTest","items","e_1","crossPadding","resultSet","Set","prev","crossBBox","padding","crossSize","size","dMin","dMax","top_1","right_1","bottom_1","left_1","top","left","labelVector","diff","bbox","createCrossBBox","testContain","child","contain","testIntersect","prevItem","currItem","firstChild","q","linesP","linesP_1","linesP_1_1","next","done","e_1_1","error","return","intersect","items_1","items_1_1","add","parseLengthString","str","font","floor","methods","seq","OverlapUtils","Map","labels","overlapCfg","utils","keepHeader","keepTail","first","last","arr","parityHide","reset","els","show","minLabelWidth","minX","maxX","distance","abs","splice","hide","optionalAngles","recoverWhenFailed","defaultAngles","label","getLocalEulerAngles","setLabelsRotate","rotate","optionalAngles_1","optionalAngles_1_1","suffix","minLength","maxLength","Infinity","step","ellipsisStep","getTextShape","_loop_1","allowedLength","ellipsis","state_1","wordWrapWidth","maxLines","defaultLines","minLines","inferTextBaseline","setLabelsWrap","wrap","processOverlap","labelOverlap","util","querySelector","canProcessOverlap","getFactor","args","_i","fn","cur","angleNormalizer","normalizedAngle","round","getAngle","v1","v2","dot","det","atan2","getLabelRotation","labelAlign","_rotate","correctLabelRotation","getLabelStyle","labelAngle","tickAngle","getLabelPos","showTick","tickLength","tickDirection","labelSpacing","indexOf","finalLabelSpacing","extraLength","applyTextStyle","overlapHandler","childNodes","group","setLocalEulerAngles","textStyle","__data__","labelItem","setRotateAndAdjustLabelAlign","len","wordWrap","renderLabel","labelFormatter","formatter","labelStyle","groupStyle","getTickVector","getTickLineLayout","tickVector","unitVector","getTickPoints","createTick","tickAttr","tick","tickFormatter","el","tickItem","createTickEl","tickStyle","applyTickStyle","getTitlePosition","mainGroup","titleGroup","titlePosition","position","spacing","titleSpacing","pos","getLocalBounds","mainX","mainY","halfExtents","mainHalfWidth","mainHalfHeight","titleHalfWidth","titleHalfHeight","spacingTop","spacingRight","spacingBottom","spacingLeft","applyTitleStyle","title","axis","titleStyle","specified","inferTransform","renderAxisMain","showLine","showLabel","tickGroup","tickTransitions","axisData","tickFilter","renderTicks","labelGroup","labelTransitions","labelFilter","prevLabel","shapeAnimation","selection","renderLabels","Axis","specificAnimation","titleText","showTitle","showGrid","dataThreshold","sampledData","result","sampling","finalAnimation","gridGroup","gridTransitions","offscreenGroup","mainTransitions","titleTransitions","renderTitle","AXIS_BASE_DEFAULT_ATTR","easing","lineLineWidth","lineStroke","titleFill","titleFontSize","titleTextAlign","titleTextBaseline","labelFontSize","gridConnect","gridType","tickLineWidth","tickStroke","DEFAULT_INDICATOR_STYLE_PROPS","backgroundFill","backgroundLineCap","backgroundLineWidth","backgroundStroke","backgroundZIndex","toString","labelFill","labelTextBaseline","background","Indicator","appendChild","isMutationObserved","renderBackground","l","getPath","labelText","adjustLayout","pathArray","newPath","createCorner","edge","isH","b0","b1","hL","cL","hCL","cS","a0","a1","a2","a3","a4","on","BOUNDS_CHANGED","getItemsBBox","minY","maxY","X","Y","flex","children","config","flexDirection","flexWrap","justifyContent","alignContent","alignItems","isHorizontalFlow","isLeftToRightFlow","offsetX","offsetY","itemsFromDirection","itemsForJustifyContentBBox","justifyContentOffset","itemsFromJustifyContent","itemBox","fromRect","calcAlignItemsOffset","finalItems","Layout","layoutEvents","INSERTED","REMOVED","$margin","$padding","marginTop","marginRight","marginBottom","marginLeft","getAvailableSpace","paddingTop","paddingRight","paddingBottom","paddingLeft","display","isConnected","bboxes_1","callers","caller","event","addEventListener","oldValue","newValue","func","wait","immediate","timeout","context","later","callNow","clearTimeout","setTimeout","prevBtnGroup","prevBtn","nextBtnGroup","nextBtn","pageInfoGroup","pageInfo","playWindow","contentGroup","controller","clipPath","Navigator","buttonCursor","buttonFill","buttonD","buttonSize","controllerPadding","controllerSpacing","total","defaultPage","loop","orientation","pageNumFill","pageNumFontSize","pageNumTextAlign","pageNumTextBaseline","playState","innerCurrPage","clamp","pageViews","totalPages","m","transpose","pageView","maxWidth","maxHeight","pageWidth","pageHeight","getContainer","controllerShape","pageShape","goTo","pageNum","animateOptions","currPage","setLocalPosition","prepareFollowingPage","getFollowingPageDiff","setVisiblePages","updatePageInfo","pages","page","following","renderClipPath","adjustControllerLayout","pW","bpW","bpH","bnW","bnH","o1x","o1y","_k","o2x","o2y","_l","o3x","o3y","pageNumText","sign","renderController","visible","pathStyle","whetherToAddEventListener","btn","containerSelection","markerGroup","marker","valueGroup","backgroundGroup","CategoryItem","span","markerSize","valueFill","valueFontSize","valueTextBaseline","valueText","labelWidth","labelHeight","valueWidth","valueHeight","markerWidth","span1","innerSpan","span2","showValue","basis","fullWidth","actualSpace","spacing1","spacing2","width_1","shape","markerShapeStyle","markerStrokeWidth","strokeWidth","markerLineWidth","markerStroke","renderMarker","parent","oldMarker","newMarker","symbol","scale","getScale","scaleSize","_transform","renderValue","markerX","labelX","valueX","halfHeight","ctn","navigator","ifSatisfied","rule","CategoryItems","gridRow","gridCol","rowPadding","colPadding","click","noop","mouseenter","mouseleave","navigatorShape","getGridLayout","navWidth","pageSize","prevOffset","pageIndex","dir","ifHorizontal","row","col","colWidth","rowHeight","getFlexLayout","cP","limitWidth","limitHeight","prevWidth","prevHeight","nextWidth","cb","flattenPage","querySelectorAll","removeChild","renderItems","dispatchCustomEvent","bind","renderData","relayoutNavigator","navHeight","by","itemsLayouts","itemsLayout","layouts","categoryItems","o","renderNavigator","navStyle","that","payload","evt","detail","dispatchEvent","Category","finalTitleStyle","partialItemStyle","itemStyle","itemsGroup","availableSpace","LEGEND_BASE_DEFAULT_OPTIONS","titleFontWeight","titleFontFamily","CATEGORY_DEFAULT_OPTIONS","CONTINUOUS_DEFAULT_OPTIONS","color","indicatorBackgroundFill","indicatorLabelFill","indicatorLabelFontSize","indicatorVisibility","showHandle","showIndicator","slidable","STEP_RATIO","ribbonGroup","ribbon","handlesGroup","handle","startHandle","endHandle","indicator","DEFAULT_HANDLE_CFG","markerFill","Handle","markerSymbol","handleStyle","markerStyle","getStepValueByValue","registerSymbol","diffY","halfWidth","oneSixthWidth","triangleX","triangleY","getSafetySelections","domain","newSelection","oldSelection","precision","prevStart","prevEnd","startVal","endVal","getType","markerType","icon","Image","dataURLsPattern","RegExp","test","parseMarker","Marker","img","symbolFn","getSymbol","MARKER_SYMBOL_MAP","getSymbols","hv","vh","circle","square","diamond","triangle","triangleDown","hexagon","diffX","bowtie","cross","plus","hyphen","dash","smooth","hvh","vhv","button","HANDLE_ICON_DEFAULT_CFG","strokeOpacity","HANDLE_LABEL_DEFAULT_CFG","fillOpacity","HANDLE_DEFAULT_CFG","foreground","sparkline","sparklineGroup","track","brushArea","iconGroup","iconRect","iconLine","HandleIcon","iconStyle","rect","labelY","rest","stopPropagation","renderIcon","iconShape","clone","rst","Columns","columnsGroup","columns","Lines","linesGroup","areasGroup","areas","renderLines","renderAreas","isFinite","isEqual","other","valueKeys","otherKeys","catmullRom2Bezier","crp","z","constraint","isLoop","pointList","cp1","cp2","controlPointList","prevPoint","nextPoint","nextCp0","cp0","cps","hasConstraint","d0","d1","sum","shift","smoothBezier","lineToLinePath","M","linePath","lineToCurvePath","unshift","closePathByBaseLine","baseline","closedPath","minItem","maxItem","getRange","getStackedData","datumLen","positivePrev","negativePrev","j","Sparkline","isStack","areaOpacity","isGroup","columnLineWidth","columnStroke","rawData","createScales","scales","getOptions","areaStyle","containerShape","dataToLines","paths","currLine","currCurvePath","belowCurvePath","A","linesToStackCurveAreaPaths","linesToStackAreaPaths","linesToAreaPaths","columnStyle","minVal","maxVal","heightScale","bandWidth","getBandWidth","column","barWidth","linesStyle","columnsStyle","yScale","paddingInner","paddingOuter","align","tag","Slider","brushable","handleSpacing","autoFitLabel","scrollable","selectionFill","selectionFillOpacity","selectionZIndex","trackFill","trackLength","trackOpacity","trackSize","trackZIndex","values","selectionType","handleIconOffset","onDragStart","prevPos","getOrientVal","selectionStartPos","getRatio","selectionWidth","document","onDragging","onDragEnd","currPos","diffPos","deltaVal","setValuesOffset","innerSetValues","sort","removeEventListener","updateHandlesPosition","onValueChange","onChange","internalOldValue","getValues","clampValues","setValues","updateSelectionArea","newSelectionArea","calcSelectionArea","foregroundGroup","getHandleStyle","trigger","oldValues","newValues","renderTrack","trackShape","renderBrushArea","cursor","renderSparkline","sparklineStyle","renderHandles","H","renderSelection","selectionStyle","applyStyle","area","selectionShape","num","internalValues","calcHandlePosition","handleType","stVal","inferTextStyle","calcHandleText","getHandleSize","temp","textWidth","textHeight","finaleWidth","iW","iH","fX","fY","fW","fH","totalSpacing","finalWidth","negativeSize","getHandleLabelStyle","getHandleIconStyle","handleIconShape","ox","oy","showLabelOnInteraction","internalShowLabel","handleIconSize","stOffset","endOffset","onScroll","deltaX","deltaY","parsePosition","content","inset","titleBBox","contentBBox","insetTop","insetRight","insetBottom","insetLeft","spacingWidth","spacingHeight","insetWidth","insetHeight","contentWidth","contentHeight","mayApplyStyle","finalStyle","Title","containerWidth","containerHeight","titleWidth","titleHeight","restStyle","hW","hH","getTitleLayout","createDOM","createElement","innerHTML","dom","contains","charAt","replaceChildren","getClassNames","prefixCls","CONTAINER","TITLE","LIST","LIST_ITEM","NAME","MARKER","NAME_LABEL","VALUE","CROSSHAIR_X","CROSSHAIR_Y","TEXT_OVERFLOW_STYLE","overflow","getDefaultTooltipStyle","CLASS_NAME","float","Tooltip","template","enterable","bounding","timestamp","prevCustomContentKey","contentKey","initShape","offsetWidth","offsetHeight","renderHTMLTooltipElement","updatePosition","setPosition","closeTransition","isCursorEntered","setAttribute","renderCustomContent","pointerEvents","getElementsByClassName","itemsElements","HTMLTooltipItemsElements","ul","list","replaceWith","getRelativeOffsetFromCursor","assignPosition","finalPosition","positionScore","elementSize","absolutelyOffset","abs1","abs2","pos1","pos2","setOffsetPosition","showDelay","currentTimestamp","Date","now","autoPosition","cursorX","cursorY","expectLeft","expectTop","inversion","boundingX","boundingY","edgeCompare","correctivePosition","correctedPositionString","clientX","clientY","getBoundingClientRect","isPointIn","BBox","toJSON","getCallbackValue","classNames","cls","prefix","PREFIX","assign","deep","dist","src","level","maxLevel","hasOwnProperty","deepAssign","ellipsisIt","textOverflow","getEventPos","canvas","touches","renderExtDo","String","ifShow","creator","removeHandler","g","vec","s","vec1","vec2","sub","normalize","vertical","flag","OffscreenGroup","createOffscreenGroup","isInOffscreenGroup","ancestor","scaleToPixel","applyScale","Selection","elements","selections","updateElements","_Selection_instances","_elements","_data","_parent","_document","_enter","_update","_exit","_merge","_split","_transitions","_facetElements","_Selection_maybeAppend","selector","selectFacetAll","newElement","__fromElements__","maybeAppend","maybeAppendByName","groupId","keyFunc","grouped","merge","keyElement","keyUpdateElement","groupKeyElements","has","groupKey","__facet__","delete","group_2","group_1","group_1_1","__toData__","S","Ctor","registry","msg","newEnter","newUpdate","newExit","newMerge","newSplit","this_1","callable","maybeUpdate","T","handler","nodes","WeakSet","newChild","ellipse","image","polyline","html","ownerDocument","parseSeriesAttr","series","getLocalBBox","isHorizontal","p1","p2","copyAttributes","toUppercaseFirstLetter","string","toUpperCase","removePrefix","lowercaseFirstLetter","inferPrefix","withoutPrefix","toLowerCase","toLowercaseFirstLetter","applyStyleSheet","styleString","matches","cssText","currVal","startsWith","nextChart","subStyleProps","invert","addPrefix","name_1","superStyleProps","splitStyle","ignoreStyleDict","groupStyleDict","output","flru","limit","keep","isPartial","create","ctx","mockMeasureTextWidth","CacheMap","resolver","maxSize","measureTextWidth","offscreenCanvasCreator","getOrCreateContext","measureText","getFont","cache","textShape","textOf","applyToText","traverse","hasOwn","property","TypeError","_deepMix","isFunction","isNil","isNumber","getPrototypeOf","proto","isString","EventEmitter","_events","once","emit","events","wildcardEvents","doEmit","es","off","length_1","getEvents","generatePath$6","_parsedStyle$cx","_parsedStyle$cy","generatePath$5","scaleX","scaleY","save","generatePath$4","markerStart","markerStartOffset","markerEndOffset","startOffsetX","startOffsetY","endOffsetX","endOffsetY","moveTo","lineTo","generatePath$3","_parsedStyle$d","absolutePath","segments","_getStartTangent","parentNode","getStartTangent","_getStartTangent2","_getEndTangent","getEndTangent","_getEndTangent2","_p","_p2","command","nextSegment","useStartOffset","useEndOffset","_ref","_ref2","startOffsetXTemp","startOffsetYTemp","_ref3","_ref4","endOffsetXTemp","endOffsetYTemp","quadraticCurveTo","bezierCurveTo","arcParams","xRotation","translate","closePath","generatePath$2","generatePath$1","generatePath","_parsedStyle$x","_parsedStyle$y","h","signX","signY","_radius$map","_radius$map2","tlr","trr","brr","blr","Plugin","_AbstractRendererPlug","_len","_key","_pathGeneratorFactory","pathGeneratorFactory","CIRCLE","ELLIPSE","RECT","LINE","POLYLINE","POLYGON","PATH","TEXT","GROUP","IMAGE","HTML","MESH","FRAGMENT","tmpVec3a","vec3","tmpVec3b","tmpVec3c","tmpMat4","mat4","CanvasPickerPlugin","isHit","displayObject","worldTransform","isClipPath","pick","pointInPathPickerFactory","invertWorldMat","localPosition","isPointInPath","runtime","offscreenCanvas","beginPath","_renderingContext$roo","_this2","renderingService","renderingContext","root","hooks","tapPromise","mark","_callee","_context","abrupt","stop","_x","pickSync","tap","_step","topmost","_result$position","hitTestList","elementsFromBBox","pickedDisplayObjects","_iterator","_displayObject","getWorldTransform","clipped","picked","err","f","isPointInPath$8","_ref$cx","_ref$cy","_ref$lineWidth","_ref$increasedLineWid","increasedLineWidthForHitTesting","_ref$pointerEvents","halfLineWidth","absDistance","_isFillOrStrokeAffect","_isFillOrStrokeAffect2","hasFill","hasStroke","ellipseDistance","squareX","squareY","isPointInPath$7","halfLineWith","inBox","inArc","inLine","inPolyline","isClose","dcmp","onSegment","inPolygon","inPolygons","polygons","isPointInPath$6","isPointInPath$5","renderingPluginContext","hasArc","polylines","totalLength","px","py","segment","currentPoint","prePoint","cubicParams","prePointInCubic","_cDistance","isPointInStroke","isPointInPath$4","isPointInPath$3","isPointInPath$2","_ref$x","_ref$y","lineWidthForHitTesting","radiusArray","_radiusArray","inRectWithRadius","inRect","isPointInPath$1","getOrCreateCanvas","willReadFrequently","defaultStyleRendererFactory","getImageData","component","_pointInPathPickerFac","addRenderingPlugin","removeAllRenderingPlugins","_classPrivateFieldBase","_classPrivateFieldKey","RefCountCache","cacheStore","ref","counter","onRefAdded","cacheItem","release","tasks","nextFrameTasks","ImageSlicer","api","rafId","cancelAnimationFrame","task","TASK_NUM_PER_FRAME","requestAnimationFrame","executeTask","sliceWidth","sliceHeight","rerender","overlap","imageWidth","naturalWidth","imageHeight","naturalHeight","strideW","strideH","gridCols","gridRows","tileSize","gridSize","tiles","_loop","_loop2","tempSliceWidth","tempSliceHeight","sliceCanvas","createCanvas","getContext","drawImage","tileX","tileY","IMAGE_CACHE","DESTROY","releaseRef","ImagePool","gradientCache","patternCache","imageSource","imageCache","complete","getOrCreateImage","calculateImageTileSize","put","_imageCache","resolve","reject","ev","createImage","_imageCache2","onload","onerror","crossOrigin","_createDownSampledImage","enableLargeImageOptimization","_ref$maxDownSampledIm","maxDownSampledImageSize","_ref$downSamplingRate","downSamplingRateThreshold","createImageBitmapFunc","_imageCache$size","originWidth","originHeight","resizedImage","downSamplingRate","updateCache","sent","globalThis","createImageBitmap","resizeWidth","resizeHeight","t0","getImageSync","downSampled","_x2","_createImageTiles","_callee2","_ref$ownerDocument$de","_context2","defaultView","sliceImage","_x3","_x4","_x5","_x6","pattern","$offscreenCanvas","dpr","patternKey","generatePatternKey","repetition","needScaleWithDPR","mat","canvasPattern","createPattern","identity","setTransform","generateGradientKey","steps","gradient","LinearGradient","_computeLinearGradien","createLinearGradient","RadialGradient","_computeRadialGradien","createRadialGradient","_gradient","unit","kPercentage","addColorStop","entity","isSupportTile","LoadImagePlugin","imagePool","calculateWithAspectRatio","_object$parsedStyle","handleMounted","keepAspectRatio","_ref$img","renderable","dirty","dirtify","handleAttributeChanged","attrName","prevValue","releaseImage","_ref2$img","init","MOUNTED","ATTR_MODIFIED","_renderState","CanvasRendererPlugin","canvasRendererPluginOptions","removedRBushNodeAABBs","renderQueue","writable","restoreStack","prevObject","currentContext","clearFullScreenLastFrame","clearFullScreen","vpMatrix","dprMatrix","vec3a","vec3b","vec3c","vec3d","_this$context","camera","rBushRoot","enableRenderingOptimization","renderer","getConfig","enableDirtyCheck","enableDirtyRectangleRendering","rBush","contextService","handleUnmounted","rBushNode","aabb","handleCulled","UNMOUNTED","CULLED","getDPR","clearRect","beginFrame","_canvas$context$rende","_this$canvasRendererP","dirtyObjectNumThreshold","dirtyObjectRatioThreshold","_renderingService$get","getStats","rendered","ratio","renderingPlugins","isFirstTimeRenderingFinished","disableDirtyRectangleRendering","resetTransform","renderByZIndex","stack","currentObject","pop","isCulled","renderDisplayObjectOptimized","renderDisplayObject","objects","sortable","sorted","endFrame","fromScaling","multiply","getOrthoMatrix","restore","dirtyRenderBounds","safeMergeAABB","mergeDirtyAABBs","setMinMax","isEmpty","dirtyRect","convertAABB2Rect","tl","tr","bl","br","minx","miny","maxx","maxy","ix","iy","iwidth","iheight","clip","enableDirtyRectangleRenderingDebug","DIRTY_RECTANGLE","searchDirtyObjects","renderOrder","saveDirtyAABB","fillStyle","fillRect","canvasContext","renderState","clipDraw","styleRenderer","styleRendererFactory","exactEquals","applyWorldTransform","_generatePath","forceUpdateStyle","prevNodeName","applyStyleToContext","drawToContext","compareDocumentPosition","DOCUMENT_POSITION_CONTAINS","_generatePath2","applyAttributesToContext","lineDashOffset","setLineDash","globalAlpha","isNone","strokeStyle","getMin","getMax","dirtyObjects","renderBounds","getRenderBounds","dirtyRectangle","_dirtyRectangle$getMi","_dirtyRectangle$getMi2","_dirtyRectangle$getMa","_dirtyRectangle$getMa2","search","matrix","copy","getLocalTransform","merged","aabbs","getPattern","plugin","_parsedStyle","offscreenCanvasContext","getOrCreatePatternSync","parsedColor","getOrCreateGradient","SHADOW_NUMBER_STYLE","STROKE_STYLE","DEFAULT_STYLE","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","globalCompositeOperation","lineCap","lineJoin","miterLimit","defaultParsedStyle","updateContextIfNotHitCache","OptimizedDefaultRenderer","forceUpdate","prevStyle","blend","_style$lineWidth","styleName","applyCommonStyleToContext","applyStrokeFillStyleToContext","hasShadow","hasFilter","onlyClearShadowFilter","oldFilter","trim","fillRule","resetStyle","_resetStyle","_resetStyle2","_resetStyle3","_style$fill","_style$opacity","_style$fillOpacity","_style$strokeOpacity","_style$lineWidth2","isInnerShadow","shadowType","isFillTransparent","alpha","shouldDrawShadowWithStroke","originGlobalAlpha","applyShadowAndFilterStyleToContext","fillToContext","clearShadowAndFilterStyleForContext","clearShadowAndFilter","prevOpacity","originBlend","strokeToContext","DefaultRenderer","_OptimizedDefaultRend","_parsedStyle$opacity","_parsedStyle$fillOpac","_parsedStyle$strokeOp","_parsedStyle$lineWidt","setShadowAndFilter","applyFill","applyStroke","skipFill","skipStroke","ImageRenderer","_DefaultRenderer","drawRect","createDownSampledImage","imageRect","originalSize","_context$getTransform","getTransform","scaleToOrigin","scaledTileSize","startTileX","endTileX","endTileY","tileRect","createImageTiles","iw","ih","rect1","rect2","_rect","w1","h1","_rect2","w2","h2","overlapLeft","overlapTop","overlapRight","overlapBottom","_object$ownerDocument","getContextService","getDomElement","viewWidth","viewHeight","currentTransform","transformMatrix","fromValues","renderFull","renderDownSampled","renderTile","_unused","TextRenderer","_parsedStyle$textAlig","_parsedStyle$textBase","_parsedStyle$lineJoin","_parsedStyle$miterLim","_parsedStyle$letterSp","letterSpacing","metrics","lineHeight","lineMetrics","formattedTextBaseline","linePositionY","linePositionX","drawLetterSpacing","isStroke","currentTextAlign","currentPosition","stringArray","previousWidth","currentWidth","currentChar","strokeText","fillText","substring","currentGlobalAlpha","applyOpacity","_defaultStyleRenderer","defaultRenderer","DOMInteractionPlugin","onPointerMove","pointerMove","onPointerUp","pointerUp","onPointerDown","pointerDown","onPointerOver","pointerOver","onPointerOut","pointerOut","onPointerCancel","pointerCancel","onPointerWheel","pointerWheel","onClick","$el","msPointerEnabled","msContentZooming","msTouchAction","supportsPointerEvents","touchAction","addPointerEventListener","addMouseEventListener","supportsTouchEvents","addTouchEventListener","useNativeClickEvent","passive","capture","removePointerEventListener","removeMouseEventListener","removeTouchEventListener","HTMLRenderingPlugin","displayObjectHTMLElementMap","WeakMap","nativeHTMLMap","eventService","joinTransformMatrix","getOrigin","$camera","createCamera","getOrCreateEl","updateAttribute","handleBoundsChanged","handleCanvasResize","_this$context$config","parentElement","RESIZE","renderReasons","CAMERA_CHANGED","_this$context$config2","doc","$canvas","$container","cameraId","$existedCamera","$cameraContainer","offsetLeft","offsetTop","$existedElement","buildCSSText","_object$parsedStyle$p","getAttribute","borderColor","Canvas2DContextService","canvasConfig","_this$canvasConfig","getElementById","resize","devicePixelRatio","_toDataURL","encoderOptions","_args","toDataURL","ContextRegisterPlugin","ContextService","Renderer","_AbstractRenderer","registerPlugin","paramsCount","isPathArray","seg","lk","isAbsoluteArray","isNormalizedArray","pc","paramsParser","qx","qy","finalizeSegment","pathCommand","pathValue","segmentStart","LK","scanFlag","code","charCodeAt","param","isDigitStart","isDigit","scanParam","ch","zeroFirst","hasCeiling","hasDecimal","hasDot","skipSpaces","scanSegment","cmdCode","reqParams","isPathCommand","PathParser","pathString","path2Absolute","pathInput","parsePathString","absoluteSegment","absCommand","absValues","segLength","normalizeSegment","px1","py1","px2","py2","nqx","nqy","normalizePath","seglen","midPoint","ax","ay","segmentLineFactory","angleBetween","v0","v0x","v0y","v1x","v1y","acos","getPointAtArcSegmentLength","RX","RY","LAF","SF","xRotRad","transformedPoint","radiiCheck","cRadicand","cCoef","transformedCenter","startVector","sweepAngle","ellipseComponentX","ellipseComponentY","segmentArcFactory","X1","Y1","X2","Y2","sampleSize","distanceIsNumber","LENGTH","POINT","POINTS","dv","getPointAtCubicSegmentLength","c1x","c1y","c2x","c2y","t1","segmentCubicFactory","getPointAtQuadSegmentLength","segmentQuadFactory","pathLengthFactory","isM","MIN","MAX","ll","fixArc","allPathCommands","pi","ni","lineToCubic","mid","segmentToCubic","r13","r23","path2Curve","needZCommandIndexes","isCurveArray","cloned","ii","zCommandIndexes","curveSegment","getCurveArray","segmentData","curveLength","ss","pts","p0","p3","p4","p5","p6","p7","p8","p9","splitCubic","equalizeSegments","TL","c1","c2","L1","L2","m1","m2","mm","dif","canSplit","getDrawDirection","getCubicSegArea","getPointAtLength","_superPropBase","_get","Reflect","getOwnPropertyDescriptor","_superPropGet","rbush","window","self","exports","quickselect","compare","quickselectStep","defaultCompare","log","exp","sd","swap","tmp","RBush","maxEntries","_maxEntries","_minEntries","findItem","equalsFn","calcBBox","toBBox","distBBox","destNode","createNode","extend","leaf","compareNodeMinX","compareNodeMinY","bboxArea","bboxMargin","enlargedArea","intersectionArea","intersects","multiSelect","_all","nodesToSearch","childBBox","collides","load","insert","_build","_splitRoot","tmpNode","_insert","goingUp","indexes","_condense","compareMinX","compareMinY","fromJSON","N","N2","N1","right2","right3","_chooseSubtree","minArea","minEnlargement","targetNode","enlargement","isNode","insertPath","_adjustParentBBoxes","_chooseSplitAxis","splitIndex","_chooseSplitIndex","newNode","minOverlap","bbox1","bbox2","_allDistMargin","leftBBox","rightBBox","i$1","child$1","siblings","factory","Shape","ClipSpaceNearZ","AbstractRendererPlugin","plugins","AbstractRenderer","clipSpaceNearZ","NEGATIVE_ONE","enableCulling","enableAutoRendering","enableSizeAttenuation","findIndex","find","addVec3","copyVec3","maxVec3","minVec3","scaleVec3","subVec3","AABB","tc","tcx","tcy","tcz","th","thx","thy","thz","tminx","tmaxx","tminy","tmaxy","tminz","tmaxz","oc","ocx","ocy","ocz","oh","ohx","ohy","ohz","ominx","omaxx","ominy","omaxy","ominz","omaxz","bc","ac","ar","mx0","mx1","mx2","my0","my1","my2","mz0","mz1","mz2","mx0a","mx1a","mx2a","my0a","my1a","my2a","mz0a","mz1a","mz2a","aMax","aMin","bMax","bMin","intersection","plane","pnVertexFlag","Plane","normal","updatePNVertexFlag","invLen","distanceToPoint","Mask","Frustum","planes","projectionMatrix","_projectionMatrix","m0","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","Point","Rectangle","topLeft","vec4","topRight","bottomLeft","bottomRight","transformedTopLeft","transformedTopRight","transformedBottomLeft","transformedBottomRight","ERROR_MSG_METHOD_NOT_IMPLEMENTED","ERROR_MSG_USE_DOCUMENT_ELEMENT","$vec3$2","createVec3","DEG_RAD","deg2rad","RAD_DEG","rad2deg","HALF_PI","getEuler","out","quat","_mat4$getScaling","getScaling","_mat4$getScaling2","sz","asin","getEulerFromMat4","z2","getEulerFromQuat","decompose","row0x","row0y","row1x","row1y","scalingX","scalingY","invScalingX","invScalingY","perspectiveMatrix","tmpVec4","pdum3","combine","scale1","scale2","CameraType","CameraTrackingMode","CameraProjectionMode","CameraEvent","MIN_DISTANCE","Camera","eventEmitter","up","forward","focalPoint","distanceVector","azimuth","elevation","roll","relAzimuth","relElevation","relRoll","dollyingStep","maxDistance","minDistance","zoom","rotateWorld","fov","near","far","aspect","projectionMatrixInverse","jitteredProjectionMatrix","enableUpdate","EXPLORING","trackingMode","DEFAULT","projectionMode","PERSPECTIVE","frustum","orthoMatrix","ORTHOGRAPHIC","view","enabled","setWorldRotation","_getAngles","TRACKING","setTrackingMode","translation","fromTranslation","setPerspective","setOrthographic","rright","fullHeight","viewportPoint","_this$canvas$viewport","viewport2Canvas","setFocalPoint","setZoom","_this$canvas$viewport2","dvec","_this$getPosition","getPosition","_this$getPosition2","_this$getFocalPoint","getFocalPoint","_this$getFocalPoint2","fx","fy","_this$view","tan","zero","twoNear","rightMinusLeft","topMinusBottom","farMinusNear","farMulNear","makePerspective","ZERO","triggerUpdate","_this$view2","scaleW","scaleH","ortho","orthoZO","_getOrthoMatrix","_setPosition","CINEMATIC","az","rotateY","rotateX","lookAt","_getAxes","_getDistance","computeMatrix","ORBITING","_getPosition","_getFocalPoint","rotZ","rotX","rotY","rotQ","rotMatrix","fromQuat","mat3","fromRotationTranslationScaleOrigin","viewMatrix","getViewTransform","getPerspective","getFrustum","extractFromVPMatrix","tx","ty","Strategy","SortReason","EMPTY_PARSED_PATH","curve","PropertySyntax","memoize","_memoized","Cache","UnitType","UnitCategory","Nested","ParenLess","unit_type","kEms","kPixels","kDegrees","kRadians","kGradians","kMilliseconds","kSeconds","kRems","kTurns","CSSStyleValueType","unitFromName","kNumber","stringToUnitType","kUnknown","conversionToCanonicalUnitsScaleFactor","factor","unitTypeToString","kInteger","CSSStyleValue","kNo","kUnitType","kClampType","CSSColorValue","_CSSStyleValue","colorSpace","kColorType","GradientType","CSSGradientValue","CSSKeywordValue","kKeywordType","toCanonicalUnit","category","kUNumber","kULength","kUPercent","kUTime","kUAngle","canonicalUnitTypeForCategory","kUOther","unitTypeToUnitCategory","CSSUnitValue","unitOrName","other_unit_value","target_unit","canonical_unit","scale_factor","toFixed","_unit","number","formatInfinityOrNaN","Opx","Odeg","CSSRGB","_CSSColorValue","unsetKeywordValue","keywordCache","unset","initial","inherit","noneColor","transparentColor","getOrCreateRGBA","getOrCreateUnitValue","colorStopToString","colorStop","parseGradient$1","tokens","input","getAST","ast","matchListing","matchDefinition","matchGradient","matchLinearOrientation","matchListRadialOrientations","gradientType","orientationMatcher","matchCall","captures","scan","colorStops","matchColorStop","radialOrientations","lookaheadCache","radialOrientation","matchRadialOrientation","radialType","matchLength","matchExtentKeyword","matchCircle","matchDistance","matchEllipse","at","matchAtPosition","extent","positionAt","defaultPosition","matchPositioning","positioning","location","matcher","matchNumber","captureIndex","regexp","blankCaptures","exec","consume","computeLinearGradient","rcx","rcy","computeRadialGradient","regexLG","regexRG","regexPR","regexColorStop","SideOrCornerToDegMap","angleToDeg","positonToCSSUnitValue","unitX","unitY","_position$value","parseGradient","colorStr","_colorStops$length","_colorStops$0$length","previousIndex","previousOffset","_colorStops$i$length","spaceColorStops","_positonToCSSUnitValu","_orientation$0$style","_type","_arr$2$match","parsedRadialGradient","gradientStr","_arr$4$match","_ref5","parseRadialGradient","patternStr","parsePattern","isPattern","isCSSRGB","parseColor","rgba","mergeColors","parseDimension","unitRegExp","matchedUnits","taggedUnitRegExp","parseLengthUnmemoize","css","parseLength","parseLengthOrPercentageUnmemoize","parseLengthOrPercentage","parseAngleUnmemoize","parseAngle","mergeDimensions","nonNegative","leftValue","rightValue","canonicalUnit","leftCanonicalUnitValue","convertTo","rightCanonicalUnitValue","isLength","convertPercentUnit","convertAngleUnit","parseDimensionArrayFormat","parsed","valueWithUnit","vec3Index","useMin","parseParam","supportedFilters","parseFilter","filterStr","filterRegExp","prevLastIndex","lastIndex","numberToString","parseNumberUnmemoize","parseNumber","mergeNumbers","clampedMergeNumbers","mergeNumberLists","numberList","getOrCalculatePathTotalLength","isSamePoint","point1","point2","getExtraFromSegmentWithAngle","currentAndPre","currentAndNext","preAndNext","currentAngle","xExtra","yExtra","xAngle","yAngle","toSymmetry","pointOnEllipticalArc","xAxisRotation","largeArcFlag","xAxisRotationRadians","ellipticalArcAngle","ellipticalArcStartAngle","ellipticalArcEndAngle","ellipticalArcCenter","resultantRx","resultantRy","getTangentAtRatio","_segment$arcParams","_segment$arcParams$rx","_segment$arcParams$ry","arcFlag","xDist","yDist","vMag","vRatio","u","vAngle","getArcParams","startPoint","xp","yp","lambda","cxp","cyp","theta","dTheta","commandsToPathString","commands","lineToCommands","ellipseToCommands","polygonToCommands","rectToCommands","_radius","convertToPath","_parsedStyle$x2","_parsedStyle$y2","_parsedStyle2","_parsedStyle2$r","_parsedStyle2$cx","_parsedStyle2$cy","_parsedStyle3","_parsedStyle3$rx","_parsedStyle3$ry","_parsedStyle3$cx","_cx","_parsedStyle3$cy","_cy","_parsedStyle4","_parsedStyle4$width","_parsedStyle4$height","_parsedStyle4$x","_parsedStyle4$y","hasRadius","internalParsePath","console","prevSegment","prevCmd","srcPoint","destPoint","removeRedundantMCommand","cmd","hasArcOrBezier","_extractPolygons","extractPolygons","nextParams","startMovePoint","lastStartMovePointIndex","startTangent","endTangent","cp","preSegment","_cp","_preSegment","_cp2","_cp3","_getTangentAtRatio","dx1","dy1","_getTangentAtRatio2","dx2","dy2","path2Segments","_getPathBBox","xArr","yArr","segmentsWithAngle","_segment","_currentPoint","getPathBBox","memoizedParsePath","parsePath","mergePaths","curve1","curve2","curves","rotatedCurve","segCount","lineLengths","sumLensSqrd","rotations","curve0","curveOnly","pointCount","oldSegIdx","getRotations","parsePoints","pointsOrStr","pointStr","_pointStr$split","_pointStr$split2","mergePoints","TRANSFORM_REGEXP","cast","contents","transformFunctions","matrix3d","rotateZ","rotate3d","perspective","scaleZ","scale3d","skew","skewX","skewY","translateX","translateY","translateZ","translate3d","parseArrayTransform","parsedArgs","parseTransform","functionName","functionData","argTypes","arg","parsedArg","parseTransformUnmemoize","convertItemToMatrix","sqrLength","sc","sq","multiplyMatrices","makeMatrixDecomposition","transformList","quaternion","m44","determinant","mat4x4","a03","a13","a23","a30","a31","a32","a33","decomposeMat4","convertToMatrix","composeMatrix","_i2","numberToLongString","mergeMatrices","leftArgs","rightArgs","decompositionPair","fromQ","toQ","product","typeTo2D","typeTo3D","mergeTransforms","flipResults","_left$i","lt","rt","leftResult","rightResult","types","_i3","leftType","rightType","leftFunctionData","rightFunctionData","_merged","_merged2","leftArgsCopy","rightArgsCopy","stringConversions","_merged3","stringifiedArgs","parseTransformOrigin","convertKeyword2Percent","keyword","BUILT_IN_PROPERTIES","inh","syntax","OPACITY_VALUE","PAINT","COLOR","LENGTH_PERCENTAGE","SHADOW_BLUR","LENGTH_PERCENTAGE_12","DEFINED_PATH","OFFSET_DISTANCE","ind","Z_INDEX","FILTER","TRANSFORM","TRANSFORM_ORIGIN","COORDINATE","LENGTH_PERCENTAGE_14","LIST_OF_POINTS","TEXT_TRANSFORM","NUMBER","GEOMETRY_ATTRIBUTE_NAMES","propertyMetadataCache","DefaultStyleValueRegistry","registerMetadata","metadata","CSSPropertySyntaxFactory","skipUpdateAttribute","skipParse","forceUpdateGeometry","usedAttributes","oldClipPath","oldOffsetPath","offsetPath","assignParsedStyle","needUpdateGeometry","getParsedStyleListOf","textTransform","calculator","markerMid","postProcessor","offsetDistance","geometry","boundsDirty","renderBoundsDirty","sceneGraphService","dirtifyToRoot","geometryUpdater","geometryUpdaterFactory","contentBounds","_geometryUpdater$upda","_geometryUpdater$upda2","_geometryUpdater$upda3","_geometryUpdater$upda4","cz","_geometryUpdater$upda5","hwidth","_geometryUpdater$upda6","hheight","_geometryUpdater$upda7","hdepth","_parsedStyle$increase","_parsedStyle$shadowTy","_parsedStyle$filter","expansion","SQRT2","_geometry$renderBound","shadowBlurInPixels","shadowOffsetXInPixels","shadowOffsetYInPixels","shadowLeft","shadowRight","shadowTop","shadowBottom","blurRadius","_shadowOffsetX","_shadowOffsetY","_shadowBlur","_geometry$renderBound2","_min","_max","_shadowLeft","_shadowRight","_shadowTop","_shadowBottom","flipX","usedOriginXValue","usedOriginYValue","setOrigin","isSizeAttenuation","rawLineWidth","rawR","constructor","PARSED_STYLE_LIST","CSSPropertyAngle","mixer","oldParsed","CSSPropertyClipPath","oldPath","updateDisplayObjectDependency","CSSPropertyColor","parser","CSSPropertyFilter","getFontSize","CSSPropertyLengthOrPercentage","computed","isRelativeUnit","documentElement","_fontSize","CSSPropertyLengthOrPercentage12","CSSPropertyLengthOrPercentage14","CSSPropertyMarker","_newMarker","cloneNode","isMarker","CSSPropertyNumber","CSSPropertyOffsetDistance","getPoint","CSSPropertyOpacity","CSSPropertyPath","CSSPropertyPoints","CSSPropertyShadowBlur","_CSSPropertyLengthOrP","CSSPropertyText","nodeValue","CSSPropertyTextTransform","rawText","transformedText","CANVAS_Map","isBrowser","isElement","sortByZIndex","o1","o2","zIndex1","zIndex2","findClosestClipPathTarget","_el$parsedStyle","setDOMSize","getStyle","getComputedStyle","getPropertyValue","TOUCH_TO_POINTER","touchstart","touchend","touchendoutside","touchmove","touchcancel","clock","performance","isInFragment","getRootNode","isFillOrStrokeAffected","isFillOtherThanNone","isStrokeOtherThanNone","uId","global","nowOffset","reservedCBs","lastTime","polyfillRaf","currentTime","gap","copied","polyfillCaf","getRequestAnimationFrame","vp","predicate","raf","caf","getCancelAnimationFrame","AsyncParallelHook","callbacks","AsyncSeriesWaterfallHook","_promise","_this$callbacks","SyncHook","argsArr","SyncWaterfallHook","genericFontFamilies","stringRegExp","createSkewMatrix","skewMatrix","$mat4_1","$mat4_2","fromZRotation","fromXRotation","fromYRotation","fromRotation","$vec3One$1","$vec3Zero$1","optimizer","setLocalScale","dirtifyLocal","transformable","parsedTransformToMat4","_transform$i","mul","setLocalTransform","resetLocalTransform","CSSPropertyTransform","CSSPropertyTransformOrigin","CSSPropertyZIndex","parentEntity","parentRenderable","parentSortable","dirtyReason","Z_INDEX_CHANGED","CircleUpdater","_parsedStyle$r","EllipseUpdater","_parsedStyle$rx","_parsedStyle$ry","LineUpdater","PathUpdater","_d$rect","PolylineUpdater","RectUpdater","_parsedStyle$width","_parsedStyle$height","TextUpdater","globalRuntime","_parsedStyle$dx","_parsedStyle$dy","isReadyToMeasure","lineWidths","maxLineWidth","fontProperties","ascent","descent","textService","lineXOffset","lineYOffset","GroupUpdater","HTMLUpdater","FederatedEvent","manager","eventPhase","NONE","bubbles","cancelBubble","cancelable","defaultPrevented","propagationStopped","propagationImmediatelyStopped","layer","viewport","composed","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","propagationPath","composedPath","nativeEvent","Event","preventDefault","FederatedMouseEvent","client","movement","screen","getModifierState","FederatedPointerEvent","_FederatedMouseEvent","isPrimary","clonePointerEvent","FederatedWheelEvent","cloneWheelEvent","CustomEvent","_FederatedEvent","eventName","CANVAS_CACHE","EventTarget","emitter","listener","_options$capture","_options$once","handleEvent","removeAllEventListeners","_this$emitter","removeAllListeners","_listener","_ownerDocument","skipPropagate","getEventService","Node","_EventTarget","shadow","baseURI","nodeType","_child","textContent","opts","host","namespace","otherNode","isEqualNode","node1Root","node2Root","node1Hierarchy","node2Hierarchy","_node1Root$parentNode","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","DOCUMENT_POSITION_PRECEDING","longerHierarchy","shorterHierarchy","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_FOLLOWING","longerStart","shorterHierarchyNode","longerHierarchyNode","EventService","mappingTable","mappingState","trackingData","eventPool","tmpMatrix","tmpVec3","createPointerEvent","pointerType","isRightButton","pointerId","pressTargetsByButton","freeEvent","alwaysTriggerPointerEventOnCanvas","rootTarget","pressTarget","findMountedTarget","clickTarget","currentTarget","notifyTarget","_isRightButton","_e$detail","clickEvent","clicksByButton","clickCount","timeStamp","clickHistory","dblClickSpeed","preventClick","isMouse","outTarget","overTargets","outType","outEvent","leaveEvent","overType","overEvent","overTargetAncestor","enterEvent","getCursor","onPointerUpOutside","onWheel","wheelEvent","createWheelEvent","addEventMapping","_this$getScale","_this$getScale2","getCamera","getPerspectiveInverse","worldMatrix","canvasP","pickHandler","priority","mappers","warn","notifyListeners","propagate","viewportX","viewportY","_this$context$config3","disableHitTesting","_target","shadowRoot","_arr","eventTarget","existed","hitTest","canvasX","canvasY","fallbackTarget","allocateEvent","copyPointerData","copyMouseData","copyData","originalEvent","existedHTML","getExistedHTML","isNativeEventFromCanvas","pickTarget","copyWheelData","overTarget","pressure","tangentialPressure","tiltX","tiltY","twist","altKey","buttons","ctrlKey","metaKey","shiftKey","copyFrom","deltaMode","deltaZ","isTrusted","listeners","removeListener","OffscreenCanvasCreator","contextAttributes","OffscreenCanvas","_unused2","_unused3","RenderReason","RenderingService","inited","stats","zIndexCounter","initAsync","dirtycheck","cull","beforeRender","afterRender","getCallbacksNum","promise","frame","rerenderCallback","syncHierarchy","triggerPendingEvents","dirtyRectangleRenderingDisabled","onlyCameraChanged","shouldTriggerRenderHooks","disableRenderHooks","renderListCurrentFrame","_canvasConfig$rendere","internalRenderSingleDisplayObject","objectChanged","objectToRender","dirtyChildren","_index","_index2","low","high","sortedIndex","clearPendingEvents","DISPLAY_OBJECT_CHANGED","ATTRIBUTE_REGEXP","DefaultSceneGraphSelector","query","classList","getIdOrClassname","_this$getAttribute","attributeToString","findAll","_this$getAttribute2","_this$getAttribute3","ElementEvent","MutationEvent","typeArg","relatedNode","attrChange","prevParsedValue","newParsedValue","markRenderableDirty","ADDITION","MODIFICATION","REMOVAL","rectUpdater","polylineUpdater","reparentEvent","REPARENT","$vec2Zero","$vec3Zero","$vec3One","$mat4Identity","$vec2","$vec3$1","$mat4","$quat$1","$setLocalTransform_1","$setLocalTransform_2","$setLocalTransform_3","$setLocalPosition","$setPosition_1","$setPosition_ParentInvertMatrix","$setEulerAngles_InvParentRot","$rotateLocal","$rotate_ParentInvertRotation","$triggerPendingEvents_detail","affectChildren","DefaultSceneGraphService","pendingEvents","boundsChangedEvent","displayObjectDependencyMap","sceneGraphSelector","is","selectOne","_sortable$sorted","detached","detach","isChildFragment","isAttachToFragment","ADDED","dirtifyFragment","dirtifyWorld","_sortable$sorted2","_style","origin","originVec","degrees","rotation","rot","getRotation","parentRot","localRotation","rotateLocal","parentRotation","_position$","parentTransform","_position$2","scaling","_scaling$","localScale","_scaling$2","setLocalRotation","localSkew","localDirtyFlag","dirtyFlag","unfreezeParentToRoot","dirtifyWorldInternal","frozen","triggered","informDependentDisplayObjects","oldDependencyMap","newDependencyMap","dependencyMap","isCustomElement","getTranslation","sync","localTransform","hasPosition","hasRotation","hasScale","hasOrigin","calcLocalTransform","setLocalSkew","existedAABB","setFromTransformedAABB","styleValueRegistry","updateGeometry","_this3","getTransformedGeometryBounds","childBounds","clipPathBounds","parentInvert","localBounds","_element$ownerDocumen","_aabb$getMin","_aabb$getMin2","_aabb$getMax","_aabb$getMax2","_this4","childTransform","TEXT_METRICS","MetricsString","BaselineSymbol","BaselineMultiplier","HeightMultiplier","Newlines","BreakingSpaces","LATIN_REGEX","regexCannotStart","regexCannotEnd","TextService","fontMetricsCache","shouldBreakByKinsokuShorui","_char","nextChar","isBreakingSpace","trimByKinsokuShorui","prevLine","lastChar","properties","metricsString","imagedata","pixels","_parsedStyle$fontSize","_parsedStyle$wordWrap","strokeHeight","textPath","textPathSide","textPathStartOffset","_parsedStyle$leading","leading","_attributes$fontSize","_attributes$fontFamil","_attributes$fontStyle","_attributes$fontVaria","_attributes$fontWeigh","fontSizeString","fontFamilies","_fontFamily","toFontString","measureFont","isOverflowing","_lineWidth","_width","getTotalLength","_parsedStyle$wordWrap2","_parsedStyle$letterSp2","_parsedStyle$maxLines","chars","currentLineIndex","currentLineWidth","prevLineLastCharIndex","calcWidth","txt","getFromCache","ellipsisWidth","findCharIndexClosestWidthThreshold","lineTxt","txtLastCharIndex","txtStartCharIndex","widthThreshold","isNewline","appendEllipsis","lineIndex","textCharIndex","_char2","prevChar","charWidth","canBreakInLastChar","trimToBreakable","sumTextWidthByCache","_char3","_char4","findBreakableIndex","trimmedChar","trimFrom","trimTo","_char5","PERCENTAGE","ANGLE","CameraContribution","AnimationTimeline","EasingFunction","layoutRegistry","enableStyleSyntax","entityCounter","insertedEvent","removedEvent","destroyEvent","Element","_Node","cullable","strategy","Standard","visibilityPlaneMask","enable","namespaceURI","scrollLeft","scrollTop","clientTop","clientLeft","destroyed","computedStyle","lastChild","_this$ownerDocument","attach","mountChildren","mountFragment","refChild","oldChild","_child$ownerDocument","unmountChildren","destroyChildren","tagName","selectors","_len2","_key2","_this4$parentNode","_len3","_key3","_this5","_len4","_key4","_this6","_len5","_key5","qualifiedName","getAttributeNames","attributeName","force","localName","isDisplayObject","Proxy","attrModifiedEvent","$vec3","$quat","DisplayObject","_Element","activeAnimations","initialParsedStyle","initAttributes","setProperty","propertyName","removeProperty","removeAttribute","prop","getAnimations","cancel","customCloneFunc","clonedStyle","attribute","clonedChild","processProperties","internalSetAttribute","parseOptions","oldParsedValue","_attributeChangedCall","translateLocal","getLocalPosition","scaleLocal","getLocalScale","_getEuler","_getEuler3","getLocalRotation","setRotation","getLocalSkew","timeline","play","_this$parsedStyle","isInteractive","_this$parsedStyle2","transformMat4","_mat4$getTranslation","_mat4$getTranslation2","_getEuler5","_getEuler6","eux","euz","fromRotationTranslationScale","getMatrix","_decompose","_decompose2","_decompose3","_decompose4","childElementCount","firstElementChild","lastElementChild","Circle","_DisplayObject","_excluded$6","CustomElement","Ellipse","Fragment","Group","_excluded$5","_excluded$4","Line","z1","markerStartAngle","markerEndAngle","transformMarker","isStart","originalAngle","inWorldSpace","_this$parsedStyle3","_linePointAt","transformed","_this$parsedStyle4","_excluded$3","Path","markerMidList","placeMarkerMid","_this$getStartTangent","_this$getStartTangent2","_this$getEndTangent","_this$getEndTangent2","_segments$i$currentPo","_getPointAtLength2","endPoint","tangent","_excluded$2","Polygon","isClosed","_excluded$1","Polyline","_Polygon","segmentT","segmentL","tempLength","subt","Rect","_excluded","_this$parsedStyle$met","_this$parsedStyle$met2","CustomElementRegistry","define","CSS","percent","em","rem","grad","turn","ms","registerProperty","definition","inherits","interpolable","initialValue","registerLayout","clazz","Document","initialStyle","customElements","rBushNodes","_displayObject$parsed","isVisibilityAffected","_this$defaultView$can","canvas2Viewport","_this$defaultView$get","_this$defaultView$vie","viewport2Client","getRenderingService","_elementFromPoint","_this$defaultView$can2","_this$defaultView$get3","_this$defaultView$vie2","_yield$this$defaultVi","_this$defaultView$can3","_this$defaultView$get4","_this$defaultView$vie3","_elementsFromPoint","_this$defaultView$can4","_this$defaultView$get6","_this$defaultView$vie4","_yield$this$defaultVi2","getElementsByName","getElementsByTagName","CullingPlugin","strategies","unculledEntities","EventPlugin","autoPreventDefault","rootPointerEvent","rootWheelEvent","_this$context$renderi","normalizedEvents","normalizeToPointerEvent","normalizedEvent","bootstrapEvent","mapEvent","setCursor","_this$context$renderi2","_step2","_iterator2","setPickHandler","normalizeWheelEvent","isNormalized","_step3","_iterator3","federatedEvent","_step4","$element","outside","_iterator4","_step5","_iterator5","transferMouseData","_this$context$eventSe","client2Viewport","_this$context$eventSe2","_this$context$eventSe3","_this$context$eventSe4","srcElement","movementX","movementY","pageX","pageY","screenX","screenY","relatedTarget","applyCursorStyle","isTouchEvent","changedTouches","touch","radiusX","radiusY","identifier","isMouseEvent","tempEvent","shape2D","FrustumCullingStrategy","_object$parentNode","parentVisibilityPlaneMask","computeVisibilityWithPlaneMask","INDETERMINATE","OUTSIDE","parentPlaneMask","INSIDE","mask","isShape2D","_planes$k","getPositiveFarPoint","getNegativeFarPoint","PrepareRendererPlugin","syncTasks","isFirstTimeRendering","syncing","_runtime$globalThis$r","updateSizeAttenuation","getZoom","ric","requestIdleCallback","syncRTree","_renderBounds$getMin","_renderBounds$getMin2","_renderBounds$getMax","_renderBounds$getMax2","bulk","synced","syncNode","CanvasEvent","mountedEvent","unmountedEvent","beforeRenderEvent","BEFORE_RENDER","rerenderEvent","RERENDER","afterRenderEvent","AFTER_RENDER","Canvas","supportsMutipleCanvasesInOneContainer","_config$cleanUpOnDest","cleanUpOnDestroy","canvasWidth","canvasHeight","getWidth","getHeight","PointerEvent","TouchEvent","MouseEvent","cleanUp","$dom","cleanExistedCanvas","initRenderingContext","initDefaultCamera","initRenderer","mergedConfig","setType","readyPromise","resolveReadyPromise","skipTriggerEvent","BEFORE_DESTROY","frameId","getRoot","AFTER_DESTROY","clearEventRetain","getProjectionMode","getNear","getFar","setAspect","insertBefore","_tick","time","firstContentfullPaint","loadRendererContainerModule","initRenderingService","_this7","async","READY","RENDERER_CHANGED","run","_this8","getPlugins","oldRenderer","_this9","_this10","Events","EE","addListener","_eventsCount","clearEvent","__proto__","eventNames","names","getOwnPropertySymbols","handlers","ee","listenerCount","a5","prefixed","module","getBBoxByArray","xAt","yAt","box$5","xDim","atan","xExtrema","xs","yDim","yExtrema","ys","nearestPoint$2","tCallback","segNum","increaseRate","interval","_t","d2","length$4","pointAt$3","pointToLine","cubicAt","onet","extrema$1","t2","discSqrt","extremas","disc","box$3","pointDistance$3","nearestPoint$1","lengthOfSegment","length$2","quadraticAt","extrema","pointDistance","nearestPoint","DragndropPlugin","dragndropPluginOptions","handlePointerdown","isDocument","draggableEventTarget","isDocumentDraggable","closest","dragstartTriggered","dragstartTimeStamp","dragstartClientCoordinates","currentDroppable","lastDragClientCoordinates","handlePointermove","timeElapsed","distanceMoved","elementsBelow","elementBelow","droppableBelow","dragstartTimeThreshold","dragstartDistanceThreshold","elementsFromPoint","isDocumentDroppable","stopDragging","originalPointerUpEvent","_event","AdvancedCamera","_Camera","landmarks","coords","updatedDistance","landmarkAnimationID","_focalPoint$","_focalPoint$2","_params$position","_params$focalPoint","setRoll","landmark","getDistanceVector","getDistance","getDollyingStep","getAzimuth","getElevation","getRoll","_ref$easing","_ref$duration","_ref$easingFunction","easingFunction","_ref$onfinish","_ref$onframe","epsilon","cancelLandmarkAnimation","timeStart","destPosition","destFocalPoint","destZoom","destRoll","easingFunc","_animate","elapsed","interZoom","interRoll","interFocalPoint","interPosition","AnimationEvent","timelineTime","sequenceNumber","Animation","effect","_this$effect","currentTimePending","_idle","_paused","_finishedFlag","_currentTime","_playbackRate","_inTimeline","_inEffect","_totalDuration","getComputedTiming","endTime","_holdTime","oldPlayState","updatePromises","_startTime","playbackRate","_isFinished","animationsWithPromises","rejectReadyPromise","pending","finishedPromise","resolveFinishedPromise","rejectFinishedPromise","newTime","_this$timeline","restart","tickCurrentTime","applyDirtiedAnimation","oldCurrentTime","startTime","ensureAlive","newPlayState","rewind","oncancel","_this$effect2","targetAnimations","isAnimationFrame","fireEvents","_this$effect3","_this$effect4","ignoreLimit","baseTime","kSampleStepSize","float32ArraySupported","Float32Array","aA1","aA2","B","C","calcBezier","aT","getSlope","bezier","mX1","mY1","mX2","mY2","sampleValues","getTForX","aX","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","binarySubdivide","Quad","Cubic","Quart","Quint","Expo","Sine","Circ","Back","Bounce","pow2","Elastic","_params","_params$","amplitude","_params$2","period","Spring","_params2","_params2$","mass","_params2$2","stiffness","_params2$3","damping","_params2$4","velocity","w0","zeta","wd","progress","Steps","_ref2$","trunc","Bezier","_params3","easein","EaseOut","ease","EaseInOut","EaseOutIn","EasingFunctions","linear","spring","stepSize","numberString","cubicBezierRe","step1Re","step2Re","parseEasingFunction","normalizedEasing","cubicData","step1Data","step2Data","letter","complexEasingSyntax","calculateActiveDuration","timing","_timing$iterations","iterations","repeatedDuration","calculateIterationProgress","activeDuration","localTime","phase","endDelay","calculatePhase","activeTime","fillMode","calculateActiveTime","overallProgress","iterationDuration","iterationStart","calculateOverallProgress","simpleIterationProgress","calculateSimpleIterationProgress","currentIteration","calculateCurrentIteration","directedProgress","playbackDirection","currentDirection","calculateDirectedProgress","convertEffectInput","propertySpecificKeyframeGroups","member","isNotReservedWord","propertySpecificKeyframe","computedOffset","makePropertySpecificKeyframeGroups","interpolations","groupName","startIndex","endIndex","startOffset","applyFrom","applyTo","interpolation","propertyInterpolation","leftInterpolation","rightInterpolation","makeInterpolations","fraction","offsetFraction","localDuration","scaledLocalTime","InterpolationFactory","convertToString","interpolated","propertyHandler","getPropertySyntax","usedLeft","usedRight","interpolationArgs","interp","bool","fromLength","toLength","AnimationEffectTiming","_easing","normalizeKeyframes","effectInput","normalizedEffectInput","numKeyframes","keyframe","composite","convertToArrayForm","originalKeyframe","memberValue","everyFrameHasOffset","_keyframes$offset","_keyframes$0$offset","_offset","spaceKeyframes","fills","directions","normalizeTimingInput","timingInput","forGroup","_timingInput","makeTiming","numericTimingToObject","KeyframeEffect","iterationComposite","normalizedKeyframes","computedTiming","timeFraction","compareAnimations","leftAnimation","rightAnimation","ticking","timelineTicking","hasRestartedThisFrame","inTick","pendingEffects","rafCallbacks","webAnimationsNextTick","discardAnimations","processRafCallbacks","processing","entry","applyPendingEffects","restartWebAnimationsNextTick","markTarget","applyInterpolations","updateAnimationsPromises","rAF","updatingAnimations","_this$pendingEffects","_this$pendingEffects2","newPendingClears","newPendingEffects","inactiveAnimations","unmarkTarget","_needsTick","alive","internGet","initKey","keyof","valueOf","InternMap","super","internSet","internDelete","pretty","computeFlexBandState","F","stepSum","bandWidthSum","normalizedFlex","minBandWidth","valueBandWidth","valueStep","finalStepSum","bandStart","adjustedRange","Band","getDefaultOptions","unknown","getStep","getPaddingInner","getPaddingOuter","rescale","rangeStart","deltaRange","outerTotal","innerTotal","computeBandState","Base","updateOptions","createBiMap","createInterpolate","r0","compose","createPolyMap","normalizeList","interpolateList","ascendingDomain","ascendingRange","bisect","choosePiecewise","shouldRound","Continuous","nice","tickCount","getTickMethodOptions","chooseNice","getTicks","tickMethod","untransform","chooseTransforms","composeOutput","chooseClamp","composeInput","shouldClamp","lo","hi","createClamp","piecewise","Linear","defaultUnknown","Symbol","updateIndexMap","mapBetweenArrByMapIndex","mapper","notFoundReturn","mappedIndex","createKey","JSON","stringify","Ordinal","domainIndexMap","getDomain","domainKey","rangeIndexMap","rangeKey","sortedDomain","d3Ticks","begin","ticks","getter","pre","d3LinearNice","i0","i1","hue2rgb","string2rbg","model","hsl","hsl2rbg","createInterpolateNumber","createInterpolateValue","createInterpolateColor","createInterpolateRound","interpolateNumber","isValid","createNormalize","e10","e5","e2","tickIncrement","power","LN10","tickStep","step0","step1","isNumberEqual","rotateVector","arcToCubic","recursive","xy","f1","f2","d120","rx2","ry2","df","f2old","x2old","y2old","hx","hy","newres","distanceSquareRoot","colorNames","swizzle","reverseNames","cs","hexDouble","hwb","rgb","hexAlpha","i2","parseInt","hex","hsla","hwba","EPSILON","ARRAY_TYPE","random","hypot","fromMat4","m00","m01","m02","m20","m21","m22","m03","m23","m30","m31","m32","m33","a01","a02","a12","a00","a10","a11","a20","a21","a22","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","adjoint","b2","b3","b12","b20","b21","b22","fromRotationTranslation","xx","xz","yy","yz","zz","wx","wy","wz","fromQuat2","bx","bz","bw","aw","magnitude","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","yx","zx","zy","rl","tb","nf","perspectiveNO","fovy","perspectiveZO","perspectiveFromFieldOfView","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","orthoNO","lr","bt","eye","z0","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","targetTo","frob","subtract","multiplyScalar","multiplyScalarAndAdd","equals","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","setAxisAngle","slerp","omega","cosom","sinom","scale0","invDot","fromEuler","halfToRad","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","lerp","transformMat3","transformQuat","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","squaredLength","basePickBy","hasIn","baseGet","baseSet","castPath","assignValue","isIndex","isObject","toKey","customizer","nested","objValue","isArguments","hasFunc","reHasUnicode","baseHasIn","hasPath","basePick","flatRest","isArrayish","results","Function","unsupportedIterableToArray","allowArrayLike","it","iterator","normalCompletion","didErr","_e2","__esModule","_callSuper","construct","_createForOfIteratorHelper","_n","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","formatHex","color_formatRgb","formatRgb","format","rgbn","Rgb","NaN","rgbConvert","rgb_formatHex","rgb_formatRgb","clampa","clampi","Hsl","hslConvert","clamph","clampt","hsl2rgb","channels","displayable","formatHex8","formatHsl","dispatch","Dispatch","parseTypenames","typenames","typename","strength","initialize","nodeById","nodeId","links","strengths","distances","bias","link","vx","vy","initializeStrength","initializeDistance","_nodes","_random","distanceMin2","distanceMax2","theta2","tree","visitAfter","accumulate","visit","quad","weight","distanceMin","distanceMax","initialAngle","simulation","alphaMin","alphaDecay","alphaTarget","velocityDecay","forces","stepper","timer","lcg","initializeNodes","initializeForce","randomSource","xm","ym","_root","_x0","_y0","_x1","_y1","_y","defaultX","defaultY","quadtree","Quadtree","addAll","leaf_copy","treeProto","cover","quads","retainer","previous","removeAll","taskHead","taskTail","clockLast","clockNow","clockSkew","setFrame","clearNow","Timer","_call","_time","_next","wake","timerFlush","sleep","nap","poke","clearInterval","setInterval"],"sourceRoot":""}