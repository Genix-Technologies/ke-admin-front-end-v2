(self.webpackChunk=self.webpackChunk||[]).push([[5915],{83943:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(71981),a=t(57636),s=t(27591),o=t(86074);function i(e){var n=e.title,t=e.children,i=e.showDialog;return(0,o.jsxs)("div",{className:"flex justify-between mb-6",children:[(0,o.jsx)("span",{className:"text-3xl font-bold ",children:n}),(0,o.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,o.jsx)(r.Z,{className:"size-5"}),(0,o.jsx)(s.Mj,{}),(0,o.jsx)(a.z,{variant:"tertiary",size:"sm",onClick:i,children:t})]})]})}},57636:function(e,n,t){"use strict";t.d(n,{d:function(){return m},z:function(){return p}});var r=t(97857),a=t.n(r),s=t(13769),o=t.n(s),i=t(88426),c=t(45139),u=t(62435),l=t(27080),d=t(86074),f=["className","variant","size","asChild"],m=(0,c.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-colors-outline-sentiment-primary bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",tertiary:"bg-colors-background-sentiment-solid-primary text-colors-text-persist-light hover:bg-colors-background-sentiment-solid-primary/80",icon:"bg-colors-background-inverse-standard text-foreground hover:bg-colors-background-inverse-standard/80"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10",auto:"h-full px-1"}},defaultVariants:{variant:"default",size:"default"}}),p=u.forwardRef((function(e,n){var t=e.className,r=e.variant,s=e.size,c=e.asChild,u=void 0!==c&&c,p=o()(e,f),g=u?i.g7:"button";return(0,d.jsx)(g,a()({className:(0,l.cn)(m({variant:r,size:s,className:t})),ref:n},p))}));p.displayName="Button"},23309:function(e,n,t){"use strict";t.d(n,{X:function(){return m}});var r=t(97857),a=t.n(r),s=t(13769),o=t.n(s),i=t(46069),c=t(13742),u=t(62435),l=t(27080),d=t(86074),f=["className"],m=u.forwardRef((function(e,n){var t=e.className,r=o()(e,f);return(0,d.jsx)(i.fC,a()(a()({ref:n,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t)},r),{},{children:(0,d.jsx)(i.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,d.jsx)(c.Z,{className:"h-4 w-4"})})}))}));m.displayName=i.fC.displayName},28993:function(e,n,t){"use strict";t.d(n,{$N:function(){return j},Vq:function(){return x},cN:function(){return k},cZ:function(){return y},fK:function(){return w}});var r=t(97857),a=t.n(r),s=t(13769),o=t.n(s),i=t(94153),c=t(41352),u=t(62435),l=t(27080),d=t(86074),f=["className"],m=["className","children"],p=["className"],g=["className"],v=["className"],h=["className"],x=i.fC,b=(i.xz,i.h_),N=(i.x8,u.forwardRef((function(e,n){var t=e.className,r=o()(e,f);return(0,d.jsx)(i.aV,a()({ref:n,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t)},r))})));N.displayName=i.aV.displayName;var y=u.forwardRef((function(e,n){var t=e.className,r=e.children,s=o()(e,m);return(0,d.jsxs)(b,{children:[(0,d.jsx)(N,{}),(0,d.jsxs)(i.VY,a()(a()({ref:n,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-colors-background-neutral-standard p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t)},s),{},{children:[r,(0,d.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,d.jsx)(c.Z,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})}));y.displayName=i.VY.displayName;var w=function(e){var n=e.className,t=o()(e,p);return(0,d.jsx)("div",a()({className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",n)},t))};w.displayName="DialogHeader";var k=function(e){var n=e.className,t=o()(e,g);return(0,d.jsx)("div",a()({className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n)},t))};k.displayName="DialogFooter";var j=u.forwardRef((function(e,n){var t=e.className,r=o()(e,v);return(0,d.jsx)(i.Dx,a()({ref:n,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t)},r))}));j.displayName=i.Dx.displayName,u.forwardRef((function(e,n){var t=e.className,r=o()(e,h);return(0,d.jsx)(i.dk,a()({ref:n,className:(0,l.cn)("text-sm text-muted-foreground",t)},r))})).displayName=i.dk.displayName},25910:function(e,n,t){"use strict";t.d(n,{$F:function(){return k},AW:function(){return j},Ju:function(){return C},VD:function(){return Z},Xi:function(){return _},h_:function(){return w}});var r=t(97857),a=t.n(r),s=t(13769),o=t.n(s),i=t(93133),c=t(64998),u=t(13742),l=t(50316),d=t(62435),f=t(27080),m=t(86074),p=["className","inset","children"],g=["className"],v=["className","sideOffset"],h=["className","inset"],x=["className","children","checked"],b=["className","children"],N=["className","inset"],y=["className"],w=i.fC,k=i.xz;i.ZA,i.Uv,i.Tr,i.Ee;d.forwardRef((function(e,n){var t=e.className,r=e.inset,s=e.children,u=o()(e,p);return(0,m.jsxs)(i.fF,a()(a()({ref:n,className:(0,f.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t)},u),{},{children:[s,(0,m.jsx)(c.Z,{className:"ml-auto"})]}))})).displayName=i.fF.displayName,d.forwardRef((function(e,n){var t=e.className,r=o()(e,g);return(0,m.jsx)(i.tu,a()({ref:n,className:(0,f.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t)},r))})).displayName=i.tu.displayName;var j=d.forwardRef((function(e,n){var t=e.className,r=e.sideOffset,s=void 0===r?4:r,c=o()(e,v);return(0,m.jsx)(i.Uv,{children:(0,m.jsx)(i.VY,a()({ref:n,sideOffset:s,className:(0,f.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t)},c))})}));j.displayName=i.VY.displayName;var _=d.forwardRef((function(e,n){var t=e.className,r=e.inset,s=o()(e,h);return(0,m.jsx)(i.ck,a()({ref:n,className:(0,f.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t)},s))}));_.displayName=i.ck.displayName,d.forwardRef((function(e,n){var t=e.className,r=e.children,s=e.checked,c=o()(e,x);return(0,m.jsxs)(i.oC,a()(a()({ref:n,className:(0,f.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:s},c),{},{children:[(0,m.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,m.jsx)(i.wU,{children:(0,m.jsx)(u.Z,{className:"h-4 w-4"})})}),r]}))})).displayName=i.oC.displayName,d.forwardRef((function(e,n){var t=e.className,r=e.children,s=o()(e,b);return(0,m.jsxs)(i.Rk,a()(a()({ref:n,className:(0,f.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t)},s),{},{children:[(0,m.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,m.jsx)(i.wU,{children:(0,m.jsx)(l.Z,{className:"h-2 w-2 fill-current"})})}),r]}))})).displayName=i.Rk.displayName;var C=d.forwardRef((function(e,n){var t=e.className,r=e.inset,s=o()(e,N);return(0,m.jsx)(i.__,a()({ref:n,className:(0,f.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t)},s))}));C.displayName=i.__.displayName;var Z=d.forwardRef((function(e,n){var t=e.className,r=o()(e,y);return(0,m.jsx)(i.Z0,a()({ref:n,className:(0,f.cn)("-mx-1 my-1 h-px bg-muted",t)},r))}));Z.displayName=i.Z0.displayName},27591:function(e,n,t){"use strict";t.d(n,{II:function(){return g},Mj:function(){return h}});var r=t(9783),a=t.n(r),s=t(97857),o=t.n(s),i=t(13769),c=t.n(i),u=t(62435),l=t(27080),d=t(87764),f=t(86074),m=["className","type"],p=["suffix","prefix"],g=u.forwardRef((function(e,n){var t=e.className,r=e.type,a=c()(e,m);return(0,f.jsx)("input",o()({type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-colors-background-inverse-weak px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n},a))}));g.displayName="Input";var v=function(e){var n=e.suffix,t=e.prefix,r=c()(e,p);return(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("span",{className:(0,l.cn)(a()({},"absolute left-3 top-[50%] translate-y-[-50%]",t)),children:t}),(0,f.jsx)(g,o()({className:(0,l.cn)({"pr-10":n,"pl-10":t})},r)),(0,f.jsx)("span",{className:(0,l.cn)(a()({},"absolute right-3 top-[50%] translate-y-[-50%]",n)),children:n})]})},h=function(e){return(0,f.jsx)(v,o()({suffix:(0,f.jsx)(d.Z,{})},e))}},2834:function(e,n,t){"use strict";t.d(n,{r:function(){return f}});var r=t(97857),a=t.n(r),s=t(13769),o=t.n(s),i=t(60761),c=t(62435),u=t(27080),l=t(86074),d=["className"],f=c.forwardRef((function(e,n){var t=e.className,r=o()(e,d);return(0,l.jsx)(i.fC,a()(a()({className:(0,u.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-colors-background-core-standard data-[state=unchecked]:bg-colors-background-inverse-standard",t)},r),{},{ref:n,children:(0,l.jsx)(i.bU,{className:(0,u.cn)("pointer-events-none block h-5 w-5 rounded-full bg-colors-text-neutral-strong shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}))}));f.displayName=i.fC.displayName},75269:function(e,n,t){"use strict";t.d(n,{RM:function(){return N},SC:function(){return y},iA:function(){return x},pj:function(){return k},ss:function(){return w},xD:function(){return b}});var r=t(97857),a=t.n(r),s=t(13769),o=t.n(s),i=t(62435),c=t(27080),u=t(86074),l=["className"],d=["className"],f=["className"],m=["className"],p=["className"],g=["className"],v=["className"],h=["className"],x=i.forwardRef((function(e,n){var t=e.className,r=o()(e,l);return(0,u.jsx)("div",{className:"relative w-full overflow-auto",children:(0,u.jsx)("table",a()({ref:n,className:(0,c.cn)("w-full caption-bottom text-sm",t)},r))})}));x.displayName="Table";var b=i.forwardRef((function(e,n){var t=e.className,r=o()(e,d);return(0,u.jsx)("thead",a()({ref:n,className:(0,c.cn)("[&_tr]:border-b",t)},r))}));b.displayName="TableHeader";var N=i.forwardRef((function(e,n){var t=e.className,r=o()(e,f);return(0,u.jsx)("tbody",a()({ref:n,className:(0,c.cn)("[&_tr:last-child]:border-0",t)},r))}));N.displayName="TableBody",i.forwardRef((function(e,n){var t=e.className,r=o()(e,m);return(0,u.jsx)("tfoot",a()({ref:n,className:(0,c.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t)},r))})).displayName="TableFooter";var y=i.forwardRef((function(e,n){var t=e.className,r=o()(e,p);return(0,u.jsx)("tr",a()({ref:n,className:(0,c.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t)},r))}));y.displayName="TableRow";var w=i.forwardRef((function(e,n){var t=e.className,r=o()(e,g);return(0,u.jsx)("th",a()({ref:n,className:(0,c.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t)},r))}));w.displayName="TableHead";var k=i.forwardRef((function(e,n){var t=e.className,r=o()(e,v);return(0,u.jsx)("td",a()({ref:n,className:(0,c.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t)},r))}));k.displayName="TableCell",i.forwardRef((function(e,n){var t=e.className,r=o()(e,h);return(0,u.jsx)("caption",a()({ref:n,className:(0,c.cn)("mt-4 text-sm text-muted-foreground",t)},r))})).displayName="TableCaption"},1079:function(e,n,t){"use strict";t.d(n,{Cs:function(){return r},Pc:function(){return i},oQ:function(){return o},qH:function(){return s},vv:function(){return a}});var r=function(e){return e.Assistant="assistant",e.User="user",e}({}),a={temperatureEnabled:"temperature",topPEnabled:"top_p",presencePenaltyEnabled:"presence_penalty",frequencyPenaltyEnabled:"frequency_penalty",maxTokensEnabled:"max_tokens"},s=function(e){return e.Agent="agent",e.Chat="chat",e}({}),o=function(e){return e.DialogId="dialogId",e.ConversationId="conversationId",e.isNew="isNew",e}({}),i="empty"},96330:function(e,n,t){"use strict";t.d(n,{Rx:function(){return s},S8:function(){return c},Vr:function(){return u},cG:function(){return o},ld:function(){return l},n_:function(){return d},oQ:function(){return i}});var r=t(9783),a=t.n(r),s=function(e){return e.Dataset="dataset",e.Testing="testing",e.Configuration="configuration",e.KnowledgeGraph="knowledgeGraph",e}({}),o=function(e){return e.UNSTART="0",e.RUNNING="1",e.CANCEL="2",e.DONE="3",e.FAIL="4",e}({}),i=function(e){return e.Improvise="Improvise",e.Precise="Precise",e.Balance="Balance",e}({}),c=a()(a()(a()({},i.Improvise,{temperature:.9,top_p:.9,frequency_penalty:.2,presence_penalty:.4,max_tokens:512}),i.Precise,{temperature:.1,top_p:.3,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),i.Balance,{temperature:.5,top_p:.5,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),u=function(e){return e.Embedding="embedding",e.Chat="chat",e.Image2text="image2text",e.Speech2text="speech2text",e.Rerank="rerank",e.TTS="tts",e}({}),l=function(e){return e.DocumentId="doc_id",e.KnowledgeId="id",e}({}),d=function(e){return e.Virtual="virtual",e.Visual="visual",e}({})},86968:function(e,n,t){"use strict";t.d(n,{I3:function(){return g},pG:function(){return p},qM:function(){return v}});var r=t(15009),a=t.n(r),s=t(99289),o=t.n(s),i=t(5574),c=t.n(i),u=t(21640),l=t(3321),d=(t(18446),t(62435)),f=t(67421),m=t(86074),p=function(){var e=(0,d.useState)(!1),n=c()(e,2),t=n[0],r=n[1],a=(0,d.useCallback)((function(){r(!0)}),[]),s=(0,d.useCallback)((function(){r(!1)}),[]),o=(0,d.useCallback)((function(){r(!t)}),[t]);return{visible:t,showModal:a,hideModal:s,switchVisible:o}};var g=function(){var e=l.Z.useApp().modal,n=(0,f.$G)().t;return(0,d.useCallback)((function(t){var r=t.title,s=t.content,i=t.onOk,c=t.onCancel;return new Promise((function(t,l){e.confirm({title:null!=r?r:n("common.deleteModalTitle"),icon:(0,m.jsx)(u.Z,{}),content:s,okText:n("common.ok"),okType:"danger",cancelText:n("common.cancel"),onOk:function(){return o()(a()().mark((function e(){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==i?void 0:i();case 3:n=e.sent,t(n),console.info(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},onCancel:function(){null==c||c()}})}))}),[n,e])},v=function(e){return(0,f.$G)("translation",{keyPrefix:e})}},93352:function(e,n,t){"use strict";t.d(n,{A3:function(){return P},GH:function(){return S},Hy:function(){return L},Mc:function(){return V},QG:function(){return T},Yb:function(){return I},an:function(){return F},hf:function(){return M},jz:function(){return D},pC:function(){return _},tC:function(){return E},tl:function(){return C},ui:function(){return z},v3:function(){return Z},wO:function(){return K},wk:function(){return R},x2:function(){return A}});var r=t(97857),a=t.n(r),s=t(15009),o=t.n(s),i=t(99289),c=t.n(i),u=t(5574),l=t.n(u),d=t(40063),f=t(53506),m=t(73955),p=t(60806),g=t(5089),v=t(78158),h=t(78551),x=t(30202),b=t(4527),N=t(45360),y=t(96486),w=t(62435),k=t(2938),j=t(96100),_=function(e){return(0,w.useCallback)((function(n){return"".concat(p.N,"/document/get/").concat(e||n)}),[e])},C=function(e){var n=(0,w.useState)({width:849,height:1200}),t=l()(n,2),r=t[0],a=t[1];return{highlights:(0,w.useMemo)((function(){return(0,g.q1)(e,r)}),[e,r]),setWidthAndHeight:function(e,n){a((function(t){return t.height!==n||t.width!==e?{height:n,width:e}:t}))}}},Z=function(){var e,n=(0,j.pE)().knowledgeId,t=(0,k.Qe)(),r=t.searchString,s=t.handleInputChange,i=(0,k.ye)(),u=i.pagination,l=i.setPagination,d=(0,h.a)({queryKey:["fetchDocumentList",r,u],initialData:{docs:[],total:0},refetchInterval:15e3,queryFn:(e=c()(o()().mark((function e(){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ZP.get_document_list({kb_id:n,keywords:r,page_size:u.pageSize,page:u.current});case 2:if(0!==(t=e.sent).data.code){e.next=5;break}return e.abrupt("return",t.data.data);case 5:return e.abrupt("return",{docs:[],total:0});case 6:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}),f=d.data,p=d.isFetching,g=(0,w.useCallback)((function(e){l({page:1}),s(e)}),[s,l]);return{loading:p,searchString:r,documents:f.docs,pagination:a()(a()({},u),{},{total:null==f?void 0:f.total}),handleInputChange:g,setPagination:l}},D=function(){var e,n=(0,x.NL)(),t=(0,b.D)({mutationKey:["updateDocumentStatus"],mutationFn:(e=c()(o()().mark((function e(t){var r,a,s,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.status,a=t.documentId,e.next=3,m.ZP.document_change_status({doc_id:a,status:Number(r)});case 3:return s=e.sent,0===(i=s.data).code&&(N.ZP.success(d.Z.t("message.modified")),n.invalidateQueries({queryKey:["fetchDocumentList"]})),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})}),r=t.data,a=t.isPending;return{setDocumentStatus:t.mutateAsync,data:r,loading:a}},P=function(){var e,n=(0,x.NL)(),t=(0,b.D)({mutationKey:["saveDocumentName"],mutationFn:(e=c()(o()().mark((function e(t){var r,a,s,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,a=t.documentId,e.next=3,m.ZP.document_rename({doc_id:a,name:r});case 3:return s=e.sent,0===(i=s.data).code&&(N.ZP.success(d.Z.t("message.renamed")),n.invalidateQueries({queryKey:["fetchDocumentList"]})),e.abrupt("return",i.code);case 7:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})}),r=t.data;return{loading:t.isPending,saveName:t.mutateAsync,data:r}},S=function(){var e,n=(0,j.pE)().knowledgeId,t=(0,j.fz)(),r=t.setPaginationParams,a=t.page,s=(0,x.NL)(),i=(0,b.D)({mutationKey:["createDocument"],mutationFn:(e=c()(o()().mark((function e(t){var i,c;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ZP.document_create({name:t,kb_id:n});case 2:return i=e.sent,0===(c=i.data).code&&(1===a?s.invalidateQueries({queryKey:["fetchDocumentList"]}):r(),N.ZP.success(d.Z.t("message.created"))),e.abrupt("return",c.code);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})}),u=i.data,l=i.isPending;return{createDocument:i.mutateAsync,loading:l,data:u}},R=function(){var e,n=(0,x.NL)(),t=(0,b.D)({mutationKey:["setDocumentParser"],mutationFn:(e=c()(o()().mark((function e(t){var r,a,s,i,c;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.parserId,a=t.documentId,s=t.parserConfig,e.next=3,m.ZP.document_change_parser({parser_id:r,doc_id:a,parser_config:s});case 3:return i=e.sent,0===(c=i.data).code&&(n.invalidateQueries({queryKey:["fetchDocumentList"]}),N.ZP.success(d.Z.t("message.modified"))),e.abrupt("return",c.code);case 7:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})}),r=t.data,a=t.isPending;return{setDocumentParser:t.mutateAsync,data:r,loading:a}},z=function(){var e,n=(0,x.NL)(),t=(0,j.pE)().knowledgeId,r=(0,b.D)({mutationKey:["uploadDocument"],mutationFn:(e=c()(o()().mark((function e(r){var a,s,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("kb_id",t),r.forEach((function(e){a.append("file",e)})),e.prev=3,e.next=6,m.ZP.document_upload(a);case 6:return s=e.sent,0===(i=(0,y.get)(s,"data.code"))&&N.ZP.success(d.Z.t("message.uploaded")),0!==i&&500!==i||n.invalidateQueries({queryKey:["fetchDocumentList"]}),e.abrupt("return",null==s?void 0:s.data);case 13:return e.prev=13,e.t0=e.catch(3),console.warn(e.t0),e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,null,[[3,13]])}))),function(n){return e.apply(this,arguments)})}),a=r.data,s=r.isPending;return{uploadDocument:r.mutateAsync,loading:s,data:a}},I=function(){var e,n=(0,j.pE)().knowledgeId,t=(0,b.D)({mutationKey:["webCrawl"],mutationFn:(e=c()(o()().mark((function e(t){var r,a,s,i,c;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,a=t.url,(s=new FormData).append("name",r),s.append("url",a),s.append("kb_id",n),e.next=7,m.ZP.web_crawl(s);case 7:return i=e.sent,0===(c=(0,y.get)(i,"data.code"))&&N.ZP.success(d.Z.t("message.uploaded")),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:t.data,loading:t.isPending,webCrawl:t.mutateAsync}},T=function(){var e,n=(0,x.NL)(),t=(0,b.D)({mutationKey:["runDocumentByIds"],mutationFn:(e=c()(o()().mark((function e(t){var r,a,s,i,c;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.documentIds,a=t.run,s=t.shouldDelete,e.next=3,m.ZP.document_run({doc_ids:r,run:a,delete:s});case 3:return i=e.sent,0===(c=(0,y.get)(i,"data.code"))&&(n.invalidateQueries({queryKey:["fetchDocumentList"]}),N.ZP.success(d.Z.t("message.operated"))),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})}),r=t.data,a=t.isPending;return{runDocumentByIds:t.mutateAsync,loading:a,data:r}},M=function(){var e,n=(0,w.useState)([]),t=l()(n,2),r=t[0],a=t[1],s=(0,h.a)({queryKey:["fetchDocumentInfos",r],enabled:r.length>0,initialData:[],queryFn:(e=c()(o()().mark((function e(){var n,t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ZP.document_infos({doc_ids:r});case 2:if(n=e.sent,0!==(t=n.data).code){e.next=6;break}return e.abrupt("return",t.data);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:s.data,setDocumentIds:a}},A=function(){var e,n=(0,w.useState)([]),t=l()(n,2),r=t[0],a=t[1],s=(0,h.a)({queryKey:["fetchDocumentThumbnails",r],enabled:r.length>0,initialData:{},queryFn:(e=c()(o()().mark((function e(){var n,t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ZP.document_thumbnails({doc_ids:r});case 2:if(n=e.sent,0!==(t=n.data).code){e.next=6;break}return e.abrupt("return",t.data);case 6:return e.abrupt("return",{});case 7:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:s.data,setDocumentIds:a}},F=function(){var e,n=(0,x.NL)(),t=(0,b.D)({mutationKey:["removeDocument"],mutationFn:(e=c()(o()().mark((function e(t){var r,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ZP.document_rm({doc_id:t});case 2:return r=e.sent,0===(a=r.data).code&&(N.ZP.success(d.Z.t("message.deleted")),n.invalidateQueries({queryKey:["fetchDocumentList"]})),e.abrupt("return",a.code);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:t.data,loading:t.isPending,removeDocument:t.mutateAsync}},K=function(){var e,n=(0,b.D)({mutationKey:["deleteDocument"],mutationFn:(e=c()(o()().mark((function e(n){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ZP.document_delete({doc_ids:n});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:n.data,loading:n.isPending,deleteDocument:n.mutateAsync}},E=function(e){var n,t=(0,b.D)({mutationKey:["uploadAndParseDocument"],mutationFn:(n=c()(o()().mark((function n(t){var r,a,s,i,c;return o()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.conversationId,a=t.fileList,n.prev=1,(s=new FormData).append("conversation_id",r),a.forEach((function(e){s.append("file",e)})),"upload_and_parse"!==e){n.next=10;break}return n.next=8,m.ZP.upload_and_parse(s);case 8:return i=n.sent,n.abrupt("return",null==i?void 0:i.data);case 10:return n.next=12,f.Z.uploadAndParseExternal(s);case 12:return c=n.sent,n.abrupt("return",null==c?void 0:c.data);case 16:n.prev=16,n.t0=n.catch(1);case 18:case"end":return n.stop()}}),n,null,[[1,16]])}))),function(e){return n.apply(this,arguments)})});return{data:t.data,loading:t.isPending,uploadAndParseDocument:t.mutateAsync}},V=function(){var e,n=(0,b.D)({mutationKey:["parseDocument"],mutationFn:(e=c()(o()().mark((function e(n){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.v_)(p.Z.parse,{url:n});case 3:return 0===(null==(t=e.sent)?void 0:t.code)&&N.ZP.success(d.Z.t("message.uploaded")),e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(0),N.ZP.error("error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(n){return e.apply(this,arguments)})}),t=n.data,r=n.isPending;return{parseDocument:n.mutateAsync,data:t,loading:r}},L=function(){var e,n=(0,x.NL)(),t=(0,b.D)({mutationKey:["setDocumentMeta"],mutationFn:(e=c()(o()().mark((function e(t){var r,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.ZP.setMeta({meta:t.meta,doc_id:t.documentId});case 3:return r=e.sent,0===(null==(a=r.data)?void 0:a.code)&&(n.invalidateQueries({queryKey:["fetchDocumentList"]}),N.ZP.success(d.Z.t("message.modified"))),e.abrupt("return",null==a?void 0:a.code);case 9:e.prev=9,e.t0=e.catch(0),N.ZP.error("error");case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),function(n){return e.apply(this,arguments)})}),r=t.data,a=t.isPending;return{setDocumentMeta:t.mutateAsync,data:r,loading:a}}},2938:function(e,n,t){"use strict";t.d(n,{H0:function(){return A},IV:function(){return M},NT:function(){return K},Qe:function(){return z},UL:function(){return I},Y2:function(){return G},c5:function(){return F},cE:function(){return R},ox:function(){return U},sO:function(){return q},vv:function(){return V},vy:function(){return L},y7:function(){return E},ye:function(){return T}});var r=t(19632),a=t.n(r),s=t(97857),o=t.n(s),i=t(9783),c=t.n(i),u=t(15009),l=t.n(u),d=t(99289),f=t.n(d),m=t(5574),p=t.n(m),g=t(39918),v=t(1079),h=t(40169),x=t(60806),b=t(61921),N=t(71250),y=t(45360),w=t(87066),k=t(24809),j=t(96486),_=t(62435),C=t(67421),Z=t(57632),D=t(86968),P=t(96100),S=t(39259),R=function(){var e=(0,_.useState)({}),n=p()(e,2),t=n[0],r=n[1];return{currentRecord:t,setRecord:function(e){r(e)}}},z=function(){var e=(0,_.useState)(""),n=p()(e,2),t=n[0],r=n[1];return{handleInputChange:(0,_.useCallback)((function(e){var n=e.target.value;r(n)}),[]),searchString:t}},I=function(){var e=(0,C.$G)().i18n,n=(0,S.WH)().saveSetting;return function(t){e.changeLanguage(h.Kj[t]),n({language:t})}},T=function(){var e=(0,D.qM)("common").t,n=(0,P.fz)(),t=n.setPaginationParams,r=n.page,a=n.size,s=(0,_.useCallback)((function(e,n){t(e,n)}),[t]),o=(0,_.useCallback)((function(e){t(e.page,e.pageSize)}),[t]);return{pagination:(0,_.useMemo)((function(){return{showQuickJumper:!0,total:0,showSizeChanger:!0,current:r,pageSize:a,pageSizeOptions:[1,2,10,20,50,100],onChange:s,showTotal:function(n){return"".concat(e("total")," ").concat(n)}}}),[e,s,r,a]),setPagination:o}},M=function(){var e=(0,_.useState)({}),n=p()(e,2),t=n[0],r=n[1],a=(0,_.useCallback)(f()(l()().mark((function e(){var n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Z.get("/conf.json");case 2:n=e.sent,r(n.data);case 4:case"end":return e.stop()}}),e)}))),[]);return(0,_.useEffect)((function(){a()}),[a]),t},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.Z.completeConversation,n=(0,_.useState)({}),t=p()(n,2),r=t[0],a=t[1],s=(0,_.useState)(!0),i=p()(s,2),u=i[0],d=i[1],m=(0,_.useRef)(),v=(0,_.useCallback)((function(){m.current&&clearTimeout(m.current),m.current=setTimeout((function(){a({}),clearTimeout(m.current)}),1e3)}),[]),h=(0,_.useCallback)(function(){var n=f()(l()().mark((function n(t,r){var s,i,u,f,m,p,h,x,N;return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,d(!1),n.next=4,fetch(e,{method:"POST",headers:c()(c()({},g._n,(0,b.c)()),"Content-Type","application/json"),body:JSON.stringify(t),signal:null==r?void 0:r.signal});case 4:i=n.sent,u=i.clone().json(),f=null==i||null===(s=i.body)||void 0===s?void 0:s.pipeThrough(new TextDecoderStream).pipeThrough(new k.m).getReader();case 7:return n.next=10,null==f?void 0:f.read();case 10:if(!(m=n.sent)){n.next=18;break}if(p=m.done,h=m.value,!p){n.next=17;break}return console.info("done"),v(),n.abrupt("break",20);case 17:try{x=JSON.parse((null==h?void 0:h.data)||""),"boolean"!=typeof(N=null==x?void 0:x.data)&&(console.info("data:",N),a(o()(o()({},N),{},{conversationId:null==t?void 0:t.conversation_id})))}catch(e){console.warn(e)}case 18:n.next=7;break;case 20:return console.info("done?"),d(!0),v(),n.next=25,u;case 25:return n.t0=n.sent,n.t1=i,n.abrupt("return",{data:n.t0,response:n.t1});case 30:n.prev=30,n.t2=n.catch(0),d(!0),v(),console.warn(n.t2);case 35:case"end":return n.stop()}}),n,null,[[0,30]])})));return function(e,t){return n.apply(this,arguments)}}(),[e,v]);return{send:h,answer:r,done:u,setDone:d,resetAnswer:v}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.Z.tts,n=(0,_.useCallback)(function(){var n=f()(l()().mark((function n(t){var r,a;return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e,{method:"POST",headers:c()(c()({},g._n,(0,b.c)()),"Content-Type","application/json"),body:JSON.stringify(t)});case 2:return r=n.sent,n.prev=3,n.next=6,r.clone().json();case 6:0!==(null==(a=n.sent)?void 0:a.code)&&y.ZP.error(null==a?void 0:a.message),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),console.warn("🚀 ~ error:",n.t0);case 13:return n.abrupt("return",r);case 14:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(e){return n.apply(this,arguments)}}(),[e]);return{read:n}},K=function(){var e=(0,_.useState)(""),n=p()(e,2),t=n[0],r=n[1];return{handleInputChange:function(e){var n=e.target.value.replaceAll("\\n","\n").replaceAll("\\t","\t");r(n)},value:t,setValue:r}},E=function(){var e=(0,_.useState)([]),n=p()(e,2),t=n[0],r=n[1],s=function(e){var n=(0,_.useRef)(null),t=(0,_.useCallback)((function(){var t;e&&(null===(t=n.current)||void 0===t||t.scrollIntoView({behavior:"instant"}))}),[e]);return(0,_.useEffect)((function(){t()}),[t]),n}(t),i=(0,_.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r((function(t){return[].concat(a()(t),[o()(o()({},e),{},{id:(0,N.Kj)(e)}),{role:v.Cs.Assistant,content:n,id:(0,N.Kj)(o()(o()({},e),{},{role:v.Cs.Assistant}))}])}))}),[]),c=(0,_.useCallback)((function(e){r((function(n){var t;return[].concat(a()(null!==(t=null==n?void 0:n.slice(0,-1))&&void 0!==t?t:[]),[o()({role:v.Cs.Assistant,content:e.answer,reference:e.reference,id:(0,N.Kj)({id:e.id,role:v.Cs.Assistant}),prompt:e.prompt,audio_binary:e.audio_binary},(0,j.omit)(e,"reference"))])}))}),[]),u=(0,_.useCallback)((function(){r((function(e){var n;return null!==(n=null==e?void 0:e.slice(0,-2))&&void 0!==n?n:[]}))}),[]),l=(0,_.useCallback)((function(e){r((function(n){var t;return null!==(t=null==n?void 0:n.filter((function(n){return n.id!==e})))&&void 0!==t?t:[]}))}),[r]),d=(0,_.useCallback)((function(e){r((function(n){var t=n.findIndex((function(n){return n.id===e}));if(-1!==t){var r,s=null!==(r=n.slice(0,t+2))&&void 0!==r?r:[],i=s.at(-1);return s=i?[].concat(a()(s.slice(0,-1)),[o()(o()({},i),{},{content:"",reference:void 0,prompt:void 0})]):s}return n}))}),[r]);return{ref:s,derivedMessages:t,setDerivedMessages:r,addNewestQuestion:i,addNewestAnswer:c,removeLatestMessage:u,removeMessageById:l,removeMessagesAfterCurrentMessage:d}},V=function(e){var n=e.removeMessagesAfterCurrentMessage,t=e.sendMessage,r=e.messages,a=(0,_.useCallback)(function(){var e=f()(l()().mark((function e(a){var s,i;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.id&&(n(a.id),-1!==(s=r.findIndex((function(e){return e.id===a.id})))&&(i=r.slice(0,s)),t({message:o()(o()({},a),{},{id:(0,Z.Z)()}),messages:i}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,t,r]);return{regenerateMessage:a}},L=function(e){var n=(0,_.useState)(""),t=p()(n,2),r=t[0],a=t[1],s=(0,_.useCallback)((function(e){return function(){a(e)}}),[]);return(0,_.useEffect)((function(){e&&a(e)}),[e]),{selectedId:r,handleItemClick:s}},U=function(){var e,n=(0,S.fS)(!0).data;return null!==(e=null==n?void 0:n.llm_id)&&void 0!==e?e:""},O={naive:128,knowledge_graph:8192},q=function(e){return(0,_.useCallback)((function(n){n in O&&e.setFieldValue(["parser_config","chunk_token_num"],O[n])}),[e])},G=function(e){var n=e.form,t=e.visible,r=(0,_.useRef)();(0,_.useEffect)((function(){r.current=t}),[t]);var a=r.current;(0,_.useEffect)((function(){!t&&a&&n.resetFields()}),[n,a,t])}},96100:function(e,n,t){"use strict";t.d(n,{HK:function(){return d},Uu:function(){return l},fz:function(){return g},nT:function(){return p},pE:function(){return f},wy:function(){return m}});var r=t(5574),a=t.n(r),s=t(96330),o=t(62435),i=t(24701),c=function(e){return e.Second="2",e.Third="3",e}({}),u=function(e){return(0,i.TH)().pathname.split("/")[e]||""},l=function(){return u(c.Second)},d=function(){return u(c.Third)},f=function(){var e=(0,i.lr)(),n=a()(e,1)[0];return{documentId:n.get(s.ld.DocumentId)||"",knowledgeId:n.get(s.ld.KnowledgeId)||""}},m=function(){var e=(0,i.s0)();return(0,o.useCallback)((function(n){e(n,{state:{from:n}})}),[e])},p=function(){var e=(0,i.s0)(),n=f().knowledgeId;return(0,o.useCallback)((function(){e("/knowledge/".concat(s.Rx.Dataset,"?id=").concat(n))}),[n,e])},g=function(){var e=(0,i.lr)(),n=a()(e,2),t=n[0],r=n[1],s=(0,o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;t.set("page",e.toString()),n&&t.set("size",n.toString()),r(t)}),[r,t]);return{setPaginationParams:s,page:Number(t.get("page"))||1,size:Number(t.get("size"))||10}}},68290:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return le}});var r=t(5574),a=t.n(r),s=t(57636),o=t(28993),i=t(97857),c=t.n(i),u=t(13769),l=t.n(u),d=t(60434),f=t(62435),m=t(27080),p=t(86074),g=["className"],v=["className"],h=["className"],x=d.fC;f.forwardRef((function(e,n){var t=e.className,r=l()(e,g);return(0,p.jsx)(d.aV,c()({ref:n,className:(0,m.cn)("inline-flex h-10 items-center justify-center rounded-md bg-colors-background-inverse-standard p-1 text-colors-text-neutral-standard",t)},r))})).displayName=d.aV.displayName,f.forwardRef((function(e,n){var t=e.className,r=l()(e,v);return(0,p.jsx)(d.xz,c()({ref:n,className:(0,m.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-colors-background-inverse-strong data-[state=active]:text-colors-text-inverse-strong data-[state=active]:shadow-sm",t)},r))})).displayName=d.xz.displayName;var b=f.forwardRef((function(e,n){var t=e.className,r=l()(e,h);return(0,p.jsx)(d.VY,c()({ref:n,className:(0,m.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t)},r))}));b.displayName=d.VY.displayName;var N=t(67421),y=t(19632),w=t.n(y),k=t(13766),j=t(41352),_=t(28142),C=t(44524),Z=t(64712),D=t(44920),P=["className","value"],S=f.forwardRef((function(e,n){var t=e.className,r=e.value,a=l()(e,P);return(0,p.jsx)(D.fC,c()(c()({ref:n,className:(0,m.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t)},a),{},{children:(0,p.jsx)(D.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})}))}));S.displayName=D.fC.displayName;var R=t(68635),z=["className","orientation"],I=["className","children"],T=f.forwardRef((function(e,n){var t=e.className,r=e.orientation,a=void 0===r?"vertical":r,s=l()(e,z);return(0,p.jsx)(R.gb,c()(c()({ref:n,orientation:a,className:(0,m.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t)},s),{},{children:(0,p.jsx)(R.q4,{className:"relative flex-1 rounded-full bg-border"})}))}));T.displayName=R.gb.displayName;var M=f.forwardRef((function(e,n){var t=e.className,r=e.children,a=l()(e,I);return(0,p.jsxs)(R.fC,c()(c()({ref:n,className:(0,m.cn)("relative overflow-hidden",t)},a),{},{children:[(0,p.jsx)(R.l_,{className:"h-full w-full rounded-[inherit]",children:r}),(0,p.jsx)(T,{}),(0,p.jsx)(R.Ns,{})]}))}));function A(e){var n=f.useRef(e);return f.useEffect((function(){n.current=e})),f.useMemo((function(){return function(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return null===(e=n.current)||void 0===e?void 0:e.call.apply(e,[n].concat(r))}}),[])}function F(e){var n=e.prop,t=e.defaultProp,r=e.onChange,s=void 0===r?function(){}:r,o=function(e){var n=e.defaultProp,t=e.onChange,r=f.useState(n),s=a()(r,1)[0],o=f.useRef(s),i=A(t);return f.useEffect((function(){o.current!==s&&(i(s),o.current=s)}),[s,o,i]),r}({defaultProp:t,onChange:s}),i=a()(o,2),c=i[0],u=i[1],l=void 0!==n,d=l?n:c,m=A(s);return[d,f.useCallback((function(e){if(l){var t="function"==typeof e?e(n):e;t!==n&&m(t)}else u(e)}),[l,n,u,m])]}M.displayName=R.fC.displayName;var K=["value","onValueChange","onUpload","progresses","accept","maxSize","maxFileCount","multiple","disabled","className"];function E(e){return"preview"in e&&"string"==typeof e.preview}function V(e){var n=e.file;return n.type.startsWith("image/")?(0,p.jsx)("img",{src:n.preview,alt:n.name,width:48,height:48,loading:"lazy",className:"aspect-square shrink-0 rounded-md object-cover"}):(0,p.jsx)(k.Z,{className:"size-10 text-muted-foreground","aria-hidden":"true"})}function L(e){var n=e.file,t=e.progress,r=e.onRemove;return(0,p.jsxs)("div",{className:"relative flex items-center gap-2.5",children:[(0,p.jsxs)("div",{className:"flex flex-1 gap-2.5",children:[E(n)?(0,p.jsx)(V,{file:n}):null,(0,p.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,p.jsxs)("div",{className:"flex flex-col gap-px",children:[(0,p.jsx)("p",{className:"line-clamp-1 text-sm font-medium text-foreground/80",children:n.name}),(0,p.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,m.t)(n.size)})]}),t?(0,p.jsx)(S,{value:t}):null]})]}),(0,p.jsx)("div",{className:"flex items-center gap-2",children:(0,p.jsxs)(s.z,{type:"button",variant:"outline",size:"icon",className:"size-7",onClick:r,children:[(0,p.jsx)(j.Z,{className:"size-4","aria-hidden":"true"}),(0,p.jsx)("span",{className:"sr-only",children:"Remove file"})]})})]})}function U(e){var n,t=e.value,r=e.onValueChange,s=e.onUpload,o=e.progresses,i=e.accept,u=void 0===i?{"image/*":[]}:i,d=e.maxSize,g=void 0===d?2097152:d,v=e.maxFileCount,h=void 0===v?1:v,x=e.multiple,b=void 0!==x&&x,N=e.disabled,y=void 0!==N&&N,k=e.className,j=l()(e,K),D=F({prop:t,onChange:r}),P=a()(D,2),S=P[0],R=P[1],z=f.useCallback((function(e,n){var t;if(!b&&1===h&&e.length>1)Z.Am.error("Cannot upload more than 1 file at a time");else if((null!==(t=null==S?void 0:S.length)&&void 0!==t?t:0)+e.length>h)Z.Am.error("Cannot upload more than ".concat(h," files"));else{var r=e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})),a=S?[].concat(w()(S),w()(r)):r;if(R(a),n.length>0&&n.forEach((function(e){var n=e.file;Z.Am.error("File ".concat(n.name," was rejected"))})),s&&a.length>0&&a.length<=h){var o=a.length>0?"".concat(a.length," files"):"file";Z.Am.promise(s(a),{loading:"Uploading ".concat(o,"..."),success:function(){return R([]),"".concat(o," uploaded")},error:"Failed to upload ".concat(o)})}}}),[S,h,b,s,R]);f.useEffect((function(){return function(){S&&S.forEach((function(e){E(e)&&URL.revokeObjectURL(e.preview)}))}}),[]);var I=y||(null!==(n=null==S?void 0:S.length)&&void 0!==n?n:0)>=h;return(0,p.jsxs)("div",{className:"relative flex flex-col gap-6 overflow-hidden",children:[(0,p.jsx)(C.ZP,{onDrop:z,accept:u,maxSize:g,maxFiles:h,multiple:h>1||b,disabled:I,children:function(e){var n=e.getRootProps,t=e.getInputProps,r=e.isDragActive;return(0,p.jsxs)("div",c()(c()(c()({},n()),{},{className:(0,m.cn)("group relative grid h-52 w-full cursor-pointer place-items-center rounded-lg border-2 border-dashed border-muted-foreground/25 px-5 py-2.5 text-center transition hover:bg-muted/25","ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r&&"border-muted-foreground/50",I&&"pointer-events-none opacity-60",k)},j),{},{children:[(0,p.jsx)("input",c()({},t())),r?(0,p.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 sm:px-5",children:[(0,p.jsx)("div",{className:"rounded-full border border-dashed p-3",children:(0,p.jsx)(_.Z,{className:"size-7 text-muted-foreground","aria-hidden":"true"})}),(0,p.jsx)("p",{className:"font-medium text-muted-foreground",children:"Drop the files here"})]}):(0,p.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 sm:px-5",children:[(0,p.jsx)("div",{className:"rounded-full border border-dashed p-3",children:(0,p.jsx)(_.Z,{className:"size-7 text-muted-foreground","aria-hidden":"true"})}),(0,p.jsxs)("div",{className:"flex flex-col gap-px",children:[(0,p.jsxs)("p",{className:"font-medium text-muted-foreground",children:["Drag ","'n'"," drop files here, or click to select files"]}),(0,p.jsxs)("p",{className:"text-sm text-muted-foreground/70",children:["You can upload",h>1?" ".concat(h===1/0?"multiple":h,"\n                      files (up to ").concat((0,m.t)(g)," each)"):" a file with ".concat((0,m.t)(g))]})]})]})]}))}}),null!=S&&S.length?(0,p.jsx)(M,{className:"h-fit w-full px-3",children:(0,p.jsx)("div",{className:"flex max-h-48 flex-col gap-4",children:null==S?void 0:S.map((function(e,n){return(0,p.jsx)(L,{file:e,onRemove:function(){return function(e){if(S){var n=S.filter((function(n,t){return t!==e}));R(n),null==r||r(n)}}(n)},progress:null==o?void 0:o[e.name]},n)}))})}):null]})}function O(){var e=(0,N.$G)().t,n=(0,f.useState)([]),t=a()(n,2),r=(t[0],t[1]);return(0,p.jsxs)(x,{defaultValue:"account",children:[(0,p.jsx)(b,{value:"account",children:(0,p.jsx)(U,{maxFileCount:8,maxSize:8388608,onValueChange:r})}),(0,p.jsx)(b,{value:"password",children:e("common.comingSoon")})]})}function q(e){var n=e.hideModal,t=(0,N.$G)().t;return(0,p.jsx)(o.Vq,{open:!0,onOpenChange:n,children:(0,p.jsxs)(o.cZ,{className:"sm:max-w-[425px]",children:[(0,p.jsx)(o.fK,{children:(0,p.jsxs)(o.$N,{children:[t("fileManager.uploadFile")," "]})}),(0,p.jsx)(O,{}),(0,p.jsx)(o.cN,{children:(0,p.jsx)(s.z,{type:"submit",variant:"tertiary",size:"sm",children:t("common.save")})})]})})}var G=t(83943),$=t(74094),Q=t(27060),H=t(61932),B=t(90470),Y=t(9404),X=t(23309),J=t(25910),W=t(2834),ee=t(75269),ne=[{chunk_num:1,create_date:"Thu, 28 Nov 2024 17:10:22 GMT",create_time:1732785022792,created_by:"b0975cb4bc3111ee9b830aef05f5e94f",id:"990cb30ead6811efb9b9fa163e197198",kb_id:"25a8cfbe9cd411efbc12fa163e197198",location:"mian.jpg",name:"mian.jpg",parser_config:{pages:[[1,1e6]]},parser_id:"picture",process_begin_at:"Thu, 28 Nov 2024 17:10:25 GMT",process_duation:8.46185,progress:1,progress_msg:"\nTask has been received.\nPage(1~100000001): Finish OCR: (用小麦粉\n金\nONGXI ...)\nPage(1~100000001): OCR results is too long to use CV LLM.\nPage(1~100000001): Finished slicing files (1 chunks in 0.34s). Start to embedding the content.\nPage(1~100000001): Finished embedding (in 0.35s)! Start to build index!\nPage(1~100000001): Indexing elapsed in 0.02s.\nPage(1~100000001): Done!",run:t(96330).cG.RUNNING,size:19692,source_type:"local",status:"1",thumbnail:"/v1/document/image/25a8cfbe9cd411efbc12fa163e197198-thumbnail_990cb30ead6811efb9b9fa163e197198.png",token_num:115,type:"visual",update_date:"Thu, 28 Nov 2024 17:10:33 GMT",update_time:1732785033462}];function te(){var e,n=f.useState([]),t=a()(n,2),r=t[0],o=t[1],i=f.useState([]),c=a()(i,2),u=c[0],l=c[1],d=f.useState({}),m=a()(d,2),g=m[0],v=m[1],h=f.useState({}),x=a()(h,2),b=x[0],y=x[1],w=(0,N.$G)("translation",{keyPrefix:"knowledgeDetails"}).t,k=[{id:"select",header:function(e){var n=e.table;return(0,p.jsx)(X.X,{checked:n.getIsAllPageRowsSelected()||n.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:function(e){return n.toggleAllPageRowsSelected(!!e)},"aria-label":"Select all"})},cell:function(e){var n=e.row;return(0,p.jsx)(X.X,{checked:n.getIsSelected(),onCheckedChange:function(e){return n.toggleSelected(!!e)},"aria-label":"Select row"})},enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:function(e){var n=e.column;return(0,p.jsxs)(s.z,{variant:"ghost",onClick:function(){return n.toggleSorting("asc"===n.getIsSorted())},children:[w("name"),(0,p.jsx)(H.Z,{})]})},cell:function(e){var n=e.row;return(0,p.jsx)("div",{className:"capitalize",children:n.getValue("name")})}},{accessorKey:"create_time",header:function(e){var n=e.column;return(0,p.jsxs)(s.z,{variant:"ghost",onClick:function(){return n.toggleSorting("asc"===n.getIsSorted())},children:[w("uploadDate"),(0,p.jsx)(H.Z,{})]})},cell:function(e){var n=e.row;return(0,p.jsx)("div",{className:"lowercase",children:n.getValue("create_time")})}},{accessorKey:"parser_id",header:w("chunkMethod"),cell:function(e){var n=e.row;return(0,p.jsx)("div",{className:"capitalize",children:n.getValue("parser_id")})}},{accessorKey:"run",header:w("parsingStatus"),cell:function(e){var n=e.row;return(0,p.jsx)(s.z,{variant:"destructive",size:"sm",children:n.getValue("run")})}},{id:"actions",header:w("action"),enableHiding:!1,cell:function(e){var n=e.row.original;return(0,p.jsxs)("section",{className:"flex gap-4 items-center",children:[(0,p.jsx)(W.r,{id:"airplane-mode"}),(0,p.jsx)(s.z,{variant:"secondary",size:"icon",children:(0,p.jsx)(B.Z,{})}),(0,p.jsxs)(J.h_,{children:[(0,p.jsx)(J.$F,{asChild:!0,children:(0,p.jsx)(s.z,{variant:"secondary",size:"icon",children:(0,p.jsx)(Y.Z,{})})}),(0,p.jsxs)(J.AW,{align:"end",children:[(0,p.jsx)(J.Ju,{children:"Actions"}),(0,p.jsx)(J.Xi,{onClick:function(){return navigator.clipboard.writeText(n.id)},children:"Copy payment ID"}),(0,p.jsx)(J.VD,{}),(0,p.jsx)(J.Xi,{children:"View customer"}),(0,p.jsx)(J.Xi,{children:"View payment details"})]})]})]})}}],j=(0,$.b7)({data:ne,columns:k,onSortingChange:o,onColumnFiltersChange:l,getCoreRowModel:(0,Q.sC)(),getPaginationRowModel:(0,Q.G_)(),getSortedRowModel:(0,Q.tj)(),getFilteredRowModel:(0,Q.vL)(),onColumnVisibilityChange:v,onRowSelectionChange:y,state:{sorting:r,columnFilters:u,columnVisibility:g,rowSelection:b}});return(0,p.jsxs)("div",{className:"w-full",children:[(0,p.jsx)("div",{className:"rounded-md border",children:(0,p.jsxs)(ee.iA,{children:[(0,p.jsx)(ee.xD,{children:j.getHeaderGroups().map((function(e){return(0,p.jsx)(ee.SC,{children:e.headers.map((function(e){return(0,p.jsx)(ee.ss,{children:e.isPlaceholder?null:(0,$.ie)(e.column.columnDef.header,e.getContext())},e.id)}))},e.id)}))}),(0,p.jsx)(ee.RM,{children:null!==(e=j.getRowModel().rows)&&void 0!==e&&e.length?j.getRowModel().rows.map((function(e){return(0,p.jsx)(ee.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map((function(e){return(0,p.jsx)(ee.pj,{children:(0,$.ie)(e.column.columnDef.cell,e.getContext())},e.id)}))},e.id)})):(0,p.jsx)(ee.SC,{children:(0,p.jsx)(ee.pj,{colSpan:k.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,p.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,p.jsxs)("div",{className:"flex-1 text-sm text-muted-foreground",children:[j.getFilteredSelectedRowModel().rows.length," of"," ",j.getFilteredRowModel().rows.length," row(s) selected."]}),(0,p.jsxs)("div",{className:"space-x-2",children:[(0,p.jsx)(s.z,{variant:"outline",size:"sm",onClick:function(){return j.previousPage()},disabled:!j.getCanPreviousPage(),children:"Previous"}),(0,p.jsx)(s.z,{variant:"outline",size:"sm",onClick:function(){return j.nextPage()},disabled:!j.getCanNextPage(),children:"Next"})]})]})]})}var re=t(15009),ae=t.n(re),se=t(99289),oe=t.n(se),ie=t(86968),ce=t(93352),ue=(t(96100),t(5089));t(24701);function le(){var e=function(){var e=(0,ie.pG)(),n=e.visible,t=e.hideModal,r=e.showModal,a=(0,ce.ui)(),s=a.uploadDocument,o=a.loading,i=(0,f.useCallback)(function(){var e=oe()(ae()().mark((function e(n){var r,a,o;return ae()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>0)){e.next=10;break}return e.next=3,s(n);case 3:if("string"==typeof(null==(r=e.sent)?void 0:r.message)){e.next=6;break}return e.abrupt("return");case 6:return a=(0,ue.YC)(null==r?void 0:r.message),o=null==r?void 0:r.code,(0===(null==r?void 0:r.code)||500===(null==r?void 0:r.code)&&a!==n.length)&&(o=0,t()),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[s,t]);return{documentUploadLoading:o,onDocumentUploadOk:i,documentUploadVisible:n,hideDocumentUploadModal:t,showDocumentUploadModal:r}}(),n=e.documentUploadVisible,t=e.hideDocumentUploadModal,r=e.showDocumentUploadModal,a=e.onDocumentUploadOk,s=e.documentUploadLoading;return(0,p.jsxs)("section",{className:"p-8",children:[(0,p.jsxs)(G.Z,{title:"Files",showDialog:r,children:[(0,p.jsx)(_.Z,{}),"Upload file"]}),(0,p.jsx)(te,{}),n&&(0,p.jsx)(q,{hideModal:t,onOk:a,loading:s})]})}},53506:function(e,n,t){"use strict";var r=t(60806),a=t(66582),s=t(78158),o=r.Z.getDialog,i=r.Z.setDialog,c=r.Z.listDialog,u=r.Z.removeDialog,l=r.Z.getConversation,d=r.Z.getConversationSSE,f=r.Z.setConversation,m=r.Z.completeConversation,p={getDialog:{url:o,method:"get"},setDialog:{url:i,method:"post"},removeDialog:{url:u,method:"post"},listDialog:{url:c,method:"get"},listConversation:{url:r.Z.listConversation,method:"get"},getConversation:{url:l,method:"get"},getConversationSSE:{url:d,method:"get"},setConversation:{url:f,method:"post"},completeConversation:{url:m,method:"post"},removeConversation:{url:r.Z.removeConversation,method:"post"},createToken:{url:r.Z.createToken,method:"post"},listToken:{url:r.Z.listToken,method:"get"},removeToken:{url:r.Z.removeToken,method:"post"},getStats:{url:r.Z.getStats,method:"get"},createExternalConversation:{url:r.Z.createExternalConversation,method:"get"},getExternalConversation:{url:r.Z.getExternalConversation,method:"get"},completeExternalConversation:{url:r.Z.completeExternalConversation,method:"post"},uploadAndParseExternal:{url:r.Z.uploadAndParseExternal,method:"post"},deleteMessage:{url:r.Z.deleteMessage,method:"post"},thumbup:{url:r.Z.thumbup,method:"post"},tts:{url:r.Z.tts,method:"post"},ask:{url:r.Z.ask,method:"post"},getMindMap:{url:r.Z.mindmap,method:"post"},getRelatedQuestions:{url:r.Z.getRelatedQuestions,method:"post"}},g=(0,a.Z)(p,s.ZP);n.Z=g},73955:function(e,n,t){"use strict";t.d(n,{$V:function(){return K},QL:function(){return M},Re:function(){return F},tc:function(){return A}});var r=t(60806),a=t(66582),s=t(78158),o=r.Z.create_kb,i=r.Z.update_kb,c=r.Z.rm_kb,u=r.Z.get_kb_detail,l=r.Z.kb_list,d=r.Z.get_document_list,f=r.Z.document_change_status,m=r.Z.document_rm,p=r.Z.document_delete,g=r.Z.document_create,v=r.Z.document_change_parser,h=r.Z.document_thumbnails,x=r.Z.chunk_list,b=r.Z.create_chunk,N=r.Z.set_chunk,y=r.Z.get_chunk,w=r.Z.switch_chunk,k=r.Z.rm_chunk,j=r.Z.retrieval_test,_=r.Z.document_rename,C=r.Z.document_run,Z=r.Z.document_upload,D=r.Z.web_crawl,P=r.Z.knowledge_graph,S=r.Z.document_infos,R=r.Z.upload_and_parse,z=r.Z.listTagByKnowledgeIds,I={createKb:{url:o,method:"post"},updateKb:{url:i,method:"post"},rmKb:{url:c,method:"post"},get_kb_detail:{url:u,method:"get"},getList:{url:l,method:"get"},get_document_list:{url:d,method:"get"},document_change_status:{url:f,method:"post"},document_rm:{url:m,method:"post"},document_rename:{url:_,method:"post"},document_create:{url:g,method:"post"},document_run:{url:C,method:"post"},document_change_parser:{url:v,method:"post"},document_thumbnails:{url:h,method:"get"},document_upload:{url:Z,method:"post"},web_crawl:{url:D,method:"post"},document_infos:{url:S,method:"post"},setMeta:{url:r.Z.setMeta,method:"post"},chunk_list:{url:x,method:"post"},create_chunk:{url:b,method:"post"},set_chunk:{url:N,method:"post"},get_chunk:{url:y,method:"get"},switch_chunk:{url:w,method:"post"},rm_chunk:{url:k,method:"post"},retrieval_test:{url:j,method:"post"},knowledge_graph:{url:P,method:"get"},document_delete:{url:p,method:"delete"},upload_and_parse:{url:R,method:"post"},listTagByKnowledgeIds:{url:z,method:"get"}},T=(0,a.Z)(I,s.ZP),M=function(e){return s.ZP.get(r.Z.listTag(e))},A=function(e,n){return(0,s.v_)(r.Z.removeTag(e),{tags:n})},F=function(e,n){var t=n.fromTag,a=n.toTag;return(0,s.v_)(r.Z.renameTag(e),{fromTag:t,toTag:a})};function K(e){return s.ZP.get(r.Z.getKnowledgeGraph(e))}n.ZP=T},71250:function(e,n,t){"use strict";t.d(n,{Bl:function(){return l},CE:function(){return m},IC:function(){return c},Kj:function(){return u},mN:function(){return f},o_:function(){return d}});var r=t(97857),a=t.n(r),s=t(1079),o=t(96486),i=t(57632),c=function(e){return e!==s.Pc&&""!==e},u=function(e){return"id"in e&&e.id?e.id:(0,i.Z)()},l=function(e){var n;return null!==(n=null==e?void 0:e.map((function(e){return a()(a()({},(0,o.omit)(e,"reference")),{},{id:u(e)})})))&&void 0!==n?n:[]},d=function(){return(0,i.Z)().replace(/-/g,"")},f=function(e){return"".concat(e.role,"_").concat(e.id)},m=function(e){return e.replace(/\\\[([\s\S]*?)\\\]/g,(function(e,n){return"$$".concat(n,"$$")})).replace(/\\\(([\s\S]*?)\\\)/g,(function(e,n){return"$".concat(n,"$")}))}},5089:function(e,n,t){"use strict";t.d(n,{Ep:function(){return d},Or:function(){return f},RT:function(){return u},YC:function(){return l},q1:function(){return c}});var r=t(19632),a=t.n(r),s=t(40169),o=t(96486),i=t(57632),c=function(e,n){var t;return Array.isArray(null==e?void 0:e.positions)&&e.positions.every((function(e){return Array.isArray(e)}))?null==e||null===(t=e.positions)||void 0===t?void 0:t.map((function(t){var r={width:n.width,height:n.height,x1:t[1],x2:t[2],y1:t[3],y2:t[4]};return{id:(0,i.Z)(),comment:{text:"",emoji:""},content:{text:(0,o.get)(e,"content_with_weight")||(0,o.get)(e,"content","")},position:{boundingRect:r,rects:[r],pageNumber:t[0]}}})):[]},u=function(e){var n;return null!==(n=null==e?void 0:e.slice(e.lastIndexOf(".")+1).toLowerCase())&&void 0!==n?n:""},l=function(e){return e.split("\n").length},d=function(e){return s.ru.includes(e)},f=function(e){return[].concat(a()(s.rU),["svg"]).some((function(n){return n===e}))}},86635:function(e){function n(e){return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}))}n.keys=function(){return[]},n.resolve=n,n.id=86635,e.exports=n}}]);
//# sourceMappingURL=p__dataset__dataset__index.b07a1fd1.async.js.map